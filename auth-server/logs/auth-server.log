2026-01-03T08:34:47.350+07:00  INFO 9408 --- [auth-server] [restartedMain] c.b.auth_server.AuthServerApplication    : Starting AuthServerApplication using Java 21.0.3 with PID 9408 (C:\Users\PC\OneDrive\Desktop\bookommerce\auth-server\target\classes started by PC in C:\Users\PC\OneDrive\Desktop\bookommerce\auth-server)
2026-01-03T08:34:47.388+07:00  INFO 9408 --- [auth-server] [restartedMain] c.b.auth_server.AuthServerApplication    : No active profile set, falling back to 1 default profile: "default"
2026-01-03T08:34:47.665+07:00  INFO 9408 --- [auth-server] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03T08:34:47.667+07:00  INFO 9408 --- [auth-server] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03T08:34:55.150+07:00  INFO 9408 --- [auth-server] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03T08:34:55.356+07:00  INFO 9408 --- [auth-server] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 184 ms. Found 3 JPA repository interfaces.
2026-01-03T08:34:58.307+07:00  INFO 9408 --- [auth-server] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8282 (https)
2026-01-03T08:34:58.448+07:00  INFO 9408 --- [auth-server] [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-03T08:34:58.457+07:00  INFO 9408 --- [auth-server] [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-01-03T08:34:58.995+07:00  INFO 9408 --- [auth-server] [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-03T08:34:59.000+07:00  INFO 9408 --- [auth-server] [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 11329 ms
2026-01-03T08:35:00.629+07:00  INFO 9408 --- [auth-server] [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-03T08:35:00.875+07:00  INFO 9408 --- [auth-server] [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.36.Final
2026-01-03T08:35:01.082+07:00  INFO 9408 --- [auth-server] [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2026-01-03T08:35:01.634+07:00  INFO 9408 --- [auth-server] [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-03T08:35:01.677+07:00  INFO 9408 --- [auth-server] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-03T08:35:02.321+07:00  INFO 9408 --- [auth-server] [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@419f7608
2026-01-03T08:35:02.326+07:00  INFO 9408 --- [auth-server] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-03T08:35:02.454+07:00  WARN 9408 --- [auth-server] [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-03T08:35:02.504+07:00  INFO 9408 --- [auth-server] [restartedMain] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.44
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-03T08:35:05.599+07:00  INFO 9408 --- [auth-server] [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-03T08:35:05.840+07:00  INFO 9408 --- [auth-server] [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-03T08:35:06.557+07:00  INFO 9408 --- [auth-server] [restartedMain] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2026-01-03T08:35:06.854+07:00  WARN 9408 --- [auth-server] [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-03T08:35:09.421+07:00  INFO 9408 --- [auth-server] [restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint beneath base path '/actuator'
2026-01-03T08:35:10.144+07:00 DEBUG 9408 --- [auth-server] [restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure org.springframework.security.oauth2.server.authorization.config.annotation.web.configurers.OAuth2AuthorizationServerConfigurer$$Lambda/0x0000020adeb77a00@1580f2ae with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, AuthorizationServerContextFilter, HeaderWriterFilter, CsrfFilter, OidcLogoutEndpointFilter, LogoutFilter, OAuth2AuthorizationServerMetadataEndpointFilter, OAuth2AuthorizationEndpointFilter, OAuth2DeviceVerificationEndpointFilter, OidcProviderConfigurationEndpointFilter, NimbusJwkSetEndpointFilter, OAuth2ClientAuthenticationFilter, BearerTokenAuthenticationFilter, AuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter, OAuth2TokenEndpointFilter, OAuth2TokenIntrospectionEndpointFilter, OAuth2TokenRevocationEndpointFilter, OAuth2DeviceAuthorizationEndpointFilter, OidcUserInfoEndpointFilter
2026-01-03T08:35:10.224+07:00 DEBUG 9408 --- [auth-server] [restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, ForceEagerSessionCreationFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, OAuth2AuthorizationRequestRedirectFilter, OAuth2LoginAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-03T08:35:10.256+07:00  INFO 9408 --- [auth-server] [restartedMain] c.b.a.config.SessionCookieConfig         : >>>>>>>>>>>>>>>>>>>> CookieSerializer configured
2026-01-03T08:35:10.746+07:00  INFO 9408 --- [auth-server] [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2026-01-03T08:35:10.934+07:00  INFO 9408 --- [auth-server] [restartedMain] o.a.t.util.net.NioEndpoint.certificate   : Connector [https-jsse-nio-8282], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [C:\Users\PC\.keystore] using alias [bookommerce_ssl] with trust store [null]
2026-01-03T08:35:10.972+07:00  INFO 9408 --- [auth-server] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8282 (https) with context path '/'
2026-01-03T08:35:11.010+07:00  INFO 9408 --- [auth-server] [restartedMain] c.b.auth_server.AuthServerApplication    : Started AuthServerApplication in 24.884 seconds (process running for 27.345)
2026-01-03T08:38:23.444+07:00  INFO 9408 --- [auth-server] [https-jsse-nio-8282-exec-6] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-03T08:38:23.446+07:00  INFO 9408 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-03T08:38:23.449+07:00  INFO 9408 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2026-01-03T08:38:23.507+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /.well-known/openid-configuration
2026-01-03T08:38:23.692+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/jwks
2026-01-03T08:39:35.087+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T08:39:35.093+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] .s.s.w.s.ForceEagerSessionCreationFilter : Created session eagerly
2026-01-03T08:39:35.114+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T08:39:35.155+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@41ef0dc7, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
2026-01-03T08:39:35.155+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@26721299, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
2026-01-03T08:39:35.157+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@2d11544d
2026-01-03T08:40:27.460+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /page/login
2026-01-03T08:40:27.489+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T08:40:27.502+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /page/login
2026-01-03T08:40:28.979+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /page/login
2026-01-03T08:40:28.995+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T08:40:28.995+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /page/login
2026-01-03T08:40:50.333+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/login/customer
2026-01-03T08:40:50.350+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T08:40:50.350+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/login/customer
2026-01-03T08:40:51.896+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-03T08:40:51.905+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=vanh2k3@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@587cb6a8]
2026-01-03T08:40:53.221+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=zkQv-A_DPhI7l06DZonPqGEJGyWPb0AGHp0hew001ao%3D&redirect_uri=https://bff.bookommerce.com:8181/login/oauth2/code/bff&nonce=JOdVVpnCAnFq99fWpccWxMea_FWQHIAZ_q-juCEJjNI
2026-01-03T08:40:53.262+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=vanh2k3@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CUSTOMER]]]
2026-01-03T08:40:53.347+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.s.core.session.SessionRegistryImpl   : Registering session 6202e0c8-8441-4852-84cb-e6c52ba53584, for principal org.springframework.security.core.userdetails.User [Username=vanh2k3@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]]
2026-01-03T08:40:53.358+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://bff.bookommerce.com:8181/login/oauth2/code/bff?code=dzu5Iten3XCZpA6oUXzzZOc7kafCNDFUtj1hpAdJsyELmTIblihGf75cLqgXFMrQ3AFNdy1sRYJXR47xh9Ktajl3DqwCBXXiz3tHq7utRce3u8TJvmIw8U2t_ngHzixC&state=zkQv-A_DPhI7l06DZonPqGEJGyWPb0AGHp0hew001ao%3D
2026-01-03T08:40:53.591+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /oauth2/token
2026-01-03T08:40:54.659+07:00  INFO 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>>>> Access token value: eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJ2YW5oMmszQGdtYWlsLmNvbSIsImF1ZCI6ImJmZiIsIm5iZiI6MTc2NzQwNDQ1NCwic2NvcGUiOlsib3BlbmlkIiwicHJvZmlsZSJdLCJpc3MiOiJodHRwczovL2F1dGguYm9va29tbWVyY2UuY29tOjgyODIiLCJleHAiOjE3OTg5NDA0NTQsImlhdCI6MTc2NzQwNDQ1NCwianRpIjoiN2Q0NTQ5NDgtZjRlNC00NDk0LWI5ZGQtYTc3ODkyZDA3MzE2IiwiYXV0aG9yaXRpZXMiOlsiUk9MRV9DVVNUT01FUiJdfQ.jK9jjJuyskljkBTayLp6j-MNOlUyixN5XyKopFIogQNs_-qKpsMOlXGtVMfrdGeeTaXPKGgaHEf9Oecvwd1D8tQXVna55pOTpzyWuQzXzV9ad20dJbv8dicOexAj1tvtsFmhJJAE8uB1o-cdIvwjGo4rNmd_RhyNEKQOsHoD4YRP9ffe32ZLtb3taKaZFX7nBYJliOBBThLW4mbvUBlynPSzMs-lMYtkPW-gIw9yaTcV1QTy9edVTpOic5u5s0T7LAZYumVTEZHdockFNDMPhiMUzw5t2afs0qDujhvcLkSwYj6hd6ajK0uCsmaplQPSKc9a55sR7aZh_sfHzYBngQ
2026-01-03T08:40:54.659+07:00  INFO 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>> ID Token: eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJ2YW5oMmszQGdtYWlsLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2NzQwNDQ1MywiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY3NDA2MjU0LCJpYXQiOjE3Njc0MDQ0NTQsIm5vbmNlIjoiSk9kVlZwbkNBbkZxOTlmV3BjY1d4TWVhX0ZXUUhJQVpfcS1qdUNFSmpOSSIsImp0aSI6Ijg2NzMyM2M0LTY0YzMtNDk5OS1hOTk5LTRlZmRkOTRhZTBmNyIsImF1dGhvcml0aWVzIjpbIlJPTEVfQ1VTVE9NRVIiXSwic2lkIjoiLTR4V2tRanhqTGpvajJ5YVN6cDlsTmJHLTExVVFPeHBIQkdEMGFFdG9QdyJ9.EaOO9mQmPz0ilQd_zCbSFcw55EJQCHq1of3wflh76ek5VbD96LYDLoFOiOh_gNNwVab2nATuTG9ngoJuTzS8ajjssG-TypMWat9qi65u9A1eOwHMdnHXnc1wq4B0xv4qtyGqrba8h8G-57V0ApMFrMgtVQ8jfppQM8ydIFF84G753BpiUz9JhcVQqQL3IpagGC6tBnGp_gCWrXgrIU5CRqCqZEgls3Hpt3xxjg3FlNjOGEQQdIS6tVVgc_NKpBpqzW6XzmSflf4V53hTI6I717rxrkZUUalNFE58NiRj14tV_RIdT7zCogLH6kYv7hLHLRQDcVF4hc5k2H9ee7dHFA
2026-01-03T08:40:54.664+07:00  INFO 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>>>> Refresh token value: 3U_xuyFfWsFmI_dweM9XzB1nquTxk6HlvpELtxrTRhE5XkzyJNduWWKJbCl6gp5wuN43sHo93awrbDaCOUQJO8Xfz6vRjJWKT3WQBBFVAV0T2h9o_UJ0LU4u9wia_qB4
2026-01-03T08:40:55.069+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/jwks
2026-01-03T08:40:55.135+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /userinfo
2026-01-03T08:40:55.193+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2026-01-03T08:40:55.193+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@5d5b94b6, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_openid, SCOPE_profile]]
2026-01-03T08:40:55.787+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T08:40:55.807+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=vanh2k3@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CUSTOMER]]]
2026-01-03T08:40:55.809+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T08:40:59.528+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T08:40:59.557+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=vanh2k3@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CUSTOMER]]]
2026-01-03T08:40:59.559+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T08:42:54.293+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T08:42:54.319+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=vanh2k3@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CUSTOMER]]]
2026-01-03T08:42:54.325+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T08:43:05.897+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /connect/logout?id_token_hint=eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJ2YW5oMmszQGdtYWlsLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2NzQwNDQ1MywiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY3NDA2MjU0LCJpYXQiOjE3Njc0MDQ0NTQsIm5vbmNlIjoiSk9kVlZwbkNBbkZxOTlmV3BjY1d4TWVhX0ZXUUhJQVpfcS1qdUNFSmpOSSIsImp0aSI6Ijg2NzMyM2M0LTY0YzMtNDk5OS1hOTk5LTRlZmRkOTRhZTBmNyIsImF1dGhvcml0aWVzIjpbIlJPTEVfQ1VTVE9NRVIiXSwic2lkIjoiLTR4V2tRanhqTGpvajJ5YVN6cDlsTmJHLTExVVFPeHBIQkdEMGFFdG9QdyJ9.EaOO9mQmPz0ilQd_zCbSFcw55EJQCHq1of3wflh76ek5VbD96LYDLoFOiOh_gNNwVab2nATuTG9ngoJuTzS8ajjssG-TypMWat9qi65u9A1eOwHMdnHXnc1wq4B0xv4qtyGqrba8h8G-57V0ApMFrMgtVQ8jfppQM8ydIFF84G753BpiUz9JhcVQqQL3IpagGC6tBnGp_gCWrXgrIU5CRqCqZEgls3Hpt3xxjg3FlNjOGEQQdIS6tVVgc_NKpBpqzW6XzmSflf4V53hTI6I717rxrkZUUalNFE58NiRj14tV_RIdT7zCogLH6kYv7hLHLRQDcVF4hc5k2H9ee7dHFA&post_logout_redirect_uri=https://app.bookommerce.com:8080
2026-01-03T08:43:05.919+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=vanh2k3@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CUSTOMER]]]
2026-01-03T08:43:05.942+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.s.w.a.l.SecurityContextLogoutHandler : Invalidated session 6202e0c8-8441-4852-84cb-e6c52ba53584
2026-01-03T08:43:05.946+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://app.bookommerce.com:8080
2026-01-03T08:43:06.314+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T08:43:06.317+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] .s.s.w.s.ForceEagerSessionCreationFilter : Created session eagerly
2026-01-03T08:43:06.317+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T08:43:06.321+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@41ef0dc7, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
2026-01-03T08:43:06.321+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@26721299, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
2026-01-03T08:43:06.324+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@2d11544d
2026-01-03T08:43:11.734+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=7X81hhTR-7mH7T1qxA4LJaOKH2B-E-T2t4k3_MRx4Uw%3D&redirect_uri=https://bff.bookommerce.com:8181/login/oauth2/code/bff&nonce=xg4A7vVIb7y3wKq0gKjMcdJ4FMK2b2N9FzaEuICCPik
2026-01-03T08:43:11.751+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T08:43:11.766+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.s.w.s.HttpSessionRequestCache        : Saved request https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=7X81hhTR-7mH7T1qxA4LJaOKH2B-E-T2t4k3_MRx4Uw%3D&redirect_uri=https://bff.bookommerce.com:8181/login/oauth2/code/bff&nonce=xg4A7vVIb7y3wKq0gKjMcdJ4FMK2b2N9FzaEuICCPik&continue to session
2026-01-03T08:43:11.771+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://auth.bookommerce.com:8282/page/login
2026-01-03T08:43:11.837+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /page/login
2026-01-03T08:43:11.851+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T08:43:11.853+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /page/login
2026-01-03T08:43:12.042+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /page/login
2026-01-03T08:43:12.052+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T08:43:12.058+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /page/login
2026-01-03T08:43:14.014+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /page/store-login
2026-01-03T08:43:14.023+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T08:43:14.029+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /page/store-login
2026-01-03T08:43:14.158+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /page/store-login
2026-01-03T08:43:14.169+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T08:43:14.172+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /page/store-login
2026-01-03T08:43:38.627+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/login/store
2026-01-03T08:43:38.645+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T08:43:38.650+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/login/store
2026-01-03T08:43:38.885+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-03T08:43:38.885+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@53e7cf55]
2026-01-03T08:43:40.010+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=eQV_wI81kRd2kQYCZC5iuR70U6BLJZu0UazX8bVmjVw%3D&redirect_uri=https://bff.bookommerce.com:8181/login/oauth2/code/bff&nonce=OnwXKGm3LRNMP_qLu6zbWU3VHIk8I3pJlD0wQsC6KCk
2026-01-03T08:43:40.031+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T08:43:40.034+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.s.core.session.SessionRegistryImpl   : Registering session c2e9dd8c-9e42-412a-9d1d-ac2e0f8d3c73, for principal org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]]
2026-01-03T08:43:40.034+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://bff.bookommerce.com:8181/login/oauth2/code/bff?code=i7lTLpJ-SanxTXsZtf-wiZ7zjQz0JdXLZ7xEtg11DPAxsULaWXzL6lDscYamymEDxdQuQJUqaUsuRp8QrOLTEIVLENicIcTdrUGwAHRhzMHewyOKM62Mz436OrUmmHAr&state=eQV_wI81kRd2kQYCZC5iuR70U6BLJZu0UazX8bVmjVw%3D
2026-01-03T08:43:40.136+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /oauth2/token
2026-01-03T08:43:41.000+07:00  INFO 9408 --- [auth-server] [https-jsse-nio-8282-exec-8] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>>>> Access token value: eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJwcm9kbWFuQGJvb2tvbW1lcmNlLmNvbSIsImF1ZCI6ImJmZiIsIm5iZiI6MTc2NzQwNDYyMCwic2NvcGUiOlsib3BlbmlkIiwicHJvZmlsZSJdLCJpc3MiOiJodHRwczovL2F1dGguYm9va29tbWVyY2UuY29tOjgyODIiLCJleHAiOjE3OTg5NDA2MjAsImlhdCI6MTc2NzQwNDYyMCwianRpIjoiYTc4NTVkOTAtNmNiNS00YjUzLWIwNTctMDNlNmJlYzJlYjQ3IiwiYXV0aG9yaXRpZXMiOlsiUk9MRV9QUk9EVUNUX01BTkFHRVIiXX0.GzYBQkDdN0U8Z-Cmq8jGL6WwdU9SBVyW6lqJdIUxaGsW42W-9jP0_RRILS7q4E4VLh-iXKiXCllZh9qhmY4ZqghwrZVArEob_uvqIySRyNYsudjvuu6IStLwNso_7G4IqlNPoVzlrw-V3vWvXEtsrwPaE7DpU0xPdY3Mmu8iyS16zZhjVt0ZQl0IxQMm_GUvZG9qZMV77IyGwz8SewtMxcbQgs0efKXTYC7ev7e7CcL09DJ0j5ClhrHGEc_M1FRUL4QVuvwzmMtNqRqZqeNOjoypXQ1wvDHgM2jzqzdZggAuxVI9ZG_iL7hpnie2GUyHi_0dNTLNHjC8p_1DO03Ejg
2026-01-03T08:43:41.008+07:00  INFO 9408 --- [auth-server] [https-jsse-nio-8282-exec-8] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>> ID Token: eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJwcm9kbWFuQGJvb2tvbW1lcmNlLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2NzQwNDYyMCwiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY3NDA2NDIwLCJpYXQiOjE3Njc0MDQ2MjAsIm5vbmNlIjoiT253WEtHbTNMUk5NUF9xTHU2emJXVTNWSElrOEkzcEpsRDB3UXNDNktDayIsImp0aSI6IjExMmYwNzYyLTZkODktNDBlMy05MTgxLWUwMDQzMzZkOTdiYyIsImF1dGhvcml0aWVzIjpbIlJPTEVfUFJPRFVDVF9NQU5BR0VSIl0sInNpZCI6IjJSRHpLbXM0TzhGam5uVHpBUFlBQXRhX0lWZ2xzc3IzbEFaRnZkVUZiVGcifQ.rm-wBmyLSqQp2dEk3kpy4f9XZyTHIK8RtdR9i2UOI71QMqPVpfBEBS0-Om6XfSFOfzK7m3UUEXAyoyqRYLWr9GcPFjOo2gXwDk4h-Tz0y9RjWrFX-o6pGk3jDjzfN5WIJmrJZu_6LjWPizsWxtx5uvGeCSQeNoHlhM5zWwIi7qQWMgJb0NK2Ofw40ChCA3n0xztDgTwDK0DsvC2SXR7dOc91xcXiABIiF3hD1Z-OOt0LgYOogDH91XzDMlcJqNFcPEPGGJbVPl5amR-saqJ3fuYdqEMJLNcFcMtxqAwn_PHSQJsJmJEubqZjpvDYy25x8BXffu2TpwQ5AS-NMVzngQ
2026-01-03T08:43:41.009+07:00  INFO 9408 --- [auth-server] [https-jsse-nio-8282-exec-8] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>>>> Refresh token value: JO6xJxGOX36ZC0JbPdpGlQNqp0eug2Xd0waMRscOwm1p7e0hyjGsG98944ypJQwmu5QXZceEKeGeEISPQTO4pJHBGScL-L5MVk4_9JG7D4N-TD0iNA3Cv5k3SBHNRhlz
2026-01-03T08:43:41.030+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /userinfo
2026-01-03T08:43:41.032+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2026-01-03T08:43:41.032+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@a927adb3, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_openid, SCOPE_profile]]
2026-01-03T08:43:41.546+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T08:43:41.563+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T08:43:41.564+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T08:43:43.323+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T08:43:43.351+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T08:43:43.353+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T08:46:00.809+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T08:46:00.819+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T08:46:00.820+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T08:46:04.851+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T08:46:04.856+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T08:46:04.857+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T08:46:05.117+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T08:46:05.126+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T08:46:05.126+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T08:46:48.062+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T08:46:48.079+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T08:46:48.084+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T08:48:15.576+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T08:48:15.583+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T08:48:15.587+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T08:49:07.108+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /.well-known/openid-configuration
2026-01-03T08:49:07.122+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/jwks
2026-01-03T08:53:16.300+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T08:53:16.311+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T08:53:16.312+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T08:53:19.213+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T08:53:19.220+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T08:53:19.266+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T08:53:19.293+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T08:53:19.307+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T08:53:19.308+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T08:53:22.793+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /connect/logout?id_token_hint=eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJwcm9kbWFuQGJvb2tvbW1lcmNlLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2NzQwNDYyMCwiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY3NDA2NDIwLCJpYXQiOjE3Njc0MDQ2MjAsIm5vbmNlIjoiT253WEtHbTNMUk5NUF9xTHU2emJXVTNWSElrOEkzcEpsRDB3UXNDNktDayIsImp0aSI6IjExMmYwNzYyLTZkODktNDBlMy05MTgxLWUwMDQzMzZkOTdiYyIsImF1dGhvcml0aWVzIjpbIlJPTEVfUFJPRFVDVF9NQU5BR0VSIl0sInNpZCI6IjJSRHpLbXM0TzhGam5uVHpBUFlBQXRhX0lWZ2xzc3IzbEFaRnZkVUZiVGcifQ.rm-wBmyLSqQp2dEk3kpy4f9XZyTHIK8RtdR9i2UOI71QMqPVpfBEBS0-Om6XfSFOfzK7m3UUEXAyoyqRYLWr9GcPFjOo2gXwDk4h-Tz0y9RjWrFX-o6pGk3jDjzfN5WIJmrJZu_6LjWPizsWxtx5uvGeCSQeNoHlhM5zWwIi7qQWMgJb0NK2Ofw40ChCA3n0xztDgTwDK0DsvC2SXR7dOc91xcXiABIiF3hD1Z-OOt0LgYOogDH91XzDMlcJqNFcPEPGGJbVPl5amR-saqJ3fuYdqEMJLNcFcMtxqAwn_PHSQJsJmJEubqZjpvDYy25x8BXffu2TpwQ5AS-NMVzngQ&post_logout_redirect_uri=https://auth.bookommerce.com:8282/page/store-login
2026-01-03T08:53:22.815+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T08:53:22.832+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.s.w.a.l.SecurityContextLogoutHandler : Invalidated session c2e9dd8c-9e42-412a-9d1d-ac2e0f8d3c73
2026-01-03T08:53:22.835+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://auth.bookommerce.com:8282/page/store-login
2026-01-03T08:53:22.843+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /page/store-login
2026-01-03T08:53:22.843+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] .s.s.w.s.ForceEagerSessionCreationFilter : Created session eagerly
2026-01-03T08:53:22.850+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T08:53:22.850+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /page/store-login
2026-01-03T08:53:23.001+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /page/store-login
2026-01-03T08:53:23.009+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T08:53:23.009+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /page/store-login
2026-01-03T08:53:28.531+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/login/store
2026-01-03T08:53:28.545+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T08:53:28.547+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/login/store
2026-01-03T08:53:28.714+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-03T08:53:28.829+07:00  WARN 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] .w.s.m.a.ResponseStatusExceptionResolver : Resolved [com.bookommerce.auth_server.exception.AccessDeniedException]
2026-01-03T08:53:28.964+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /error
2026-01-03T08:53:28.966+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /error
2026-01-03T08:53:29.046+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T08:53:32.111+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /page/login
2026-01-03T08:53:32.115+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T08:53:32.116+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /page/login
2026-01-03T08:53:32.169+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /page/login
2026-01-03T08:53:32.175+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T08:53:32.176+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /page/login
2026-01-03T08:53:36.615+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/login/customer
2026-01-03T08:53:36.623+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T08:53:36.626+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/login/customer
2026-01-03T08:53:36.744+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-03T08:53:36.744+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=vanh2k3@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@7de491b]
2026-01-03T08:53:37.803+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=VN2DEGkcRNrUkuhJnTVxl-KrO9NivLX2tMwOZsxQyso%3D&redirect_uri=https://bff.bookommerce.com:8181/login/oauth2/code/bff&nonce=HzBCBruz71lMWuZvWIxSMUWEzq4zYXkv25DUD9ed7Yc
2026-01-03T08:53:37.810+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=vanh2k3@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CUSTOMER]]]
2026-01-03T08:53:37.813+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.s.core.session.SessionRegistryImpl   : Registering session 7ce349e9-f156-4bed-be3a-bbc2840a2237, for principal org.springframework.security.core.userdetails.User [Username=vanh2k3@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]]
2026-01-03T08:53:37.814+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://bff.bookommerce.com:8181/login/oauth2/code/bff?code=mXjk3x6Rl_NYLOIYJyiw5QXF0sVBmPIsCKKw3a0Rdx4LfuL6TFYblhmuKhJF1l8u3y59Uubav6Vlyl0sm36CEVaxgcQGYH472H3iFBDVCLijZh9gAS2LoIfEU1-G19Kv&state=VN2DEGkcRNrUkuhJnTVxl-KrO9NivLX2tMwOZsxQyso%3D
2026-01-03T08:53:37.858+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /oauth2/token
2026-01-03T08:53:38.279+07:00  INFO 9408 --- [auth-server] [https-jsse-nio-8282-exec-8] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>>>> Access token value: eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJ2YW5oMmszQGdtYWlsLmNvbSIsImF1ZCI6ImJmZiIsIm5iZiI6MTc2NzQwNTIxOCwic2NvcGUiOlsib3BlbmlkIiwicHJvZmlsZSJdLCJpc3MiOiJodHRwczovL2F1dGguYm9va29tbWVyY2UuY29tOjgyODIiLCJleHAiOjE3OTg5NDEyMTgsImlhdCI6MTc2NzQwNTIxOCwianRpIjoiZmViYTkyZTktNWIyNi00ZGVhLTg0NmItNzU0M2E0MGRiMmY4IiwiYXV0aG9yaXRpZXMiOlsiUk9MRV9DVVNUT01FUiJdfQ.BXu8stwZRHxES-Rf0F94O_3rloOxPf3k_lwnuy7RIc-M63KXmgvjTnMbZ4fag8FMPeY3VeZrrMnG-oaoU8HDljy5wgE7n9yP0Pw9z68eVt4U6PxeHWg1d2b96mmxFkMCd4g15DNqgbB2P4Bz9VJITG4kOTuDBR8JJDACHVdKxadeDFCdhie0LAcMQq0f4J8YwsUw6x_mc6CFFyhOcaCnZ5g--UPz5i04jVbk3aJi9Ww1XwbLyMFe1-2I23IH7-H_lB7bU1LyczgSfqSavLnTC1pbzm0Ir6CHjdXkwvz_7o37xxYskfXbcp0-jZJd0fPjOcIVypucMNIsMleQnIZQIg
2026-01-03T08:53:38.280+07:00  INFO 9408 --- [auth-server] [https-jsse-nio-8282-exec-8] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>> ID Token: eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJ2YW5oMmszQGdtYWlsLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2NzQwNTIxNywiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY3NDA3MDE4LCJpYXQiOjE3Njc0MDUyMTgsIm5vbmNlIjoiSHpCQ0JydXo3MWxNV3VadldJeFNNVVdFenE0ellYa3YyNURVRDllZDdZYyIsImp0aSI6IjFjZjFlMGZhLTEzZGEtNDg1Yy04ZGNmLWY0MmE2MDZjM2RiNiIsImF1dGhvcml0aWVzIjpbIlJPTEVfQ1VTVE9NRVIiXSwic2lkIjoiSU5TbmhadmFPZ1U3NzNhVy1zMFBrVTB0enhDcTRNRDQ1UTk2RkN4c0ptMCJ9.aS5-NseJyqn-yIgHM79EHy7TaWfFBiRKsD-q6f6bB-O9h6HAU0vS-Nsourw04ry6SjNS756dnynx7g1IUyiJIEi9YfXEmryN_sMyTClUh0FgCvMM3Gnk4lyzQ4bsxI1e9SZigd7GnhadtUk3oOKSYy2DkjeI7FBshmdQbP4zMa6uW5G5UP5CB6IJSGB3UaL7wqrc7NmY-aOwb7qeq9nRzxr2zlvSdZCLFxhYYKCkWipgpchZyAUudLvBA0CaQkaly70wLQjyyOfPkYo4599ddYhjnzv-ifsSnifldOErWyFN0-ywigkmFP-WdMIt9x1OxaJta6Ef56pKlHbofjwFjQ
2026-01-03T08:53:38.280+07:00  INFO 9408 --- [auth-server] [https-jsse-nio-8282-exec-8] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>>>> Refresh token value: eIybzbI77qjl0sVQKlnS1dVndjdY5IYr7TFCnHKqnCD1y062ZtRNPEy-MUtrU7aLd51-nFBu95400wv951wbFFM6ywhcoXPryBTQTp2M-LsBq5YA3t9OGJRS680bBG9K
2026-01-03T08:53:38.307+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/jwks
2026-01-03T08:53:38.317+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /userinfo
2026-01-03T08:53:38.322+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2026-01-03T08:53:38.322+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@92859776, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_openid, SCOPE_profile]]
2026-01-03T08:53:38.642+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T08:53:38.643+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=vanh2k3@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CUSTOMER]]]
2026-01-03T08:53:38.643+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T08:54:20.767+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /.well-known/openid-configuration
2026-01-03T08:55:31.760+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/jwks
2026-01-03T08:55:36.812+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T08:55:36.824+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=vanh2k3@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CUSTOMER]]]
2026-01-03T08:55:36.824+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T08:55:43.915+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T08:55:43.928+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=vanh2k3@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CUSTOMER]]]
2026-01-03T08:55:43.931+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T08:55:43.951+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T08:55:43.963+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=vanh2k3@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CUSTOMER]]]
2026-01-03T08:55:43.963+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T08:55:47.818+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /connect/logout?id_token_hint=eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJ2YW5oMmszQGdtYWlsLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2NzQwNTIxNywiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY3NDA3MDE4LCJpYXQiOjE3Njc0MDUyMTgsIm5vbmNlIjoiSHpCQ0JydXo3MWxNV3VadldJeFNNVVdFenE0ellYa3YyNURVRDllZDdZYyIsImp0aSI6IjFjZjFlMGZhLTEzZGEtNDg1Yy04ZGNmLWY0MmE2MDZjM2RiNiIsImF1dGhvcml0aWVzIjpbIlJPTEVfQ1VTVE9NRVIiXSwic2lkIjoiSU5TbmhadmFPZ1U3NzNhVy1zMFBrVTB0enhDcTRNRDQ1UTk2RkN4c0ptMCJ9.aS5-NseJyqn-yIgHM79EHy7TaWfFBiRKsD-q6f6bB-O9h6HAU0vS-Nsourw04ry6SjNS756dnynx7g1IUyiJIEi9YfXEmryN_sMyTClUh0FgCvMM3Gnk4lyzQ4bsxI1e9SZigd7GnhadtUk3oOKSYy2DkjeI7FBshmdQbP4zMa6uW5G5UP5CB6IJSGB3UaL7wqrc7NmY-aOwb7qeq9nRzxr2zlvSdZCLFxhYYKCkWipgpchZyAUudLvBA0CaQkaly70wLQjyyOfPkYo4599ddYhjnzv-ifsSnifldOErWyFN0-ywigkmFP-WdMIt9x1OxaJta6Ef56pKlHbofjwFjQ&post_logout_redirect_uri=https://app.bookommerce.com:8080
2026-01-03T08:55:47.824+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=vanh2k3@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CUSTOMER]]]
2026-01-03T08:55:47.834+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.s.w.a.l.SecurityContextLogoutHandler : Invalidated session 7ce349e9-f156-4bed-be3a-bbc2840a2237
2026-01-03T08:55:47.838+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://app.bookommerce.com:8080
2026-01-03T08:55:48.059+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T08:55:48.060+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] .s.s.w.s.ForceEagerSessionCreationFilter : Created session eagerly
2026-01-03T08:55:48.061+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T08:55:48.064+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@41ef0dc7, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
2026-01-03T08:55:48.064+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@26721299, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
2026-01-03T08:55:48.064+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@2d11544d
2026-01-03T08:55:51.249+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=E4BM2mPJI-iIohIRcLw-QsUbPmNXiKthD7KF3v32zFE%3D&redirect_uri=https://bff.bookommerce.com:8181/login/oauth2/code/bff&nonce=6HITZc-H2BvPGwBT2tZKHPn4-nJpe7BKN7_9UfUjuu0
2026-01-03T08:55:51.253+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T08:55:51.259+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.s.w.s.HttpSessionRequestCache        : Saved request https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=E4BM2mPJI-iIohIRcLw-QsUbPmNXiKthD7KF3v32zFE%3D&redirect_uri=https://bff.bookommerce.com:8181/login/oauth2/code/bff&nonce=6HITZc-H2BvPGwBT2tZKHPn4-nJpe7BKN7_9UfUjuu0&continue to session
2026-01-03T08:55:51.259+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://auth.bookommerce.com:8282/page/login
2026-01-03T08:55:51.286+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /page/login
2026-01-03T08:55:51.290+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T08:55:51.291+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /page/login
2026-01-03T08:55:51.379+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /page/login
2026-01-03T08:55:51.400+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T08:55:51.403+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /page/login
2026-01-03T08:55:53.690+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /page/store-login
2026-01-03T08:55:53.697+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T08:55:53.698+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /page/store-login
2026-01-03T08:55:53.788+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /page/store-login
2026-01-03T08:55:53.797+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T08:55:53.798+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /page/store-login
2026-01-03T08:55:57.346+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/login/store
2026-01-03T08:55:57.355+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T08:55:57.358+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/login/store
2026-01-03T08:55:57.447+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-03T08:55:57.447+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@3cb4bf1e]
2026-01-03T08:55:58.510+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=uawiET8baj46AVD0LZH50ZiwsMTBhSFvDIDm0xTnyf0%3D&redirect_uri=https://bff.bookommerce.com:8181/login/oauth2/code/bff&nonce=oLzhrn11NIUbArwMUdf6xl1T_PGjXCGLUHdL1NyP5OI
2026-01-03T08:55:58.515+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T08:55:58.516+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.s.core.session.SessionRegistryImpl   : Registering session 6e566876-bb57-4f55-9a5c-12fca7a72412, for principal org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]]
2026-01-03T08:55:58.517+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://bff.bookommerce.com:8181/login/oauth2/code/bff?code=GhF2Aw3e-wiD8yHO5sNnoqaAUU6Q6wXA0NvwNdnuC5NkjsmwlrZCCin2b4jsZo1Pg2cgHLGP5skoHIWhhRwIDPSIxWl-7LNMuQCeTkCeH84euloFwBHXYOHRpYZabITH&state=uawiET8baj46AVD0LZH50ZiwsMTBhSFvDIDm0xTnyf0%3D
2026-01-03T08:55:58.543+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /oauth2/token
2026-01-03T08:55:58.994+07:00  INFO 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>>>> Access token value: eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJwcm9kbWFuQGJvb2tvbW1lcmNlLmNvbSIsImF1ZCI6ImJmZiIsIm5iZiI6MTc2NzQwNTM1OCwic2NvcGUiOlsib3BlbmlkIiwicHJvZmlsZSJdLCJpc3MiOiJodHRwczovL2F1dGguYm9va29tbWVyY2UuY29tOjgyODIiLCJleHAiOjE3OTg5NDEzNTgsImlhdCI6MTc2NzQwNTM1OCwianRpIjoiOTA2YjI5MWQtNjMyYy00MTliLTgzMmQtZDcyOTY5OTRjNzg3IiwiYXV0aG9yaXRpZXMiOlsiUk9MRV9QUk9EVUNUX01BTkFHRVIiXX0.M009U3xeZNEd_w53S3RVNb97sBtBK4AVNyf6QTpnQEM2zdK50EfyNwkzn84xq46UhGwkesmYA50oEsvFqNLP5HnpRlRArTtTkmdwzSunbQYvgFinL_ng-ePol5Sy-1Fhfen6406VWJNpLR7cElRcA6PH0AUGhcocPoOX39HqGCj1uHbagjPg2sVgWzlOg8BbEXPsDE1b5nlkGKHF7tijcDsmsfXMfj1uYylTBCaTjbbz7voo8tLpMoftk3aiANI-nDt3_cjznULj4O8GpGngZ5SuvejXDvt8MiBznpoBsr_fnzazOshDFLEXNteTHdDZ2Bp8qv8pP7zhldb5nx8zkw
2026-01-03T08:55:58.994+07:00  INFO 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>> ID Token: eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJwcm9kbWFuQGJvb2tvbW1lcmNlLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2NzQwNTM1OCwiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY3NDA3MTU4LCJpYXQiOjE3Njc0MDUzNTgsIm5vbmNlIjoib0x6aHJuMTFOSVViQXJ3TVVkZjZ4bDFUX1BHalhDR0xVSGRMMU55UDVPSSIsImp0aSI6ImE0ODY1NmEzLTdlYjQtNDRhNy1hN2FiLTlmNjJhOTBlYjJmZSIsImF1dGhvcml0aWVzIjpbIlJPTEVfUFJPRFVDVF9NQU5BR0VSIl0sInNpZCI6ImtnMzZ3SDlBRmUyLUU1SEdCemdnd3dvSWxmZVNDOEY5dk9PWFY1V1V0MHMifQ.bwJIXFHLs0qqkxeREDxEkZE8XHO0wQFWwg9xp0b2i92FskG9vG0fEAUH3p-5wM8L4PGTJnpiglRepXda8L9KMBwkvEoO4adFS3gdf2VBvrjNC318ZYzD04iNCegoiY117DeWxZ2obbLNYJWILKAuBw_iiVrdyny5uNHGiWYxGxad2xO_HkeNlj9RwzxkYgoNAvMP7jAOE_hTw_Btr-0Cel7DtnajKdsaCkiOrqGC7134Lv7hmVf9zcBY7lUY6a3PxJZEmri30ORDAOGJZuep1J9z5DzsVaH9upy14SuYJR45IQ1eHDCyWlRT-3sSVUP1ryc3Zey3SheJLDzSK28oZw
2026-01-03T08:55:58.994+07:00  INFO 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>>>> Refresh token value: UakiFphhqmmDoVLiTCYPoNuNBLHxMj284FCKU6uQ2Jo0HcX4qINTGArIlKpohaasZN6R8OcgA-od6nARtOFyVupwPGojtBZWyPr2tAqtXqj4mAFbSrGWIJu1tnwgND-W
2026-01-03T08:55:59.009+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /userinfo
2026-01-03T08:55:59.013+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2026-01-03T08:55:59.013+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@604fb4f2, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_openid, SCOPE_profile]]
2026-01-03T08:55:59.294+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T08:55:59.299+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T08:55:59.299+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T08:56:13.401+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T08:56:13.416+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T08:56:13.418+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T08:56:19.481+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /.well-known/openid-configuration
2026-01-03T09:01:48.084+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/jwks
2026-01-03T09:04:23.351+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:04:23.364+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:04:23.369+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T09:04:30.269+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /connect/logout?id_token_hint=eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJwcm9kbWFuQGJvb2tvbW1lcmNlLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2NzQwNTM1OCwiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY3NDA3MTU4LCJpYXQiOjE3Njc0MDUzNTgsIm5vbmNlIjoib0x6aHJuMTFOSVViQXJ3TVVkZjZ4bDFUX1BHalhDR0xVSGRMMU55UDVPSSIsImp0aSI6ImE0ODY1NmEzLTdlYjQtNDRhNy1hN2FiLTlmNjJhOTBlYjJmZSIsImF1dGhvcml0aWVzIjpbIlJPTEVfUFJPRFVDVF9NQU5BR0VSIl0sInNpZCI6ImtnMzZ3SDlBRmUyLUU1SEdCemdnd3dvSWxmZVNDOEY5dk9PWFY1V1V0MHMifQ.bwJIXFHLs0qqkxeREDxEkZE8XHO0wQFWwg9xp0b2i92FskG9vG0fEAUH3p-5wM8L4PGTJnpiglRepXda8L9KMBwkvEoO4adFS3gdf2VBvrjNC318ZYzD04iNCegoiY117DeWxZ2obbLNYJWILKAuBw_iiVrdyny5uNHGiWYxGxad2xO_HkeNlj9RwzxkYgoNAvMP7jAOE_hTw_Btr-0Cel7DtnajKdsaCkiOrqGC7134Lv7hmVf9zcBY7lUY6a3PxJZEmri30ORDAOGJZuep1J9z5DzsVaH9upy14SuYJR45IQ1eHDCyWlRT-3sSVUP1ryc3Zey3SheJLDzSK28oZw&post_logout_redirect_uri=https://auth.bookommerce.com:8282/page/store-login
2026-01-03T09:04:30.279+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:04:30.291+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.s.w.a.l.SecurityContextLogoutHandler : Invalidated session 6e566876-bb57-4f55-9a5c-12fca7a72412
2026-01-03T09:04:30.295+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://auth.bookommerce.com:8282/page/store-login
2026-01-03T09:04:30.305+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /page/store-login
2026-01-03T09:04:30.306+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-5] .s.s.w.s.ForceEagerSessionCreationFilter : Created session eagerly
2026-01-03T09:04:30.306+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:04:30.306+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /page/store-login
2026-01-03T09:04:30.367+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /page/store-login
2026-01-03T09:04:30.369+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:04:30.377+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /page/store-login
2026-01-03T09:04:33.820+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /page/login
2026-01-03T09:04:33.824+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:04:33.825+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /page/login
2026-01-03T09:04:33.886+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /page/login
2026-01-03T09:04:33.892+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:04:33.893+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /page/login
2026-01-03T09:04:37.879+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/login/customer
2026-01-03T09:04:37.891+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:04:37.892+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/login/customer
2026-01-03T09:04:38.059+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-03T09:04:38.059+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=vanh2k3@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@2b86627e]
2026-01-03T09:04:39.118+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=3pD2yIGN0DagcBu16CF9ENwuVmI5rQLKYtwH9kohCzc%3D&redirect_uri=https://bff.bookommerce.com:8181/login/oauth2/code/bff&nonce=F-0nZkD2uKTNIu0bCczyYEvfwEyrHCLeBA_isiM_fC4
2026-01-03T09:04:39.124+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=vanh2k3@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CUSTOMER]]]
2026-01-03T09:04:39.125+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.s.core.session.SessionRegistryImpl   : Registering session ce4ecfaa-24d5-4035-be7b-c503a2ae1d80, for principal org.springframework.security.core.userdetails.User [Username=vanh2k3@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]]
2026-01-03T09:04:39.126+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://bff.bookommerce.com:8181/login/oauth2/code/bff?code=EgCkB1JRv79KYlGGQ-u9ZpbYK5nIH5yXhn_Qu0-kLSrJaiCH52Wg4MWOdni8KQ4n-5JAMPnJwJILQtWIco1GjeT7IKxaP7oLi5mP0k76mhQW7G4TUiTwX3swNXA11GXH&state=3pD2yIGN0DagcBu16CF9ENwuVmI5rQLKYtwH9kohCzc%3D
2026-01-03T09:04:39.159+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /oauth2/token
2026-01-03T09:04:39.483+07:00  INFO 9408 --- [auth-server] [https-jsse-nio-8282-exec-10] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>>>> Access token value: eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJ2YW5oMmszQGdtYWlsLmNvbSIsImF1ZCI6ImJmZiIsIm5iZiI6MTc2NzQwNTg3OSwic2NvcGUiOlsib3BlbmlkIiwicHJvZmlsZSJdLCJpc3MiOiJodHRwczovL2F1dGguYm9va29tbWVyY2UuY29tOjgyODIiLCJleHAiOjE3OTg5NDE4NzksImlhdCI6MTc2NzQwNTg3OSwianRpIjoiY2YwYjEzNzktZDA1Ni00OTdmLWE1YTYtZThjOGQ3MGYyMDBiIiwiYXV0aG9yaXRpZXMiOlsiUk9MRV9DVVNUT01FUiJdfQ.USOs92zZ01rO4FLtexRcOVIb6VE_UZ1yCPdxIlPoCSMM5jkehLpyc_G78s7fnt23vGxrQwW_q4JjMnYf0IFtyCcalbpkBuEGBSziLaMRh8LU4hR54zrXca5gGe7rReiXDsNJQgkq_Pg17ikrUtrslrw0DC_aPDiPNsMeRsDu0pDs-W-wsyt267SgBMhliNVHEIe-790DvzGI1_ayciPVlXETJ5flsLlh8y3Qc22pTHH5fH2tfItemshKMXc5jG5eoKn16Tz_tUBvaL7Ck8zP-gWTQZFN-dL77d69wjsgSY7rRjt66ab9M08cW14g5wMCeYsUJTkFsllz_kh6YiuH4Q
2026-01-03T09:04:39.484+07:00  INFO 9408 --- [auth-server] [https-jsse-nio-8282-exec-10] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>> ID Token: eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJ2YW5oMmszQGdtYWlsLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2NzQwNTg3OSwiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY3NDA3Njc5LCJpYXQiOjE3Njc0MDU4NzksIm5vbmNlIjoiRi0wblprRDJ1S1ROSXUwYkNjenlZRXZmd0V5ckhDTGVCQV9pc2lNX2ZDNCIsImp0aSI6IjNmN2JkNWZjLWJkOTgtNDZjNy05NWVhLTg2YjU4OGI0YzE2NyIsImF1dGhvcml0aWVzIjpbIlJPTEVfQ1VTVE9NRVIiXSwic2lkIjoiVnNzSmVXZDJUamRKSGFOMWs0TllId1VjV3ZYOXRMRG5nU0tEZGkyTkRYdyJ9.HwZIlWsBjZqq2OYUGQjporfBuDa7rqZZSnegQP_KHgmTXon_MHQJVZBu7Mc8BOsoUkClM6ap5_qSSknM4JF6rGljY9n2DG-FE3hX9zYBPFcUQCfe5k7Ih0q02XIlCp2wRIFn08TkRTk-_DPuIcmYzCfqWqvIsftzd6h064hszabb2HrNKKiHgnVTAumj741WFl5-fxrEujh0J4mdlqSxr2574vos6FHBGjh9t1wVFvPy3tE3iencLWVIB7THixcNbGm7UgjrZdsqW-w5oDJy3Sh3lrAFBC8m1OAwK92IcBGlUnNsOrPKIUgAdw1YDL1wi7PuL_4ftG2GrxogYiKqWQ
2026-01-03T09:04:39.484+07:00  INFO 9408 --- [auth-server] [https-jsse-nio-8282-exec-10] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>>>> Refresh token value: Xthp2__EqFsF21jqkUJAeWjQvTjU5pFLelCWRgCARKxMn-Tm35TvB1vJVd64wbDa6fXPHXrAPUeDgq6lpgQ9jB-Wn8vDArLpY-1s2vq1imzW-7k-jKJyzBiNUkrD39Hf
2026-01-03T09:04:39.490+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/jwks
2026-01-03T09:04:39.493+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /userinfo
2026-01-03T09:04:39.500+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2026-01-03T09:04:39.503+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-7] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@ba6c4f59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_openid, SCOPE_profile]]
2026-01-03T09:04:39.731+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:04:39.738+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=vanh2k3@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CUSTOMER]]]
2026-01-03T09:04:39.738+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T09:05:04.679+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /connect/logout?id_token_hint=eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJ2YW5oMmszQGdtYWlsLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2NzQwNTg3OSwiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY3NDA3Njc5LCJpYXQiOjE3Njc0MDU4NzksIm5vbmNlIjoiRi0wblprRDJ1S1ROSXUwYkNjenlZRXZmd0V5ckhDTGVCQV9pc2lNX2ZDNCIsImp0aSI6IjNmN2JkNWZjLWJkOTgtNDZjNy05NWVhLTg2YjU4OGI0YzE2NyIsImF1dGhvcml0aWVzIjpbIlJPTEVfQ1VTVE9NRVIiXSwic2lkIjoiVnNzSmVXZDJUamRKSGFOMWs0TllId1VjV3ZYOXRMRG5nU0tEZGkyTkRYdyJ9.HwZIlWsBjZqq2OYUGQjporfBuDa7rqZZSnegQP_KHgmTXon_MHQJVZBu7Mc8BOsoUkClM6ap5_qSSknM4JF6rGljY9n2DG-FE3hX9zYBPFcUQCfe5k7Ih0q02XIlCp2wRIFn08TkRTk-_DPuIcmYzCfqWqvIsftzd6h064hszabb2HrNKKiHgnVTAumj741WFl5-fxrEujh0J4mdlqSxr2574vos6FHBGjh9t1wVFvPy3tE3iencLWVIB7THixcNbGm7UgjrZdsqW-w5oDJy3Sh3lrAFBC8m1OAwK92IcBGlUnNsOrPKIUgAdw1YDL1wi7PuL_4ftG2GrxogYiKqWQ&post_logout_redirect_uri=https://app.bookommerce.com:8080
2026-01-03T09:05:04.690+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=vanh2k3@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CUSTOMER]]]
2026-01-03T09:05:04.694+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.s.w.a.l.SecurityContextLogoutHandler : Invalidated session ce4ecfaa-24d5-4035-be7b-c503a2ae1d80
2026-01-03T09:05:04.702+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://app.bookommerce.com:8080
2026-01-03T09:05:04.918+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:05:04.919+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-6] .s.s.w.s.ForceEagerSessionCreationFilter : Created session eagerly
2026-01-03T09:05:04.929+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:05:04.929+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-6] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@41ef0dc7, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
2026-01-03T09:05:04.930+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-6] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@26721299, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
2026-01-03T09:05:04.930+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-6] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@2d11544d
2026-01-03T09:05:06.892+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=16o9McvGB_AsvR9tOKsA81KR2iHQg3xTBeWNRGK8PZI%3D&redirect_uri=https://bff.bookommerce.com:8181/login/oauth2/code/bff&nonce=8LeUaI7uVhM4sYbiX3S6oeWY0uQAEQNMyE9s72J_zP0
2026-01-03T09:05:06.895+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:05:06.903+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.s.w.s.HttpSessionRequestCache        : Saved request https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=16o9McvGB_AsvR9tOKsA81KR2iHQg3xTBeWNRGK8PZI%3D&redirect_uri=https://bff.bookommerce.com:8181/login/oauth2/code/bff&nonce=8LeUaI7uVhM4sYbiX3S6oeWY0uQAEQNMyE9s72J_zP0&continue to session
2026-01-03T09:05:06.903+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://auth.bookommerce.com:8282/page/login
2026-01-03T09:05:06.927+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /page/login
2026-01-03T09:05:06.935+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:05:06.936+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /page/login
2026-01-03T09:05:07.023+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /page/login
2026-01-03T09:05:07.031+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:05:07.032+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /page/login
2026-01-03T09:05:08.664+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /page/store-login
2026-01-03T09:05:08.664+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:05:08.672+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /page/store-login
2026-01-03T09:05:08.730+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /page/store-login
2026-01-03T09:05:08.730+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:05:08.730+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /page/store-login
2026-01-03T09:05:12.026+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/login/store
2026-01-03T09:05:12.029+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:05:12.029+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/login/store
2026-01-03T09:05:12.152+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-03T09:05:12.153+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-3] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@6c1baeb8]
2026-01-03T09:05:13.225+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=3lWxYpmMhps8AG-gQUI885lGc1aJIUIw7mYLxwWPAlY%3D&redirect_uri=https://bff.bookommerce.com:8181/login/oauth2/code/bff&nonce=_CGs_9Aszwaku9Gzq9mYrAzuyegvuOPeWbOn7ElxBo0
2026-01-03T09:05:13.228+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:05:13.229+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.s.core.session.SessionRegistryImpl   : Registering session ac7e9542-60b9-4493-bcdf-554db66f6e5b, for principal org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]]
2026-01-03T09:05:13.229+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://bff.bookommerce.com:8181/login/oauth2/code/bff?code=du2akzmqhjwwvw4vMbkDygZINANWQrZYgiOWQXkMBBjwR3qu8wep1bbxE1wTB92c5jp4zIbLs2BJPNEQGgs1k2DOWc4phOv__ucHcFK9L4jJna3kq0FWQfkfowxoUHGL&state=3lWxYpmMhps8AG-gQUI885lGc1aJIUIw7mYLxwWPAlY%3D
2026-01-03T09:05:13.259+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /oauth2/token
2026-01-03T09:05:13.598+07:00  INFO 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>>>> Access token value: eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJwcm9kbWFuQGJvb2tvbW1lcmNlLmNvbSIsImF1ZCI6ImJmZiIsIm5iZiI6MTc2NzQwNTkxMywic2NvcGUiOlsib3BlbmlkIiwicHJvZmlsZSJdLCJpc3MiOiJodHRwczovL2F1dGguYm9va29tbWVyY2UuY29tOjgyODIiLCJleHAiOjE3OTg5NDE5MTMsImlhdCI6MTc2NzQwNTkxMywianRpIjoiMTdiMDI1YmYtNDU3Yi00MjcxLWJhMmYtYWU0MTJmZTY1YmFjIiwiYXV0aG9yaXRpZXMiOlsiUk9MRV9QUk9EVUNUX01BTkFHRVIiXX0.T27-bM7KgfLn8CDSYx3eC1NqVwyHlfiROJlG-HGvRY20zLZtvg2bp0qCrYBC-ZquQlqZu5xAI5jPz63CdF0cM17JG3pt54_B-7FIdmesTGgOnnzJceicGiKv_NoAqs0T5uKm1hR5BV_PgVCwHBuDkzHX_j010WsSyPQaPUhk8SNXfB-yRaFWM0sWKSiuY9Wop0StJqCMTQrk2d-naUambgumF--Dd9TkN0Crj3BZXOOE0W22FEDOX75x5wGNEbJjXJvlR479UvXBWSr89qDwzYyBCRkYTq0ojPj8zmfwq6wB4xiYuwKfER4Q6pxX-vvsf2z0Frth_gAqSVHx0N_efA
2026-01-03T09:05:13.598+07:00  INFO 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>> ID Token: eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJwcm9kbWFuQGJvb2tvbW1lcmNlLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2NzQwNTkxMywiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY3NDA3NzEzLCJpYXQiOjE3Njc0MDU5MTMsIm5vbmNlIjoiX0NHc185QXN6d2FrdTlHenE5bVlyQXp1eWVndnVPUGVXYk9uN0VseEJvMCIsImp0aSI6IjdlNzJmYWQ3LWIxNjUtNGUyOC04OTgwLWQ1MGVlNWFmZThiNiIsImF1dGhvcml0aWVzIjpbIlJPTEVfUFJPRFVDVF9NQU5BR0VSIl0sInNpZCI6IkhTUTg0YWVWcGR6Z1lLSUZ2elNaZTBTUTFGTkdTeEh6bEMwU2ZkMHU2WEkifQ.Uy7YJEXUoo1efB8D4r6a5UJxcB6CuqsCdOReldjzKj3WmItzxiYGJB1I7_EqhE3FwJkNaBbBgxDj2Lu-Ny_InitVex7PiL1E5H6iD3XLGG0e7jW6anH_OeL2xEunic5gm4GdJggEP7Ge7Blqn57tJHfTKiY6AHQbNk4LvngMNp9QUVehQ36iuEYt0lFKnSzLLSv_er5iqg9YU1wZM5b5K3chuROD4ouNgiAwYLHEv7oquSsRRqDfIJlIVT0wzGIUojajNO4lFqgptSwnBpQV-5ArELZZUN1U51jH1zyzdLUDIDTdDlzvrSX1W67wpNPK4F4aENZwPf4cqGRcUTgpig
2026-01-03T09:05:13.598+07:00  INFO 9408 --- [auth-server] [https-jsse-nio-8282-exec-1] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>>>> Refresh token value: xi5LTIMIaqboBFac6jLfo1pQJdbGlyZrtj-SLmeMAlZG_1UjX63obVNIsdeD34cqYZY6GrIIui6Ck22alaQFLgJ3VCTsrjRjrMbkDqn6KqB26x3m5X6pJKU_h79nbBwi
2026-01-03T09:05:13.608+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /userinfo
2026-01-03T09:05:13.611+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2026-01-03T09:05:13.611+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-5] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@e6b99107, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_openid, SCOPE_profile]]
2026-01-03T09:05:13.845+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:05:13.851+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:05:13.853+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T09:05:38.334+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:05:38.340+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:05:38.340+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T09:05:50.621+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:05:50.628+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:05:50.629+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T09:06:10.357+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:06:10.362+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:06:10.364+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T09:07:23.286+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:07:23.292+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:07:23.294+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T09:07:25.808+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:07:25.812+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:07:25.813+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T09:08:00.123+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:08:00.135+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:08:00.150+07:00 DEBUG 9408 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T09:12:17.085+07:00  INFO 7512 --- [auth-server] [restartedMain] c.b.auth_server.AuthServerApplication    : Starting AuthServerApplication using Java 21.0.3 with PID 7512 (C:\Users\PC\OneDrive\Desktop\bookommerce\auth-server\target\classes started by PC in C:\Users\PC\OneDrive\Desktop\bookommerce\auth-server)
2026-01-03T09:12:17.090+07:00  INFO 7512 --- [auth-server] [restartedMain] c.b.auth_server.AuthServerApplication    : No active profile set, falling back to 1 default profile: "default"
2026-01-03T09:12:17.159+07:00  INFO 7512 --- [auth-server] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03T09:12:17.160+07:00  INFO 7512 --- [auth-server] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03T09:12:20.166+07:00  INFO 7512 --- [auth-server] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03T09:12:20.345+07:00  INFO 7512 --- [auth-server] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 134 ms. Found 3 JPA repository interfaces.
2026-01-03T09:12:22.178+07:00  INFO 7512 --- [auth-server] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8282 (https)
2026-01-03T09:12:22.224+07:00  INFO 7512 --- [auth-server] [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-03T09:12:22.226+07:00  INFO 7512 --- [auth-server] [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-01-03T09:12:22.309+07:00  INFO 7512 --- [auth-server] [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-03T09:12:22.311+07:00  INFO 7512 --- [auth-server] [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 5149 ms
2026-01-03T09:12:23.517+07:00  INFO 7512 --- [auth-server] [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-03T09:12:23.745+07:00  INFO 7512 --- [auth-server] [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.36.Final
2026-01-03T09:12:23.875+07:00  INFO 7512 --- [auth-server] [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2026-01-03T09:12:24.340+07:00  INFO 7512 --- [auth-server] [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-03T09:12:24.380+07:00  INFO 7512 --- [auth-server] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-03T09:12:24.770+07:00  INFO 7512 --- [auth-server] [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@16cd734c
2026-01-03T09:12:24.773+07:00  INFO 7512 --- [auth-server] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-03T09:12:24.844+07:00  WARN 7512 --- [auth-server] [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-03T09:12:24.870+07:00  INFO 7512 --- [auth-server] [restartedMain] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.44
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-03T09:12:26.348+07:00  INFO 7512 --- [auth-server] [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-03T09:12:26.498+07:00  INFO 7512 --- [auth-server] [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-03T09:12:27.346+07:00  INFO 7512 --- [auth-server] [restartedMain] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2026-01-03T09:12:27.531+07:00  WARN 7512 --- [auth-server] [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-03T09:12:28.758+07:00  INFO 7512 --- [auth-server] [restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint beneath base path '/actuator'
2026-01-03T09:12:29.094+07:00 DEBUG 7512 --- [auth-server] [restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure org.springframework.security.oauth2.server.authorization.config.annotation.web.configurers.OAuth2AuthorizationServerConfigurer$$Lambda/0x000001c133b38228@d691a43 with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, AuthorizationServerContextFilter, HeaderWriterFilter, CsrfFilter, OidcLogoutEndpointFilter, LogoutFilter, OAuth2AuthorizationServerMetadataEndpointFilter, OAuth2AuthorizationEndpointFilter, OAuth2DeviceVerificationEndpointFilter, OidcProviderConfigurationEndpointFilter, NimbusJwkSetEndpointFilter, OAuth2ClientAuthenticationFilter, BearerTokenAuthenticationFilter, AuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter, OAuth2TokenEndpointFilter, OAuth2TokenIntrospectionEndpointFilter, OAuth2TokenRevocationEndpointFilter, OAuth2DeviceAuthorizationEndpointFilter, OidcUserInfoEndpointFilter
2026-01-03T09:12:29.151+07:00 DEBUG 7512 --- [auth-server] [restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, ForceEagerSessionCreationFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, OAuth2AuthorizationRequestRedirectFilter, OAuth2LoginAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-03T09:12:29.170+07:00  INFO 7512 --- [auth-server] [restartedMain] c.b.a.config.SessionCookieConfig         : >>>>>>>>>>>>>>>>>>>> CookieSerializer configured
2026-01-03T09:12:29.482+07:00  WARN 7512 --- [auth-server] [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : Unable to start LiveReload server
2026-01-03T09:12:29.618+07:00  INFO 7512 --- [auth-server] [restartedMain] o.a.t.util.net.NioEndpoint.certificate   : Connector [https-jsse-nio-8282], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [C:\Users\PC\.keystore] using alias [bookommerce_ssl] with trust store [null]
2026-01-03T09:12:29.636+07:00  INFO 7512 --- [auth-server] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8282 (https) with context path '/'
2026-01-03T09:12:29.654+07:00  INFO 7512 --- [auth-server] [restartedMain] c.b.auth_server.AuthServerApplication    : Started AuthServerApplication in 13.283 seconds (process running for 14.354)
2026-01-03T09:12:31.745+07:00  INFO 7512 --- [auth-server] [RMI TCP Connection(2)-127.0.0.1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-03T09:12:31.745+07:00  INFO 7512 --- [auth-server] [RMI TCP Connection(2)-127.0.0.1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-03T09:12:31.747+07:00  INFO 7512 --- [auth-server] [RMI TCP Connection(2)-127.0.0.1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2026-01-03T09:12:46.793+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /.well-known/openid-configuration
2026-01-03T09:12:46.913+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/jwks
2026-01-03T09:14:25.713+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:14:25.717+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-3] .s.s.w.s.ForceEagerSessionCreationFilter : Created session eagerly
2026-01-03T09:14:25.740+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:14:25.761+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-3] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@47f64435, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
2026-01-03T09:14:25.763+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-3] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@7d45676e, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
2026-01-03T09:14:25.765+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-3] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@26d3553f
2026-01-03T09:14:25.935+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /page/store-login
2026-01-03T09:14:25.959+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:14:25.965+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /page/store-login
2026-01-03T09:14:26.796+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /page/store-login
2026-01-03T09:14:26.864+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:14:26.869+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /page/store-login
2026-01-03T09:15:26.008+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/login/store
2026-01-03T09:15:26.019+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:15:26.020+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/login/store
2026-01-03T09:15:26.681+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-03T09:15:26.681+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-2] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@19a73c5a]
2026-01-03T09:15:28.210+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=QLHa3dzWs6LR381gGopw2bl3bKcT51wi_dYIUAQ7M9o%3D&redirect_uri=https://bff.bookommerce.com:8181/login/oauth2/code/bff&nonce=hLPivSjR0hJWgp4WXoMtBowwl3ECiYaTrlQ_38N38kM
2026-01-03T09:15:28.230+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:15:28.255+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.s.core.session.SessionRegistryImpl   : Registering session 390a772c-05e9-411a-b743-929b0ac584b8, for principal org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]]
2026-01-03T09:15:28.256+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://bff.bookommerce.com:8181/login/oauth2/code/bff?code=shrKdAaWPqlYUGdiGriaOCXPpxcNkjqkgctaqyNghG1eFdSBI-VVK9_JCveyNbcXAZGBK0p7GvJgqiNYzYpvc7pShRisYhFR3uxqc8qa9CjBp7JoU9UmSSe99ULW2Ki4&state=QLHa3dzWs6LR381gGopw2bl3bKcT51wi_dYIUAQ7M9o%3D
2026-01-03T09:15:28.551+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /oauth2/token
2026-01-03T09:15:29.003+07:00  INFO 7512 --- [auth-server] [https-jsse-nio-8282-exec-10] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>>>> Access token value: eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJwcm9kbWFuQGJvb2tvbW1lcmNlLmNvbSIsImF1ZCI6ImJmZiIsIm5iZiI6MTc2NzQwNjUyOCwic2NvcGUiOlsib3BlbmlkIiwicHJvZmlsZSJdLCJpc3MiOiJodHRwczovL2F1dGguYm9va29tbWVyY2UuY29tOjgyODIiLCJleHAiOjE3OTg5NDI1MjgsImlhdCI6MTc2NzQwNjUyOCwianRpIjoiMjZmN2RmMjUtMjNmMy00OWEwLWI4YjctNTI3NzJkOGM4MDgxIiwiYXV0aG9yaXRpZXMiOlsiUk9MRV9QUk9EVUNUX01BTkFHRVIiXX0.CSl-E1cp_HM4Wp1CoBHrsKAgGZMR95RxIZ72Fl13icYlkLmTi0rTSb4p0PIppN_bAWGDgtFDog1zIn14d5rTD12P5IEBnKJqzWUCrrGRx4XAmnCLBxEthSc4gsUnlddwSiKi-KnIVlZ3of91xeMfadwJv5bSj2FPyqqHRe2oKfwyjWzzdDyURZjgXpEQOECWSkpsy279HF6U0AjPOvfAXScXI3tWWybNeN1Smlr46j60e5DRf-TpBkddGl7t8qdMFq05ipYUelD_DNvplAziVSlTc1_oY7XWCJBliGib5dL8K4f9UHnyu2sJT5hfKbQVR6F6gV1pdcL_nKKE4_ZHpQ
2026-01-03T09:15:29.004+07:00  INFO 7512 --- [auth-server] [https-jsse-nio-8282-exec-10] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>> ID Token: eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJwcm9kbWFuQGJvb2tvbW1lcmNlLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2NzQwNjUyOCwiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY3NDA4MzI4LCJpYXQiOjE3Njc0MDY1MjgsIm5vbmNlIjoiaExQaXZTalIwaEpXZ3A0V1hvTXRCb3d3bDNFQ2lZYVRybFFfMzhOMzhrTSIsImp0aSI6ImRiMTA1NTEwLTZlYzAtNDUwNS1iOGRhLWQyNjAyODNjZDM1MiIsImF1dGhvcml0aWVzIjpbIlJPTEVfUFJPRFVDVF9NQU5BR0VSIl0sInNpZCI6Inp5NnI0MThvREE4eGpobWt4eWJPSjlvWnBoRDFTSnZPMkZmcXZTZjVMS2sifQ.NcdJxd1xr6rjD9C-1K5WKt0SkQRB83SP2woO1tIPGp6XGMfSnssstrVlE_PoHAn590Abewaze8gutD2brtcI_P3hrcVmtMvlY9FqidE6M3u82fKvtXcADDWNW8hrN8kt1oxY0ceJ-YYNczjkUiMXpBlc1k6D8eDVN5OKXTlvc6zVjGuBMmUVtDakdGtjfstfbXbwDX_sGYnllRrKaHuuzHZbohRo7u2UiybWjyZONVbGylbeJ54FwRiKVV9Tg8xnl0K_FtXsYKV36jGs966fpGfZCX4TgcVh7DlhF1mkoLT2Ucki0YxiwGs7LVJcYqIy3rY-fX6Vfn2PY9cJLXoSlA
2026-01-03T09:15:29.005+07:00  INFO 7512 --- [auth-server] [https-jsse-nio-8282-exec-10] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>>>> Refresh token value: uLdq8JJ2Ub1ilBHvxPqZTIOgSpbGYVVLJtPR0PDJcDabSEbQM02i2q5mzo4BYeCy7QoHQR0cs9USEZ0cahEzdEhfhtATYn4R1e6bDnp-qClBMOC-SQg6iP3M5zA-mj6L
2026-01-03T09:15:29.196+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/jwks
2026-01-03T09:15:29.222+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /userinfo
2026-01-03T09:15:29.239+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2026-01-03T09:15:29.240+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-2] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@c2f3a9e6, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_openid, SCOPE_profile]]
2026-01-03T09:15:30.116+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:15:30.140+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:15:30.147+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T09:15:37.681+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:15:37.691+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:15:37.692+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T09:15:39.026+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:15:39.038+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:15:39.038+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T09:15:45.909+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:15:45.920+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:15:45.921+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T09:16:52.222+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:16:52.245+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:16:52.246+07:00 DEBUG 7512 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T09:18:29.413+07:00  INFO 15444 --- [auth-server] [restartedMain] c.b.auth_server.AuthServerApplication    : Starting AuthServerApplication using Java 21.0.3 with PID 15444 (C:\Users\PC\OneDrive\Desktop\bookommerce\auth-server\target\classes started by PC in C:\Users\PC\OneDrive\Desktop\bookommerce\auth-server)
2026-01-03T09:18:29.417+07:00  INFO 15444 --- [auth-server] [restartedMain] c.b.auth_server.AuthServerApplication    : No active profile set, falling back to 1 default profile: "default"
2026-01-03T09:18:29.490+07:00  INFO 15444 --- [auth-server] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03T09:18:29.491+07:00  INFO 15444 --- [auth-server] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03T09:18:31.136+07:00  INFO 15444 --- [auth-server] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03T09:18:31.224+07:00  INFO 15444 --- [auth-server] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 75 ms. Found 3 JPA repository interfaces.
2026-01-03T09:18:32.207+07:00  INFO 15444 --- [auth-server] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8282 (https)
2026-01-03T09:18:32.229+07:00  INFO 15444 --- [auth-server] [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-03T09:18:32.231+07:00  INFO 15444 --- [auth-server] [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-01-03T09:18:32.348+07:00  INFO 15444 --- [auth-server] [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-03T09:18:32.349+07:00  INFO 15444 --- [auth-server] [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2857 ms
2026-01-03T09:18:37.263+07:00  INFO 6608 --- [auth-server] [restartedMain] c.b.auth_server.AuthServerApplication    : Starting AuthServerApplication using Java 21.0.3 with PID 6608 (C:\Users\PC\OneDrive\Desktop\bookommerce\auth-server\target\classes started by PC in C:\Users\PC\OneDrive\Desktop\bookommerce\auth-server)
2026-01-03T09:18:37.268+07:00  INFO 6608 --- [auth-server] [restartedMain] c.b.auth_server.AuthServerApplication    : No active profile set, falling back to 1 default profile: "default"
2026-01-03T09:18:37.350+07:00  INFO 6608 --- [auth-server] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03T09:18:37.351+07:00  INFO 6608 --- [auth-server] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03T09:18:39.502+07:00  INFO 6608 --- [auth-server] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03T09:18:39.686+07:00  INFO 6608 --- [auth-server] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 159 ms. Found 3 JPA repository interfaces.
2026-01-03T09:18:42.127+07:00  INFO 6608 --- [auth-server] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8282 (https)
2026-01-03T09:18:42.173+07:00  INFO 6608 --- [auth-server] [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-03T09:18:42.173+07:00  INFO 6608 --- [auth-server] [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-01-03T09:18:42.287+07:00  INFO 6608 --- [auth-server] [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-03T09:18:42.289+07:00  INFO 6608 --- [auth-server] [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4935 ms
2026-01-03T09:18:42.850+07:00  INFO 6608 --- [auth-server] [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-03T09:18:43.021+07:00  INFO 6608 --- [auth-server] [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.36.Final
2026-01-03T09:18:43.094+07:00  INFO 6608 --- [auth-server] [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2026-01-03T09:18:43.644+07:00  INFO 6608 --- [auth-server] [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-03T09:18:43.711+07:00  INFO 6608 --- [auth-server] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-03T09:18:44.289+07:00  INFO 6608 --- [auth-server] [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@63e6882a
2026-01-03T09:18:44.299+07:00  INFO 6608 --- [auth-server] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-03T09:18:44.420+07:00  WARN 6608 --- [auth-server] [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-03T09:18:44.463+07:00  INFO 6608 --- [auth-server] [restartedMain] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.44
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-03T09:18:46.479+07:00  INFO 6608 --- [auth-server] [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-03T09:18:46.721+07:00  INFO 6608 --- [auth-server] [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-03T09:18:47.608+07:00  INFO 6608 --- [auth-server] [restartedMain] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2026-01-03T09:18:47.879+07:00  WARN 6608 --- [auth-server] [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-03T09:18:49.743+07:00  INFO 6608 --- [auth-server] [restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint beneath base path '/actuator'
2026-01-03T09:18:50.406+07:00 DEBUG 6608 --- [auth-server] [restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure org.springframework.security.oauth2.server.authorization.config.annotation.web.configurers.OAuth2AuthorizationServerConfigurer$$Lambda/0x00000123e1b76d00@7839fa84 with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, AuthorizationServerContextFilter, HeaderWriterFilter, CsrfFilter, OidcLogoutEndpointFilter, LogoutFilter, OAuth2AuthorizationServerMetadataEndpointFilter, OAuth2AuthorizationEndpointFilter, OAuth2DeviceVerificationEndpointFilter, OidcProviderConfigurationEndpointFilter, NimbusJwkSetEndpointFilter, OAuth2ClientAuthenticationFilter, BearerTokenAuthenticationFilter, AuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter, OAuth2TokenEndpointFilter, OAuth2TokenIntrospectionEndpointFilter, OAuth2TokenRevocationEndpointFilter, OAuth2DeviceAuthorizationEndpointFilter, OidcUserInfoEndpointFilter
2026-01-03T09:18:50.540+07:00 DEBUG 6608 --- [auth-server] [restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, ForceEagerSessionCreationFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, OAuth2AuthorizationRequestRedirectFilter, OAuth2LoginAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-03T09:18:50.581+07:00  INFO 6608 --- [auth-server] [restartedMain] c.b.a.config.SessionCookieConfig         : >>>>>>>>>>>>>>>>>>>> CookieSerializer configured
2026-01-03T09:18:51.401+07:00  INFO 6608 --- [auth-server] [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2026-01-03T09:18:51.700+07:00  INFO 6608 --- [auth-server] [restartedMain] o.a.t.util.net.NioEndpoint.certificate   : Connector [https-jsse-nio-8282], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [C:\Users\PC\.keystore] using alias [bookommerce_ssl] with trust store [null]
2026-01-03T09:18:51.744+07:00  INFO 6608 --- [auth-server] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8282 (https) with context path '/'
2026-01-03T09:18:51.793+07:00  INFO 6608 --- [auth-server] [restartedMain] c.b.auth_server.AuthServerApplication    : Started AuthServerApplication in 15.27 seconds (process running for 15.897)
2026-01-03T09:18:52.466+07:00  INFO 6608 --- [auth-server] [RMI TCP Connection(2)-127.0.0.1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-03T09:18:52.466+07:00  INFO 6608 --- [auth-server] [RMI TCP Connection(2)-127.0.0.1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-03T09:18:52.466+07:00  INFO 6608 --- [auth-server] [RMI TCP Connection(2)-127.0.0.1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2026-01-03T09:20:04.194+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /.well-known/openid-configuration
2026-01-03T09:20:04.337+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/jwks
2026-01-03T09:20:36.478+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:20:36.485+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-2] .s.s.w.s.ForceEagerSessionCreationFilter : Created session eagerly
2026-01-03T09:20:36.527+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:20:36.556+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-2] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@4e186d2a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
2026-01-03T09:20:36.559+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-2] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2f7b2180, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
2026-01-03T09:20:36.561+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-2] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@36ea34df
2026-01-03T09:20:36.750+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /page/store-login
2026-01-03T09:20:36.779+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:20:36.785+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /page/store-login
2026-01-03T09:20:37.865+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /page/store-login
2026-01-03T09:20:37.878+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:20:37.881+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /page/store-login
2026-01-03T09:20:43.840+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/login/store
2026-01-03T09:20:43.850+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:20:43.851+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/login/store
2026-01-03T09:20:44.548+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-03T09:20:44.551+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-1] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@14d8987f]
2026-01-03T09:20:45.892+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=WOX37ORyfLJGJPcuFGC_Sgzko92NotMlelGDgez7SvI%3D&redirect_uri=https://bff.bookommerce.com:8181/login/oauth2/code/bff&nonce=AxNHjMMJUyap_fPv8VgnXh-utb_LXusVnHNfEhfm3wc
2026-01-03T09:20:45.906+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:20:45.920+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.s.core.session.SessionRegistryImpl   : Registering session 8fe00532-54e5-4f2c-9e69-349425c07fff, for principal org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]]
2026-01-03T09:20:45.922+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://bff.bookommerce.com:8181/login/oauth2/code/bff?code=a7oM4xXP73UsG4oMp28qYaJXQ-Pgz9xpKdmUX3yrGx_TbUDHwOMMjtR8U1Oj-8lsxSPppZ-pN8RArCn-CCgvZIpM183lxap4YNfzISEqjPi-KH72CEQnjpnZAivGv08h&state=WOX37ORyfLJGJPcuFGC_Sgzko92NotMlelGDgez7SvI%3D
2026-01-03T09:20:46.126+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /oauth2/token
2026-01-03T09:20:46.517+07:00  INFO 6608 --- [auth-server] [https-jsse-nio-8282-exec-5] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>>>> Access token value: eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJwcm9kbWFuQGJvb2tvbW1lcmNlLmNvbSIsImF1ZCI6ImJmZiIsIm5iZiI6MTc2NzQwNjg0Niwic2NvcGUiOlsib3BlbmlkIiwicHJvZmlsZSJdLCJpc3MiOiJodHRwczovL2F1dGguYm9va29tbWVyY2UuY29tOjgyODIiLCJleHAiOjE3OTg5NDI4NDYsImlhdCI6MTc2NzQwNjg0NiwianRpIjoiMzhkOGE5M2ItYzQwOC00ZmM0LWEyODMtMzEzN2I1NjJmMjJiIiwiYXV0aG9yaXRpZXMiOlsiUk9MRV9QUk9EVUNUX01BTkFHRVIiXX0.pbQgKNCfVmgpAqcqdxt9_6zF1lH_8ws_lNVnjK7-hGpzqRt99NBaLjGlHX4DtcRcOi0OdK_B1yfE63Y973vT20HH_yQJT5TJEDIqUmgt4LXAp0sysmjsuNpovrJuwP4NUcTKmFGUgy8ZlITkQlk6Rv6IttsdDofGz_sFNNoUXG7jmx31AAP7dR4d1q8421yRiZuc_W3GUYmEJyHXluG5Cgwir6An-u8w7cZrh2OCDhtNiFO47WUGmPgTFz_WMGPH7mxE6U_Bgpug9OCCgWJdsd3gyj5-q_p_qIlvAh_sBYPkppAu7csGfLkyq9IME-JtkWLWVyNbXSR8uDC1pY_bSQ
2026-01-03T09:20:46.518+07:00  INFO 6608 --- [auth-server] [https-jsse-nio-8282-exec-5] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>> ID Token: eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJwcm9kbWFuQGJvb2tvbW1lcmNlLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2NzQwNjg0NSwiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY3NDA4NjQ2LCJpYXQiOjE3Njc0MDY4NDYsIm5vbmNlIjoiQXhOSGpNTUpVeWFwX2ZQdjhWZ25YaC11dGJfTFh1c1ZuSE5mRWhmbTN3YyIsImp0aSI6IjliNzQ4MThmLWU4ZWUtNDg3ZC1hNWNmLTYwYTdkZjJkMDMwYSIsImF1dGhvcml0aWVzIjpbIlJPTEVfUFJPRFVDVF9NQU5BR0VSIl0sInNpZCI6ImxLWlFVNlJnbnYxZ01acG81eUJLUlpKY0duNUs5dzMwOHZ4UEh6Q010ME0ifQ.Lnv5SFH6zp9LR7chATUwDBRMwVQMQWLhSaEakiCnwaD5YjtURqA3ZjIaX7S97NMxk2buW_eMQGJX9H8cw_jDtanwXUerazin-2EWaZmYX-K0u0dB3dRjko_BKGlM8Litz5SabHHT5wNT2Ng72gpHREo_ek_drGOuVReWVU7zgf_IeKRezLih7WVSfswwQvpqvWO2kDe6WmSMlvvLIS_ZdfE1c3HFwlAGtVpv4L948tgngJSKKOdUXNQwBWmc0pR3HUv5fPowfiLI4bLTgwkbC3JE0wfpqP5l5Nh0IyJ2VFRDdb0_p8qlZe31i-Zvyze5RwVAzuDIGPLdthSHRgm4jQ
2026-01-03T09:20:46.518+07:00  INFO 6608 --- [auth-server] [https-jsse-nio-8282-exec-5] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>>>> Refresh token value: MiIGH7axtC-90TFF_M8StodTU9UkI-1ESumiNaX08_DzAix9wY3iaxSRmxKnsosTSXHwLaoklgri0FN0Ze4zAFaQacTZM-ty-5Jh34luNdpaXhE2Fbn0ECgnv1yaK60X
2026-01-03T09:20:46.700+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/jwks
2026-01-03T09:20:46.732+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /userinfo
2026-01-03T09:20:46.747+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2026-01-03T09:20:46.749+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-1] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@6bdbc53f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_openid, SCOPE_profile]]
2026-01-03T09:20:47.617+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:20:47.631+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:20:47.633+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T09:20:48.993+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:20:49.000+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:20:49.001+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T09:20:53.781+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:20:53.791+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:20:53.792+07:00 DEBUG 6608 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T09:25:35.401+07:00  INFO 2420 --- [auth-server] [restartedMain] c.b.auth_server.AuthServerApplication    : Starting AuthServerApplication using Java 21.0.3 with PID 2420 (C:\Users\PC\OneDrive\Desktop\bookommerce\auth-server\target\classes started by PC in C:\Users\PC\OneDrive\Desktop\bookommerce\auth-server)
2026-01-03T09:25:35.404+07:00  INFO 2420 --- [auth-server] [restartedMain] c.b.auth_server.AuthServerApplication    : No active profile set, falling back to 1 default profile: "default"
2026-01-03T09:25:35.457+07:00  INFO 2420 --- [auth-server] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03T09:25:35.458+07:00  INFO 2420 --- [auth-server] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03T09:25:37.014+07:00  INFO 2420 --- [auth-server] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03T09:25:37.091+07:00  INFO 2420 --- [auth-server] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 64 ms. Found 3 JPA repository interfaces.
2026-01-03T09:25:37.997+07:00  INFO 2420 --- [auth-server] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8282 (https)
2026-01-03T09:25:38.040+07:00  INFO 2420 --- [auth-server] [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-03T09:25:38.041+07:00  INFO 2420 --- [auth-server] [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-01-03T09:25:38.132+07:00  INFO 2420 --- [auth-server] [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-03T09:25:38.135+07:00  INFO 2420 --- [auth-server] [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2675 ms
2026-01-03T09:25:38.731+07:00  INFO 2420 --- [auth-server] [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-03T09:25:38.832+07:00  INFO 2420 --- [auth-server] [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.36.Final
2026-01-03T09:25:38.879+07:00  INFO 2420 --- [auth-server] [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2026-01-03T09:25:39.376+07:00  INFO 2420 --- [auth-server] [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-03T09:25:39.463+07:00  INFO 2420 --- [auth-server] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-03T09:25:40.090+07:00  INFO 2420 --- [auth-server] [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7f728905
2026-01-03T09:25:40.093+07:00  INFO 2420 --- [auth-server] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-03T09:25:40.155+07:00  WARN 2420 --- [auth-server] [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-03T09:25:40.177+07:00  INFO 2420 --- [auth-server] [restartedMain] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.44
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-03T09:25:42.160+07:00  INFO 2420 --- [auth-server] [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-03T09:25:42.359+07:00  INFO 2420 --- [auth-server] [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-03T09:25:43.238+07:00  INFO 2420 --- [auth-server] [restartedMain] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2026-01-03T09:25:43.571+07:00  WARN 2420 --- [auth-server] [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-03T09:25:45.492+07:00  INFO 2420 --- [auth-server] [restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint beneath base path '/actuator'
2026-01-03T09:25:46.114+07:00 DEBUG 2420 --- [auth-server] [restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure org.springframework.security.oauth2.server.authorization.config.annotation.web.configurers.OAuth2AuthorizationServerConfigurer$$Lambda/0x0000020a81b37bf8@2c0ff05f with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, AuthorizationServerContextFilter, HeaderWriterFilter, CsrfFilter, OidcLogoutEndpointFilter, LogoutFilter, OAuth2AuthorizationServerMetadataEndpointFilter, OAuth2AuthorizationEndpointFilter, OAuth2DeviceVerificationEndpointFilter, OidcProviderConfigurationEndpointFilter, NimbusJwkSetEndpointFilter, OAuth2ClientAuthenticationFilter, BearerTokenAuthenticationFilter, AuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter, OAuth2TokenEndpointFilter, OAuth2TokenIntrospectionEndpointFilter, OAuth2TokenRevocationEndpointFilter, OAuth2DeviceAuthorizationEndpointFilter, OidcUserInfoEndpointFilter
2026-01-03T09:25:46.234+07:00 DEBUG 2420 --- [auth-server] [restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, ForceEagerSessionCreationFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, OAuth2AuthorizationRequestRedirectFilter, OAuth2LoginAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-03T09:25:46.274+07:00  INFO 2420 --- [auth-server] [restartedMain] c.b.a.config.SessionCookieConfig         : >>>>>>>>>>>>>>>>>>>> CookieSerializer configured
2026-01-03T09:25:46.945+07:00  INFO 2420 --- [auth-server] [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2026-01-03T09:25:47.166+07:00  INFO 2420 --- [auth-server] [restartedMain] o.a.t.util.net.NioEndpoint.certificate   : Connector [https-jsse-nio-8282], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [C:\Users\PC\.keystore] using alias [bookommerce_ssl] with trust store [null]
2026-01-03T09:25:47.196+07:00  INFO 2420 --- [auth-server] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8282 (https) with context path '/'
2026-01-03T09:25:47.245+07:00  INFO 2420 --- [auth-server] [restartedMain] c.b.auth_server.AuthServerApplication    : Started AuthServerApplication in 12.385 seconds (process running for 13.039)
2026-01-03T09:25:48.202+07:00  INFO 2420 --- [auth-server] [RMI TCP Connection(2)-127.0.0.1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-03T09:25:48.202+07:00  INFO 2420 --- [auth-server] [RMI TCP Connection(2)-127.0.0.1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-03T09:25:48.202+07:00  INFO 2420 --- [auth-server] [RMI TCP Connection(2)-127.0.0.1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2026-01-03T09:26:21.811+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /.well-known/openid-configuration
2026-01-03T09:26:21.924+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/jwks
2026-01-03T09:27:22.864+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:27:22.868+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-3] .s.s.w.s.ForceEagerSessionCreationFilter : Created session eagerly
2026-01-03T09:27:22.886+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:27:22.917+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-3] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@694b167, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
2026-01-03T09:27:22.917+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-3] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@51a94c95, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
2026-01-03T09:27:22.919+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-3] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@66b2ede4
2026-01-03T09:27:23.130+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /page/store-login
2026-01-03T09:27:23.155+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:27:23.164+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /page/store-login
2026-01-03T09:27:23.964+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /page/store-login
2026-01-03T09:27:23.979+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:27:23.982+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /page/store-login
2026-01-03T09:27:25.531+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/login/store
2026-01-03T09:27:25.539+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:27:25.540+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/login/store
2026-01-03T09:27:26.131+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-03T09:27:26.134+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-1] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@2147922]
2026-01-03T09:27:27.641+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=Dff9sC3DRASFSRl6ze-Mo-Uo5z8I37uhockjAMtN4dk%3D&redirect_uri=https://bff.bookommerce.com:8181/login/oauth2/code/bff&nonce=pjBhCJ7YjYpeZn-pZFNOAhWvQp5lT3emRhTxHh3lElc
2026-01-03T09:27:27.669+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:27:27.683+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.s.core.session.SessionRegistryImpl   : Registering session 852280ca-d091-4a9b-946b-4c7468a72173, for principal org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]]
2026-01-03T09:27:27.685+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://bff.bookommerce.com:8181/login/oauth2/code/bff?code=XYTvPKk217yu_Ru_MWEDOA8D7CuiEbikrwgCFGS6hb1lhFdHfq4bXIkRrnOx6K8d4kMAInaXn6cwMSAM-FPpursINqstz_PKxkmgN7A8a5qL1DyRKV9J7Ic_S-VuPiic&state=Dff9sC3DRASFSRl6ze-Mo-Uo5z8I37uhockjAMtN4dk%3D
2026-01-03T09:27:27.863+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /oauth2/token
2026-01-03T09:27:28.321+07:00  INFO 2420 --- [auth-server] [https-jsse-nio-8282-exec-4] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>>>> Access token value: eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJwcm9kbWFuQGJvb2tvbW1lcmNlLmNvbSIsImF1ZCI6ImJmZiIsIm5iZiI6MTc2NzQwNzI0OCwic2NvcGUiOlsib3BlbmlkIiwicHJvZmlsZSJdLCJpc3MiOiJodHRwczovL2F1dGguYm9va29tbWVyY2UuY29tOjgyODIiLCJleHAiOjE3OTg5NDMyNDgsImlhdCI6MTc2NzQwNzI0OCwianRpIjoiYTY5M2ZlOWItZTBmYS00OWYzLWJjYWItYjY0YmQ4YzMyYTA3IiwiYXV0aG9yaXRpZXMiOlsiUk9MRV9QUk9EVUNUX01BTkFHRVIiXX0.VNChafUNDR65QvPa886hOfbU5rD0DlqKHKo9WEYR97L773Thsn6HuuhV4oJ66oivFr4m0irmwr_JQn9PNq6QSp_dF9HhzEcqJmjkr7zkYuVeuxQiyDFO1hY1k5bpfrG-I2m_is71wuUOkTimw0Ohrdg08JK4jOZLSb_7C1MUjCPL9hZ-5p8S--wUbC5jnA-s2YacAz8FlwcuCfioICpO98QgBgDDQ_8edvk4ViKeerVhrtuqDnvyypRMtoFSMMrLXazymJS9nPqopgRjzb5GKmp-CXLBBHO9SXWCknSMIuBHUW6XSMPhbdA08yteiDrD2jwGQhsJl__ZnNJlqJdTkw
2026-01-03T09:27:28.322+07:00  INFO 2420 --- [auth-server] [https-jsse-nio-8282-exec-4] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>> ID Token: eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJwcm9kbWFuQGJvb2tvbW1lcmNlLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2NzQwNzI0NywiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY3NDA5MDQ4LCJpYXQiOjE3Njc0MDcyNDgsIm5vbmNlIjoicGpCaENKN1lqWXBlWm4tcFpGTk9BaFd2UXA1bFQzZW1SaFR4SGgzbEVsYyIsImp0aSI6ImNhY2M0OGY0LTQ2MWMtNDRjMS04MmJhLTNmMDJkNjliM2E5OCIsImF1dGhvcml0aWVzIjpbIlJPTEVfUFJPRFVDVF9NQU5BR0VSIl0sInNpZCI6ImtjdkMwVWpqUkVKRHpIb3RycDVwWVhROUNtNFhacHB5YzczMk83aHFpSFkifQ.q-1Zi50fFiCkD80M3OBrO5UWDtZgM3SkRJU_R9qaE7n9083OKeioR5dT3qU13E-8LuuTszxAWjZkj5VUgZvwNStacBpQMO2E36ePex9QE8mOqI2xQhTufGv3cb07iSzRLkgx3_pwM2GV4XLV1wvQ_S1PaWj_2lHmoPJC_EfxAVUf8R99magnPkEd8cPPdbePH29masyMEiZ3XH1YTFDZKSfTm1rbYbfOEcOEP1yZeHOZWY3rxMjP5KTeGcCW1wWMPasSzVSb3X-8BJtA0FTy4hYy30Eo1z4vlV7FSD2L1gPrwJGSQDbgItjYFZuAoDio0YBU7HZUnyJbgc4fDtLHPA
2026-01-03T09:27:28.324+07:00  INFO 2420 --- [auth-server] [https-jsse-nio-8282-exec-4] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>>>> Refresh token value: 2Eji8WhF3yihcxZz3JIQ5d-sI-FJTocbLRcDYqo3kbFMAyRkeJakmHUAxB8zIvWTScGxDIfPf9KRJMD53bCSxq1Ai2D6NSkK5qF2UMDtNjshHojFGH8mgJOtPqBNVknt
2026-01-03T09:27:28.506+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/jwks
2026-01-03T09:27:28.536+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /userinfo
2026-01-03T09:27:28.554+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2026-01-03T09:27:28.556+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-1] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@27f55a92, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_openid, SCOPE_profile]]
2026-01-03T09:27:29.454+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:27:29.470+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:27:29.472+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T09:27:31.061+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:27:31.070+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:27:31.071+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T09:28:20.388+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:28:20.395+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-10] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:28:20.397+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T09:29:02.813+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:29:02.813+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:29:02.813+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T09:29:42.612+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:29:42.620+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:29:42.621+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T09:30:56.970+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:30:56.979+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:30:56.981+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T09:31:23.809+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/jwks
2026-01-03T09:31:36.806+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:31:36.813+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:31:36.814+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T09:32:10.018+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:32:10.027+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:32:10.028+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T09:33:17.453+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:33:17.461+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-6] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:33:17.461+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T09:33:28.417+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /connect/logout?id_token_hint=eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJwcm9kbWFuQGJvb2tvbW1lcmNlLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2NzQwNzI0NywiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY3NDA5MDQ4LCJpYXQiOjE3Njc0MDcyNDgsIm5vbmNlIjoicGpCaENKN1lqWXBlWm4tcFpGTk9BaFd2UXA1bFQzZW1SaFR4SGgzbEVsYyIsImp0aSI6ImNhY2M0OGY0LTQ2MWMtNDRjMS04MmJhLTNmMDJkNjliM2E5OCIsImF1dGhvcml0aWVzIjpbIlJPTEVfUFJPRFVDVF9NQU5BR0VSIl0sInNpZCI6ImtjdkMwVWpqUkVKRHpIb3RycDVwWVhROUNtNFhacHB5YzczMk83aHFpSFkifQ.q-1Zi50fFiCkD80M3OBrO5UWDtZgM3SkRJU_R9qaE7n9083OKeioR5dT3qU13E-8LuuTszxAWjZkj5VUgZvwNStacBpQMO2E36ePex9QE8mOqI2xQhTufGv3cb07iSzRLkgx3_pwM2GV4XLV1wvQ_S1PaWj_2lHmoPJC_EfxAVUf8R99magnPkEd8cPPdbePH29masyMEiZ3XH1YTFDZKSfTm1rbYbfOEcOEP1yZeHOZWY3rxMjP5KTeGcCW1wWMPasSzVSb3X-8BJtA0FTy4hYy30Eo1z4vlV7FSD2L1gPrwJGSQDbgItjYFZuAoDio0YBU7HZUnyJbgc4fDtLHPA&post_logout_redirect_uri=https://auth.bookommerce.com:8282/page/store-login
2026-01-03T09:33:28.428+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T09:33:28.449+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.s.w.a.l.SecurityContextLogoutHandler : Invalidated session 852280ca-d091-4a9b-946b-4c7468a72173
2026-01-03T09:33:28.456+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://auth.bookommerce.com:8282/page/store-login
2026-01-03T09:33:28.462+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /page/store-login
2026-01-03T09:33:28.464+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-7] .s.s.w.s.ForceEagerSessionCreationFilter : Created session eagerly
2026-01-03T09:33:28.465+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:33:28.468+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /page/store-login
2026-01-03T09:33:28.710+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /page/store-login
2026-01-03T09:33:28.725+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:33:28.726+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /page/store-login
2026-01-03T09:33:33.955+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /page/login
2026-01-03T09:33:33.962+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:33:33.963+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /page/login
2026-01-03T09:33:34.200+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /page/login
2026-01-03T09:33:34.223+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:33:34.233+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /page/login
2026-01-03T09:33:36.606+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/login/customer
2026-01-03T09:33:36.612+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:33:36.613+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/login/customer
2026-01-03T09:33:36.699+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-03T09:33:36.714+07:00  WARN 2420 --- [auth-server] [https-jsse-nio-8282-exec-5] .w.s.m.a.ResponseStatusExceptionResolver : Resolved [com.bookommerce.auth_server.exception.AccessDeniedException]
2026-01-03T09:33:36.732+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /error
2026-01-03T09:33:36.735+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /error
2026-01-03T09:33:36.754+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:33:47.233+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/login/customer
2026-01-03T09:33:47.238+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T09:33:47.238+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/login/customer
2026-01-03T09:33:47.345+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-03T09:33:47.346+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-7] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=vanh2k3@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@3e45dfd7]
2026-01-03T09:33:48.409+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=Rnd0E1uVHxPHT4EXEqJG7H7LyktMH6_m2gjGr3bDffA%3D&redirect_uri=https://bff.bookommerce.com:8181/login/oauth2/code/bff&nonce=JE4b9NiaIeoXkTSv3REv7TCV_GNhYvl1-tut-kPpazQ
2026-01-03T09:33:48.419+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=vanh2k3@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CUSTOMER]]]
2026-01-03T09:33:48.422+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.s.core.session.SessionRegistryImpl   : Registering session 60ac921d-ca26-4ca1-8866-e5d1ec5bdde8, for principal org.springframework.security.core.userdetails.User [Username=vanh2k3@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]]
2026-01-03T09:33:48.423+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://bff.bookommerce.com:8181/login/oauth2/code/bff?code=4D4yHIqtMs5KJ8HbNfxBAY8dw5lkCcOSrV2r3nPqxKSA8X-sy1A4vGy4cy_59jEnT_3EXVKQf-9hhVzbAHihX9V4FUYIBgKCPOZfEzoMEOWX5kkSYMdcUht7yp8bJwPR&state=Rnd0E1uVHxPHT4EXEqJG7H7LyktMH6_m2gjGr3bDffA%3D
2026-01-03T09:33:48.474+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /oauth2/token
2026-01-03T09:33:48.826+07:00  INFO 2420 --- [auth-server] [https-jsse-nio-8282-exec-4] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>>>> Access token value: eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJ2YW5oMmszQGdtYWlsLmNvbSIsImF1ZCI6ImJmZiIsIm5iZiI6MTc2NzQwNzYyOCwic2NvcGUiOlsib3BlbmlkIiwicHJvZmlsZSJdLCJpc3MiOiJodHRwczovL2F1dGguYm9va29tbWVyY2UuY29tOjgyODIiLCJleHAiOjE3OTg5NDM2MjgsImlhdCI6MTc2NzQwNzYyOCwianRpIjoiMWFkOWE5MWItY2VlOS00NWI5LWI1YmYtOGU3MTg5MDA0NzFhIiwiYXV0aG9yaXRpZXMiOlsiUk9MRV9DVVNUT01FUiJdfQ.AS6L0t7DWRYiNVu3AWVjizRekC2XRSr33RK9sdcPVRyq41sQYm6E51T_CicsWpXvAhAhJ98oEtX-MB60_XkOwdvGd_id5yeRBjGbXXseCeExDTIwVjuoRQkz9rW2kkyzmTTrjdh3fdtjVdkw24fS7xeCZJg2QHjRegxpzDL_HxHFpQiTnh9mMsNSfrUk8NiQ3eQGt4gKbkNmQIiLwLAOL6Tkk6F_ufA79YfMjDYWNcJtzcjrhkKnHYf-DQAxjJBTfvfcMwWJSCugQewtjU3e0yWmiaK-D1RVAMqLV7dT-E0tVdFfYfFTgn5LdIeaeMNV4wEoaUTKa3GvI4hch-0MEQ
2026-01-03T09:33:48.826+07:00  INFO 2420 --- [auth-server] [https-jsse-nio-8282-exec-4] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>> ID Token: eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJ2YW5oMmszQGdtYWlsLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2NzQwNzYyOCwiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY3NDA5NDI4LCJpYXQiOjE3Njc0MDc2MjgsIm5vbmNlIjoiSkU0YjlOaWFJZW9Ya1RTdjNSRXY3VENWX0dOaFl2bDEtdHV0LWtQcGF6USIsImp0aSI6IjdkMDZkNzg1LTk1ZWQtNDc4NS1iNmI1LTdkYmUxNDFjNDY4NiIsImF1dGhvcml0aWVzIjpbIlJPTEVfQ1VTVE9NRVIiXSwic2lkIjoiLUlodWw2TXVYZ3BnWWI5UzRNd2QxQUh6czgybXFLXzI1TF9YbVdRRUoxNCJ9.FTl8rUu2X-Ni87t_VMNyaIAL24qdPi1UjU5rh8kHEfUsnKRy-G1ypQM5xb6vMC0mKj0lppyQ_IebnGArCZRTiGsIIxDakfF-gBAm-7PysJYYCEw6a2FE-THJV2AUUfB7Y4IjVwj0p-FwfOgGHO53J4KgkrO33_vqw67SL_P_DbzzS57DN4UyfIhtgVRacHkcj6spMv465qQBOFwZAjMxTFvzTtKD93pvMWViJJF5-Aa0I9Gr5C4wU0ZlvTbaeyn-JWremeLQHZI0weXt2Alx2AFhGt3a4PZvQGz32QnOxj-bOQLUSQXj_NT5OD6BoCOOgZHShSOw5A1XxfQwITmrig
2026-01-03T09:33:48.827+07:00  INFO 2420 --- [auth-server] [https-jsse-nio-8282-exec-4] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>>>> Refresh token value: tSQ9Fd96tvkHSFfYuPHm7msQPyNxYBOJNT4zffhZanGcykDgVu0nIZTC8Rjqjtxh7A2G8f8GxqNiwcWnMp1YWpbAbQec4JFyn4JyhpnKaIuzrY3sDUPmx74wnraWxKfS
2026-01-03T09:33:48.835+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/jwks
2026-01-03T09:33:48.845+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /userinfo
2026-01-03T09:33:48.849+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2026-01-03T09:33:48.850+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-5] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@75866f96, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_openid, SCOPE_profile]]
2026-01-03T09:34:21.042+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:34:21.065+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-7] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=vanh2k3@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CUSTOMER]]]
2026-01-03T09:34:21.066+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T09:34:22.474+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T09:34:22.484+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-8] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=vanh2k3@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CUSTOMER]]]
2026-01-03T09:34:22.487+07:00 DEBUG 2420 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T09:58:45.398+07:00  INFO 8100 --- [auth-server] [restartedMain] c.b.auth_server.AuthServerApplication    : Starting AuthServerApplication using Java 21.0.3 with PID 8100 (C:\Users\PC\OneDrive\Desktop\bookommerce\auth-server\target\classes started by PC in C:\Users\PC\OneDrive\Desktop\bookommerce\auth-server)
2026-01-03T09:58:45.400+07:00  INFO 8100 --- [auth-server] [restartedMain] c.b.auth_server.AuthServerApplication    : No active profile set, falling back to 1 default profile: "default"
2026-01-03T09:58:45.459+07:00  INFO 8100 --- [auth-server] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03T09:58:45.459+07:00  INFO 8100 --- [auth-server] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03T09:58:47.053+07:00  INFO 8100 --- [auth-server] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03T09:58:47.138+07:00  INFO 8100 --- [auth-server] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 71 ms. Found 6 JPA repository interfaces.
2026-01-03T09:58:48.369+07:00  INFO 8100 --- [auth-server] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8282 (https)
2026-01-03T09:58:48.391+07:00  INFO 8100 --- [auth-server] [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-03T09:58:48.395+07:00  INFO 8100 --- [auth-server] [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-01-03T09:58:48.453+07:00  INFO 8100 --- [auth-server] [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-03T09:58:48.453+07:00  INFO 8100 --- [auth-server] [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2991 ms
2026-01-03T09:58:48.923+07:00  INFO 8100 --- [auth-server] [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-03T09:58:49.039+07:00  INFO 8100 --- [auth-server] [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.36.Final
2026-01-03T09:58:49.116+07:00  INFO 8100 --- [auth-server] [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2026-01-03T09:58:49.464+07:00  INFO 8100 --- [auth-server] [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-03T09:58:49.512+07:00  INFO 8100 --- [auth-server] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-03T09:58:49.976+07:00  INFO 8100 --- [auth-server] [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@50bdb103
2026-01-03T09:58:49.978+07:00  INFO 8100 --- [auth-server] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-03T09:58:50.053+07:00  WARN 8100 --- [auth-server] [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-03T09:58:50.076+07:00  INFO 8100 --- [auth-server] [restartedMain] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.44
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-03T09:58:51.168+07:00  INFO 8100 --- [auth-server] [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-03T09:58:51.605+07:00  WARN 8100 --- [auth-server] [restartedMain] o.h.t.s.i.ExceptionHandlerLoggedImpl     : GenerationTarget encountered exception accepting command : Error executing DDL "create table `authorization` (id varchar(255) not null, access_token_expires_at datetime(6), access_token_issued_at datetime(6), access_token_metadata varchar(2000), access_token_scopes varchar(1000), access_token_type varchar(255), access_token_value varchar(4000), attributes varchar(4000), authorization_code_expires_at datetime(6), authorization_code_issued_at datetime(6), authorization_code_metadata varchar(255), authorization_code_value varchar(4000), authorization_grant_type varchar(255), authorized_scopes varchar(1000), device_code_expires_at datetime(6), device_code_issued_at datetime(6), device_code_metadata varchar(2000), device_code_value varchar(4000), oidc_id_token_claims varchar(2000), oidc_id_token_expires_at datetime(6), oidc_id_token_issued_at datetime(6), oidc_id_token_metadata varchar(2000), oidc_id_token_value varchar(4000), principal_name varchar(255), refresh_token_expires_at datetime(6), refresh_token_issued_at datetime(6), refresh_token_metadata varchar(2000), refresh_token_value varchar(4000), registered_client_id varchar(255), state varchar(500), user_code_expires_at datetime(6), user_code_issued_at datetime(6), user_code_metadata varchar(2000), user_code_value varchar(4000), primary key (id)) engine=InnoDB" via JDBC [Row size too large. The maximum row size for the used table type, not counting BLOBs, is 65535. This includes storage overhead, check the manual. You have to change some columns to TEXT or BLOBs]

org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "create table `authorization` (id varchar(255) not null, access_token_expires_at datetime(6), access_token_issued_at datetime(6), access_token_metadata varchar(2000), access_token_scopes varchar(1000), access_token_type varchar(255), access_token_value varchar(4000), attributes varchar(4000), authorization_code_expires_at datetime(6), authorization_code_issued_at datetime(6), authorization_code_metadata varchar(255), authorization_code_value varchar(4000), authorization_grant_type varchar(255), authorized_scopes varchar(1000), device_code_expires_at datetime(6), device_code_issued_at datetime(6), device_code_metadata varchar(2000), device_code_value varchar(4000), oidc_id_token_claims varchar(2000), oidc_id_token_expires_at datetime(6), oidc_id_token_issued_at datetime(6), oidc_id_token_metadata varchar(2000), oidc_id_token_value varchar(4000), principal_name varchar(255), refresh_token_expires_at datetime(6), refresh_token_issued_at datetime(6), refresh_token_metadata varchar(2000), refresh_token_value varchar(4000), registered_client_id varchar(255), state varchar(500), user_code_expires_at datetime(6), user_code_issued_at datetime(6), user_code_metadata varchar(2000), user_code_value varchar(4000), primary key (id)) engine=InnoDB" via JDBC [Row size too large. The maximum row size for the used table type, not counting BLOBs, is 65535. This includes storage overhead, check the manual. You have to change some columns to TEXT or BLOBs]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94) ~[hibernate-core-6.6.36.Final.jar:6.6.36.Final]
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlString(AbstractSchemaMigrator.java:576) ~[hibernate-core-6.6.36.Final.jar:6.6.36.Final]
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlStrings(AbstractSchemaMigrator.java:516) ~[hibernate-core-6.6.36.Final.jar:6.6.36.Final]
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.createTable(AbstractSchemaMigrator.java:316) ~[hibernate-core-6.6.36.Final.jar:6.6.36.Final]
	at org.hibernate.tool.schema.internal.GroupedSchemaMigratorImpl.performTablesMigration(GroupedSchemaMigratorImpl.java:80) ~[hibernate-core-6.6.36.Final.jar:6.6.36.Final]
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.performMigration(AbstractSchemaMigrator.java:233) ~[hibernate-core-6.6.36.Final.jar:6.6.36.Final]
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:112) ~[hibernate-core-6.6.36.Final.jar:6.6.36.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:280) ~[hibernate-core-6.6.36.Final.jar:6.6.36.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144) ~[hibernate-core-6.6.36.Final.jar:6.6.36.Final]
	at java.base/java.util.HashMap.forEach(HashMap.java:1429) ~[na:na]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141) ~[hibernate-core-6.6.36.Final.jar:6.6.36.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.6.36.Final.jar:6.6.36.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.6.36.Final.jar:6.6.36.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324) ~[hibernate-core-6.6.36.Final.jar:6.6.36.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463) ~[hibernate-core-6.6.36.Final.jar:6.6.36.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517) ~[hibernate-core-6.6.36.Final.jar:6.6.36.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66) ~[spring-orm-6.2.14.jar:6.2.14]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390) ~[spring-orm-6.2.14.jar:6.2.14]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419) ~[spring-orm-6.2.14.jar:6.2.14]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400) ~[spring-orm-6.2.14.jar:6.2.14]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366) ~[spring-orm-6.2.14.jar:6.2.14]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873) ~[spring-beans-6.2.14.jar:6.2.14]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822) ~[spring-beans-6.2.14.jar:6.2.14]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607) ~[spring-beans-6.2.14.jar:6.2.14]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529) ~[spring-beans-6.2.14.jar:6.2.14]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339) ~[spring-beans-6.2.14.jar:6.2.14]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373) ~[spring-beans-6.2.14.jar:6.2.14]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337) ~[spring-beans-6.2.14.jar:6.2.14]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207) ~[spring-beans-6.2.14.jar:6.2.14]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:973) ~[spring-context-6.2.14.jar:6.2.14]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627) ~[spring-context-6.2.14.jar:6.2.14]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.5.8.jar:3.5.8]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752) ~[spring-boot-3.5.8.jar:3.5.8]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439) ~[spring-boot-3.5.8.jar:3.5.8]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318) ~[spring-boot-3.5.8.jar:3.5.8]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.5.8.jar:3.5.8]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.5.8.jar:3.5.8]
	at com.bookommerce.auth_server.AuthServerApplication.main(AuthServerApplication.java:10) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.5.8.jar:3.5.8]
Caused by: java.sql.SQLSyntaxErrorException: Row size too large. The maximum row size for the used table type, not counting BLOBs, is 65535. This includes storage overhead, check the manual. You have to change some columns to TEXT or BLOBs
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112) ~[mysql-connector-j-9.5.0.jar:9.5.0]
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114) ~[mysql-connector-j-9.5.0.jar:9.5.0]
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837) ~[mysql-connector-j-9.5.0.jar:9.5.0]
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685) ~[mysql-connector-j-9.5.0.jar:9.5.0]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95) ~[HikariCP-6.3.3.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-6.3.3.jar:na]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.6.36.Final.jar:6.6.36.Final]
	... 40 common frames omitted

2026-01-03T09:58:51.706+07:00  INFO 8100 --- [auth-server] [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-03T09:58:52.077+07:00  INFO 8100 --- [auth-server] [restartedMain] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2026-01-03T09:58:52.157+07:00 DEBUG 8100 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module org.springframework.security.jackson2.CoreJackson2Module, now registering
2026-01-03T09:58:52.158+07:00 DEBUG 8100 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module org.springframework.security.web.jackson2.WebJackson2Module, now registering
2026-01-03T09:58:52.160+07:00 DEBUG 8100 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module org.springframework.security.web.server.jackson2.WebServerJackson2Module, now registering
2026-01-03T09:58:52.162+07:00 DEBUG 8100 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module org.springframework.security.web.jackson2.WebServletJackson2Module, now registering
2026-01-03T09:58:52.165+07:00 DEBUG 8100 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module org.springframework.security.oauth2.client.jackson2.OAuth2ClientJackson2Module, now registering
2026-01-03T09:58:52.166+07:00 DEBUG 8100 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module com.fasterxml.jackson.datatype.jsr310.JavaTimeModule, now registering
2026-01-03T09:58:52.290+07:00  INFO 8100 --- [auth-server] [restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-03T09:58:52.752+07:00 DEBUG 8100 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module org.springframework.security.jackson2.CoreJackson2Module, now registering
2026-01-03T09:58:52.752+07:00 DEBUG 8100 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module org.springframework.security.web.jackson2.WebJackson2Module, now registering
2026-01-03T09:58:52.752+07:00 DEBUG 8100 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module org.springframework.security.web.server.jackson2.WebServerJackson2Module, now registering
2026-01-03T09:58:52.752+07:00 DEBUG 8100 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module org.springframework.security.web.jackson2.WebServletJackson2Module, now registering
2026-01-03T09:58:52.753+07:00 DEBUG 8100 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module org.springframework.security.oauth2.client.jackson2.OAuth2ClientJackson2Module, now registering
2026-01-03T09:58:52.753+07:00 DEBUG 8100 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module com.fasterxml.jackson.datatype.jsr310.JavaTimeModule, now registering
2026-01-03T09:58:52.849+07:00  WARN 8100 --- [auth-server] [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-03T09:58:53.408+07:00  INFO 8100 --- [auth-server] [restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint beneath base path '/actuator'
2026-01-03T09:58:53.516+07:00  WARN 8100 --- [auth-server] [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0: Error creating bean with name 'authorizationServerSecurityFilterChain' defined in class path resource [com/bookommerce/auth_server/config/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'authorizationServerSecurityFilterChain' threw exception with message: No qualifying bean of type 'org.springframework.security.oauth2.server.authorization.client.RegisteredClientRepository' available: expected single matching bean but found 2: jpaRegisteredClientRepository,registeredClientRepository
2026-01-03T09:58:53.520+07:00  INFO 8100 --- [auth-server] [restartedMain] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-03T09:58:53.524+07:00  INFO 8100 --- [auth-server] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2026-01-03T09:58:53.537+07:00  INFO 8100 --- [auth-server] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2026-01-03T09:58:53.543+07:00  INFO 8100 --- [auth-server] [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2026-01-03T09:58:53.564+07:00  INFO 8100 --- [auth-server] [restartedMain] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2026-01-03T09:58:53.602+07:00 ERROR 8100 --- [auth-server] [restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method setFilterChains in org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration required a single bean, but 2 were found:
	- jpaRegisteredClientRepository: defined in file [C:\Users\PC\OneDrive\Desktop\bookommerce\auth-server\target\classes\com\bookommerce\auth_server\repository\oauth2\JpaRegisteredClientRepository.class]
	- registeredClientRepository: defined by method 'registeredClientRepository' in class path resource [com/bookommerce/auth_server/config/SecurityConfig.class]

This may be due to missing parameter name information

Action:

Consider marking one of the beans as @Primary, updating the consumer to accept multiple beans, or using @Qualifier to identify the bean that should be consumed

Ensure that your compiler is configured to use the '-parameters' flag.
You may need to update both your build tool settings as well as your IDE.
(See https://github.com/spring-projects/spring-framework/wiki/Spring-Framework-6.1-Release-Notes#parameter-name-retention)


2026-01-03T10:12:07.368+07:00  INFO 13396 --- [auth-server] [restartedMain] c.b.auth_server.AuthServerApplication    : Starting AuthServerApplication using Java 21.0.3 with PID 13396 (C:\Users\PC\OneDrive\Desktop\bookommerce\auth-server\target\classes started by PC in C:\Users\PC\OneDrive\Desktop\bookommerce\auth-server)
2026-01-03T10:12:07.375+07:00  INFO 13396 --- [auth-server] [restartedMain] c.b.auth_server.AuthServerApplication    : No active profile set, falling back to 1 default profile: "default"
2026-01-03T10:12:07.459+07:00  INFO 13396 --- [auth-server] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03T10:12:07.460+07:00  INFO 13396 --- [auth-server] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03T10:12:09.118+07:00  INFO 13396 --- [auth-server] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03T10:12:09.207+07:00  INFO 13396 --- [auth-server] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 74 ms. Found 6 JPA repository interfaces.
2026-01-03T10:12:10.196+07:00  INFO 13396 --- [auth-server] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8282 (https)
2026-01-03T10:12:10.218+07:00  INFO 13396 --- [auth-server] [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-03T10:12:10.219+07:00  INFO 13396 --- [auth-server] [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-01-03T10:12:10.288+07:00  INFO 13396 --- [auth-server] [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-03T10:12:10.288+07:00  INFO 13396 --- [auth-server] [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2827 ms
2026-01-03T10:12:10.673+07:00  INFO 13396 --- [auth-server] [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-03T10:12:10.767+07:00  INFO 13396 --- [auth-server] [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.36.Final
2026-01-03T10:12:10.840+07:00  INFO 13396 --- [auth-server] [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2026-01-03T10:12:11.152+07:00  INFO 13396 --- [auth-server] [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-03T10:12:11.200+07:00  INFO 13396 --- [auth-server] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-03T10:12:11.758+07:00  INFO 13396 --- [auth-server] [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@a5b19ee
2026-01-03T10:12:11.761+07:00  INFO 13396 --- [auth-server] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-03T10:12:11.815+07:00  WARN 13396 --- [auth-server] [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-03T10:12:11.836+07:00  INFO 13396 --- [auth-server] [restartedMain] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.44
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-03T10:12:13.002+07:00  INFO 13396 --- [auth-server] [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-03T10:12:13.236+07:00  INFO 13396 --- [auth-server] [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-03T10:12:13.735+07:00  INFO 13396 --- [auth-server] [restartedMain] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2026-01-03T10:12:13.810+07:00 DEBUG 13396 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module org.springframework.security.jackson2.CoreJackson2Module, now registering
2026-01-03T10:12:13.811+07:00 DEBUG 13396 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module org.springframework.security.web.jackson2.WebJackson2Module, now registering
2026-01-03T10:12:13.812+07:00 DEBUG 13396 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module org.springframework.security.web.server.jackson2.WebServerJackson2Module, now registering
2026-01-03T10:12:13.813+07:00 DEBUG 13396 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module org.springframework.security.web.jackson2.WebServletJackson2Module, now registering
2026-01-03T10:12:13.813+07:00 DEBUG 13396 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module org.springframework.security.oauth2.client.jackson2.OAuth2ClientJackson2Module, now registering
2026-01-03T10:12:13.814+07:00 DEBUG 13396 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module com.fasterxml.jackson.datatype.jsr310.JavaTimeModule, now registering
2026-01-03T10:12:14.079+07:00  INFO 13396 --- [auth-server] [restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-03T10:12:14.561+07:00 DEBUG 13396 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module org.springframework.security.jackson2.CoreJackson2Module, now registering
2026-01-03T10:12:14.561+07:00 DEBUG 13396 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module org.springframework.security.web.jackson2.WebJackson2Module, now registering
2026-01-03T10:12:14.562+07:00 DEBUG 13396 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module org.springframework.security.web.server.jackson2.WebServerJackson2Module, now registering
2026-01-03T10:12:14.562+07:00 DEBUG 13396 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module org.springframework.security.web.jackson2.WebServletJackson2Module, now registering
2026-01-03T10:12:14.562+07:00 DEBUG 13396 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module org.springframework.security.oauth2.client.jackson2.OAuth2ClientJackson2Module, now registering
2026-01-03T10:12:14.562+07:00 DEBUG 13396 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module com.fasterxml.jackson.datatype.jsr310.JavaTimeModule, now registering
2026-01-03T10:12:14.672+07:00  WARN 13396 --- [auth-server] [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-03T10:12:15.716+07:00  INFO 13396 --- [auth-server] [restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint beneath base path '/actuator'
2026-01-03T10:12:16.113+07:00 DEBUG 13396 --- [auth-server] [restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure org.springframework.security.oauth2.server.authorization.config.annotation.web.configurers.OAuth2AuthorizationServerConfigurer$$Lambda/0x0000018650cf5780@33ca379d with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, AuthorizationServerContextFilter, HeaderWriterFilter, CsrfFilter, OidcLogoutEndpointFilter, LogoutFilter, OAuth2AuthorizationServerMetadataEndpointFilter, OAuth2AuthorizationEndpointFilter, OAuth2DeviceVerificationEndpointFilter, OidcProviderConfigurationEndpointFilter, NimbusJwkSetEndpointFilter, OAuth2ClientAuthenticationFilter, BearerTokenAuthenticationFilter, AuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter, OAuth2TokenEndpointFilter, OAuth2TokenIntrospectionEndpointFilter, OAuth2TokenRevocationEndpointFilter, OAuth2DeviceAuthorizationEndpointFilter, OidcUserInfoEndpointFilter
2026-01-03T10:12:16.187+07:00 DEBUG 13396 --- [auth-server] [restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, ForceEagerSessionCreationFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, OAuth2AuthorizationRequestRedirectFilter, OAuth2LoginAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-03T10:12:16.207+07:00  INFO 13396 --- [auth-server] [restartedMain] c.b.a.config.SessionCookieConfig         : >>>>>>>>>>>>>>>>>>>> CookieSerializer configured
2026-01-03T10:12:16.566+07:00  INFO 13396 --- [auth-server] [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2026-01-03T10:12:16.708+07:00  INFO 13396 --- [auth-server] [restartedMain] o.a.t.util.net.NioEndpoint.certificate   : Connector [https-jsse-nio-8282], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [C:\Users\PC\.keystore] using alias [bookommerce_ssl] with trust store [null]
2026-01-03T10:12:16.726+07:00  INFO 13396 --- [auth-server] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8282 (https) with context path '/'
2026-01-03T10:12:16.744+07:00  INFO 13396 --- [auth-server] [restartedMain] c.b.auth_server.AuthServerApplication    : Started AuthServerApplication in 9.92 seconds (process running for 10.893)
2026-01-03T10:12:19.001+07:00  INFO 13396 --- [auth-server] [RMI TCP Connection(2)-127.0.0.1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-03T10:12:19.001+07:00  INFO 13396 --- [auth-server] [RMI TCP Connection(2)-127.0.0.1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-03T10:12:19.003+07:00  INFO 13396 --- [auth-server] [RMI TCP Connection(2)-127.0.0.1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2026-01-03T10:13:12.776+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /.well-known/openid-configuration
2026-01-03T10:13:12.937+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/jwks
2026-01-03T10:14:10.255+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T10:14:10.259+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-2] .s.s.w.s.ForceEagerSessionCreationFilter : Created session eagerly
2026-01-03T10:14:10.273+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T10:14:10.292+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-2] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@7689de09, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
2026-01-03T10:14:10.293+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-2] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@634bc08b, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
2026-01-03T10:14:10.293+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-2] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@340968f6
2026-01-03T10:14:13.143+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T10:14:13.160+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T10:14:13.162+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-3] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@7689de09, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
2026-01-03T10:14:13.164+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-3] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@634bc08b, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
2026-01-03T10:14:13.165+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-3] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@340968f6
2026-01-03T10:14:16.381+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T10:14:16.397+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T10:14:16.399+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-10] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@7689de09, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
2026-01-03T10:14:16.400+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-10] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@634bc08b, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
2026-01-03T10:14:16.402+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-10] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@340968f6
2026-01-03T10:14:21.678+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T10:14:21.690+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T10:14:21.691+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-1] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@7689de09, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
2026-01-03T10:14:21.692+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-1] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@634bc08b, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
2026-01-03T10:14:21.692+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-1] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@340968f6
2026-01-03T10:14:36.799+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T10:14:36.806+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T10:14:36.809+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-6] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@7689de09, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
2026-01-03T10:14:36.809+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-6] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@634bc08b, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
2026-01-03T10:14:36.809+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-6] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@340968f6
2026-01-03T10:14:50.817+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=52XonrG_1rmzmt7R9qTv4u7nBgXP-kIgTX7nNhHOdTQ%3D&redirect_uri=https://bff.bookommerce.com:8181/login/oauth2/code/bff&nonce=g2pTaTwGpX5znBev2WPSiqS4WQns3HeqUaYO1POxBQk
2026-01-03T10:14:51.136+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T10:14:51.144+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.s.w.s.HttpSessionRequestCache        : Saved request https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=52XonrG_1rmzmt7R9qTv4u7nBgXP-kIgTX7nNhHOdTQ%3D&redirect_uri=https://bff.bookommerce.com:8181/login/oauth2/code/bff&nonce=g2pTaTwGpX5znBev2WPSiqS4WQns3HeqUaYO1POxBQk&continue to session
2026-01-03T10:14:51.146+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://auth.bookommerce.com:8282/page/login
2026-01-03T10:14:51.194+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /page/login
2026-01-03T10:14:51.199+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T10:14:51.203+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /page/login
2026-01-03T10:14:51.887+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /page/login
2026-01-03T10:14:51.897+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T10:14:51.899+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /page/login
2026-01-03T10:14:56.290+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/login/customer
2026-01-03T10:14:56.297+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T10:14:56.299+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/login/customer
2026-01-03T10:14:56.698+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-03T10:14:56.702+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-1] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=vanh2k3@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@353e3ee6]
2026-01-03T10:14:57.837+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=yCeKAXmDecRouP_ZYfBtJepDQLySESFCJAOCH1g_EN4%3D&redirect_uri=https://bff.bookommerce.com:8181/login/oauth2/code/bff&nonce=tK_x2hJMarBDSKNUwYvn2852Gxf12Wg5eemAswgYgkY
2026-01-03T10:14:57.844+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=vanh2k3@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CUSTOMER]]]
2026-01-03T10:14:58.007+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.s.core.session.SessionRegistryImpl   : Registering session 46f5248e-81bb-444d-ab06-75c48fdfe86e, for principal org.springframework.security.core.userdetails.User [Username=vanh2k3@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]]
2026-01-03T10:14:58.010+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://bff.bookommerce.com:8181/login/oauth2/code/bff?code=QV7UF6hoCWnRYFC--vBJA91892hL1iC6kU61gcVSU7-EGjYtBeb6VS82WWM9iPRg3GMEJhqMBY6GZ7YYruRkfuw_uf7zd1H3-PIf0bw1wG026DqdwOKgXT4yFQX5kO2O&state=yCeKAXmDecRouP_ZYfBtJepDQLySESFCJAOCH1g_EN4%3D
2026-01-03T10:14:58.144+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /oauth2/token
2026-01-03T10:14:58.703+07:00  INFO 13396 --- [auth-server] [https-jsse-nio-8282-exec-9] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>>>> Access token value: eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJ2YW5oMmszQGdtYWlsLmNvbSIsImF1ZCI6ImJmZiIsIm5iZiI6MTc2NzQxMDA5OCwic2NvcGUiOlsib3BlbmlkIiwicHJvZmlsZSJdLCJpc3MiOiJodHRwczovL2F1dGguYm9va29tbWVyY2UuY29tOjgyODIiLCJleHAiOjE3OTg5NDYwOTgsImlhdCI6MTc2NzQxMDA5OCwianRpIjoiMTlmNWQyZTEtYjQ0MC00NTBiLWI4ZGEtNDg1YzIwOTliYjJlIiwiYXV0aG9yaXRpZXMiOlsiUk9MRV9DVVNUT01FUiJdfQ.XOYONq-cSJAFwAEZnRCB5Ry2w6fW4PTwNkLun21IKaoO23vAD60_bcht8pT_ITdz8X8L20BJNhVcaknG166GztUWZsn09yV3iUy6f-u7G9lM6EB_7TmUzKn-ZFdtKBI7lX7xlBs8Fx0zp9Gc8Qj7uznsmhLs5730DDdOnlDLnCKjyIVeiubAnTO5WGttHVHYPfmsF5leBvyEDOgaHv_lWeECLxlhYeo7MbG0KsiEoY_E78POc5o_I1wIShfIoyhelEpFrqookd3YStY0lcXKmb4DpLc-51rzyB9gaLrAjpVBqaVJOtOSmgfNJxWiHHGS0GMdKlKslMuRYGOZzySp2w
2026-01-03T10:14:58.704+07:00  INFO 13396 --- [auth-server] [https-jsse-nio-8282-exec-9] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>> ID Token: eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJ2YW5oMmszQGdtYWlsLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2NzQxMDA5OCwiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY3NDExODk4LCJpYXQiOjE3Njc0MTAwOTgsIm5vbmNlIjoidEtfeDJoSk1hckJEU0tOVXdZdm4yODUyR3hmMTJXZzVlZW1Bc3dnWWdrWSIsImp0aSI6IjA0OTc4YTczLTk0NmYtNDQ5Yy1iNjNlLWMwYjEwNzkzZWViZCIsImF1dGhvcml0aWVzIjpbIlJPTEVfQ1VTVE9NRVIiXSwic2lkIjoicGxRWkx2M19rZ3pfeW5Mb1RVQ1VDbGNORWVLYWVMVEgtZnVHOFdPb3pQYyJ9.mGW38Lkoqm43Mf10eqZh09Oj8CS19PtlVAI83gwOrltdvx4yUcUl81O0vrUjeKrrfEtX4sW4tXweiSRsjzDPBhpoqAesvg3fFU6nqnXj4ZLuv5tEX5KbibpAtaOoHww2RPQo24PjV8sE0QzWB6ar_s6VAyWd6nrDIML_5D3PHVKrjEJiJ0l5sdoWxuJzwp0YHf8eu_Tw5qPk4BitraBCv_gaDTRVl-JpyQNanRrz1sF8sRZXc1yYDd7DDAlXX9DqAdLLYQc6vCBo7TPabM7lNU5gmHCR7QSUx_Xy0RYH7Ds6Qrg19G5RAgSAy95MgAKlLqpyyrdCRiN9phoHEE7FTg
2026-01-03T10:14:58.704+07:00  INFO 13396 --- [auth-server] [https-jsse-nio-8282-exec-9] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>>>> Refresh token value: FA0ajixMivKTj10FVGmlob-lN6s3WhfrLs0lc9aet2bR581WRkNXtG4awImbt-LebWLzQf7IoF9YZyf6KFFikkMd3sM6q-yeSISOgelauJjburDUQwk3IDvi9G_V_1lh
2026-01-03T10:14:58.923+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/jwks
2026-01-03T10:14:58.958+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /userinfo
2026-01-03T10:14:58.980+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2026-01-03T10:14:58.983+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-1] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@f860918, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_openid, SCOPE_profile]]
2026-01-03T10:14:59.395+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T10:14:59.408+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=vanh2k3@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CUSTOMER]]]
2026-01-03T10:14:59.409+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T10:15:33.402+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T10:15:33.411+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-3] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=vanh2k3@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CUSTOMER]]]
2026-01-03T10:15:33.411+07:00 DEBUG 13396 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T11:51:20.774+07:00  INFO 17296 --- [auth-server] [restartedMain] c.b.auth_server.AuthServerApplication    : Starting AuthServerApplication using Java 21.0.3 with PID 17296 (C:\Users\PC\OneDrive\Desktop\bookommerce\auth-server\target\classes started by PC in C:\Users\PC\OneDrive\Desktop\bookommerce\auth-server)
2026-01-03T11:51:20.782+07:00  INFO 17296 --- [auth-server] [restartedMain] c.b.auth_server.AuthServerApplication    : No active profile set, falling back to 1 default profile: "default"
2026-01-03T11:51:20.952+07:00  INFO 17296 --- [auth-server] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03T11:51:20.954+07:00  INFO 17296 --- [auth-server] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03T11:51:25.882+07:00  INFO 17296 --- [auth-server] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03T11:51:26.096+07:00  INFO 17296 --- [auth-server] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 193 ms. Found 6 JPA repository interfaces.
2026-01-03T11:51:29.949+07:00  INFO 17296 --- [auth-server] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8282 (https)
2026-01-03T11:51:30.040+07:00  INFO 17296 --- [auth-server] [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-03T11:51:30.043+07:00  INFO 17296 --- [auth-server] [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-01-03T11:51:30.189+07:00  INFO 17296 --- [auth-server] [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-03T11:51:30.190+07:00  INFO 17296 --- [auth-server] [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 9233 ms
2026-01-03T11:51:32.507+07:00  INFO 17296 --- [auth-server] [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-03T11:51:32.742+07:00  INFO 17296 --- [auth-server] [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.36.Final
2026-01-03T11:51:32.852+07:00  INFO 17296 --- [auth-server] [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2026-01-03T11:51:33.645+07:00  INFO 17296 --- [auth-server] [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-03T11:51:33.736+07:00  INFO 17296 --- [auth-server] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-03T11:51:34.582+07:00  INFO 17296 --- [auth-server] [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@36e296ff
2026-01-03T11:51:34.609+07:00  INFO 17296 --- [auth-server] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-03T11:51:35.412+07:00  WARN 17296 --- [auth-server] [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-03T11:51:35.685+07:00  INFO 17296 --- [auth-server] [restartedMain] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.44
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-03T11:51:38.540+07:00  INFO 17296 --- [auth-server] [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-03T11:51:39.464+07:00  INFO 17296 --- [auth-server] [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-03T11:51:41.125+07:00  INFO 17296 --- [auth-server] [restartedMain] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
2026-01-03T11:51:41.232+07:00 DEBUG 17296 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module org.springframework.security.jackson2.CoreJackson2Module, now registering
2026-01-03T11:51:41.234+07:00 DEBUG 17296 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module org.springframework.security.web.jackson2.WebJackson2Module, now registering
2026-01-03T11:51:41.236+07:00 DEBUG 17296 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module org.springframework.security.web.server.jackson2.WebServerJackson2Module, now registering
2026-01-03T11:51:41.238+07:00 DEBUG 17296 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module org.springframework.security.web.jackson2.WebServletJackson2Module, now registering
2026-01-03T11:51:41.244+07:00 DEBUG 17296 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module org.springframework.security.oauth2.client.jackson2.OAuth2ClientJackson2Module, now registering
2026-01-03T11:51:41.246+07:00 DEBUG 17296 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module com.fasterxml.jackson.datatype.jsr310.JavaTimeModule, now registering
2026-01-03T11:51:41.581+07:00  INFO 17296 --- [auth-server] [restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-03T11:51:42.368+07:00 DEBUG 17296 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module org.springframework.security.jackson2.CoreJackson2Module, now registering
2026-01-03T11:51:42.370+07:00 DEBUG 17296 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module org.springframework.security.web.jackson2.WebJackson2Module, now registering
2026-01-03T11:51:42.373+07:00 DEBUG 17296 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module org.springframework.security.web.server.jackson2.WebServerJackson2Module, now registering
2026-01-03T11:51:42.373+07:00 DEBUG 17296 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module org.springframework.security.web.jackson2.WebServletJackson2Module, now registering
2026-01-03T11:51:42.374+07:00 DEBUG 17296 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module org.springframework.security.oauth2.client.jackson2.OAuth2ClientJackson2Module, now registering
2026-01-03T11:51:42.374+07:00 DEBUG 17296 --- [auth-server] [restartedMain] o.s.s.jackson2.SecurityJackson2Modules   : Loaded module com.fasterxml.jackson.datatype.jsr310.JavaTimeModule, now registering
2026-01-03T11:51:42.718+07:00  WARN 17296 --- [auth-server] [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-03T11:51:46.287+07:00  INFO 17296 --- [auth-server] [restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint beneath base path '/actuator'
2026-01-03T11:51:48.510+07:00 DEBUG 17296 --- [auth-server] [restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure org.springframework.security.oauth2.server.authorization.config.annotation.web.configurers.OAuth2AuthorizationServerConfigurer$$Lambda/0x0000018404cb3850@586d25cf with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, AuthorizationServerContextFilter, HeaderWriterFilter, CsrfFilter, OidcLogoutEndpointFilter, LogoutFilter, OAuth2AuthorizationServerMetadataEndpointFilter, OAuth2AuthorizationEndpointFilter, OAuth2DeviceVerificationEndpointFilter, OidcProviderConfigurationEndpointFilter, NimbusJwkSetEndpointFilter, OAuth2ClientAuthenticationFilter, BearerTokenAuthenticationFilter, AuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter, OAuth2TokenEndpointFilter, OAuth2TokenIntrospectionEndpointFilter, OAuth2TokenRevocationEndpointFilter, OAuth2DeviceAuthorizationEndpointFilter, OidcUserInfoEndpointFilter
2026-01-03T11:51:48.702+07:00 DEBUG 17296 --- [auth-server] [restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, ForceEagerSessionCreationFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, OAuth2AuthorizationRequestRedirectFilter, OAuth2LoginAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-03T11:51:48.756+07:00  INFO 17296 --- [auth-server] [restartedMain] c.b.a.config.SessionCookieConfig         : >>>>>>>>>>>>>>>>>>>> CookieSerializer configured
2026-01-03T11:51:49.282+07:00  WARN 17296 --- [auth-server] [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : Unable to start LiveReload server
2026-01-03T11:51:49.458+07:00  INFO 17296 --- [auth-server] [restartedMain] o.a.t.util.net.NioEndpoint.certificate   : Connector [https-jsse-nio-8282], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [C:\Users\PC\.keystore] using alias [bookommerce_ssl] with trust store [null]
2026-01-03T11:51:49.492+07:00  INFO 17296 --- [auth-server] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8282 (https) with context path '/'
2026-01-03T11:51:49.531+07:00  INFO 17296 --- [auth-server] [restartedMain] c.b.auth_server.AuthServerApplication    : Started AuthServerApplication in 31.624 seconds (process running for 33.123)
2026-01-03T11:51:51.177+07:00  INFO 17296 --- [auth-server] [RMI TCP Connection(2)-127.0.0.1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-03T11:51:51.178+07:00  INFO 17296 --- [auth-server] [RMI TCP Connection(2)-127.0.0.1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-03T11:51:51.181+07:00  INFO 17296 --- [auth-server] [RMI TCP Connection(2)-127.0.0.1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2026-01-03T11:52:13.749+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /.well-known/openid-configuration
2026-01-03T11:52:13.951+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/jwks
2026-01-03T11:53:48.766+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /page/store-login
2026-01-03T11:53:48.815+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-7] .s.s.w.s.ForceEagerSessionCreationFilter : Created session eagerly
2026-01-03T11:53:48.836+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T11:53:48.840+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.s.w.session.SessionManagementFilter  : Request requested invalid session id 8d95f34f-1803-471d-832e-6e135c8c8345
2026-01-03T11:53:48.865+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /page/store-login
2026-01-03T11:53:50.613+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /page/store-login
2026-01-03T11:53:50.640+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T11:53:50.644+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /page/store-login
2026-01-03T11:53:52.372+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/login/store
2026-01-03T11:53:52.407+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T11:53:52.412+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/login/store
2026-01-03T11:53:53.554+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-03T11:53:53.564+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-2] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@44294bf1]
2026-01-03T11:53:55.818+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=FQKo1lAvn25s6CitRCwVMVhgl8k-YQ8HxoPTIQ2m90Y%3D&redirect_uri=https://bff.bookommerce.com:8181/login/oauth2/code/bff&nonce=VSnad5j-67Eckcoxv-ZYGLwqs1n3lv5kme7x4xBaeX8
2026-01-03T11:53:55.848+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-1] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T11:53:56.384+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.s.core.session.SessionRegistryImpl   : Registering session fad9f5f2-af5e-4c00-a4bd-ee327fc9d84f, for principal org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]]
2026-01-03T11:53:56.384+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-1] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://bff.bookommerce.com:8181/login/oauth2/code/bff?code=UpG-DDy2VcXWkXT3bPShE2gTbTGOfAT75PQVvD9NAk01s-hZz6fROG5fyKDTMU_QjzL4ilIbBSwDZ2CFojpPy0xP9BLSQNmoqLV9aSarNs0r8Gfk2534hikaSVlJmb8H&state=FQKo1lAvn25s6CitRCwVMVhgl8k-YQ8HxoPTIQ2m90Y%3D
2026-01-03T11:53:56.791+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /oauth2/token
2026-01-03T11:53:57.859+07:00  INFO 17296 --- [auth-server] [https-jsse-nio-8282-exec-7] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>>>> Access token value: eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJwcm9kbWFuQGJvb2tvbW1lcmNlLmNvbSIsImF1ZCI6ImJmZiIsIm5iZiI6MTc2NzQxNjAzNywic2NvcGUiOlsib3BlbmlkIiwicHJvZmlsZSJdLCJpc3MiOiJodHRwczovL2F1dGguYm9va29tbWVyY2UuY29tOjgyODIiLCJleHAiOjE3OTg5NTIwMzcsImlhdCI6MTc2NzQxNjAzNywianRpIjoiYmZmZWM4ZWEtYjIxZS00ZjYzLTlmZWQtYzdkYTcyODIyZGU1IiwiYXV0aG9yaXRpZXMiOlsiUk9MRV9QUk9EVUNUX01BTkFHRVIiXX0.DiBtlq5EQIyseQleGrS8gLq5gToUfFMEyRDlXiRfTXgFlXsY7sAs4omm3L5N-F2q0pe0otyNVQ_VPxFuxeuX87N4d8EPI5RjOY0kmS97WKTk4TH7hVVqBRD6GiXSepW2B-BbQ_KO1tj2Eu6ZhKgBbUZFmph2ZEfYPKbeyD483gTz5mdlJsudfkVIG45yNVnIjbL5n8gjnYAaJWoQoVobl71pGZrLzAdMogmGxkfqTyBCz0wQKLLb46K8-L5muDQdkEkQb3jhzurXP2L64jOguPheqj__zMDUw8lKFUgb9EqO1XcjtfPE1TTLZr8Ohp3lQLi27e1GwM8XE5CtHfKhUA
2026-01-03T11:53:57.859+07:00  INFO 17296 --- [auth-server] [https-jsse-nio-8282-exec-7] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>> ID Token: eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJwcm9kbWFuQGJvb2tvbW1lcmNlLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2NzQxNjAzNiwiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY3NDE3ODM3LCJpYXQiOjE3Njc0MTYwMzcsIm5vbmNlIjoiVlNuYWQ1ai02N0Vja2NveHYtWllHTHdxczFuM2x2NWttZTd4NHhCYWVYOCIsImp0aSI6ImFiMzUzZGMyLTEwODctNGIzMy1iNWU3LTE5MWNiOTgxYmU3YSIsImF1dGhvcml0aWVzIjpbIlJPTEVfUFJPRFVDVF9NQU5BR0VSIl0sInNpZCI6Ilp4eGpGQ1RCXzBTTHVVRnZGdEFRYmdEelNVckRKRF9Bb19YMHlSejY5STgifQ.O-BQ3xm8XV2vFFqQcUzoNmJ7ePbfFuAQOh4pKJfm8YxLlhQeBC3nx8z-D47aeksxd7ifoLJn_k0yYHRUuO3uttvNlLsjQQnIupR9j1iryswo-reI7GPZvWln-IGGz-3vIR1L2P0bYdJPnyY3LHAk1YFODiZINpK8daAy1wuJXmijPyoJrOl9yzYD2jh0Do0d7KSR8bSpIx2mIZJTUAg6pDtXMY2BCFL3vzS8v3LYNdNCkT6iQwkk-LgzP4ha7_w6riKBlxTSUqsZ1ITnyiCjRJJHXIXs8Z1JTOooCxszylYHhVXz7ZRUxTVQwdQL_G0Hr9-d75SUsWoYPX2anmRZ5A
2026-01-03T11:53:57.863+07:00  INFO 17296 --- [auth-server] [https-jsse-nio-8282-exec-7] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>>>> Refresh token value: 7xO5ki-mVKRc0CpPnarTb8M_RbOY_8fwjZN-cr2je53LqEWHzArvPdQxlPYgzbYe6_VrEXEIhMBLGmWqSlt_f3Sb-Ek5ZYqe0KUO0x-3gmwNaF7O4RDKgfsZGIuFlt4R
2026-01-03T11:53:58.331+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/jwks
2026-01-03T11:53:58.399+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /userinfo
2026-01-03T11:53:58.440+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2026-01-03T11:53:58.446+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-2] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@a4b87037, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_openid, SCOPE_profile]]
2026-01-03T11:58:48.820+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T11:58:48.832+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-7] .s.s.w.s.ForceEagerSessionCreationFilter : Created session eagerly
2026-01-03T11:58:48.926+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T11:58:49.123+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-7] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@41881ace, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
2026-01-03T11:58:49.125+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-7] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@3deb4ab4, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
2026-01-03T11:58:49.125+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-7] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@4c1aff1a
2026-01-03T11:58:49.310+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /page/store-login
2026-01-03T11:58:49.334+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T11:58:49.336+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /page/store-login
2026-01-03T11:58:49.717+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /page/store-login
2026-01-03T11:58:49.727+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T11:58:49.729+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /page/store-login
2026-01-03T11:58:51.255+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/login/store
2026-01-03T11:58:51.263+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T11:58:51.264+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/login/store
2026-01-03T11:58:51.422+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-03T11:58:51.424+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-6] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@5950eec9]
2026-01-03T11:58:52.975+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=cDiaOBTOO8dfVvzKvwIT1dWQ3nLBNDzDnnHYHxVLkWU%3D&redirect_uri=https://bff.bookommerce.com:8181/login/oauth2/code/bff&nonce=vuo2QVXFE-o5QzGCwG05SdmkKFHd3s-Zj9ri0hU4UMs
2026-01-03T11:58:53.010+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-9] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T11:58:53.058+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-9] o.s.s.core.session.SessionRegistryImpl   : Registering session a5f1dab2-b44d-49fe-8bf7-c4135f36102b, for principal org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]]
2026-01-03T11:58:53.058+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-9] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://bff.bookommerce.com:8181/login/oauth2/code/bff?code=CwKTZbS5JI07OUqfPtIJQqptwItO2fJpUYe-9xzBc9-6byDw7xhGts89eE-zMRflNBTC9jp4r54ohPl5H6p3zRY_vgPAbS_xdmHhMSVW4beAPznQtXuYvtnxroGO_2Cl&state=cDiaOBTOO8dfVvzKvwIT1dWQ3nLBNDzDnnHYHxVLkWU%3D
2026-01-03T11:58:53.316+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /oauth2/token
2026-01-03T11:58:53.833+07:00  INFO 17296 --- [auth-server] [https-jsse-nio-8282-exec-2] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>>>> Access token value: eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJwcm9kbWFuQGJvb2tvbW1lcmNlLmNvbSIsImF1ZCI6ImJmZiIsIm5iZiI6MTc2NzQxNjMzMywic2NvcGUiOlsib3BlbmlkIiwicHJvZmlsZSJdLCJpc3MiOiJodHRwczovL2F1dGguYm9va29tbWVyY2UuY29tOjgyODIiLCJleHAiOjE3OTg5NTIzMzMsImlhdCI6MTc2NzQxNjMzMywianRpIjoiMTU4M2NkMGMtNzQ2OC00ZmI1LWIzMmQtNmViNzQ5OTI3ZWMxIiwiYXV0aG9yaXRpZXMiOlsiUk9MRV9QUk9EVUNUX01BTkFHRVIiXX0.iP4sR2vl7ODRGgsr9fypd9zPfE0BFTTgSAM4ZzE3-dAIVVm0C8j2uIko-ypevLaEk6j0u9zATch_U0tLGMh0w5wpG9BObyj5K8yQGLaPUs84zC4Rml7Dn9vzpJHcBVYUpDWZUScPwO_-3Nnla5pUvk4woV2BDGDE5WQPbMxUYL2mTGUykFhDolPvlHjckSQRrgK6_H2fui9u4BJXDp3qnpaDxCbSfhud-WZhyb8-7924iuG7U9BmurCNj7UcLPJb9m-abfsz9E9CsL1U36v-GxyBtZpZIbmpLJYuhwwtkMjgGOV9znf94MgJ1UuT48rygAdrFHQEp-JguwOG6DZ2XA
2026-01-03T11:58:53.835+07:00  INFO 17296 --- [auth-server] [https-jsse-nio-8282-exec-2] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>> ID Token: eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJwcm9kbWFuQGJvb2tvbW1lcmNlLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2NzQxNjMzMywiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY3NDE4MTMzLCJpYXQiOjE3Njc0MTYzMzMsIm5vbmNlIjoidnVvMlFWWEZFLW81UXpHQ3dHMDVTZG1rS0ZIZDNzLVpqOXJpMGhVNFVNcyIsImp0aSI6ImQyZjI1ZDk1LTY2YjktNDk2Ni04NWU4LWI3MWRlMDEzMGQ4NCIsImF1dGhvcml0aWVzIjpbIlJPTEVfUFJPRFVDVF9NQU5BR0VSIl0sInNpZCI6InVvV3FfeklZRHlRTjdadVl0eWc4ZlpmRFFtRkdRYy0waGlYa2lFOUduZ2cifQ.L7Rb1glqjhVbgDgFB-fRGUQIRQtHiTfR2wtU0U1ENMosdiNe6a3mw9AVAzW4UZ6u7Xn3w9zvzzZIUyxL6-XU4ngr_Dc19SLkXBDAOYvUgrv3WqvWNVZZ_RBFx8OK7YGFup2igEjFUuPblHaxzxWMJryijbw3RQHK937AL9fsldtxo99OuMn4jx0FdRFGxG3QV5xL1mkEauPnrxGKOt284D7iNjTq7QYmBIq96SuTUTOU2HYcrE8I46Uh5c4sp9TU4W0T5VknZlSUH2kt9G_6L-ecljOl2M1uAeWIVAZcVk2LY0oQ_sy940Nzx_MwHrqYyB_FgsOPhnHyAXLzqhZWKw
2026-01-03T11:58:53.835+07:00  INFO 17296 --- [auth-server] [https-jsse-nio-8282-exec-2] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>>>> Refresh token value: HLPtEgk0gc3tiQ6g3KbisDZ087BeuEahz9qFLc6whbjISYVAA7dq2NCp_JRMfLzmo__Ee0g490cOc1TP2EXHH0UckurKItnUCsEI2lZHayKJtuW3VI7KEguH_hU2wYWi
2026-01-03T11:58:54.027+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/jwks
2026-01-03T11:58:54.050+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /userinfo
2026-01-03T11:58:54.060+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-7] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2026-01-03T11:58:54.061+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-7] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@72ea65d4, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_openid, SCOPE_profile]]
2026-01-03T12:04:39.608+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T12:04:39.635+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-2] .s.s.w.s.ForceEagerSessionCreationFilter : Created session eagerly
2026-01-03T12:04:39.669+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T12:04:39.691+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-2] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@41881ace, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
2026-01-03T12:04:39.692+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-2] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@3deb4ab4, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
2026-01-03T12:04:39.692+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-2] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@4c1aff1a
2026-01-03T12:04:39.843+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /page/store-login
2026-01-03T12:04:39.877+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T12:04:39.883+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /page/store-login
2026-01-03T12:04:40.402+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /page/store-login
2026-01-03T12:04:40.424+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T12:04:40.424+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /page/store-login
2026-01-03T12:04:41.944+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/login/store
2026-01-03T12:04:41.954+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-03T12:04:41.955+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/login/store
2026-01-03T12:04:42.127+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-03T12:04:42.129+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-10] w.c.HttpSessionSecurityContextRepository : Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@4457fdb]
2026-01-03T12:04:43.699+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=-irFN6tNl8sId0d9LXQr0JG-QES7xU8ldaR2LUXyrCQ%3D&redirect_uri=https://bff.bookommerce.com:8181/login/oauth2/code/bff&nonce=tM81A5UNW_qxbYUYPgdmv56Kw4cAEvh-XhMo6uW7zLg
2026-01-03T12:04:43.717+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T12:04:43.780+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.s.core.session.SessionRegistryImpl   : Registering session 86de29a4-d29f-49a6-b17c-a6e0a4fd9256, for principal org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]]
2026-01-03T12:04:43.782+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.s.web.DefaultRedirectStrategy        : Redirecting to https://bff.bookommerce.com:8181/login/oauth2/code/bff?code=qdwm9qvIDhAjjfbNSkcRbEaMcsvcVFlwgeC0CKcQPz1VmKPGTISJX4uABSIFP-hM1Klh9UBALBaQwXZ0oBdbicr6DcqVBEASMTzg7bicNNqcMaY9dGi6oDw8mTeRNSZk&state=-irFN6tNl8sId0d9LXQr0JG-QES7xU8ldaR2LUXyrCQ%3D
2026-01-03T12:04:44.055+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /oauth2/token
2026-01-03T12:04:44.564+07:00  INFO 17296 --- [auth-server] [https-jsse-nio-8282-exec-6] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>>>> Access token value: eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJwcm9kbWFuQGJvb2tvbW1lcmNlLmNvbSIsImF1ZCI6ImJmZiIsIm5iZiI6MTc2NzQxNjY4NCwic2NvcGUiOlsib3BlbmlkIiwicHJvZmlsZSJdLCJpc3MiOiJodHRwczovL2F1dGguYm9va29tbWVyY2UuY29tOjgyODIiLCJleHAiOjE3OTg5NTI2ODQsImlhdCI6MTc2NzQxNjY4NCwianRpIjoiZTIwNDg0ZGEtMjVjYi00MzNjLWE2ZWMtMTc2OTJlNWFhYzAzIiwiYXV0aG9yaXRpZXMiOlsiUk9MRV9QUk9EVUNUX01BTkFHRVIiXX0.OR7nH9jwdyLuq7d5ip9btx8zNaWYXQTH99yP_C7hQFOEonP6Dn9Pa5uX1W_B89dFzH01-dNx6L_N7Rk1h6N8CPiXvNGhmAsK6FZ5QU2qBNN5QkjC62bHT3qc8Gr2y2yRH46jwpkoW0ByKWoe19UyAUkZI4I1JmKNyDi-IVKLL8KMqi89zWw4qmw2kKTKW27hWQLeyKas4eA1m9JG0zJwEmdNWieaKRKnSAdvyMlpD0ceV6CGfFrjuItFvOhntKtilNmO9760LJolMl1qPIG8-UjhL5dG-_n_UNoP5gLqB6SJagRI_OuqBz2t277yLvFnKxhbjTM7yV7sn26vbADS5A
2026-01-03T12:04:44.565+07:00  INFO 17296 --- [auth-server] [https-jsse-nio-8282-exec-6] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>> ID Token: eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJwcm9kbWFuQGJvb2tvbW1lcmNlLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2NzQxNjY4MywiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY3NDE4NDg0LCJpYXQiOjE3Njc0MTY2ODQsIm5vbmNlIjoidE04MUE1VU5XX3F4YllVWVBnZG12NTZLdzRjQUV2aC1YaE1vNnVXN3pMZyIsImp0aSI6IjIzZTI4NWNjLWU2NmMtNGFlMi05NzUwLTQxMzQzMmUyMmI4NyIsImF1dGhvcml0aWVzIjpbIlJPTEVfUFJPRFVDVF9NQU5BR0VSIl0sInNpZCI6IlEzSGJaV0dSejhmc2NiVllSMXBPMmwyQXZRTXpUR0RURV9QZlVBRE5MaFUifQ.LqpU-flRXIqZS8mLj_X2bv2j-qrmPLMBmzrq52CfrhRGnhpMiuQDOU8QFZowoMipS1WnUCR3lhmhwKYnFADkc-FANk2xsF3w4u-Af3r4rT3JLERZ3aH3sIwb4-JdGGcJvopHEKFUAcNKLJko3-o9xgotj_Tb_MN9doQQzBOtm1WUjG0kRd46QSwbLGqv9MMapoN5SWZbaH0CTVKty705RJqxK7eR6KOV6Vk3rtXfWbVs6cs-H6j0UlOq_NiPRaiR92MhLBMIFqUUhRqIoL2isVmevHpS1ZXqhkm7RtNivXCSpUVa0ovX3Am1YapnRq-A_Cy09AJX2U0lSPaOs7Eo4w
2026-01-03T12:04:44.566+07:00  INFO 17296 --- [auth-server] [https-jsse-nio-8282-exec-6] CustomOAuth2AuthenticationSuccessHandler : >>>>>>>>>>>>>>>>>>>> Refresh token value: PC4Rq6SpBRN_XupD_TMMkykRPE8TxgLUWCxhAY9fYNgHBo9xLPqfUvs43C7wbZAvzyYAqyPuAjnUD-5EAysZz_ycoapIlls51WKgIKXgjqD0sm9gVi74Pm_bJoL6FQx3
2026-01-03T12:04:44.818+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/jwks
2026-01-03T12:04:44.855+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /userinfo
2026-01-03T12:04:44.862+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-10] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2026-01-03T12:04:44.864+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-10] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@df2aba1b, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_openid, SCOPE_profile]]
2026-01-03T12:04:45.930+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T12:04:45.987+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-5] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T12:04:46.012+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T12:04:47.414+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T12:04:47.427+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T12:04:47.427+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T12:05:09.079+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T12:05:09.091+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-4] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T12:05:09.093+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/me
2026-01-03T12:05:30.486+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /oauth2/jwks
2026-01-03T12:06:02.526+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/me
2026-01-03T12:06:02.555+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-2] w.c.HttpSessionSecurityContextRepository : Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=prodman@bookommerce.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_PRODUCT_MANAGER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
2026-01-03T12:06:02.559+07:00 DEBUG 17296 --- [auth-server] [https-jsse-nio-8282-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/me
