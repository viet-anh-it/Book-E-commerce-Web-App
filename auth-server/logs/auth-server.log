14:57:42.052 | INFO | AuthServerApplication: Starting AuthServerApplication using Java 21.0.3 with PID 13004 (C:\Users\PC\OneDrive\Desktop\bookommerce\auth-server\target\classes started by PC in C:\Users\PC\OneDrive\Desktop\bookommerce\auth-server)
14:57:42.069 | INFO | AuthServerApplication: No active profile set, falling back to 1 default profile: "default"
14:57:42.311 | INFO | DevToolsPropertyDefaultsPostProcessor: Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
14:57:42.313 | INFO | DevToolsPropertyDefaultsPostProcessor: For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
14:57:50.632 | INFO | RepositoryConfigurationDelegate: Multiple Spring Data modules found, entering strict repository configuration mode
14:57:50.636 | INFO | RepositoryConfigurationDelegate: Bootstrapping Spring Data JPA repositories in DEFAULT mode.
14:57:51.227 | INFO | RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 563 ms. Found 6 JPA repository interfaces.
14:57:51.288 | INFO | RepositoryConfigurationDelegate: Multiple Spring Data modules found, entering strict repository configuration mode
14:57:51.294 | INFO | RepositoryConfigurationDelegate: Bootstrapping Spring Data Redis repositories in DEFAULT mode.
14:57:51.369 | INFO | RepositoryConfigurationExtensionSupport: Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.bookommerce.auth_server.repository.oauth2.AuthorizationConsentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
14:57:51.372 | INFO | RepositoryConfigurationExtensionSupport: Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.bookommerce.auth_server.repository.oauth2.AuthorizationRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
14:57:51.376 | INFO | RepositoryConfigurationExtensionSupport: Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.bookommerce.auth_server.repository.oauth2.ClientRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
14:57:51.380 | INFO | RepositoryConfigurationExtensionSupport: Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.bookommerce.auth_server.repository.PermissionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
14:57:51.382 | INFO | RepositoryConfigurationExtensionSupport: Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.bookommerce.auth_server.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
14:57:51.383 | INFO | RepositoryConfigurationExtensionSupport: Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.bookommerce.auth_server.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
14:57:51.384 | INFO | RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 49 ms. Found 0 Redis repository interfaces.
14:57:59.040 | INFO | TomcatWebServer: Tomcat initialized with port 8282 (https)
14:57:59.238 | INFO | StandardService: Starting service [Tomcat]
14:57:59.272 | INFO | StandardEngine: Starting Servlet engine: [Apache Tomcat/10.1.50]
14:57:59.527 | INFO | [/]: Initializing Spring embedded WebApplicationContext
14:57:59.545 | INFO | ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 17216 ms
14:58:01.414 | INFO | LogHelper: HHH000204: Processing PersistenceUnitInfo [name: default]
14:58:01.845 | INFO | Version: HHH000412: Hibernate ORM core version 6.6.39.Final
14:58:02.006 | INFO | RegionFactoryInitiator: HHH000026: Second-level cache disabled
14:58:04.547 | INFO | SpringPersistenceUnitInfo: No LoadTimeWeaver setup: ignoring JPA class transformer
14:58:04.695 | INFO | HikariDataSource: HikariPool-1 - Starting...
14:58:05.812 | INFO | HikariPool: HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3f68032c
14:58:05.816 | INFO | HikariDataSource: HikariPool-1 - Start completed.
14:58:06.000 | WARN | deprecation: HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
14:58:06.051 | INFO | pooling: HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.44
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
14:58:10.852 | INFO | JtaPlatformInitiator: HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
14:58:11.175 | INFO | LocalContainerEntityManagerFactoryBean: Initialized JPA EntityManagerFactory for persistence unit 'default'
14:58:12.522 | INFO | InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer: Global AuthenticationManager configured with UserDetailsService bean with name userDetailsService
14:58:15.393 | INFO | QueryEnhancerFactory: Hibernate is in classpath; If applicable, HQL parser will be used.
14:58:18.866 | DEBUG | SecurityJackson2Modules: Loaded module org.springframework.security.jackson2.CoreJackson2Module, now registering
14:58:18.873 | DEBUG | SecurityJackson2Modules: Loaded module org.springframework.security.web.jackson2.WebJackson2Module, now registering
14:58:18.884 | DEBUG | SecurityJackson2Modules: Loaded module org.springframework.security.web.server.jackson2.WebServerJackson2Module, now registering
14:58:18.891 | DEBUG | SecurityJackson2Modules: Loaded module org.springframework.security.web.jackson2.WebServletJackson2Module, now registering
14:58:18.896 | DEBUG | SecurityJackson2Modules: Loaded module org.springframework.security.oauth2.client.jackson2.OAuth2ClientJackson2Module, now registering
14:58:18.902 | DEBUG | SecurityJackson2Modules: Loaded module com.fasterxml.jackson.datatype.jsr310.JavaTimeModule, now registering
14:58:19.661 | DEBUG | SecurityJackson2Modules: Loaded module org.springframework.security.jackson2.CoreJackson2Module, now registering
14:58:19.694 | DEBUG | SecurityJackson2Modules: Loaded module org.springframework.security.web.jackson2.WebJackson2Module, now registering
14:58:19.699 | DEBUG | SecurityJackson2Modules: Loaded module org.springframework.security.web.server.jackson2.WebServerJackson2Module, now registering
14:58:19.703 | DEBUG | SecurityJackson2Modules: Loaded module org.springframework.security.web.jackson2.WebServletJackson2Module, now registering
14:58:19.705 | DEBUG | SecurityJackson2Modules: Loaded module org.springframework.security.oauth2.client.jackson2.OAuth2ClientJackson2Module, now registering
14:58:19.708 | DEBUG | SecurityJackson2Modules: Loaded module com.fasterxml.jackson.datatype.jsr310.JavaTimeModule, now registering
14:58:20.014 | WARN | JpaBaseConfiguration$JpaWebConfiguration: spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
14:58:24.593 | INFO | EndpointLinksResolver: Exposing 1 endpoint beneath base path '/actuator'
14:58:25.801 | DEBUG | DefaultSecurityFilterChain: Will secure org.springframework.security.oauth2.server.authorization.config.annotation.web.configurers.OAuth2AuthorizationServerConfigurer$$Lambda/0x000001bd29da9150@6583cb8e with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, AuthorizationServerContextFilter, HeaderWriterFilter, CsrfFilter, OidcLogoutEndpointFilter, LogoutFilter, OAuth2AuthorizationServerMetadataEndpointFilter, OAuth2AuthorizationEndpointFilter, OAuth2DeviceVerificationEndpointFilter, OidcProviderConfigurationEndpointFilter, NimbusJwkSetEndpointFilter, OAuth2ClientAuthenticationFilter, BearerTokenAuthenticationFilter, AuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter, OAuth2TokenEndpointFilter, OAuth2TokenIntrospectionEndpointFilter, OAuth2TokenRevocationEndpointFilter, OAuth2DeviceAuthorizationEndpointFilter, OidcUserInfoEndpointFilter
14:58:26.050 | DEBUG | DefaultSecurityFilterChain: Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, OAuth2AuthorizationRequestRedirectFilter, OAuth2LoginAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
14:58:28.056 | WARN | OptionalLiveReloadServer: Unable to start LiveReload server
14:58:28.520 | INFO | certificate: Connector [https-jsse-nio-8282], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [Set directly - location unknown] using alias [bookommerce_ssl] with trust store [null]
14:58:28.584 | INFO | TomcatWebServer: Tomcat started on port 8282 (https) with context path '/'
14:58:28.662 | INFO | AuthServerApplication: Started AuthServerApplication in 47.849 seconds (process running for 50.182)
14:59:00.027 | DEBUG | JdbcTemplate: Executing prepared SQL update
14:59:00.033 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
14:59:00.051 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768291140021], value class [java.lang.Long], SQL type unknown
14:59:00.068 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
14:59:07.817 | INFO | [/]: Initializing Spring DispatcherServlet 'dispatcherServlet'
14:59:07.819 | INFO | DispatcherServlet: Initializing Servlet 'dispatcherServlet'
14:59:07.826 | INFO | DispatcherServlet: Completed initialization in 6 ms
14:59:07.923 | DEBUG | FilterChainProxy: Securing GET /oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=pSSen0re0NXzz7KTAloA-mLJKmdJBb0UZYzDc-lgtg4%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=Jb7CqniLXeQZOOddXdUPn9orrsWsY7rPFEYd0cLxfRE
14:59:08.510 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:59:08.549 | DEBUG | HttpSessionRequestCache: Saved request https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=pSSen0re0NXzz7KTAloA-mLJKmdJBb0UZYzDc-lgtg4%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=Jb7CqniLXeQZOOddXdUPn9orrsWsY7rPFEYd0cLxfRE&continue to session
14:59:08.552 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/page/login
14:59:08.558 | DEBUG | JdbcTemplate: Executing prepared SQL update
14:59:08.559 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
14:59:08.570 | DEBUG | JdbcTemplate: Executing prepared SQL update
14:59:08.573 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
14:59:08.644 | DEBUG | FilterChainProxy: Securing GET /page/login
14:59:08.656 | DEBUG | JdbcTemplate: Executing prepared SQL query
14:59:08.658 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
14:59:08.669 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:59:08.684 | DEBUG | FilterChainProxy: Secured GET /page/login
14:59:09.443 | DEBUG | JdbcTemplate: Executing prepared SQL update
14:59:09.444 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
14:59:09.526 | DEBUG | JdbcTemplate: Executing prepared SQL query
14:59:09.528 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
14:59:15.202 | DEBUG | FilterChainProxy: Securing POST /api/login/customer
14:59:15.213 | DEBUG | JdbcTemplate: Executing prepared SQL query
14:59:15.214 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
14:59:15.222 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:59:15.228 | DEBUG | FilterChainProxy: Secured POST /api/login/customer
14:59:16.063 | DEBUG | DaoAuthenticationProvider: Authenticated user
14:59:16.080 | DEBUG | JdbcTemplate: Executing prepared SQL update
14:59:16.081 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
14:59:16.106 | WARN | ResponseStatusExceptionResolver: Resolved [com.bookommerce.auth_server.exception.AccessDeniedException]
14:59:16.114 | DEBUG | JdbcTemplate: Executing prepared SQL query
14:59:16.115 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
14:59:16.139 | DEBUG | FilterChainProxy: Securing POST /error
14:59:16.144 | DEBUG | FilterChainProxy: Secured POST /error
14:59:16.205 | DEBUG | JdbcTemplate: Executing prepared SQL query
14:59:16.207 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
14:59:16.217 | DEBUG | JdbcTemplate: Executing prepared SQL query
14:59:16.218 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
14:59:16.231 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:59:21.400 | DEBUG | FilterChainProxy: Securing POST /api/login/customer
14:59:21.409 | DEBUG | JdbcTemplate: Executing prepared SQL query
14:59:21.410 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
14:59:21.421 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:59:21.424 | DEBUG | FilterChainProxy: Secured POST /api/login/customer
14:59:21.684 | DEBUG | DaoAuthenticationProvider: Authenticated user
14:59:21.688 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=nguyenvietanh.personal@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@7804646a]
14:59:21.739 | DEBUG | JdbcTemplate: Executing prepared SQL update
14:59:21.739 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
14:59:21.743 | DEBUG | JdbcTemplate: Executing prepared SQL update
14:59:21.744 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
14:59:21.785 | DEBUG | JdbcTemplate: Executing prepared SQL query
14:59:21.786 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
14:59:23.030 | DEBUG | FilterChainProxy: Securing GET /oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=i9oKMQJl9rCXk2AaAIhijS1kzipXfHBlHAutAEulp-g%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=xyuNSNME773HKuhQLLxxuKS8RvdQVFgxnrVdKBWZA2w
14:59:23.035 | DEBUG | JdbcTemplate: Executing prepared SQL query
14:59:23.037 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
14:59:23.052 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=nguyenvietanh.personal@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CUSTOMER]]]
14:59:23.251 | DEBUG | SessionRegistryImpl: Registering session 26709559-5ed6-4d5d-b58d-84f713584f98, for principal org.springframework.security.core.userdetails.User [Username=nguyenvietanh.personal@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CUSTOMER]]
14:59:23.256 | DEBUG | DefaultRedirectStrategy: Redirecting to https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff?code=ECtIMlZ8AnCKUJCDNGGzJZluNLNkHl5IyWJIpX-8dHVTtV9egaUtbDamw_luclF5cwKxj_paxq1dExdpDuu7x6yAJ-RUMyZYNaNXkpip-K7-_aITgnlaqYYXhLdJZ7DG&state=i9oKMQJl9rCXk2AaAIhijS1kzipXfHBlHAutAEulp-g%3D
14:59:23.262 | DEBUG | JdbcTemplate: Executing prepared SQL update
14:59:23.262 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
14:59:23.275 | DEBUG | JdbcTemplate: Executing prepared SQL query
14:59:23.276 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
14:59:23.515 | DEBUG | FilterChainProxy: Securing POST /oauth2/token
14:59:24.942 | INFO | CustomOAuth2AuthenticationSuccessHandler: >>>>>>>>>>>>>>>>>>>> Access token value: eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJuZ3V5ZW52aWV0YW5oLnBlcnNvbmFsQGdtYWlsLmNvbSIsImF1ZCI6ImJmZiIsIm5iZiI6MTc2ODI5MTE2NCwic2NvcGUiOlsib3BlbmlkIiwicHJvZmlsZSJdLCJpc3MiOiJodHRwczovL2F1dGguYm9va29tbWVyY2UuY29tOjgyODIiLCJleHAiOjE3NjgyOTExOTQsImlhdCI6MTc2ODI5MTE2NCwianRpIjoiNDFiNThjOWYtNTU0Yy00NDI2LTgwNjktN2RkNDg1OTViZjUxIiwiYXV0aG9yaXRpZXMiOlsiUk9MRV9DVVNUT01FUiJdfQ.HAmIl7t7CgApXp66pFufWQCQ8YUio-gQNaCiLn4LD-sQVpL6B65oMWOFj8E_ujOgQ7rpLLXciyU_YpneeZ-jMxGxE-3YCSmbIFcqFJ3dlazRCBlJhmAQW74JEVzx1jIE-HIt2wLzqdc5NBtC4peS08pc-esTCfzgMReO9uFqCiSDTRWepK7RQvkq7HHwy9uIiuZF7jBAJnNxjzxs9Vd6ssZsMUCbbC-9j0XlsrIDJ5g39tQ8qH5wgVwdb8fZW37JnV366nH0AuqFVROyvHkGS5QzFCGl-PwkRMxFaiRGi5Whs1KCbIs9KbgpOX9jcnW3L_xbU_lts1aZlIyz6xY5fw
14:59:24.944 | INFO | CustomOAuth2AuthenticationSuccessHandler: >>>>>>>>>>>>>>>>>> ID Token: eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJuZ3V5ZW52aWV0YW5oLnBlcnNvbmFsQGdtYWlsLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2ODI5MTE2MywiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY4MjkyOTY0LCJpYXQiOjE3NjgyOTExNjQsIm5vbmNlIjoieHl1TlNOTUU3NzNIS3VoUUxMeHh1S1M4UnZkUVZGZ3huclZkS0JXWkEydyIsImp0aSI6ImQxYmQ0YTFjLTYzNWItNGMxNi1hZWE2LTE2MWU1OTM4MDY1ZiIsImF1dGhvcml0aWVzIjpbIlJPTEVfQ1VTVE9NRVIiXSwic2lkIjoiYnhSRVRqdTdmWjBRQzZJWThXbjUtZko2NmlXZEZSUVU5bHlxamNBTGxzMCJ9.Fgf2vHWq_T4GK_8gUCC2uXAflFSJ-y-46MUYF21eHyoG763_yQaKONmXWq-2wzklEKL0bvdImKBHT4DNQned-edClKZuEyFvzezhOJQw0X_U0azTdEkmiXPY3p7ifVbQSIZf413INaV-mVZw-hAXN1lVo9a3HJ4xUp45XEKDnTeTnZhE3plQZ_0X4kq62tzWL_1I_PMMNSRuZETMrMpw_ZfUh7fLBbLkeFR-USeefo6b8a59FutIQMRYgFarp2LoJzniOKHq6EzSDZsZ5CtjdL20LyXU3YrkVH538-a2CGEGfRRg8kArOEHhafhwH7FTP-XHudpzoUblK02Xlmq-XA
14:59:24.945 | INFO | CustomOAuth2AuthenticationSuccessHandler: >>>>>>>>>>>>>>>>>>>> Refresh token value: 31SqpLCri8D4n3wqmXoXEWIOjV6Nzg1Z6KYTGe-3HRoPrTh8eFUSbbERlskjw2bd_kdjp0KPvSBCIbBTzxyzknwaHalbpvkwhGNffCpSywVyolyczDbD-_a47KwfiDdH
14:59:25.401 | DEBUG | FilterChainProxy: Securing GET /oauth2/jwks
14:59:25.468 | DEBUG | FilterChainProxy: Securing GET /userinfo
14:59:25.515 | DEBUG | JwtAuthenticationProvider: Authenticated token
14:59:25.519 | DEBUG | BearerTokenAuthenticationFilter: Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@3ff912ec, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_openid, SCOPE_profile]]
15:00:00.011 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:00:00.015 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:00:00.018 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768291200011], value class [java.lang.Long], SQL type unknown
15:00:00.028 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 1 expired sessions
15:01:00.012 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:01:00.013 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:01:00.014 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768291260012], value class [java.lang.Long], SQL type unknown
15:01:00.019 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:02:00.013 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:02:00.019 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:02:00.025 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768291320012], value class [java.lang.Long], SQL type unknown
15:02:00.033 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:03:00.008 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:03:00.012 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:03:00.013 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768291380008], value class [java.lang.Long], SQL type unknown
15:03:00.021 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:04:00.006 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:04:00.030 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:04:00.040 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768291440006], value class [java.lang.Long], SQL type unknown
15:04:00.051 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:05:00.017 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:05:00.018 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:05:00.021 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768291500017], value class [java.lang.Long], SQL type unknown
15:05:00.026 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:06:00.052 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:06:00.151 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:06:00.222 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768291560050], value class [java.lang.Long], SQL type unknown
15:06:00.284 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:07:00.020 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:07:00.035 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:07:00.040 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768291620019], value class [java.lang.Long], SQL type unknown
15:07:00.052 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:08:00.063 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:08:00.072 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:08:00.076 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768291680063], value class [java.lang.Long], SQL type unknown
15:08:00.123 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:09:00.190 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:09:00.219 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:09:00.233 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768291740186], value class [java.lang.Long], SQL type unknown
15:09:00.267 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
