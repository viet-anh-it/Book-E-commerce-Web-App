14:57:48.706 | INFO | BeForFeApplication: Starting BeForFeApplication using Java 21.0.3 with PID 8160 (C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes started by PC in C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe)
14:57:48.761 | INFO | BeForFeApplication: No active profile set, falling back to 1 default profile: "default"
14:57:49.229 | INFO | DevToolsPropertyDefaultsPostProcessor: Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
14:57:49.230 | INFO | DevToolsPropertyDefaultsPostProcessor: For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
14:57:56.670 | INFO | RepositoryConfigurationDelegate: Bootstrapping Spring Data JPA repositories in DEFAULT mode.
14:57:56.788 | INFO | RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 79 ms. Found 0 JPA repository interfaces.
14:57:59.199 | INFO | GenericScope: BeanFactory id=13accd6c-ace7-3257-bf77-8e53872683d4
14:58:00.949 | INFO | TomcatWebServer: Tomcat initialized with port 8181 (https)
14:58:01.000 | INFO | StandardService: Starting service [Tomcat]
14:58:01.017 | INFO | StandardEngine: Starting Servlet engine: [Apache Tomcat/10.1.50]
14:58:01.169 | INFO | [/]: Initializing Spring embedded WebApplicationContext
14:58:01.173 | INFO | ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 11234 ms
14:58:01.665 | INFO | LogHelper: HHH000204: Processing PersistenceUnitInfo [name: default]
14:58:01.836 | INFO | Version: HHH000412: Hibernate ORM core version 6.6.39.Final
14:58:01.936 | INFO | RegionFactoryInitiator: HHH000026: Second-level cache disabled
14:58:04.724 | INFO | SpringPersistenceUnitInfo: No LoadTimeWeaver setup: ignoring JPA class transformer
14:58:04.987 | INFO | HikariDataSource: HikariPool-1 - Starting...
14:58:08.809 | INFO | HikariPool: HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3745aedf
14:58:08.849 | INFO | HikariDataSource: HikariPool-1 - Start completed.
14:58:09.145 | WARN | deprecation: HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
14:58:09.204 | INFO | pooling: HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.44
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
14:58:11.990 | INFO | JtaPlatformInitiator: HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
14:58:12.530 | INFO | LocalContainerEntityManagerFactoryBean: Initialized JPA EntityManagerFactory for persistence unit 'default'
14:58:14.142 | WARN | JpaBaseConfiguration$JpaWebConfiguration: spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
14:58:15.281 | DEBUG | AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder: No authenticationProviders and no parentAuthenticationManager defined. Returning null.
14:58:15.868 | DEBUG | DefaultSecurityFilterChain: Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, OAuth2AuthorizationRequestRedirectFilter, OAuth2LoginAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
14:58:20.051 | INFO | OptionalLiveReloadServer: LiveReload server is running on port 35729
14:58:21.627 | INFO | certificate: Connector [https-jsse-nio-8181], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [Set directly - location unknown] using alias [bookommerce_ssl] with trust store [null]
14:58:21.691 | INFO | TomcatWebServer: Tomcat started on port 8181 (https) with context path '/'
14:58:21.958 | INFO | BeForFeApplication: Started BeForFeApplication in 36.219 seconds (process running for 40.915)
14:58:49.180 | INFO | [/]: Initializing Spring DispatcherServlet 'dispatcherServlet'
14:58:49.182 | INFO | DispatcherServlet: Initializing Servlet 'dispatcherServlet'
14:58:49.188 | INFO | DispatcherServlet: Completed initialization in 6 ms
14:58:49.283 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
14:58:49.337 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:58:49.365 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
14:58:49.366 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
14:58:49.368 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
14:58:50.008 | DEBUG | FilterChainProxy: Securing GET /api/genres
14:58:50.019 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
14:58:50.019 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:58:50.022 | DEBUG | FilterChainProxy: Secured GET /api/genres
14:58:50.029 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:58:50.031 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
14:58:52.634 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
14:58:52.635 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
14:58:52.639 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:58:52.639 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:58:52.657 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
14:58:52.640 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
14:58:52.666 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
14:58:52.687 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
14:58:52.689 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
14:58:52.696 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:58:52.696 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:58:52.697 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:58:52.698 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
14:58:52.699 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
14:58:52.698 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
14:58:52.706 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
14:58:52.720 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:58:52.721 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
14:58:52.975 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
14:58:52.997 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:58:53.009 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
14:58:53.014 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
14:58:53.024 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
14:58:53.040 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:58:53.057 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:58:53.058 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
14:58:53.063 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
14:58:53.058 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
14:58:53.089 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:58:53.096 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
14:59:00.040 | DEBUG | JdbcTemplate: Executing prepared SQL update
14:59:00.044 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
14:59:00.071 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768291140037], value class [java.lang.Long], SQL type unknown
14:59:00.092 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
14:59:07.317 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
14:59:07.346 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=pSSen0re0NXzz7KTAloA-mLJKmdJBb0UZYzDc-lgtg4%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=Jb7CqniLXeQZOOddXdUPn9orrsWsY7rPFEYd0cLxfRE
14:59:07.353 | DEBUG | JdbcTemplate: Executing prepared SQL update
14:59:07.354 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
14:59:07.366 | DEBUG | JdbcTemplate: Executing prepared SQL update
14:59:07.368 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
14:59:22.842 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
14:59:22.851 | DEBUG | JdbcTemplate: Executing prepared SQL query
14:59:22.853 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
14:59:22.893 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=i9oKMQJl9rCXk2AaAIhijS1kzipXfHBlHAutAEulp-g%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=xyuNSNME773HKuhQLLxxuKS8RvdQVFgxnrVdKBWZA2w
14:59:22.902 | DEBUG | JdbcTemplate: Executing prepared SQL update
14:59:22.903 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
14:59:22.907 | DEBUG | JdbcTemplate: Executing prepared SQL update
14:59:22.909 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
14:59:23.006 | DEBUG | JdbcTemplate: Executing prepared SQL query
14:59:23.007 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
14:59:23.298 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=ECtIMlZ8AnCKUJCDNGGzJZluNLNkHl5IyWJIpX-8dHVTtV9egaUtbDamw_luclF5cwKxj_paxq1dExdpDuu7x6yAJ-RUMyZYNaNXkpip-K7-_aITgnlaqYYXhLdJZ7DG&state=i9oKMQJl9rCXk2AaAIhijS1kzipXfHBlHAutAEulp-g%3D
14:59:23.307 | DEBUG | JdbcTemplate: Executing prepared SQL query
14:59:23.309 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
14:59:25.637 | DEBUG | JdbcTemplate: Executing prepared SQL update
14:59:25.639 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
14:59:25.642 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
14:59:25.643 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 14:59:25.0927494], value class [java.sql.Timestamp], SQL type 93
14:59:25.644 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 14:59:55.0927494], value class [java.sql.Timestamp], SQL type 93
14:59:25.645 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
14:59:25.647 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 14:59:25.0927494], value class [java.sql.Timestamp], SQL type 93
14:59:25.649 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
14:59:25.650 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
14:59:25.664 | DEBUG | JdbcTemplate: Executing prepared SQL update
14:59:25.665 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO oauth2_authorized_client (client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
14:59:25.668 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
14:59:25.669 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
14:59:25.670 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [Bearer], value class [java.lang.String], SQL type 12
14:59:25.673 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [2026-01-13 14:59:25.0927494], value class [java.sql.Timestamp], SQL type 93
14:59:25.673 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 6, parameter value [2026-01-13 14:59:55.0927494], value class [java.sql.Timestamp], SQL type 93
14:59:25.674 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [openid,profile], value class [java.lang.String], SQL type 12
14:59:25.675 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [2026-01-13 14:59:25.0927494], value class [java.sql.Timestamp], SQL type 93
14:59:25.683 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 61252648-eb50-4b8f-bf7f-6e66571688cd
14:59:25.686 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
14:59:25.687 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T07:59:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T08:29:24Z, iat=2026-01-13T07:59:24Z, nonce=xyuNSNME773HKuhQLLxxuKS8RvdQVFgxnrVdKBWZA2w, jti=d1bd4a1c-635b-4c16-aea6-161e5938065f, authorities=[ROLE_CUSTOMER], sid=bxRETju7fZ0QC6IY8Wn5-fJ66iWdFRQU9lyqjcALls0}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=61252648-eb50-4b8f-bf7f-6e66571688cd], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@42e8ec35]
14:59:25.690 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T07:59:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T08:29:24Z, iat=2026-01-13T07:59:24Z, nonce=xyuNSNME773HKuhQLLxxuKS8RvdQVFgxnrVdKBWZA2w, jti=d1bd4a1c-635b-4c16-aea6-161e5938065f, authorities=[ROLE_CUSTOMER], sid=bxRETju7fZ0QC6IY8Wn5-fJ66iWdFRQU9lyqjcALls0}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=61252648-eb50-4b8f-bf7f-6e66571688cd], Granted Authorities=[ROLE_CUSTOMER]]
14:59:25.723 | DEBUG | JdbcTemplate: Executing prepared SQL update
14:59:25.725 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
14:59:25.731 | DEBUG | JdbcTemplate: Executing prepared SQL update
14:59:25.731 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
14:59:25.806 | DEBUG | JdbcTemplate: Executing prepared SQL update
14:59:25.808 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
14:59:25.819 | DEBUG | JdbcTemplate: Executing prepared SQL query
14:59:25.823 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
14:59:26.532 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
14:59:26.540 | DEBUG | JdbcTemplate: Executing prepared SQL query
14:59:26.541 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
14:59:26.562 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T07:59:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T08:29:24Z, iat=2026-01-13T07:59:24Z, nonce=xyuNSNME773HKuhQLLxxuKS8RvdQVFgxnrVdKBWZA2w, jti=d1bd4a1c-635b-4c16-aea6-161e5938065f, authorities=[ROLE_CUSTOMER], sid=bxRETju7fZ0QC6IY8Wn5-fJ66iWdFRQU9lyqjcALls0}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=61252648-eb50-4b8f-bf7f-6e66571688cd], Granted Authorities=[ROLE_CUSTOMER]]]
14:59:26.562 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
14:59:26.760 | DEBUG | JdbcTemplate: Executing prepared SQL update
14:59:26.762 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
14:59:26.780 | DEBUG | JdbcTemplate: Executing prepared SQL query
14:59:26.781 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
14:59:27.307 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
14:59:27.311 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:59:27.312 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
14:59:27.322 | DEBUG | FilterChainProxy: Securing GET /api/genres
14:59:27.324 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:59:27.333 | DEBUG | FilterChainProxy: Secured GET /api/genres
14:59:27.973 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
14:59:27.973 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
14:59:27.990 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:59:27.980 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:59:28.002 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
14:59:28.002 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
14:59:27.986 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
14:59:28.006 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:59:28.020 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
14:59:27.988 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
14:59:28.039 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
14:59:28.063 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:59:28.000 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
14:59:28.002 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:59:28.073 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
14:59:28.039 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:59:28.068 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
14:59:28.069 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
14:59:28.079 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
14:59:28.094 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:59:28.114 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
14:59:28.221 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:59:28.201 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
14:59:28.223 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
14:59:28.225 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:59:28.233 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
14:59:28.257 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
14:59:28.262 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:59:28.263 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
14:59:28.265 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
15:00:00.011 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:00:00.013 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:00:00.014 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768291200011], value class [java.lang.Long], SQL type unknown
15:00:00.020 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:01:00.012 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:01:00.013 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:01:00.014 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768291260012], value class [java.lang.Long], SQL type unknown
15:01:00.020 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
