14:57:48.706 | INFO | BeForFeApplication: Starting BeForFeApplication using Java 21.0.3 with PID 8160 (C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes started by PC in C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe)
14:57:48.761 | INFO | BeForFeApplication: No active profile set, falling back to 1 default profile: "default"
14:57:49.229 | INFO | DevToolsPropertyDefaultsPostProcessor: Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
14:57:49.230 | INFO | DevToolsPropertyDefaultsPostProcessor: For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
14:57:56.670 | INFO | RepositoryConfigurationDelegate: Bootstrapping Spring Data JPA repositories in DEFAULT mode.
14:57:56.788 | INFO | RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 79 ms. Found 0 JPA repository interfaces.
14:57:59.199 | INFO | GenericScope: BeanFactory id=13accd6c-ace7-3257-bf77-8e53872683d4
14:58:00.949 | INFO | TomcatWebServer: Tomcat initialized with port 8181 (https)
14:58:01.000 | INFO | StandardService: Starting service [Tomcat]
14:58:01.017 | INFO | StandardEngine: Starting Servlet engine: [Apache Tomcat/10.1.50]
14:58:01.169 | INFO | [/]: Initializing Spring embedded WebApplicationContext
14:58:01.173 | INFO | ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 11234 ms
14:58:01.665 | INFO | LogHelper: HHH000204: Processing PersistenceUnitInfo [name: default]
14:58:01.836 | INFO | Version: HHH000412: Hibernate ORM core version 6.6.39.Final
14:58:01.936 | INFO | RegionFactoryInitiator: HHH000026: Second-level cache disabled
14:58:04.724 | INFO | SpringPersistenceUnitInfo: No LoadTimeWeaver setup: ignoring JPA class transformer
14:58:04.987 | INFO | HikariDataSource: HikariPool-1 - Starting...
14:58:08.809 | INFO | HikariPool: HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3745aedf
14:58:08.849 | INFO | HikariDataSource: HikariPool-1 - Start completed.
14:58:09.145 | WARN | deprecation: HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
14:58:09.204 | INFO | pooling: HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.44
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
14:58:11.990 | INFO | JtaPlatformInitiator: HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
14:58:12.530 | INFO | LocalContainerEntityManagerFactoryBean: Initialized JPA EntityManagerFactory for persistence unit 'default'
14:58:14.142 | WARN | JpaBaseConfiguration$JpaWebConfiguration: spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
14:58:15.281 | DEBUG | AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder: No authenticationProviders and no parentAuthenticationManager defined. Returning null.
14:58:15.868 | DEBUG | DefaultSecurityFilterChain: Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, OAuth2AuthorizationRequestRedirectFilter, OAuth2LoginAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
14:58:20.051 | INFO | OptionalLiveReloadServer: LiveReload server is running on port 35729
14:58:21.627 | INFO | certificate: Connector [https-jsse-nio-8181], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [Set directly - location unknown] using alias [bookommerce_ssl] with trust store [null]
14:58:21.691 | INFO | TomcatWebServer: Tomcat started on port 8181 (https) with context path '/'
14:58:21.958 | INFO | BeForFeApplication: Started BeForFeApplication in 36.219 seconds (process running for 40.915)
14:58:49.180 | INFO | [/]: Initializing Spring DispatcherServlet 'dispatcherServlet'
14:58:49.182 | INFO | DispatcherServlet: Initializing Servlet 'dispatcherServlet'
14:58:49.188 | INFO | DispatcherServlet: Completed initialization in 6 ms
14:58:49.283 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
14:58:49.337 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:58:49.365 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
14:58:49.366 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
14:58:49.368 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
14:58:50.008 | DEBUG | FilterChainProxy: Securing GET /api/genres
14:58:50.019 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
14:58:50.019 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:58:50.022 | DEBUG | FilterChainProxy: Secured GET /api/genres
14:58:50.029 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:58:50.031 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
14:58:52.634 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
14:58:52.635 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
14:58:52.639 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:58:52.639 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:58:52.657 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
14:58:52.640 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
14:58:52.666 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
14:58:52.687 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
14:58:52.689 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
14:58:52.696 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:58:52.696 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:58:52.697 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:58:52.698 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
14:58:52.699 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
14:58:52.698 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
14:58:52.706 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
14:58:52.720 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:58:52.721 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
14:58:52.975 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
14:58:52.997 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:58:53.009 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
14:58:53.014 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
14:58:53.024 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
14:58:53.040 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:58:53.057 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:58:53.058 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
14:58:53.063 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
14:58:53.058 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
14:58:53.089 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:58:53.096 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
14:59:00.040 | DEBUG | JdbcTemplate: Executing prepared SQL update
14:59:00.044 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
14:59:00.071 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768291140037], value class [java.lang.Long], SQL type unknown
14:59:00.092 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
14:59:07.317 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
14:59:07.346 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=pSSen0re0NXzz7KTAloA-mLJKmdJBb0UZYzDc-lgtg4%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=Jb7CqniLXeQZOOddXdUPn9orrsWsY7rPFEYd0cLxfRE
14:59:07.353 | DEBUG | JdbcTemplate: Executing prepared SQL update
14:59:07.354 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
14:59:07.366 | DEBUG | JdbcTemplate: Executing prepared SQL update
14:59:07.368 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
14:59:22.842 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
14:59:22.851 | DEBUG | JdbcTemplate: Executing prepared SQL query
14:59:22.853 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
14:59:22.893 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=i9oKMQJl9rCXk2AaAIhijS1kzipXfHBlHAutAEulp-g%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=xyuNSNME773HKuhQLLxxuKS8RvdQVFgxnrVdKBWZA2w
14:59:22.902 | DEBUG | JdbcTemplate: Executing prepared SQL update
14:59:22.903 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
14:59:22.907 | DEBUG | JdbcTemplate: Executing prepared SQL update
14:59:22.909 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
14:59:23.006 | DEBUG | JdbcTemplate: Executing prepared SQL query
14:59:23.007 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
14:59:23.298 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=ECtIMlZ8AnCKUJCDNGGzJZluNLNkHl5IyWJIpX-8dHVTtV9egaUtbDamw_luclF5cwKxj_paxq1dExdpDuu7x6yAJ-RUMyZYNaNXkpip-K7-_aITgnlaqYYXhLdJZ7DG&state=i9oKMQJl9rCXk2AaAIhijS1kzipXfHBlHAutAEulp-g%3D
14:59:23.307 | DEBUG | JdbcTemplate: Executing prepared SQL query
14:59:23.309 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
14:59:25.637 | DEBUG | JdbcTemplate: Executing prepared SQL update
14:59:25.639 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
14:59:25.642 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
14:59:25.643 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 14:59:25.0927494], value class [java.sql.Timestamp], SQL type 93
14:59:25.644 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 14:59:55.0927494], value class [java.sql.Timestamp], SQL type 93
14:59:25.645 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
14:59:25.647 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 14:59:25.0927494], value class [java.sql.Timestamp], SQL type 93
14:59:25.649 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
14:59:25.650 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
14:59:25.664 | DEBUG | JdbcTemplate: Executing prepared SQL update
14:59:25.665 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO oauth2_authorized_client (client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
14:59:25.668 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
14:59:25.669 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
14:59:25.670 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [Bearer], value class [java.lang.String], SQL type 12
14:59:25.673 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [2026-01-13 14:59:25.0927494], value class [java.sql.Timestamp], SQL type 93
14:59:25.673 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 6, parameter value [2026-01-13 14:59:55.0927494], value class [java.sql.Timestamp], SQL type 93
14:59:25.674 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [openid,profile], value class [java.lang.String], SQL type 12
14:59:25.675 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [2026-01-13 14:59:25.0927494], value class [java.sql.Timestamp], SQL type 93
14:59:25.683 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 61252648-eb50-4b8f-bf7f-6e66571688cd
14:59:25.686 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
14:59:25.687 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T07:59:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T08:29:24Z, iat=2026-01-13T07:59:24Z, nonce=xyuNSNME773HKuhQLLxxuKS8RvdQVFgxnrVdKBWZA2w, jti=d1bd4a1c-635b-4c16-aea6-161e5938065f, authorities=[ROLE_CUSTOMER], sid=bxRETju7fZ0QC6IY8Wn5-fJ66iWdFRQU9lyqjcALls0}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=61252648-eb50-4b8f-bf7f-6e66571688cd], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@42e8ec35]
14:59:25.690 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T07:59:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T08:29:24Z, iat=2026-01-13T07:59:24Z, nonce=xyuNSNME773HKuhQLLxxuKS8RvdQVFgxnrVdKBWZA2w, jti=d1bd4a1c-635b-4c16-aea6-161e5938065f, authorities=[ROLE_CUSTOMER], sid=bxRETju7fZ0QC6IY8Wn5-fJ66iWdFRQU9lyqjcALls0}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=61252648-eb50-4b8f-bf7f-6e66571688cd], Granted Authorities=[ROLE_CUSTOMER]]
14:59:25.723 | DEBUG | JdbcTemplate: Executing prepared SQL update
14:59:25.725 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
14:59:25.731 | DEBUG | JdbcTemplate: Executing prepared SQL update
14:59:25.731 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
14:59:25.806 | DEBUG | JdbcTemplate: Executing prepared SQL update
14:59:25.808 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
14:59:25.819 | DEBUG | JdbcTemplate: Executing prepared SQL query
14:59:25.823 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
14:59:26.532 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
14:59:26.540 | DEBUG | JdbcTemplate: Executing prepared SQL query
14:59:26.541 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
14:59:26.562 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T07:59:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T08:29:24Z, iat=2026-01-13T07:59:24Z, nonce=xyuNSNME773HKuhQLLxxuKS8RvdQVFgxnrVdKBWZA2w, jti=d1bd4a1c-635b-4c16-aea6-161e5938065f, authorities=[ROLE_CUSTOMER], sid=bxRETju7fZ0QC6IY8Wn5-fJ66iWdFRQU9lyqjcALls0}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=61252648-eb50-4b8f-bf7f-6e66571688cd], Granted Authorities=[ROLE_CUSTOMER]]]
14:59:26.562 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
14:59:26.760 | DEBUG | JdbcTemplate: Executing prepared SQL update
14:59:26.762 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
14:59:26.780 | DEBUG | JdbcTemplate: Executing prepared SQL query
14:59:26.781 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
14:59:27.307 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
14:59:27.311 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:59:27.312 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
14:59:27.322 | DEBUG | FilterChainProxy: Securing GET /api/genres
14:59:27.324 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:59:27.333 | DEBUG | FilterChainProxy: Secured GET /api/genres
14:59:27.973 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
14:59:27.973 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
14:59:27.990 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:59:27.980 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:59:28.002 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
14:59:28.002 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
14:59:27.986 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
14:59:28.006 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:59:28.020 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
14:59:27.988 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
14:59:28.039 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
14:59:28.063 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:59:28.000 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
14:59:28.002 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:59:28.073 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
14:59:28.039 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:59:28.068 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
14:59:28.069 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
14:59:28.079 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
14:59:28.094 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:59:28.114 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
14:59:28.221 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:59:28.201 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
14:59:28.223 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
14:59:28.225 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:59:28.233 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
14:59:28.257 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
14:59:28.262 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
14:59:28.263 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
14:59:28.265 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
15:00:00.011 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:00:00.013 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:00:00.014 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768291200011], value class [java.lang.Long], SQL type unknown
15:00:00.020 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:01:00.012 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:01:00.013 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:01:00.014 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768291260012], value class [java.lang.Long], SQL type unknown
15:01:00.020 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:02:00.007 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:02:00.009 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:02:00.011 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768291320006], value class [java.lang.Long], SQL type unknown
15:02:00.017 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:03:00.008 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:03:00.009 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:03:00.010 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768291380008], value class [java.lang.Long], SQL type unknown
15:03:00.021 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 1 expired sessions
15:04:00.006 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:04:00.007 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:04:00.009 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768291440006], value class [java.lang.Long], SQL type unknown
15:04:00.016 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:05:00.017 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:05:00.018 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:05:00.019 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768291500017], value class [java.lang.Long], SQL type unknown
15:05:00.023 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:06:00.041 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:06:00.061 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:06:00.069 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768291560040], value class [java.lang.Long], SQL type unknown
15:06:00.091 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:06:23.350 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
15:06:23.350 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
15:06:23.437 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:06:23.437 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:06:23.504 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
15:06:23.504 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
15:06:23.505 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
15:06:23.506 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
15:06:23.509 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
15:06:23.511 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
15:06:25.893 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
15:06:25.898 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:06:25.904 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
15:06:25.906 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
15:06:25.909 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
15:06:29.422 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:06:29.433 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:06:29.437 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:06:29.439 | DEBUG | FilterChainProxy: Securing GET /api/genres
15:06:29.442 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:06:29.449 | DEBUG | FilterChainProxy: Secured GET /api/genres
15:06:32.015 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:06:32.015 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
15:06:32.017 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:06:32.018 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:06:32.020 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
15:06:32.020 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:06:32.038 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
15:06:32.039 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:06:32.040 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
15:06:32.134 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
15:06:32.136 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:06:32.138 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
15:06:32.149 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
15:06:32.151 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
15:06:32.153 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:06:32.153 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:06:32.154 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
15:06:32.154 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
15:06:32.203 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
15:06:32.203 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:06:32.204 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:06:32.205 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:06:32.205 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
15:06:32.206 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:06:32.206 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:06:32.207 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:06:32.209 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:06:32.263 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:06:32.265 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:06:32.267 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:07:00.022 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:07:00.024 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:07:00.029 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768291620022], value class [java.lang.Long], SQL type unknown
15:07:00.052 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:08:00.067 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:08:00.076 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:08:00.081 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768291680065], value class [java.lang.Long], SQL type unknown
15:08:00.120 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:08:35.443 | DEBUG | FilterChainProxy: Securing GET /api/genres
15:08:35.480 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:08:35.485 | DEBUG | FilterChainProxy: Secured GET /api/genres
15:09:00.081 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:09:00.093 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:09:00.113 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768291740078], value class [java.lang.Long], SQL type unknown
15:09:00.205 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:09:18.972 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:09:18.998 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:09:19.002 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:10:00.105 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:10:00.120 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:10:00.133 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768291800103], value class [java.lang.Long], SQL type unknown
15:10:00.197 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:10:40.005 | DEBUG | FilterChainProxy: Securing GET /api/books/45
15:10:40.034 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:10:40.038 | DEBUG | FilterChainProxy: Secured GET /api/books/45
15:10:42.689 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:10:42.693 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:10:42.695 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:10:57.354 | DEBUG | FilterChainProxy: Securing GET /api/genres
15:10:57.356 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:10:57.359 | DEBUG | FilterChainProxy: Secured GET /api/genres
15:10:57.372 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:10:57.375 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:10:57.377 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:10:57.544 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:10:57.545 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:10:57.547 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:10:57.716 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
15:10:57.717 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:10:57.719 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
15:10:57.719 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
15:10:57.726 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:10:57.742 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
15:10:57.753 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:10:57.760 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:10:57.762 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:10:57.753 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
15:10:57.759 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
15:10:57.775 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:10:57.772 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
15:10:57.775 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:10:57.778 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
15:10:57.780 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:10:57.782 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
15:10:57.783 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
15:10:57.790 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
15:10:57.792 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:10:57.793 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
15:10:57.796 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:10:57.817 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:10:57.852 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:10:57.878 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:10:57.879 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:10:57.910 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:11:00.013 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:11:00.014 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:11:00.019 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768291860013], value class [java.lang.Long], SQL type unknown
15:11:00.034 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:12:00.004 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:12:00.005 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:12:00.006 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768291920004], value class [java.lang.Long], SQL type unknown
15:12:00.010 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:13:00.010 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:13:00.011 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:13:00.012 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768291980010], value class [java.lang.Long], SQL type unknown
15:13:00.019 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:14:00.006 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:14:00.008 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:14:00.009 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768292040006], value class [java.lang.Long], SQL type unknown
15:14:00.012 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:15:00.007 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:15:00.007 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:15:00.009 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768292100007], value class [java.lang.Long], SQL type unknown
15:15:00.015 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:16:00.002 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:16:00.003 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:16:00.004 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768292160002], value class [java.lang.Long], SQL type unknown
15:16:00.009 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:17:00.010 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:17:00.010 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:17:00.011 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768292220009], value class [java.lang.Long], SQL type unknown
15:17:00.015 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:17:20.917 | DEBUG | FilterChainProxy: Securing GET /api/books?page=1&size=10&sort=TITLE&order=ASC
15:17:20.924 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:17:20.925 | DEBUG | FilterChainProxy: Secured GET /api/books?page=1&size=10&sort=TITLE&order=ASC
15:17:21.312 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_28289.jpg
15:17:21.313 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:17:21.314 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_28289.jpg
15:17:21.329 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_38340.jpg
15:17:21.332 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:17:21.332 | DEBUG | FilterChainProxy: Securing GET /images/books/280423-3.jpg
15:17:21.335 | DEBUG | FilterChainProxy: Securing GET /images/books/180523-4.jpg
15:17:21.335 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491873.jpg
15:17:21.346 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:17:21.337 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_38340.jpg
15:17:21.338 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:17:21.338 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_24750.jpg
15:17:21.340 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:17:21.348 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491873.jpg
15:17:21.353 | DEBUG | FilterChainProxy: Secured GET /images/books/280423-3.jpg
15:17:21.354 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:17:21.357 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_24750.jpg
15:17:21.355 | DEBUG | FilterChainProxy: Securing GET /images/books/bia-1_ngoanh-lai-da-mot-doi_3.jpg
15:17:21.355 | DEBUG | FilterChainProxy: Secured GET /images/books/180523-4.jpg
15:17:21.362 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:17:21.365 | DEBUG | FilterChainProxy: Secured GET /images/books/bia-1_ngoanh-lai-da-mot-doi_3.jpg
15:17:21.395 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_14864.jpg
15:17:21.399 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:17:21.410 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_14864.jpg
15:17:21.454 | DEBUG | FilterChainProxy: Securing GET /images/books/cef924a2-426a-4bde-bf77-7f7e2b7a9507.jpg
15:17:21.440 | DEBUG | FilterChainProxy: Securing GET /images/books/2a478a9e-33e2-4350-b43d-dd009af0033a.jpg
15:17:21.578 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:17:21.579 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:17:21.585 | DEBUG | FilterChainProxy: Secured GET /images/books/2a478a9e-33e2-4350-b43d-dd009af0033a.jpg
15:17:21.583 | DEBUG | FilterChainProxy: Secured GET /images/books/cef924a2-426a-4bde-bf77-7f7e2b7a9507.jpg
15:17:59.038 | DEBUG | FilterChainProxy: Securing GET /api/books/45
15:17:59.039 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:17:59.040 | DEBUG | FilterChainProxy: Secured GET /api/books/45
15:17:59.142 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:17:59.145 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:17:59.145 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:18:00.012 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:18:00.012 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:18:00.013 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768292280012], value class [java.lang.Long], SQL type unknown
15:18:00.017 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:19:00.015 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:19:00.017 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:19:00.018 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768292340015], value class [java.lang.Long], SQL type unknown
15:19:00.021 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:20:00.020 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:20:00.025 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:20:00.028 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768292400020], value class [java.lang.Long], SQL type unknown
15:20:00.053 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:21:00.004 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:21:00.004 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:21:00.005 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768292460004], value class [java.lang.Long], SQL type unknown
15:21:00.008 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:21:40.819 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
15:21:40.839 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:21:40.900 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
15:21:40.902 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
15:21:40.902 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
15:21:41.234 | DEBUG | FilterChainProxy: Securing GET /api/books/45
15:21:41.238 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:21:41.243 | DEBUG | FilterChainProxy: Secured GET /api/books/45
15:22:00.051 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:22:00.054 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:22:00.070 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768292520050], value class [java.lang.Long], SQL type unknown
15:22:00.104 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:22:38.337 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
15:22:38.369 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:22:38.385 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
15:22:38.389 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
15:22:38.390 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
15:22:38.787 | DEBUG | FilterChainProxy: Securing GET /api/books/45
15:22:38.791 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:22:38.797 | DEBUG | FilterChainProxy: Secured GET /api/books/45
15:23:00.013 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:23:00.014 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:23:00.017 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768292580013], value class [java.lang.Long], SQL type unknown
15:23:00.027 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:23:11.005 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
15:23:11.006 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:11.009 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
15:23:11.009 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
15:23:11.009 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
15:23:11.193 | DEBUG | FilterChainProxy: Securing GET /api/books/45
15:23:11.195 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:11.197 | DEBUG | FilterChainProxy: Secured GET /api/books/45
15:23:11.790 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:23:11.791 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:11.792 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:23:19.253 | DEBUG | FilterChainProxy: Securing GET /api/genres
15:23:19.253 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:19.253 | DEBUG | FilterChainProxy: Secured GET /api/genres
15:23:19.264 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:23:19.272 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:19.282 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:23:19.503 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:23:19.503 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:19.504 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:23:19.505 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
15:23:19.513 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:19.521 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
15:23:19.531 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
15:23:19.533 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
15:23:19.533 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
15:23:19.534 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:19.536 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:19.545 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
15:23:19.537 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
15:23:19.537 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:19.538 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:23:19.572 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
15:23:19.640 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:23:19.644 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:23:19.640 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:19.651 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:19.652 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:19.654 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:23:19.654 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:23:19.655 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:23:19.848 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
15:23:19.884 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:20.184 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
15:23:20.189 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
15:23:20.266 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:20.284 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
15:23:21.017 | DEBUG | FilterChainProxy: Securing GET /api/books/45
15:23:21.019 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:21.019 | DEBUG | FilterChainProxy: Secured GET /api/books/45
15:23:21.095 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:23:21.096 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:21.097 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:23:23.190 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:23:23.190 | DEBUG | FilterChainProxy: Securing GET /api/genres
15:23:23.192 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:23.192 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:23:23.193 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:23.193 | DEBUG | FilterChainProxy: Secured GET /api/genres
15:23:23.258 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:23:23.259 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:23.259 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:23:23.262 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
15:23:23.263 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:23.263 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
15:23:23.268 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
15:23:23.269 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:23.270 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
15:23:23.280 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
15:23:23.281 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:23.281 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
15:23:23.292 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
15:23:23.293 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:23.295 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
15:23:23.299 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
15:23:23.300 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:23.300 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
15:23:23.311 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
15:23:23.312 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:23.312 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
15:23:23.321 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:23:23.322 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:23.323 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:23:23.332 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:23:23.333 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:23.333 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:23:23.343 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:23:23.345 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:23.346 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:23:24.895 | DEBUG | FilterChainProxy: Securing GET /api/books/35
15:23:24.898 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:24.899 | DEBUG | FilterChainProxy: Secured GET /api/books/35
15:23:24.974 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
15:23:24.975 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:24.976 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
15:23:27.201 | DEBUG | FilterChainProxy: Securing GET /api/genres
15:23:27.201 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:23:27.202 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:27.202 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:27.202 | DEBUG | FilterChainProxy: Secured GET /api/genres
15:23:27.202 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:23:27.263 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:23:27.264 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:27.264 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:23:27.268 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
15:23:27.268 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:27.269 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
15:23:27.281 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
15:23:27.283 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:27.288 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
15:23:27.295 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
15:23:27.296 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:27.296 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
15:23:27.305 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
15:23:27.309 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:27.310 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
15:23:27.315 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
15:23:27.318 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:27.319 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
15:23:27.328 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
15:23:27.329 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:27.330 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
15:23:27.342 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:23:27.342 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:27.343 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:23:27.349 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:23:27.351 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:27.352 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:23:27.361 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:23:27.361 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:27.361 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:23:29.204 | DEBUG | FilterChainProxy: Securing GET /api/books/20
15:23:29.206 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:29.206 | DEBUG | FilterChainProxy: Secured GET /api/books/20
15:23:29.275 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
15:23:29.276 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:29.277 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
15:23:58.464 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:23:58.464 | DEBUG | FilterChainProxy: Securing GET /api/genres
15:23:58.466 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:58.466 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:58.466 | DEBUG | FilterChainProxy: Secured GET /api/genres
15:23:58.466 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:23:58.573 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
15:23:58.573 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:58.574 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
15:23:58.687 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:23:58.687 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
15:23:58.688 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
15:23:58.689 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:58.689 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:58.689 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
15:23:58.688 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
15:23:58.688 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
15:23:58.688 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
15:23:58.691 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:58.689 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:58.689 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
15:23:58.691 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:58.691 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:58.691 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
15:23:58.691 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:23:58.691 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
15:23:58.691 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
15:23:58.752 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:23:58.805 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:58.826 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:23:58.820 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:23:58.827 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:23:58.829 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:58.832 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:23:58.834 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:23:58.833 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:24:00.018 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:24:00.018 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:24:00.019 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768292640018], value class [java.lang.Long], SQL type unknown
15:24:00.026 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:25:00.016 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:25:00.017 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:25:00.018 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768292700016], value class [java.lang.Long], SQL type unknown
15:25:00.022 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:26:00.027 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:26:00.031 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:26:00.034 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768292760027], value class [java.lang.Long], SQL type unknown
15:26:00.037 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:27:00.014 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:27:00.015 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:27:00.016 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768292820014], value class [java.lang.Long], SQL type unknown
15:27:00.019 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:28:00.009 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:28:00.011 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:28:00.011 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768292880009], value class [java.lang.Long], SQL type unknown
15:28:00.017 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:29:00.016 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:29:00.017 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:29:00.018 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768292940016], value class [java.lang.Long], SQL type unknown
15:29:00.025 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:29:15.299 | DEBUG | FilterChainProxy: Securing GET /api/books/45
15:29:15.316 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:29:15.317 | DEBUG | FilterChainProxy: Secured GET /api/books/45
15:29:15.742 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:29:15.744 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:29:15.744 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:29:20.822 | DEBUG | FilterChainProxy: Securing GET /api/genres
15:29:20.823 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:29:20.824 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:29:20.824 | DEBUG | FilterChainProxy: Secured GET /api/genres
15:29:20.826 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:29:20.826 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:29:21.057 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:29:21.059 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:29:21.059 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:29:21.059 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
15:29:21.061 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:29:21.065 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
15:29:21.067 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
15:29:21.070 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:29:21.071 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
15:29:21.080 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
15:29:21.080 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:29:21.081 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
15:29:21.099 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
15:29:21.102 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:29:21.115 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
15:29:21.110 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
15:29:21.117 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:29:21.137 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
15:29:21.170 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
15:29:21.180 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:29:21.199 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:29:21.180 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:29:21.214 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:29:21.246 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:29:21.261 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:29:21.216 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
15:29:21.215 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:29:21.252 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:29:21.285 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:29:21.289 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:29:22.681 | DEBUG | FilterChainProxy: Securing GET /api/books/28
15:29:22.682 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:29:22.683 | DEBUG | FilterChainProxy: Secured GET /api/books/28
15:29:22.746 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
15:29:22.747 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:29:22.748 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
15:29:26.000 | DEBUG | FilterChainProxy: Securing GET /api/genres
15:29:26.002 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:29:26.002 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:29:26.002 | DEBUG | FilterChainProxy: Secured GET /api/genres
15:29:26.003 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:29:26.004 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:29:26.105 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
15:29:26.106 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:29:26.106 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
15:29:26.193 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:29:26.193 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
15:29:26.193 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
15:29:26.193 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
15:29:26.194 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:29:26.194 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:29:26.194 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:29:26.194 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:29:26.194 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:29:26.194 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
15:29:26.194 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
15:29:26.194 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
15:29:26.195 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
15:29:26.195 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:29:26.195 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:29:26.196 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:29:26.196 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
15:29:26.196 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:29:26.221 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:29:26.235 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:29:26.234 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
15:29:26.238 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:29:26.250 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:29:26.240 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:29:26.259 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
15:29:26.250 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:29:26.265 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:29:29.405 | DEBUG | FilterChainProxy: Securing GET /api/books/33
15:29:29.407 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:29:29.407 | DEBUG | FilterChainProxy: Secured GET /api/books/33
15:29:29.460 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:29:29.462 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:29:29.465 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:30:00.002 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:30:00.003 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:30:00.004 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768293000002], value class [java.lang.Long], SQL type unknown
15:30:00.008 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:31:00.006 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:31:00.006 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:31:00.007 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768293060006], value class [java.lang.Long], SQL type unknown
15:31:00.011 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:31:24.385 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
15:31:24.386 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:31:24.403 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
15:31:24.406 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
15:31:24.407 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
15:31:24.546 | DEBUG | FilterChainProxy: Securing GET /api/books/33
15:31:24.547 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:31:24.547 | DEBUG | FilterChainProxy: Secured GET /api/books/33
15:31:24.855 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:31:24.856 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:31:24.856 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:31:26.928 | DEBUG | FilterChainProxy: Securing GET /api/genres
15:31:26.934 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:31:26.938 | DEBUG | FilterChainProxy: Secured GET /api/genres
15:31:26.938 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:31:26.942 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:31:26.944 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:31:27.146 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:31:27.150 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:31:27.151 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:31:27.280 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:31:27.281 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:31:27.282 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
15:31:27.285 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:31:27.286 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:31:27.288 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
15:31:27.301 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
15:31:27.302 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:31:27.302 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
15:31:27.303 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
15:31:27.306 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
15:31:27.306 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:31:27.307 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
15:31:27.307 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:31:27.309 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
15:31:27.308 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
15:31:27.321 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:31:27.330 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
15:31:27.382 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
15:31:27.393 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:31:27.399 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:31:27.412 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:31:27.415 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:31:27.438 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:31:27.434 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:31:27.448 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:31:27.435 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
15:32:00.006 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:32:00.007 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:32:00.008 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768293120006], value class [java.lang.Long], SQL type unknown
15:32:00.011 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:32:09.874 | DEBUG | FilterChainProxy: Securing GET /api/books/45
15:32:09.875 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:32:09.877 | DEBUG | FilterChainProxy: Secured GET /api/books/45
15:32:09.959 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:32:09.959 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:32:09.961 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:33:00.012 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:33:00.016 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:33:00.018 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768293180012], value class [java.lang.Long], SQL type unknown
15:33:00.021 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:34:00.006 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:34:00.008 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:34:00.010 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768293240006], value class [java.lang.Long], SQL type unknown
15:34:00.016 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:35:00.005 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:35:00.006 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:35:00.006 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768293300005], value class [java.lang.Long], SQL type unknown
15:35:00.010 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:35:25.052 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
15:35:25.073 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=prXQeAOx1zyNoiEkRvnbFn34N-yMrCg8KZ2n5nribJY%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=FEYBR0Ceu_Ui5mgH8Yl1iHiU_tHuLcF8EP6SUexjiSQ
15:35:25.077 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:35:25.077 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
15:35:25.086 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:35:25.089 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
15:35:25.241 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=7b38JUGS3DwWX7tqbxsbZ8UhEoldiF0rSDPPdM68dXS1a5YMaCRkWLCHBv3OaUHGknPQpSAeJ1_NxAQF2qYSVD0OmB_MiU33GXgGqxZwKk7kFBzcYK7Mv2hV-nd52Qhn&state=prXQeAOx1zyNoiEkRvnbFn34N-yMrCg8KZ2n5nribJY%3D
15:35:25.244 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:35:25.245 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:35:25.782 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:35:25.782 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
15:35:25.783 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
15:35:25.785 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 15:35:25.7118436], value class [java.sql.Timestamp], SQL type 93
15:35:25.785 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 15:35:54.7118436], value class [java.sql.Timestamp], SQL type 93
15:35:25.786 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
15:35:25.786 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 15:35:25.7118436], value class [java.sql.Timestamp], SQL type 93
15:35:25.786 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
15:35:25.786 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:35:25.796 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 7f220dc9-fd4d-44e6-8bcf-08659640ba42
15:35:25.798 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
15:35:25.803 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:05:25Z, iat=2026-01-13T08:35:25Z, nonce=FEYBR0Ceu_Ui5mgH8Yl1iHiU_tHuLcF8EP6SUexjiSQ, jti=14b663b4-9bef-48d1-8e93-521c6a214dbc, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@23c9b23d]
15:35:25.803 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:05:25Z, iat=2026-01-13T08:35:25Z, nonce=FEYBR0Ceu_Ui5mgH8Yl1iHiU_tHuLcF8EP6SUexjiSQ, jti=14b663b4-9bef-48d1-8e93-521c6a214dbc, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]
15:35:25.819 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:35:25.819 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:35:25.823 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:35:25.824 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
15:35:25.830 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:35:25.830 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
15:35:25.837 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:35:25.837 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:35:26.240 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
15:35:26.246 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:35:26.246 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:35:26.265 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:05:25Z, iat=2026-01-13T08:35:25Z, nonce=FEYBR0Ceu_Ui5mgH8Yl1iHiU_tHuLcF8EP6SUexjiSQ, jti=14b663b4-9bef-48d1-8e93-521c6a214dbc, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]]
15:35:26.265 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
15:35:26.333 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:35:26.334 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:35:26.346 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:35:26.347 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:35:26.647 | DEBUG | FilterChainProxy: Securing GET /api/genres
15:35:26.648 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:35:26.649 | DEBUG | FilterChainProxy: Secured GET /api/genres
15:35:26.654 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:35:26.656 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:35:26.657 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:35:26.913 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:35:26.914 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:35:26.915 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:35:26.915 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
15:35:26.916 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:35:26.918 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
15:35:26.923 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
15:35:26.933 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
15:35:26.938 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
15:35:26.950 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:35:26.950 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:35:26.951 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
15:35:26.951 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:35:26.951 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
15:35:26.951 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
15:35:26.951 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
15:35:26.952 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:35:26.952 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
15:35:26.953 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:35:26.954 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
15:35:26.954 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:35:26.953 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
15:35:26.966 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:35:26.970 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:35:26.993 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:35:27.001 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:35:27.005 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:35:27.007 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:35:27.018 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:35:27.018 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:35:28.968 | DEBUG | FilterChainProxy: Securing GET /api/books/45
15:35:28.969 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:35:28.970 | DEBUG | FilterChainProxy: Secured GET /api/books/45
15:35:29.025 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:35:29.026 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:35:29.026 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:35:34.624 | DEBUG | FilterChainProxy: Securing GET /protected/api/carts
15:35:34.628 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:35:34.628 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:35:34.632 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:05:25Z, iat=2026-01-13T08:35:25Z, nonce=FEYBR0Ceu_Ui5mgH8Yl1iHiU_tHuLcF8EP6SUexjiSQ, jti=14b663b4-9bef-48d1-8e93-521c6a214dbc, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]]
15:35:34.636 | DEBUG | FilterChainProxy: Secured GET /protected/api/carts
15:35:34.911 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:35:34.912 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
15:35:34.912 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
15:35:34.912 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:35:35.422 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:05:35Z, iat=2026-01-13T08:35:35Z, jti=b5cec2f4-d05b-424f-857c-02f086f4f4ba, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@279658b5]
15:35:35.423 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:35:35.423 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
15:35:35.424 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
15:35:35.424 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 15:35:35.3143625], value class [java.sql.Timestamp], SQL type 93
15:35:35.424 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 15:36:05.3143625], value class [java.sql.Timestamp], SQL type 93
15:35:35.424 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
15:35:35.424 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 15:35:35.3143625], value class [java.sql.Timestamp], SQL type 93
15:35:35.425 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
15:35:35.425 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:35:36.493 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:35:36.493 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:35:36.495 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:35:36.495 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
15:35:36.509 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:35:36.510 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:35:36.555 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
15:35:36.557 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:35:36.557 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
15:35:36.561 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:35:36.562 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:35:36.563 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:35:45.798 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/api/carts/items/38
15:35:45.805 | DEBUG | FilterChainProxy: Securing DELETE /protected/api/carts/items/38
15:35:45.807 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:35:45.808 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:35:45.818 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:05:35Z, iat=2026-01-13T08:35:35Z, jti=b5cec2f4-d05b-424f-857c-02f086f4f4ba, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]]
15:35:45.818 | DEBUG | FilterChainProxy: Secured DELETE /protected/api/carts/items/38
15:35:45.819 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:35:45.820 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
15:35:45.820 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
15:35:45.820 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:35:46.165 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:05:46Z, iat=2026-01-13T08:35:46Z, jti=30378ad5-96bf-4256-84a1-e9f87be6ab36, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@812e9a3]
15:35:46.166 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:35:46.166 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
15:35:46.166 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
15:35:46.167 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 15:35:46.144529], value class [java.sql.Timestamp], SQL type 93
15:35:46.167 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 15:36:16.144529], value class [java.sql.Timestamp], SQL type 93
15:35:46.167 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
15:35:46.167 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 15:35:46.144529], value class [java.sql.Timestamp], SQL type 93
15:35:46.167 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
15:35:46.167 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:35:46.644 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:35:46.644 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:35:46.646 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:35:46.646 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
15:35:46.653 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:35:46.653 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:35:46.663 | DEBUG | FilterChainProxy: Securing GET /protected/api/carts
15:35:46.664 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:35:46.664 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:35:46.667 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:05:46Z, iat=2026-01-13T08:35:46Z, jti=30378ad5-96bf-4256-84a1-e9f87be6ab36, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]]
15:35:46.668 | DEBUG | FilterChainProxy: Secured GET /protected/api/carts
15:35:46.669 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:35:46.669 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
15:35:46.669 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
15:35:46.670 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:35:46.998 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:05:46Z, iat=2026-01-13T08:35:46Z, jti=13bdb997-4c8b-4ce6-b421-69242b1901d5, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@71bf2d52]
15:35:46.998 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:35:46.998 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
15:35:46.999 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
15:35:46.999 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 15:35:46.9758865], value class [java.sql.Timestamp], SQL type 93
15:35:46.999 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 15:36:16.9758865], value class [java.sql.Timestamp], SQL type 93
15:35:46.999 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
15:35:46.999 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 15:35:46.9758865], value class [java.sql.Timestamp], SQL type 93
15:35:46.999 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
15:35:46.999 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:35:47.330 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:35:47.330 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:35:47.331 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:35:47.332 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
15:35:47.338 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:35:47.338 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:35:48.588 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/api/carts/items/37
15:35:48.595 | DEBUG | FilterChainProxy: Securing DELETE /protected/api/carts/items/37
15:35:48.598 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:35:48.598 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:35:48.604 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:05:46Z, iat=2026-01-13T08:35:46Z, jti=13bdb997-4c8b-4ce6-b421-69242b1901d5, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]]
15:35:48.605 | DEBUG | FilterChainProxy: Secured DELETE /protected/api/carts/items/37
15:35:48.609 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:35:48.609 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
15:35:48.610 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
15:35:48.610 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:35:48.926 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:05:48Z, iat=2026-01-13T08:35:48Z, jti=b1d5a54f-f20f-43bf-aeba-a77fa1367829, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@6ba81484]
15:35:48.926 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:35:48.926 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
15:35:48.927 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
15:35:48.927 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 15:35:48.9013513], value class [java.sql.Timestamp], SQL type 93
15:35:48.927 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 15:36:18.9013513], value class [java.sql.Timestamp], SQL type 93
15:35:48.927 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
15:35:48.927 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 15:35:48.9013513], value class [java.sql.Timestamp], SQL type 93
15:35:48.927 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
15:35:48.927 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:35:49.257 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:35:49.257 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:35:49.261 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:35:49.261 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
15:35:49.266 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:35:49.266 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:35:49.275 | DEBUG | FilterChainProxy: Securing GET /protected/api/carts
15:35:49.277 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:35:49.277 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:35:49.281 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:05:48Z, iat=2026-01-13T08:35:48Z, jti=b1d5a54f-f20f-43bf-aeba-a77fa1367829, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]]
15:35:49.281 | DEBUG | FilterChainProxy: Secured GET /protected/api/carts
15:35:49.283 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:35:49.283 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
15:35:49.284 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
15:35:49.284 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:35:49.618 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:05:49Z, iat=2026-01-13T08:35:49Z, jti=15be1f32-b428-4bb9-9bea-5b584bbf348a, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@40ee00d]
15:35:49.619 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:35:49.619 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
15:35:49.620 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
15:35:49.620 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 15:35:49.5922907], value class [java.sql.Timestamp], SQL type 93
15:35:49.620 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 15:36:19.5922907], value class [java.sql.Timestamp], SQL type 93
15:35:49.620 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
15:35:49.621 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 15:35:49.5922907], value class [java.sql.Timestamp], SQL type 93
15:35:49.621 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
15:35:49.621 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:35:49.964 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:35:49.964 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:35:49.966 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:35:49.967 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
15:35:49.976 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:35:49.976 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:35:51.968 | DEBUG | FilterChainProxy: Securing GET /api/genres
15:35:51.971 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:35:51.971 | DEBUG | FilterChainProxy: Secured GET /api/genres
15:35:51.975 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:35:51.983 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:35:51.984 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:35:52.235 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:35:52.235 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:35:52.235 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:35:52.236 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
15:35:52.247 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
15:35:52.246 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
15:35:52.247 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:35:52.251 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
15:35:52.247 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:35:52.261 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
15:35:52.250 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:35:52.257 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
15:35:52.262 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
15:35:52.263 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:35:52.263 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
15:35:52.263 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:35:52.275 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
15:35:52.265 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
15:35:52.281 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:35:52.283 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:35:52.284 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:35:52.284 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
15:35:52.284 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:35:52.290 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
15:35:52.306 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:35:52.316 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:35:52.320 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:35:52.345 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:35:52.355 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:35:52.361 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:35:53.819 | DEBUG | FilterChainProxy: Securing GET /protected/api/carts
15:35:53.822 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:35:53.822 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:35:53.830 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:05:49Z, iat=2026-01-13T08:35:49Z, jti=15be1f32-b428-4bb9-9bea-5b584bbf348a, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]]
15:35:53.831 | DEBUG | FilterChainProxy: Secured GET /protected/api/carts
15:35:53.833 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:35:53.837 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
15:35:53.839 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
15:35:53.839 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:35:54.335 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:05:54Z, iat=2026-01-13T08:35:54Z, jti=24075a8c-45e6-44dd-a881-032a0b4abd07, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@7ace56e7]
15:35:54.337 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:35:54.338 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
15:35:54.339 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
15:35:54.339 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 15:35:54.2987917], value class [java.sql.Timestamp], SQL type 93
15:35:54.339 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 15:36:24.2987917], value class [java.sql.Timestamp], SQL type 93
15:35:54.339 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
15:35:54.339 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 15:35:54.2987917], value class [java.sql.Timestamp], SQL type 93
15:35:54.340 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
15:35:54.340 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:35:54.826 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:35:54.827 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:35:54.828 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:35:54.828 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
15:35:54.840 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:35:54.840 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:36:00.007 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:36:00.007 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:36:00.007 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768293360007], value class [java.lang.Long], SQL type unknown
15:36:00.011 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:36:34.263 | DEBUG | FilterChainProxy: Securing GET /api/genres
15:36:34.263 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:36:34.266 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:36:34.270 | DEBUG | FilterChainProxy: Secured GET /api/genres
15:36:34.267 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:36:34.270 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:36:34.465 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:36:34.469 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
15:36:34.471 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:36:34.473 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:36:34.472 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:36:34.473 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
15:36:34.475 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
15:36:34.486 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:36:34.475 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
15:36:34.489 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
15:36:34.488 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
15:36:34.489 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:36:34.490 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
15:36:34.490 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:36:34.492 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
15:36:34.491 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
15:36:34.504 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:36:34.506 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
15:36:34.520 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:36:34.527 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
15:36:34.506 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
15:36:34.527 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:36:34.532 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:36:34.535 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:36:34.553 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:36:34.554 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:36:34.588 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:36:34.588 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:36:34.588 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:36:34.588 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:37:00.017 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:37:00.018 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:37:00.018 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768293420017], value class [java.lang.Long], SQL type unknown
15:37:00.022 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:37:28.462 | DEBUG | FilterChainProxy: Securing GET /protected/api/carts
15:37:28.485 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:37:28.486 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:37:28.583 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:05:54Z, iat=2026-01-13T08:35:54Z, jti=24075a8c-45e6-44dd-a881-032a0b4abd07, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]]
15:37:28.584 | DEBUG | FilterChainProxy: Secured GET /protected/api/carts
15:37:28.618 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:37:28.618 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
15:37:28.619 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
15:37:28.621 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:37:29.381 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:07:29Z, iat=2026-01-13T08:37:29Z, jti=0dfe121e-5013-4416-9dab-83c380b84e0e, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@3abf5137]
15:37:29.382 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:37:29.382 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
15:37:29.383 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
15:37:29.384 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 15:37:29.3214321], value class [java.sql.Timestamp], SQL type 93
15:37:29.384 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 15:37:58.3214321], value class [java.sql.Timestamp], SQL type 93
15:37:29.384 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
15:37:29.384 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 15:37:29.3214321], value class [java.sql.Timestamp], SQL type 93
15:37:29.384 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
15:37:29.384 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:37:30.424 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:37:30.425 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:37:30.433 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:37:30.433 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
15:37:30.457 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:37:30.457 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:38:00.005 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:38:00.005 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:38:00.008 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768293480005], value class [java.lang.Long], SQL type unknown
15:38:00.025 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:38:05.882 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
15:38:05.890 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:38:05.890 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:38:05.905 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:07:29Z, iat=2026-01-13T08:37:29Z, jti=0dfe121e-5013-4416-9dab-83c380b84e0e, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]]
15:38:05.906 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
15:38:05.970 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:38:05.971 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:38:05.986 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:38:05.987 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:38:06.207 | DEBUG | FilterChainProxy: Securing GET /protected/api/carts
15:38:06.226 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:38:06.251 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:38:06.265 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:07:29Z, iat=2026-01-13T08:37:29Z, jti=0dfe121e-5013-4416-9dab-83c380b84e0e, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]]
15:38:06.270 | DEBUG | FilterChainProxy: Secured GET /protected/api/carts
15:38:06.278 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:38:06.282 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
15:38:06.284 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
15:38:06.286 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:38:07.305 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:08:07Z, iat=2026-01-13T08:38:07Z, jti=b3b4641f-587e-47f2-9f13-742eb72e985a, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@26087e8c]
15:38:07.307 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:38:07.315 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
15:38:07.316 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
15:38:07.320 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 15:38:07.218331], value class [java.sql.Timestamp], SQL type 93
15:38:07.323 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 15:38:36.218331], value class [java.sql.Timestamp], SQL type 93
15:38:07.324 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
15:38:07.331 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 15:38:07.218331], value class [java.sql.Timestamp], SQL type 93
15:38:07.333 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
15:38:07.333 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:38:09.364 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:38:09.368 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:38:09.378 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:38:09.378 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
15:38:09.404 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:38:09.405 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:38:14.002 | DEBUG | FilterChainProxy: Securing GET /api/genres
15:38:14.005 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:14.007 | DEBUG | FilterChainProxy: Secured GET /api/genres
15:38:14.037 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:38:14.044 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:14.044 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:38:14.658 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
15:38:14.662 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:14.660 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:38:14.666 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
15:38:14.666 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:14.669 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:38:14.681 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:38:14.746 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:14.778 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
15:38:14.782 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:38:14.783 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
15:38:14.847 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:14.862 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
15:38:14.815 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:38:14.828 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:14.829 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:14.898 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:38:14.829 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
15:38:14.847 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
15:38:14.901 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:14.902 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
15:38:14.895 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
15:38:14.905 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:14.918 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
15:38:14.977 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
15:38:14.981 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:14.982 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
15:38:15.030 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:38:15.036 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:15.039 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:38:16.212 | DEBUG | FilterChainProxy: Securing GET /api/books/45
15:38:16.215 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:16.216 | DEBUG | FilterChainProxy: Secured GET /api/books/45
15:38:16.472 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:38:16.473 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:16.474 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:38:18.447 | DEBUG | FilterChainProxy: Securing GET /api/genres
15:38:18.479 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:38:18.483 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:18.483 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:18.507 | DEBUG | FilterChainProxy: Secured GET /api/genres
15:38:18.509 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:38:18.945 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:38:18.950 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
15:38:18.962 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
15:38:18.962 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
15:38:18.971 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
15:38:18.987 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:18.989 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
15:38:18.977 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:18.995 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:38:18.978 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:19.003 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
15:38:18.979 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
15:38:19.019 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:19.020 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
15:38:18.979 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:19.038 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
15:38:18.982 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:19.194 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:38:19.205 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
15:38:19.210 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:38:19.245 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:19.245 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:19.223 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:38:19.253 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:38:19.234 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
15:38:19.239 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:19.245 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
15:38:19.255 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:19.261 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:38:19.262 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:38:20.932 | DEBUG | FilterChainProxy: Securing GET /api/books/45
15:38:20.937 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:20.938 | DEBUG | FilterChainProxy: Secured GET /api/books/45
15:38:21.014 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:38:21.015 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:21.018 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:38:25.839 | DEBUG | FilterChainProxy: Securing GET /protected/api/carts
15:38:25.842 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:38:25.843 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:38:25.852 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:08:07Z, iat=2026-01-13T08:38:07Z, jti=b3b4641f-587e-47f2-9f13-742eb72e985a, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]]
15:38:25.853 | DEBUG | FilterChainProxy: Secured GET /protected/api/carts
15:38:25.858 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:38:25.858 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
15:38:25.859 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
15:38:25.859 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:38:26.505 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:08:26Z, iat=2026-01-13T08:38:26Z, jti=1454aac0-ca72-4d74-a7ce-f9b6f9cfd92d, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@15b1d443]
15:38:26.505 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:38:26.506 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
15:38:26.511 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
15:38:26.516 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 15:38:26.4382238], value class [java.sql.Timestamp], SQL type 93
15:38:26.518 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 15:38:55.4382238], value class [java.sql.Timestamp], SQL type 93
15:38:26.518 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
15:38:26.518 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 15:38:26.4382238], value class [java.sql.Timestamp], SQL type 93
15:38:26.518 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
15:38:26.518 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:38:27.161 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:38:27.162 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:38:27.166 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:38:27.167 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
15:38:27.186 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:38:27.187 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:38:28.880 | DEBUG | FilterChainProxy: Securing GET /api/books/45
15:38:28.895 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:28.903 | DEBUG | FilterChainProxy: Secured GET /api/books/45
15:38:28.998 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:38:28.999 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:29.001 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:38:37.089 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/api/carts/items
15:38:37.107 | DEBUG | FilterChainProxy: Securing POST /protected/api/carts/items
15:38:37.113 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:38:37.114 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:38:37.128 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:08:26Z, iat=2026-01-13T08:38:26Z, jti=1454aac0-ca72-4d74-a7ce-f9b6f9cfd92d, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]]
15:38:37.129 | DEBUG | FilterChainProxy: Secured POST /protected/api/carts/items
15:38:37.133 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:38:37.136 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
15:38:37.137 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
15:38:37.137 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:38:37.801 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:08:37Z, iat=2026-01-13T08:38:37Z, jti=95fa1c43-7400-4333-bd69-46c5576d35dd, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@4c4fc92f]
15:38:37.804 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:38:37.805 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
15:38:37.810 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
15:38:37.811 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 15:38:37.753994], value class [java.sql.Timestamp], SQL type 93
15:38:37.812 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 15:39:06.753994], value class [java.sql.Timestamp], SQL type 93
15:38:37.812 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
15:38:37.812 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 15:38:37.753994], value class [java.sql.Timestamp], SQL type 93
15:38:37.812 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
15:38:37.813 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:38:39.403 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:38:39.404 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:38:39.406 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:38:39.406 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
15:38:39.418 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:38:39.418 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:38:42.019 | DEBUG | FilterChainProxy: Securing GET /protected/api/carts
15:38:42.022 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:38:42.023 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:38:42.031 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:08:37Z, iat=2026-01-13T08:38:37Z, jti=95fa1c43-7400-4333-bd69-46c5576d35dd, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]]
15:38:42.032 | DEBUG | FilterChainProxy: Secured GET /protected/api/carts
15:38:42.034 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:38:42.035 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
15:38:42.037 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
15:38:42.040 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:38:42.550 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:08:42Z, iat=2026-01-13T08:38:42Z, jti=c82a857c-638e-4873-8550-dec9ead45937, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@48591fbf]
15:38:42.551 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:38:42.551 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
15:38:42.553 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
15:38:42.554 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 15:38:42.5189499], value class [java.sql.Timestamp], SQL type 93
15:38:42.556 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 15:39:12.5189499], value class [java.sql.Timestamp], SQL type 93
15:38:42.557 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
15:38:42.558 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 15:38:42.5189499], value class [java.sql.Timestamp], SQL type 93
15:38:42.559 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
15:38:42.562 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:38:43.189 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:38:43.189 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:38:43.198 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:38:43.198 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
15:38:43.241 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:38:43.242 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:38:43.293 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:38:43.295 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:43.295 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:38:46.229 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/api/carts/items/39
15:38:46.232 | DEBUG | FilterChainProxy: Securing DELETE /protected/api/carts/items/39
15:38:46.234 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:38:46.234 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:38:46.241 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:08:42Z, iat=2026-01-13T08:38:42Z, jti=c82a857c-638e-4873-8550-dec9ead45937, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]]
15:38:46.243 | DEBUG | FilterChainProxy: Secured DELETE /protected/api/carts/items/39
15:38:46.247 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:38:46.247 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
15:38:46.248 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
15:38:46.248 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:38:46.592 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:08:46Z, iat=2026-01-13T08:38:46Z, jti=1e56348e-7f6b-47e9-bad5-f5f11e00f85a, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@6a78fb85]
15:38:46.593 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:38:46.593 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
15:38:46.594 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
15:38:46.594 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 15:38:46.5713672], value class [java.sql.Timestamp], SQL type 93
15:38:46.594 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 15:39:16.5713672], value class [java.sql.Timestamp], SQL type 93
15:38:46.595 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
15:38:46.595 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 15:38:46.5713672], value class [java.sql.Timestamp], SQL type 93
15:38:46.595 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
15:38:46.595 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:38:46.961 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:38:46.961 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:38:46.963 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:38:46.963 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
15:38:46.972 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:38:46.972 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:38:46.979 | DEBUG | FilterChainProxy: Securing GET /protected/api/carts
15:38:46.980 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:38:46.981 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:38:46.984 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:08:46Z, iat=2026-01-13T08:38:46Z, jti=1e56348e-7f6b-47e9-bad5-f5f11e00f85a, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]]
15:38:46.985 | DEBUG | FilterChainProxy: Secured GET /protected/api/carts
15:38:46.986 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:38:46.987 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
15:38:46.987 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
15:38:46.987 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:38:47.328 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:08:47Z, iat=2026-01-13T08:38:47Z, jti=46caf372-e73d-496b-a548-33a17b7d06b8, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@79d951fe]
15:38:47.328 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:38:47.329 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
15:38:47.329 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
15:38:47.329 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 15:38:47.301188], value class [java.sql.Timestamp], SQL type 93
15:38:47.330 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 15:39:17.301188], value class [java.sql.Timestamp], SQL type 93
15:38:47.330 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
15:38:47.330 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 15:38:47.301188], value class [java.sql.Timestamp], SQL type 93
15:38:47.332 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
15:38:47.332 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:38:47.714 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:38:47.714 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:38:47.716 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:38:47.716 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
15:38:47.727 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:38:47.727 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:38:49.591 | DEBUG | FilterChainProxy: Securing GET /api/genres
15:38:49.592 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:49.593 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:38:49.593 | DEBUG | FilterChainProxy: Secured GET /api/genres
15:38:49.595 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:49.595 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:38:49.871 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:38:49.872 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:49.873 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:38:49.874 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
15:38:49.875 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:49.875 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
15:38:49.893 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
15:38:49.893 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
15:38:49.900 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
15:38:49.911 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
15:38:49.930 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:49.932 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:49.930 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:49.946 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
15:38:49.940 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:38:49.948 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:49.945 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
15:38:49.944 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:49.947 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
15:38:49.946 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
15:38:49.948 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:49.952 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
15:38:49.951 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
15:38:49.957 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:38:49.982 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:38:49.994 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:38:49.996 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:50.000 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:38:50.000 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:50.001 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:38:55.991 | DEBUG | FilterChainProxy: Securing GET /api/books/45
15:38:56.001 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:56.002 | DEBUG | FilterChainProxy: Secured GET /api/books/45
15:38:56.140 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:38:56.141 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:38:56.141 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:39:00.017 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:39:00.018 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:39:00.019 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768293540017], value class [java.lang.Long], SQL type unknown
15:39:00.028 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:39:09.928 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/api/ratings
15:39:09.936 | DEBUG | FilterChainProxy: Securing POST /protected/api/ratings
15:39:09.939 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:39:09.939 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:39:10.013 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:08:47Z, iat=2026-01-13T08:38:47Z, jti=46caf372-e73d-496b-a548-33a17b7d06b8, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]]
15:39:10.013 | DEBUG | FilterChainProxy: Secured POST /protected/api/ratings
15:39:10.014 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:39:10.015 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
15:39:10.015 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
15:39:10.015 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:39:10.572 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:09:10Z, iat=2026-01-13T08:39:10Z, jti=65af8bb8-1876-4544-8f77-4b2ad69485f6, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@2e827fcd]
15:39:10.574 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:39:10.574 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
15:39:10.575 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
15:39:10.575 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 15:39:10.5346378], value class [java.sql.Timestamp], SQL type 93
15:39:10.576 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 15:39:40.5346378], value class [java.sql.Timestamp], SQL type 93
15:39:10.576 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
15:39:10.576 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 15:39:10.5346378], value class [java.sql.Timestamp], SQL type 93
15:39:10.576 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
15:39:10.577 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:39:11.318 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:39:11.319 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:39:11.323 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:39:11.323 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
15:39:11.335 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:39:11.336 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:39:39.403 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:39:39.410 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:39:39.406 | DEBUG | FilterChainProxy: Securing GET /api/genres
15:39:39.410 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:39:39.411 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:39:39.412 | DEBUG | FilterChainProxy: Secured GET /api/genres
15:39:39.505 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:39:39.506 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:39:39.507 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:39:39.627 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
15:39:39.629 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:39:39.629 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
15:39:39.629 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
15:39:39.629 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:39:39.630 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
15:39:39.635 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
15:39:39.635 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
15:39:39.640 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:39:39.641 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:39:39.648 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
15:39:39.645 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
15:39:39.649 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
15:39:39.649 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:39:39.649 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
15:39:39.650 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
15:39:39.650 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:39:39.651 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
15:39:39.661 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:39:39.669 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:39:39.673 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:39:39.669 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:39:39.677 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:39:39.677 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:39:39.715 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:39:39.765 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:39:39.800 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:39:45.554 | DEBUG | FilterChainProxy: Securing POST /protected/logout
15:39:45.603 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:39:45.605 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:39:45.610 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:09:10Z, iat=2026-01-13T08:39:10Z, jti=65af8bb8-1876-4544-8f77-4b2ad69485f6, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]]
15:39:45.610 | DEBUG | LogoutFilter: Logging out [OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:35:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:09:10Z, iat=2026-01-13T08:39:10Z, jti=65af8bb8-1876-4544-8f77-4b2ad69485f6, authorities=[ROLE_CUSTOMER], sid=3pNnbdeHOEtTz2swcnf_3YzfA3YcFbQ8XJW7t9qgyac}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7f220dc9-fd4d-44e6-8bcf-08659640ba42], Granted Authorities=[ROLE_CUSTOMER]]]
15:39:45.624 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:39:45.624 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE SESSION_ID = ?
AND MAX_INACTIVE_INTERVAL >= 0
]
15:39:45.625 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [f4ef74c5-1a89-4dec-9e00-33f5004851bf], value class [java.lang.String], SQL type unknown
15:39:45.633 | DEBUG | SecurityContextLogoutHandler: Invalidated session f4ef74c5-1a89-4dec-9e00-33f5004851bf
15:39:45.638 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:39:45.638 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:39:45.662 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:39:45.663 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
15:39:45.663 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
15:39:45.663 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:39:45.728 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/connect/logout?id_token_hint=eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJuZ3V5ZW52aWV0YW5oLnBlcnNvbmFsQGdtYWlsLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2ODI5MzMyNSwiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY4Mjk1MzUwLCJpYXQiOjE3NjgyOTM1NTAsImp0aSI6IjY1YWY4YmI4LTE4NzYtNDU0NC04Zjc3LTRiMmFkNjk0ODVmNiIsImF1dGhvcml0aWVzIjpbIlJPTEVfQ1VTVE9NRVIiXSwic2lkIjoiM3BObmJkZUhPRXRUejJzd2NuZl8zWXpmQTNZY0ZiUThYSlc3dDlxZ3lhYyJ9.alznkAQGUujgDqkHbHN8I9a9agUaA3qRx1oloiVHenT7HFStnC-TZnpjZtkPmptiGRGIjwVpO3--RNeOiBxvdDndLqkD963gwz_7PzxX1uecNZQln3jI6tGI3zl9ugpgIylmwj5fggLNsGGKi_x7ZUS62kqWizJM9EFdVjb7c8k8E2_Dj3mp5Y0FtuQOuNlOu4uYy4tln1KVCzd11SgGYzKNGsmeNEeZj5PiRGFt9TqgD4yM-ZGE3JDCwnG0MJOD3Q28FdDdflGd1cCRV7LPiMcLjyum8jAKSgyA7chQcn1xCVImqAFTPdG36lJ4_SWqOdx9lFUsUPm1S0Ft1RLu4Q&post_logout_redirect_uri=https://app.bookommerce.com:8080
15:39:46.793 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
15:39:46.795 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:39:46.798 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
15:39:46.799 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
15:39:46.799 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
15:39:47.104 | DEBUG | FilterChainProxy: Securing GET /api/genres
15:39:47.104 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:39:47.105 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:39:47.105 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:39:47.105 | DEBUG | FilterChainProxy: Secured GET /api/genres
15:39:47.105 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:39:47.164 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:39:47.165 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:39:47.166 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:39:47.178 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
15:39:47.179 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:39:47.179 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
15:39:47.190 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
15:39:47.190 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:39:47.191 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
15:39:47.196 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
15:39:47.198 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:39:47.198 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
15:39:47.214 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
15:39:47.216 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:39:47.216 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
15:39:47.226 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
15:39:47.226 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:39:47.227 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
15:39:47.239 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
15:39:47.239 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:39:47.239 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
15:39:47.249 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:39:47.253 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:39:47.253 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:39:47.260 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:39:47.260 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:39:47.260 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:39:47.271 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:39:47.271 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:39:47.271 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:40:00.005 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:40:00.005 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:40:00.007 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768293600005], value class [java.lang.Long], SQL type unknown
15:40:00.012 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:40:03.799 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
15:40:03.802 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=o0sf9qyq1kBMtLpoqxZaiECN8gpg0f3wXWXvUwTVYVk%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=x0KN8EmdjVm8OQb7I8P3OD468eSE8scNX4K22PySlJQ
15:40:03.805 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:40:03.805 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
15:40:03.807 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:40:03.807 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
15:40:03.887 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=jivMx2uv_h6DT2j_7NCxsaOPrfuwvzQbp7f1SPgFAeF-q-TDXJo8QZglM5Pcp4Dg2ElpuMbKW2BHlZxvhuO8EPAa2E2daB2OUDKy_w95TFhAvQDuL2uSOP6FAR7UHLk3&state=o0sf9qyq1kBMtLpoqxZaiECN8gpg0f3wXWXvUwTVYVk%3D
15:40:03.890 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:40:03.890 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:40:04.242 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:40:04.242 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
15:40:04.243 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
15:40:04.243 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 15:40:04.2131185], value class [java.sql.Timestamp], SQL type 93
15:40:04.243 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 15:40:34.2131185], value class [java.sql.Timestamp], SQL type 93
15:40:04.243 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
15:40:04.244 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 15:40:04.2131185], value class [java.sql.Timestamp], SQL type 93
15:40:04.244 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
15:40:04.244 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
15:40:04.245 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:40:04.245 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO oauth2_authorized_client (client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
15:40:04.245 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
15:40:04.246 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
15:40:04.246 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [Bearer], value class [java.lang.String], SQL type 12
15:40:04.246 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [2026-01-13 15:40:04.2131185], value class [java.sql.Timestamp], SQL type 93
15:40:04.246 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 6, parameter value [2026-01-13 15:40:34.2131185], value class [java.sql.Timestamp], SQL type 93
15:40:04.247 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [openid,profile], value class [java.lang.String], SQL type 12
15:40:04.247 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [2026-01-13 15:40:04.2131185], value class [java.sql.Timestamp], SQL type 93
15:40:04.254 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 387563a3-1209-4a76-bff8-f74ec6aa4652
15:40:04.255 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
15:40:04.255 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:40:03Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:10:04Z, iat=2026-01-13T08:40:04Z, nonce=x0KN8EmdjVm8OQb7I8P3OD468eSE8scNX4K22PySlJQ, jti=0c7fc8ee-e008-475d-98af-47f39b3f7cfb, authorities=[ROLE_PRODUCT_MANAGER], sid=Wn6ef8seeRydsmbM_TKhD8oReuFiyB_Txy1HRsqTNRI}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=387563a3-1209-4a76-bff8-f74ec6aa4652], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@21bf447d]
15:40:04.255 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:40:03Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:10:04Z, iat=2026-01-13T08:40:04Z, nonce=x0KN8EmdjVm8OQb7I8P3OD468eSE8scNX4K22PySlJQ, jti=0c7fc8ee-e008-475d-98af-47f39b3f7cfb, authorities=[ROLE_PRODUCT_MANAGER], sid=Wn6ef8seeRydsmbM_TKhD8oReuFiyB_Txy1HRsqTNRI}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=387563a3-1209-4a76-bff8-f74ec6aa4652], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
15:40:04.257 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:40:04.257 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:40:04.259 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:40:04.259 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
15:40:04.261 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:40:04.261 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
15:40:04.272 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:40:04.272 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:40:33.989 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
15:40:33.994 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:40:33.995 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:40:34.003 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:40:03Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:10:04Z, iat=2026-01-13T08:40:04Z, nonce=x0KN8EmdjVm8OQb7I8P3OD468eSE8scNX4K22PySlJQ, jti=0c7fc8ee-e008-475d-98af-47f39b3f7cfb, authorities=[ROLE_PRODUCT_MANAGER], sid=Wn6ef8seeRydsmbM_TKhD8oReuFiyB_Txy1HRsqTNRI}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=387563a3-1209-4a76-bff8-f74ec6aa4652], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
15:40:34.004 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
15:40:34.045 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:40:34.045 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:40:34.051 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:40:34.052 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:40:46.448 | DEBUG | FilterChainProxy: Securing GET /protected/api/ratings?page=0&size=5&sort=CREATED_AT&order=DESC
15:40:46.449 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:40:46.450 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:40:46.457 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:40:03Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:10:04Z, iat=2026-01-13T08:40:04Z, nonce=x0KN8EmdjVm8OQb7I8P3OD468eSE8scNX4K22PySlJQ, jti=0c7fc8ee-e008-475d-98af-47f39b3f7cfb, authorities=[ROLE_PRODUCT_MANAGER], sid=Wn6ef8seeRydsmbM_TKhD8oReuFiyB_Txy1HRsqTNRI}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=387563a3-1209-4a76-bff8-f74ec6aa4652], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
15:40:46.459 | DEBUG | FilterChainProxy: Secured GET /protected/api/ratings?page=0&size=5&sort=CREATED_AT&order=DESC
15:40:46.461 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:40:46.462 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
15:40:46.462 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
15:40:46.463 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
15:40:46.819 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:40:03Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:10:46Z, iat=2026-01-13T08:40:46Z, jti=caacab58-0909-4df6-8eb8-7a82ca3418c1, authorities=[ROLE_PRODUCT_MANAGER], sid=Wn6ef8seeRydsmbM_TKhD8oReuFiyB_Txy1HRsqTNRI}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=387563a3-1209-4a76-bff8-f74ec6aa4652], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@7e54f924]
15:40:46.819 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:40:46.820 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
15:40:46.820 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
15:40:46.820 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 15:40:46.7690329], value class [java.sql.Timestamp], SQL type 93
15:40:46.821 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 15:41:16.7690329], value class [java.sql.Timestamp], SQL type 93
15:40:46.821 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
15:40:46.821 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 15:40:46.7690329], value class [java.sql.Timestamp], SQL type 93
15:40:46.821 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
15:40:46.821 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
15:40:47.431 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:40:47.432 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:40:47.435 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:40:47.436 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
15:40:47.445 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:40:47.446 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:40:51.341 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10
15:40:51.342 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:40:51.342 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10
15:40:51.464 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:40:51.464 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:40:51.464 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:40:51.474 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
15:40:51.477 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
15:40:51.486 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:40:51.488 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:40:51.492 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
15:40:51.495 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
15:40:51.507 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:40:51.517 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
15:40:51.514 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:40:51.526 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
15:40:51.515 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:40:51.538 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:40:51.516 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:40:51.516 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:40:51.541 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:40:51.518 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:40:51.541 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
15:40:51.543 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
15:40:51.563 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
15:40:51.602 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:40:51.628 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
15:40:51.636 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
15:40:51.636 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:40:51.649 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:40:51.649 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
15:40:51.650 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:40:51.651 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:40:53.409 | DEBUG | FilterChainProxy: Securing GET /protected/api/ratings?page=0&size=5&sort=CREATED_AT&order=DESC
15:40:53.411 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:40:53.411 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:40:53.419 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:40:03Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:10:46Z, iat=2026-01-13T08:40:46Z, jti=caacab58-0909-4df6-8eb8-7a82ca3418c1, authorities=[ROLE_PRODUCT_MANAGER], sid=Wn6ef8seeRydsmbM_TKhD8oReuFiyB_Txy1HRsqTNRI}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=387563a3-1209-4a76-bff8-f74ec6aa4652], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
15:40:53.419 | DEBUG | FilterChainProxy: Secured GET /protected/api/ratings?page=0&size=5&sort=CREATED_AT&order=DESC
15:40:53.423 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:40:53.424 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
15:40:53.424 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
15:40:53.424 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
15:40:53.900 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:40:03Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:10:53Z, iat=2026-01-13T08:40:53Z, jti=69cb9519-50db-4fca-a443-44c9fbb5d1a1, authorities=[ROLE_PRODUCT_MANAGER], sid=Wn6ef8seeRydsmbM_TKhD8oReuFiyB_Txy1HRsqTNRI}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=387563a3-1209-4a76-bff8-f74ec6aa4652], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@5667f08f]
15:40:53.901 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:40:53.901 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
15:40:53.901 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
15:40:53.901 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 15:40:53.8600485], value class [java.sql.Timestamp], SQL type 93
15:40:53.902 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 15:41:23.8600485], value class [java.sql.Timestamp], SQL type 93
15:40:53.902 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
15:40:53.902 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 15:40:53.8600485], value class [java.sql.Timestamp], SQL type 93
15:40:53.902 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
15:40:53.902 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
15:40:54.259 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:40:54.260 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:40:54.261 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:40:54.261 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
15:40:54.266 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:40:54.266 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:41:00.002 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:41:00.003 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:41:00.004 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768293660002], value class [java.lang.Long], SQL type unknown
15:41:00.009 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:42:00.013 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:42:00.013 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:42:00.014 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768293720013], value class [java.lang.Long], SQL type unknown
15:42:00.016 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:42:04.547 | DEBUG | FilterChainProxy: Securing POST /protected/logout
15:42:04.551 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:42:04.551 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:42:04.556 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:40:03Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:10:53Z, iat=2026-01-13T08:40:53Z, jti=69cb9519-50db-4fca-a443-44c9fbb5d1a1, authorities=[ROLE_PRODUCT_MANAGER], sid=Wn6ef8seeRydsmbM_TKhD8oReuFiyB_Txy1HRsqTNRI}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=387563a3-1209-4a76-bff8-f74ec6aa4652], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
15:42:04.559 | DEBUG | LogoutFilter: Logging out [OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:40:03Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:10:53Z, iat=2026-01-13T08:40:53Z, jti=69cb9519-50db-4fca-a443-44c9fbb5d1a1, authorities=[ROLE_PRODUCT_MANAGER], sid=Wn6ef8seeRydsmbM_TKhD8oReuFiyB_Txy1HRsqTNRI}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=387563a3-1209-4a76-bff8-f74ec6aa4652], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
15:42:04.561 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:42:04.561 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE SESSION_ID = ?
AND MAX_INACTIVE_INTERVAL >= 0
]
15:42:04.561 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1a25df6c-cf36-43de-a12a-de027e6f95f5], value class [java.lang.String], SQL type unknown
15:42:04.567 | DEBUG | SecurityContextLogoutHandler: Invalidated session 1a25df6c-cf36-43de-a12a-de027e6f95f5
15:42:04.567 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:42:04.567 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:42:04.569 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:42:04.569 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
15:42:04.570 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
15:42:04.571 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
15:42:04.577 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/connect/logout?id_token_hint=eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJwcm9kbWFuQGJvb2tvbW1lcmNlLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2ODI5MzYwMywiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY4Mjk1NDUzLCJpYXQiOjE3NjgyOTM2NTMsImp0aSI6IjY5Y2I5NTE5LTUwZGItNGZjYS1hNDQzLTQ0YzlmYmI1ZDFhMSIsImF1dGhvcml0aWVzIjpbIlJPTEVfUFJPRFVDVF9NQU5BR0VSIl0sInNpZCI6IlduNmVmOHNlZVJ5ZHNtYk1fVEtoRDhvUmV1Rml5Ql9UeHkxSFJzcVROUkkifQ.mM64Jowvh1Fv3X0MMc8qYAUnssP5RcdTU0O9If-4KxPfLzPMBVXK3Xe19J8qmfZpsimlEkrB4dnD4r_nrFwbJqOVS_Cu4c1OS-WhSedAHi0sPoNX0pS0A9Ke0oZ9GRI2tyxAubkVSIeSpxWZcNEiNGViVxyg_1wvVKufFji9dOt55fXQcBPeWEFeEKq3QnbdmUIAk8ggZ_CYxpPZgV-vYwvIy843DIUzx1i4plOYAHT8u3kizyBdb839I2ZHGVaU2k_AWqaxoS91imFhbZF55uo8_Mi_wAhsBf3S5K_F9EvQottWh7BABzVE3KdBHpwqgzppEstkZgE_ngamSU5QPQ&post_logout_redirect_uri=https://auth.bookommerce.com:8282/page/store-login
15:42:30.152 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
15:42:30.154 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=X4CDVIRAy_4LtSkf3Y7VNk_vIT1l1mfezY40-11gvn0%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=4yGShGh8BjvAsVWi69Gd8MW-dbSdwFz87sOIijemNvQ
15:42:30.156 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:42:30.156 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
15:42:30.160 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:42:30.161 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
15:42:30.241 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=LI72m22_sp5vW7RIIhzqRXcugoSgGbCgNaRQuIF3QhQdYRzMEYvCpv8MpzRbsETiTUGA5EOrQHyY7mSwuazaI7r3tqLEZiugqb7txbfZ5PiDtRffM_FUPyAp-Yc3Zy5Z&state=X4CDVIRAy_4LtSkf3Y7VNk_vIT1l1mfezY40-11gvn0%3D
15:42:30.242 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:42:30.242 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:42:30.602 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:42:30.602 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
15:42:30.603 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
15:42:30.603 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 15:42:30.5701673], value class [java.sql.Timestamp], SQL type 93
15:42:30.603 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 15:43:00.5701673], value class [java.sql.Timestamp], SQL type 93
15:42:30.603 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
15:42:30.603 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 15:42:30.5701673], value class [java.sql.Timestamp], SQL type 93
15:42:30.603 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
15:42:30.604 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
15:42:30.604 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:42:30.604 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO oauth2_authorized_client (client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
15:42:30.605 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
15:42:30.605 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
15:42:30.605 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [Bearer], value class [java.lang.String], SQL type 12
15:42:30.605 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [2026-01-13 15:42:30.5701673], value class [java.sql.Timestamp], SQL type 93
15:42:30.605 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 6, parameter value [2026-01-13 15:43:00.5701673], value class [java.sql.Timestamp], SQL type 93
15:42:30.606 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [openid,profile], value class [java.lang.String], SQL type 12
15:42:30.606 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [2026-01-13 15:42:30.5701673], value class [java.sql.Timestamp], SQL type 93
15:42:30.609 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from baa9a445-36e5-4141-b229-21edd4b744b4
15:42:30.610 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
15:42:30.611 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:42:30Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:12:30Z, iat=2026-01-13T08:42:30Z, nonce=4yGShGh8BjvAsVWi69Gd8MW-dbSdwFz87sOIijemNvQ, jti=1d5856bb-469b-47c3-a86f-2cb95b84f4cc, authorities=[ROLE_PRODUCT_MANAGER], sid=HCWuY7Ku3JDnpPnmUg9z4zVjJB6rkadzAZm0_Lfr79I}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=baa9a445-36e5-4141-b229-21edd4b744b4], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@71c91e4]
15:42:30.612 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:42:30Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:12:30Z, iat=2026-01-13T08:42:30Z, nonce=4yGShGh8BjvAsVWi69Gd8MW-dbSdwFz87sOIijemNvQ, jti=1d5856bb-469b-47c3-a86f-2cb95b84f4cc, authorities=[ROLE_PRODUCT_MANAGER], sid=HCWuY7Ku3JDnpPnmUg9z4zVjJB6rkadzAZm0_Lfr79I}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=baa9a445-36e5-4141-b229-21edd4b744b4], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
15:42:30.614 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:42:30.614 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:42:30.618 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:42:30.618 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
15:42:30.621 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:42:30.621 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
15:42:30.624 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:42:30.624 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:42:31.152 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
15:42:31.155 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:42:31.155 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:42:31.160 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:42:30Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:12:30Z, iat=2026-01-13T08:42:30Z, nonce=4yGShGh8BjvAsVWi69Gd8MW-dbSdwFz87sOIijemNvQ, jti=1d5856bb-469b-47c3-a86f-2cb95b84f4cc, authorities=[ROLE_PRODUCT_MANAGER], sid=HCWuY7Ku3JDnpPnmUg9z4zVjJB6rkadzAZm0_Lfr79I}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=baa9a445-36e5-4141-b229-21edd4b744b4], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
15:42:31.161 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
15:42:31.173 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:42:31.173 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:42:31.186 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:42:31.186 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:42:41.809 | DEBUG | FilterChainProxy: Securing POST /protected/logout
15:42:41.812 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:42:41.813 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:42:41.821 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:42:30Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:12:30Z, iat=2026-01-13T08:42:30Z, nonce=4yGShGh8BjvAsVWi69Gd8MW-dbSdwFz87sOIijemNvQ, jti=1d5856bb-469b-47c3-a86f-2cb95b84f4cc, authorities=[ROLE_PRODUCT_MANAGER], sid=HCWuY7Ku3JDnpPnmUg9z4zVjJB6rkadzAZm0_Lfr79I}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=baa9a445-36e5-4141-b229-21edd4b744b4], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
15:42:41.824 | DEBUG | LogoutFilter: Logging out [OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:42:30Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:12:30Z, iat=2026-01-13T08:42:30Z, nonce=4yGShGh8BjvAsVWi69Gd8MW-dbSdwFz87sOIijemNvQ, jti=1d5856bb-469b-47c3-a86f-2cb95b84f4cc, authorities=[ROLE_PRODUCT_MANAGER], sid=HCWuY7Ku3JDnpPnmUg9z4zVjJB6rkadzAZm0_Lfr79I}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=baa9a445-36e5-4141-b229-21edd4b744b4], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
15:42:41.826 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:42:41.827 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE SESSION_ID = ?
AND MAX_INACTIVE_INTERVAL >= 0
]
15:42:41.827 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [fef52f9e-8621-45ce-9116-eb458b177cad], value class [java.lang.String], SQL type unknown
15:42:41.831 | DEBUG | SecurityContextLogoutHandler: Invalidated session fef52f9e-8621-45ce-9116-eb458b177cad
15:42:41.833 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:42:41.833 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:42:41.837 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:42:41.839 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
15:42:41.840 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
15:42:41.840 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
15:42:41.847 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/connect/logout?id_token_hint=eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJwcm9kbWFuQGJvb2tvbW1lcmNlLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2ODI5Mzc1MCwiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY4Mjk1NTUwLCJpYXQiOjE3NjgyOTM3NTAsIm5vbmNlIjoiNHlHU2hHaDhCanZBc1ZXaTY5R2Q4TVctZGJTZHdGejg3c09JaWplbU52USIsImp0aSI6IjFkNTg1NmJiLTQ2OWItNDdjMy1hODZmLTJjYjk1Yjg0ZjRjYyIsImF1dGhvcml0aWVzIjpbIlJPTEVfUFJPRFVDVF9NQU5BR0VSIl0sInNpZCI6IkhDV3VZN0t1M0pEbnBQbm1VZzl6NHpWakpCNnJrYWR6QVptMF9MZnI3OUkifQ.bmkPYlBz9BTjNMIyCI7OCURy1IK3YfzTu5PKyYi5Qn8R_-GPV6xoW-jsB9onfXKtDQr668TvGPDmGSHtg1JZCOQ6o-3lMHY1yNR7EqT57K4gANg62W74RVTkLV2oJ2ZbZt6xg7FGFMd8dajoIVIXWOCk4DbTsYX0E896cBZHXN1dKtXNxLkE5rdKVanhq8QWUF2eI9gmLB3PPONm8WhGfkLrBnwPAd1uiMdDjFqAC-Fd1QwwsCkbQkk0zwsLT9CZTvBXa8MyNW8tzUSNNl0j3A8k1ILHTu6ety_peQbli2Ie2h_SIk_DkTHBTsmSZF3_-HHVk0eaK_xqBgTinLQbfA&post_logout_redirect_uri=https://auth.bookommerce.com:8282/page/store-login
15:43:00.015 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:43:00.015 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:43:00.016 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768293780015], value class [java.lang.Long], SQL type unknown
15:43:00.018 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:43:25.059 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
15:43:25.062 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=IwcQSczBxc9SvTiWC6KaXSgdRux6xLUXPL6CFyvKF8s%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=D4HYDB9Cy-FxtyCPHxio7CeNoQS3_fwFqu34Am1wnfI
15:43:25.066 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:43:25.066 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
15:43:25.070 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:43:25.070 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
15:43:25.129 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=Ycq1wQ5MvakOXf8bRKHRpOt1rtBMTjAJrqSgczJxbzYBmn3dHcAFxvakM1QyGoRdxMLh11-us4QHpc2hOW-_NiCt1m-sbQKL64ZAp7VHT_GI7OzWd34GxsPrmoNOfg0z&state=IwcQSczBxc9SvTiWC6KaXSgdRux6xLUXPL6CFyvKF8s%3D
15:43:25.133 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:43:25.133 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:43:25.535 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:43:25.535 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
15:43:25.536 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
15:43:25.536 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 15:43:25.5091519], value class [java.sql.Timestamp], SQL type 93
15:43:25.537 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 15:43:55.5091519], value class [java.sql.Timestamp], SQL type 93
15:43:25.537 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
15:43:25.539 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 15:43:25.5091519], value class [java.sql.Timestamp], SQL type 93
15:43:25.539 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
15:43:25.539 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:43:25.540 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:43:25.541 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO oauth2_authorized_client (client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
15:43:25.541 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
15:43:25.541 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:43:25.542 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [Bearer], value class [java.lang.String], SQL type 12
15:43:25.542 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [2026-01-13 15:43:25.5091519], value class [java.sql.Timestamp], SQL type 93
15:43:25.542 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 6, parameter value [2026-01-13 15:43:55.5091519], value class [java.sql.Timestamp], SQL type 93
15:43:25.542 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [openid,profile], value class [java.lang.String], SQL type 12
15:43:25.542 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [2026-01-13 15:43:25.5091519], value class [java.sql.Timestamp], SQL type 93
15:43:25.552 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from ec6c8677-d5ff-4b20-8e0a-6a0cf9d5a9f6
15:43:25.553 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
15:43:25.554 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:43:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:13:25Z, iat=2026-01-13T08:43:25Z, nonce=D4HYDB9Cy-FxtyCPHxio7CeNoQS3_fwFqu34Am1wnfI, jti=92837736-8782-48ff-92c6-af728f34dd98, authorities=[ROLE_CUSTOMER], sid=FTdVfa-UAFkCpaXL_h413OvLY0aA7oF4SCP8F9kl5V4}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=ec6c8677-d5ff-4b20-8e0a-6a0cf9d5a9f6], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@7ad51f0e]
15:43:25.554 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:43:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:13:25Z, iat=2026-01-13T08:43:25Z, nonce=D4HYDB9Cy-FxtyCPHxio7CeNoQS3_fwFqu34Am1wnfI, jti=92837736-8782-48ff-92c6-af728f34dd98, authorities=[ROLE_CUSTOMER], sid=FTdVfa-UAFkCpaXL_h413OvLY0aA7oF4SCP8F9kl5V4}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=ec6c8677-d5ff-4b20-8e0a-6a0cf9d5a9f6], Granted Authorities=[ROLE_CUSTOMER]]
15:43:25.558 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:43:25.559 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:43:25.567 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:43:25.567 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
15:43:25.571 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:43:25.575 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
15:43:25.585 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:43:25.587 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:43:26.581 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
15:43:26.584 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:43:26.584 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:43:26.590 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:43:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:13:25Z, iat=2026-01-13T08:43:25Z, nonce=D4HYDB9Cy-FxtyCPHxio7CeNoQS3_fwFqu34Am1wnfI, jti=92837736-8782-48ff-92c6-af728f34dd98, authorities=[ROLE_CUSTOMER], sid=FTdVfa-UAFkCpaXL_h413OvLY0aA7oF4SCP8F9kl5V4}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=ec6c8677-d5ff-4b20-8e0a-6a0cf9d5a9f6], Granted Authorities=[ROLE_CUSTOMER]]]
15:43:26.590 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
15:43:26.593 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:43:26.594 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:43:26.603 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:43:26.603 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:43:26.819 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:43:26.820 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:43:26.820 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:43:27.224 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:43:27.225 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:43:27.225 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:43:27.239 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
15:43:27.241 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
15:43:27.239 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
15:43:27.242 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:43:27.242 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:43:27.243 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
15:43:27.244 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:43:27.248 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
15:43:27.263 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
15:43:27.252 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
15:43:27.261 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
15:43:27.262 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:43:27.264 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:43:27.268 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
15:43:27.272 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
15:43:27.281 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:43:27.282 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
15:43:27.273 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
15:43:27.318 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:43:27.332 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:43:27.320 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:43:27.335 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:43:27.335 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:43:27.321 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:43:27.350 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:43:27.334 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:43:27.352 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:43:32.754 | DEBUG | FilterChainProxy: Securing POST /protected/logout
15:43:32.760 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:43:32.761 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:43:32.767 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:43:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:13:25Z, iat=2026-01-13T08:43:25Z, nonce=D4HYDB9Cy-FxtyCPHxio7CeNoQS3_fwFqu34Am1wnfI, jti=92837736-8782-48ff-92c6-af728f34dd98, authorities=[ROLE_CUSTOMER], sid=FTdVfa-UAFkCpaXL_h413OvLY0aA7oF4SCP8F9kl5V4}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=ec6c8677-d5ff-4b20-8e0a-6a0cf9d5a9f6], Granted Authorities=[ROLE_CUSTOMER]]]
15:43:32.770 | DEBUG | LogoutFilter: Logging out [OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:43:25Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:13:25Z, iat=2026-01-13T08:43:25Z, nonce=D4HYDB9Cy-FxtyCPHxio7CeNoQS3_fwFqu34Am1wnfI, jti=92837736-8782-48ff-92c6-af728f34dd98, authorities=[ROLE_CUSTOMER], sid=FTdVfa-UAFkCpaXL_h413OvLY0aA7oF4SCP8F9kl5V4}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=ec6c8677-d5ff-4b20-8e0a-6a0cf9d5a9f6], Granted Authorities=[ROLE_CUSTOMER]]]
15:43:32.773 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:43:32.774 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE SESSION_ID = ?
AND MAX_INACTIVE_INTERVAL >= 0
]
15:43:32.776 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [00012031-2ebe-4145-8e7a-71aec574b268], value class [java.lang.String], SQL type unknown
15:43:32.802 | DEBUG | SecurityContextLogoutHandler: Invalidated session 00012031-2ebe-4145-8e7a-71aec574b268
15:43:32.803 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:43:32.803 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:43:32.812 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:43:32.812 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
15:43:32.813 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
15:43:32.814 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
15:43:32.819 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/connect/logout?id_token_hint=eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJuZ3V5ZW52aWV0YW5oLnBlcnNvbmFsQGdtYWlsLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2ODI5MzgwNSwiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY4Mjk1NjA1LCJpYXQiOjE3NjgyOTM4MDUsIm5vbmNlIjoiRDRIWURCOUN5LUZ4dHlDUEh4aW83Q2VOb1FTM19md0ZxdTM0QW0xd25mSSIsImp0aSI6IjkyODM3NzM2LTg3ODItNDhmZi05MmM2LWFmNzI4ZjM0ZGQ5OCIsImF1dGhvcml0aWVzIjpbIlJPTEVfQ1VTVE9NRVIiXSwic2lkIjoiRlRkVmZhLVVBRmtDcGFYTF9oNDEzT3ZMWTBhQTdvRjRTQ1A4RjlrbDVWNCJ9.DDXqfFljnf47krZzjXrZCFSy-mfkH1mtsdFLGRZDpomyIWJZ7hrFEKeyLs__lU0-a3smT1jXOmGtLlq4UeF0UaoPMwpQQDL-1DIkzDv-9DIlz6OB1qyAdITMaT-daHxcC3o0OSMoDzBkQu-4Ic2wtLLdirKu9BOonI2qQ15xaj1dJ57if27JG9D_YoRPisJUN9drEKnIaX2dnggWDDBu8jq9BqDlkAyVa3fmNu0Ugne2Ume8JAKtPq5c4sZ3XLHYpUJXSHXGrq2jtA7WCLmzD0mA2XetT6giu8Tnlc0ZFpNAuKdhhGIEyMM62H0EUgyFpL7XVIcdixYv1iNWXtJPRA&post_logout_redirect_uri=https://app.bookommerce.com:8080
15:43:33.645 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
15:43:33.647 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:43:33.651 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
15:43:33.651 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
15:43:33.652 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
15:43:33.934 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:43:33.946 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:43:33.947 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
15:43:34.256 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:43:34.258 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:43:34.258 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:43:34.266 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
15:43:34.267 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
15:43:34.267 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:43:34.268 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:43:34.268 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
15:43:34.268 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
15:43:34.272 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
15:43:34.273 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
15:43:34.276 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
15:43:34.277 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:43:34.293 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:43:34.277 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:43:34.286 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
15:43:34.293 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
15:43:34.296 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
15:43:34.297 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
15:43:34.300 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:43:34.312 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:43:34.312 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
15:43:34.304 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:43:34.312 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:43:34.314 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:43:34.314 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:43:34.315 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:43:34.326 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:43:34.333 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:43:34.334 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:44:00.012 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:44:00.013 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:44:00.013 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768293840012], value class [java.lang.Long], SQL type unknown
15:44:00.015 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:45:00.003 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:45:00.003 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:45:00.004 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768293900003], value class [java.lang.Long], SQL type unknown
15:45:00.008 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:46:00.016 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:46:00.019 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:46:00.024 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768293960015], value class [java.lang.Long], SQL type unknown
15:46:00.066 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:47:00.027 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:47:00.027 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:47:00.027 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768294020027], value class [java.lang.Long], SQL type unknown
15:47:00.030 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:48:00.008 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:48:00.008 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:48:00.008 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768294080008], value class [java.lang.Long], SQL type unknown
15:48:00.012 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:49:00.060 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:49:00.077 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:49:00.088 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768294140059], value class [java.lang.Long], SQL type unknown
15:49:00.127 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:50:00.033 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:50:00.038 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:50:00.043 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768294200033], value class [java.lang.Long], SQL type unknown
15:50:00.059 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:51:00.027 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:51:00.030 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:51:00.036 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768294260027], value class [java.lang.Long], SQL type unknown
15:51:00.077 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:52:00.012 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:52:00.013 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:52:00.013 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768294320012], value class [java.lang.Long], SQL type unknown
15:52:00.020 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:53:00.012 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:53:00.013 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:53:00.013 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768294380012], value class [java.lang.Long], SQL type unknown
15:53:00.017 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:53:28.423 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
15:53:28.428 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=dozW3H8wQUnICYXbLguKdVEP-OLpkeaKQzdgOyYvt5Q%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=aq25eDlwrG_Q3qk0yq3SoxgQ89tyZziUbqWBL7FXLhc
15:53:28.430 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:53:28.433 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
15:53:28.454 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:53:28.454 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
15:53:37.353 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
15:53:37.356 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:53:37.356 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:53:37.365 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=LkONK-nhXKQQ1hIpbOtxDWwdCElugd9NHjIfTK66e28%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=aRkjuZStiNgdwD94WpT5kW70Az5JRByJx0-dGcYrA0s
15:53:37.370 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:53:37.370 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:53:37.372 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:53:37.372 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
15:53:37.378 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:53:37.378 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:53:37.520 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=m7ZiAEstQEqmg-vxzTvVWVA82IYTDfdgrbnQcJINL_3fjOC2B0NOrMbIb0lTW5mHmGTrP_MBJGfc0Mw4H5mCJiflDcdsnd38jqH_7g8nDMDTzkMN2kc83DsjPfDBHp14&state=LkONK-nhXKQQ1hIpbOtxDWwdCElugd9NHjIfTK66e28%3D
15:53:37.522 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:53:37.522 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:53:38.013 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:53:38.013 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
15:53:38.013 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
15:53:38.014 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 15:53:37.937136], value class [java.sql.Timestamp], SQL type 93
15:53:38.016 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 15:54:06.937136], value class [java.sql.Timestamp], SQL type 93
15:53:38.019 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
15:53:38.021 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 15:53:37.937136], value class [java.sql.Timestamp], SQL type 93
15:53:38.021 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
15:53:38.021 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
15:53:38.030 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:53:38.030 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO oauth2_authorized_client (client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
15:53:38.031 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
15:53:38.031 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
15:53:38.031 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [Bearer], value class [java.lang.String], SQL type 12
15:53:38.033 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [2026-01-13 15:53:37.937136], value class [java.sql.Timestamp], SQL type 93
15:53:38.035 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 6, parameter value [2026-01-13 15:54:06.937136], value class [java.sql.Timestamp], SQL type 93
15:53:38.037 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [openid,profile], value class [java.lang.String], SQL type 12
15:53:38.038 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [2026-01-13 15:53:37.937136], value class [java.sql.Timestamp], SQL type 93
15:53:38.043 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from f542893d-6dd2-42b8-86df-90f7405b5d9e
15:53:38.045 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
15:53:38.047 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:53:37Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:23:37Z, iat=2026-01-13T08:53:37Z, nonce=aRkjuZStiNgdwD94WpT5kW70Az5JRByJx0-dGcYrA0s, jti=b1befc35-31f6-454a-a051-5e81f6e1b03d, authorities=[ROLE_PRODUCT_MANAGER], sid=UC4VtBFiiLTiycRcchg3UsmUyWMTF_78MqA5tOwVE-s}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=f542893d-6dd2-42b8-86df-90f7405b5d9e], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@7d59ed12]
15:53:38.051 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:53:37Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:23:37Z, iat=2026-01-13T08:53:37Z, nonce=aRkjuZStiNgdwD94WpT5kW70Az5JRByJx0-dGcYrA0s, jti=b1befc35-31f6-454a-a051-5e81f6e1b03d, authorities=[ROLE_PRODUCT_MANAGER], sid=UC4VtBFiiLTiycRcchg3UsmUyWMTF_78MqA5tOwVE-s}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=f542893d-6dd2-42b8-86df-90f7405b5d9e], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
15:53:38.063 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:53:38.063 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:53:38.066 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:53:38.066 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
15:53:38.072 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:53:38.073 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
15:53:38.078 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:53:38.078 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:53:42.544 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
15:53:42.546 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:53:42.546 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:53:42.572 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:53:37Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:23:37Z, iat=2026-01-13T08:53:37Z, nonce=aRkjuZStiNgdwD94WpT5kW70Az5JRByJx0-dGcYrA0s, jti=b1befc35-31f6-454a-a051-5e81f6e1b03d, authorities=[ROLE_PRODUCT_MANAGER], sid=UC4VtBFiiLTiycRcchg3UsmUyWMTF_78MqA5tOwVE-s}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=f542893d-6dd2-42b8-86df-90f7405b5d9e], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
15:53:42.582 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
15:53:42.611 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:53:42.612 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:53:42.619 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:53:42.620 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:53:46.369 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10
15:53:46.370 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:53:46.370 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10
15:53:47.114 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:53:47.115 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:53:47.116 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:53:47.131 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
15:53:47.133 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:53:47.134 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
15:53:47.134 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
15:53:47.136 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
15:53:47.136 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
15:53:47.136 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:53:47.136 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
15:53:47.137 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:53:47.137 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:53:47.137 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
15:53:47.137 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:53:47.137 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
15:53:47.137 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
15:53:47.138 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
15:53:47.181 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
15:53:47.183 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:53:47.185 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
15:53:47.316 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:53:47.358 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:53:47.361 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:53:47.373 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:53:47.366 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:53:47.374 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:53:47.375 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:53:47.375 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:53:47.375 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:53:48.797 | DEBUG | FilterChainProxy: Securing GET /protected/api/ratings?page=0&size=5&sort=CREATED_AT&order=DESC
15:53:48.799 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:53:48.800 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:53:48.814 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:53:37Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:23:37Z, iat=2026-01-13T08:53:37Z, nonce=aRkjuZStiNgdwD94WpT5kW70Az5JRByJx0-dGcYrA0s, jti=b1befc35-31f6-454a-a051-5e81f6e1b03d, authorities=[ROLE_PRODUCT_MANAGER], sid=UC4VtBFiiLTiycRcchg3UsmUyWMTF_78MqA5tOwVE-s}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=f542893d-6dd2-42b8-86df-90f7405b5d9e], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
15:53:48.816 | DEBUG | FilterChainProxy: Secured GET /protected/api/ratings?page=0&size=5&sort=CREATED_AT&order=DESC
15:53:48.822 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:53:48.822 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
15:53:48.824 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
15:53:48.824 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
15:53:49.413 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:53:37Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:23:49Z, iat=2026-01-13T08:53:49Z, jti=abbc03ab-cedb-455c-99b0-ad1560965ce9, authorities=[ROLE_PRODUCT_MANAGER], sid=UC4VtBFiiLTiycRcchg3UsmUyWMTF_78MqA5tOwVE-s}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=f542893d-6dd2-42b8-86df-90f7405b5d9e], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@3454ecd3]
15:53:49.414 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:53:49.414 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
15:53:49.415 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
15:53:49.415 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 15:53:49.3779034], value class [java.sql.Timestamp], SQL type 93
15:53:49.415 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 15:54:19.3779034], value class [java.sql.Timestamp], SQL type 93
15:53:49.415 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
15:53:49.417 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 15:53:49.3779034], value class [java.sql.Timestamp], SQL type 93
15:53:49.417 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
15:53:49.417 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
15:53:50.005 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:53:50.006 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:53:50.008 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:53:50.008 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
15:53:50.018 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:53:50.018 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:53:51.877 | DEBUG | FilterChainProxy: Securing GET /protected/api/ratings?page=0&size=5&sort=CREATED_AT&order=DESC
15:53:51.880 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:53:51.880 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:53:51.885 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:53:37Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:23:49Z, iat=2026-01-13T08:53:49Z, jti=abbc03ab-cedb-455c-99b0-ad1560965ce9, authorities=[ROLE_PRODUCT_MANAGER], sid=UC4VtBFiiLTiycRcchg3UsmUyWMTF_78MqA5tOwVE-s}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=f542893d-6dd2-42b8-86df-90f7405b5d9e], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
15:53:51.885 | DEBUG | FilterChainProxy: Secured GET /protected/api/ratings?page=0&size=5&sort=CREATED_AT&order=DESC
15:53:51.888 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:53:51.888 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
15:53:51.889 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
15:53:51.889 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
15:53:52.297 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:53:37Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:23:52Z, iat=2026-01-13T08:53:52Z, jti=0d145436-74bb-4d66-a5fd-e46b1defe053, authorities=[ROLE_PRODUCT_MANAGER], sid=UC4VtBFiiLTiycRcchg3UsmUyWMTF_78MqA5tOwVE-s}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=f542893d-6dd2-42b8-86df-90f7405b5d9e], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@5decca26]
15:53:52.298 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:53:52.298 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
15:53:52.299 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
15:53:52.300 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 15:53:52.2750732], value class [java.sql.Timestamp], SQL type 93
15:53:52.301 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 15:54:22.2750732], value class [java.sql.Timestamp], SQL type 93
15:53:52.301 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
15:53:52.301 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 15:53:52.2750732], value class [java.sql.Timestamp], SQL type 93
15:53:52.301 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
15:53:52.302 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
15:53:52.733 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:53:52.733 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:53:52.737 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:53:52.737 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
15:53:52.746 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:53:52.747 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:54:00.012 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:54:00.012 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:54:00.013 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768294440012], value class [java.lang.Long], SQL type unknown
15:54:00.016 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:54:44.435 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10
15:54:44.439 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:54:44.440 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10
15:54:44.667 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:54:44.667 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:54:44.667 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:54:44.676 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
15:54:44.684 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:54:44.688 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
15:54:44.704 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:54:44.705 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
15:54:44.691 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
15:54:44.698 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
15:54:44.701 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:54:44.712 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
15:54:44.721 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:54:44.722 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:54:44.725 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:54:44.737 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
15:54:44.730 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
15:54:44.731 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
15:54:44.736 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:54:44.771 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:54:44.793 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
15:54:44.813 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
15:54:44.833 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:54:44.834 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:54:44.836 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
15:54:44.837 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:54:44.839 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:54:44.848 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:54:44.849 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:54:44.878 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:54:47.515 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10
15:54:47.516 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:54:47.516 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10
15:54:47.553 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:54:47.554 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:54:47.555 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:54:47.566 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
15:54:47.566 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:54:47.569 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
15:54:47.571 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
15:54:47.574 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:54:47.575 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
15:54:47.586 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
15:54:47.587 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:54:47.587 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
15:54:47.602 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
15:54:47.604 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:54:47.604 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
15:54:47.610 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
15:54:47.611 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:54:47.611 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
15:54:47.622 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
15:54:47.622 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:54:47.623 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
15:54:47.644 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:54:47.646 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:54:47.649 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:54:47.655 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:54:47.655 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:54:47.657 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:54:47.664 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:54:47.667 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:54:47.668 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:55:00.009 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:55:00.010 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:55:00.012 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768294500009], value class [java.lang.Long], SQL type unknown
15:55:00.020 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:56:00.006 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:56:00.007 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:56:00.007 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768294560006], value class [java.lang.Long], SQL type unknown
15:56:00.011 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:57:00.007 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:57:00.008 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:57:00.008 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768294620007], value class [java.lang.Long], SQL type unknown
15:57:00.018 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 1 expired sessions
15:58:00.015 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:58:00.017 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:58:00.018 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768294680015], value class [java.lang.Long], SQL type unknown
15:58:00.025 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:58:21.089 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10
15:58:21.099 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:58:21.102 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10
15:58:21.569 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
15:58:21.576 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:58:21.682 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
15:58:21.685 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:58:21.685 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:58:21.686 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:58:21.686 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
15:58:21.687 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:58:21.686 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:58:21.688 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:58:21.694 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
15:58:21.688 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:58:21.691 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
15:58:21.698 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:58:21.698 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
15:58:21.711 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:58:21.717 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:58:21.718 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:58:21.860 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
15:58:21.860 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
15:58:21.862 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:58:21.863 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:58:21.863 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:58:21.863 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
15:58:21.863 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:58:21.863 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
15:58:21.863 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:58:21.869 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
15:58:21.877 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:58:21.878 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
15:58:23.632 | DEBUG | FilterChainProxy: Securing GET /protected/api/ratings?page=0&size=5&sort=CREATED_AT&order=DESC
15:58:23.634 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:58:23.659 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
15:58:23.659 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
15:58:23.659 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
15:58:26.897 | DEBUG | FilterChainProxy: Securing GET /protected/api/ratings?page=0&size=5&sort=CREATED_AT&order=DESC
15:58:26.898 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:58:26.898 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
15:58:26.900 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
15:58:26.900 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
15:58:31.981 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10
15:58:31.986 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:58:31.986 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10
15:58:32.092 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:58:32.092 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
15:58:32.092 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
15:58:32.093 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:58:32.092 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
15:58:32.093 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
15:58:32.093 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:58:32.093 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
15:58:32.093 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:58:32.093 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:58:32.093 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:58:32.093 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
15:58:32.093 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
15:58:32.093 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
15:58:32.093 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
15:58:32.095 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:58:32.098 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:58:32.101 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
15:58:32.126 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
15:58:32.141 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:58:32.143 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
15:58:32.142 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:58:32.143 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
15:58:32.144 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:58:32.155 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:58:32.156 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
15:58:32.147 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:58:32.158 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
15:58:32.154 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:58:32.166 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
15:58:33.696 | DEBUG | FilterChainProxy: Securing GET /protected/api/ratings?page=0&size=5&sort=CREATED_AT&order=DESC
15:58:33.698 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:58:33.700 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
15:58:33.700 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
15:58:33.701 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
15:58:43.846 | DEBUG | FilterChainProxy: Securing GET /protected/api/ratings?page=0&size=5&sort=CREATED_AT&order=DESC
15:58:43.847 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:58:43.850 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
15:58:43.850 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
15:58:43.851 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
15:58:53.737 | DEBUG | FilterChainProxy: Securing POST /protected/logout
15:58:53.743 | DEBUG | LogoutFilter: Logging out [null]
15:58:53.769 | ERROR | [dispatcherServlet]: Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception
java.lang.NullPointerException: Cannot invoke "org.springframework.security.oauth2.client.authentication.OAuth2AuthenticationToken.getAuthorizedClientRegistrationId()" because "oauth2AuthenticationToken" is null
	at com.bookommerce.be_for_fe.custom.CustomLogoutSuccessHandler.onLogoutSuccess(CustomLogoutSuccessHandler.java:42)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:104)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:134)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:142)
	at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:82)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
15:58:54.397 | DEBUG | FilterChainProxy: Securing POST /error
15:58:54.398 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:58:54.399 | DEBUG | FilterChainProxy: Secured POST /error
15:58:55.090 | DEBUG | FilterChainProxy: Securing GET /favicon.ico
15:58:55.092 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:58:55.094 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
15:58:55.096 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint@69d6aa8
15:58:55.099 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/page/login
15:59:00.010 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:59:00.011 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
15:59:00.012 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768294740010], value class [java.lang.Long], SQL type unknown
15:59:00.016 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
15:59:34.018 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
15:59:34.021 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:59:34.027 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
15:59:34.028 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
15:59:34.028 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
15:59:39.393 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
15:59:39.396 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=M_khew9Ub9hVY9O0Ogg0r2ij_WIm2L8mJ6kQJlGCKZ0%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=9FkchMGPOkCh-R78svBVI7-hTgcXhTKmit9D4KueAFY
15:59:39.398 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:59:39.398 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
15:59:39.403 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:59:39.403 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
15:59:39.556 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=HsmNiYGiHMwlPQjTp02WU1hJRN8i98h_whZF2zK7weYXSM8AE8D-sTWbkAsOf_9risnnRuqMlqlyxhUEYxKzTRXrNBnTXgCLRp8Q1ISkpXRwUwq_014kslKwBsMI7FKk&state=M_khew9Ub9hVY9O0Ogg0r2ij_WIm2L8mJ6kQJlGCKZ0%3D
15:59:39.558 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:59:39.558 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:59:40.077 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:59:40.077 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
15:59:40.078 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
15:59:40.078 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 15:59:40.0381047], value class [java.sql.Timestamp], SQL type 93
15:59:40.079 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 16:00:09.0381047], value class [java.sql.Timestamp], SQL type 93
15:59:40.079 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
15:59:40.079 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 15:59:40.0381047], value class [java.sql.Timestamp], SQL type 93
15:59:40.080 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
15:59:40.080 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
15:59:40.090 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 81fc1eed-1aee-45c4-992e-d472014f73f0
15:59:40.090 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
15:59:40.091 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:59:39Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:29:39Z, iat=2026-01-13T08:59:39Z, nonce=9FkchMGPOkCh-R78svBVI7-hTgcXhTKmit9D4KueAFY, jti=1e6c6f1c-fbfa-46cb-84f2-818cda69e70f, authorities=[ROLE_PRODUCT_MANAGER], sid=3clDtHROJ3kmfYpDXaXdWwvjtTOfL0L9AcNVBN2HvKA}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81fc1eed-1aee-45c4-992e-d472014f73f0], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@f869f92]
15:59:40.091 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:59:39Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:29:39Z, iat=2026-01-13T08:59:39Z, nonce=9FkchMGPOkCh-R78svBVI7-hTgcXhTKmit9D4KueAFY, jti=1e6c6f1c-fbfa-46cb-84f2-818cda69e70f, authorities=[ROLE_PRODUCT_MANAGER], sid=3clDtHROJ3kmfYpDXaXdWwvjtTOfL0L9AcNVBN2HvKA}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81fc1eed-1aee-45c4-992e-d472014f73f0], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
15:59:40.093 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:59:40.093 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:59:40.095 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:59:40.095 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
15:59:40.097 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:59:40.099 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
15:59:40.106 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:59:40.106 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:59:40.626 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
15:59:40.628 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:59:40.628 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:59:40.637 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T08:59:39Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:29:39Z, iat=2026-01-13T08:59:39Z, nonce=9FkchMGPOkCh-R78svBVI7-hTgcXhTKmit9D4KueAFY, jti=1e6c6f1c-fbfa-46cb-84f2-818cda69e70f, authorities=[ROLE_PRODUCT_MANAGER], sid=3clDtHROJ3kmfYpDXaXdWwvjtTOfL0L9AcNVBN2HvKA}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81fc1eed-1aee-45c4-992e-d472014f73f0], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
15:59:40.638 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
15:59:40.654 | DEBUG | JdbcTemplate: Executing prepared SQL update
15:59:40.654 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
15:59:40.664 | DEBUG | JdbcTemplate: Executing prepared SQL query
15:59:40.664 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
15:59:57.075 | DEBUG | FilterChainProxy: Securing POST /protected/logout
15:59:57.077 | DEBUG | LogoutFilter: Logging out [null]
15:59:57.078 | ERROR | [dispatcherServlet]: Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception
java.lang.NullPointerException: Cannot invoke "org.springframework.security.oauth2.client.authentication.OAuth2AuthenticationToken.getAuthorizedClientRegistrationId()" because "oauth2AuthenticationToken" is null
	at com.bookommerce.be_for_fe.custom.CustomLogoutSuccessHandler.onLogoutSuccess(CustomLogoutSuccessHandler.java:42)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:104)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:134)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:142)
	at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:82)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
15:59:57.083 | DEBUG | FilterChainProxy: Securing POST /error
15:59:57.085 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:59:57.086 | DEBUG | FilterChainProxy: Secured POST /error
15:59:57.194 | DEBUG | FilterChainProxy: Securing GET /favicon.ico
15:59:57.195 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
15:59:57.196 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
15:59:57.196 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint@69d6aa8
15:59:57.197 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/page/login
16:00:00.011 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:00:00.011 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:00:00.012 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768294800011], value class [java.lang.Long], SQL type unknown
16:00:00.017 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:00:00.755 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:00:00.756 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:00:00.756 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:00:00.756 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:00:00.756 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:00:01.333 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:00:01.334 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:00:01.334 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:00:01.335 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:00:01.335 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:00:02.065 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:00:02.065 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:00:02.067 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:00:02.067 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:00:02.067 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:00:02.685 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:00:02.686 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:00:02.693 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:00:02.693 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:00:02.693 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:00:03.201 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:00:03.202 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:00:03.202 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:00:03.203 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:00:03.203 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:00:03.927 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:00:03.928 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:00:03.929 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:00:03.929 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:00:03.930 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:00:04.579 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:00:04.580 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:00:04.581 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:00:04.581 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:00:04.581 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:00:05.512 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:00:05.513 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:00:05.514 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:00:05.514 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:00:05.515 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:00:06.401 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:00:06.402 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:00:06.403 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:00:06.403 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:00:06.403 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:00:06.957 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:00:06.957 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:00:06.957 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:00:06.959 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:00:06.959 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:00:07.569 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:00:07.570 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:00:07.570 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:00:07.570 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:00:07.571 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:00:08.161 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:00:08.175 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:00:08.176 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:00:08.177 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:00:08.178 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:00:08.750 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:00:08.750 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:00:08.751 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:00:08.751 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:00:08.751 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:00:29.870 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
16:00:29.872 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=JDtL8Sx0h-kRG0LsR9WMal5wXthRO1MckxoHOdqSgyQ%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=KIb8wExPdXdeGXh53Lpg0wkaBTPyDcSNJ0fXCUwk3r0
16:00:29.875 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:00:29.875 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
16:00:29.877 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:00:29.878 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:00:29.980 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=PBToMO3WmAfNhPxm96hLiQSqJv7Ps04FdRnJ_JEgJmd47f91el-MVnzjjEtLEVHPXJt4XBJctugXNcY5ruhFt01YYuSyJryyu1lj1ApcHiE4xd5WhtPHHcKy81J-SLWI&state=JDtL8Sx0h-kRG0LsR9WMal5wXthRO1MckxoHOdqSgyQ%3D
16:00:29.982 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:00:29.982 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:00:30.392 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:00:30.392 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
16:00:30.393 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
16:00:30.393 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 16:00:30.3641374], value class [java.sql.Timestamp], SQL type 93
16:00:30.393 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 16:01:00.3641374], value class [java.sql.Timestamp], SQL type 93
16:00:30.393 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
16:00:30.393 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 16:00:30.3641374], value class [java.sql.Timestamp], SQL type 93
16:00:30.393 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
16:00:30.393 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
16:00:30.397 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 3acbfed4-2504-40f1-931c-9d5840e00c1a
16:00:30.397 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
16:00:30.397 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:00:29Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:30:30Z, iat=2026-01-13T09:00:30Z, nonce=KIb8wExPdXdeGXh53Lpg0wkaBTPyDcSNJ0fXCUwk3r0, jti=0ca18579-a393-4af6-914e-c2583a81554e, authorities=[ROLE_PRODUCT_MANAGER], sid=GU6grlDIZKf14HIba17zH-prn0lieAiue_Gbknv6hbA}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=3acbfed4-2504-40f1-931c-9d5840e00c1a], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@5e902b64]
16:00:30.398 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:00:29Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:30:30Z, iat=2026-01-13T09:00:30Z, nonce=KIb8wExPdXdeGXh53Lpg0wkaBTPyDcSNJ0fXCUwk3r0, jti=0ca18579-a393-4af6-914e-c2583a81554e, authorities=[ROLE_PRODUCT_MANAGER], sid=GU6grlDIZKf14HIba17zH-prn0lieAiue_Gbknv6hbA}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=3acbfed4-2504-40f1-931c-9d5840e00c1a], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
16:00:30.399 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:00:30.402 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:00:30.406 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:00:30.406 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:00:30.409 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:00:30.410 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
16:00:30.414 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:00:30.414 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:00:30.963 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:00:30.965 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:00:30.965 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:00:30.974 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:00:29Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:30:30Z, iat=2026-01-13T09:00:30Z, nonce=KIb8wExPdXdeGXh53Lpg0wkaBTPyDcSNJ0fXCUwk3r0, jti=0ca18579-a393-4af6-914e-c2583a81554e, authorities=[ROLE_PRODUCT_MANAGER], sid=GU6grlDIZKf14HIba17zH-prn0lieAiue_Gbknv6hbA}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=3acbfed4-2504-40f1-931c-9d5840e00c1a], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
16:00:30.975 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
16:00:30.979 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:00:30.980 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:00:30.989 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:00:30.990 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:00:44.542 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:00:44.543 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:00:44.543 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:00:44.547 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:00:29Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:30:30Z, iat=2026-01-13T09:00:30Z, nonce=KIb8wExPdXdeGXh53Lpg0wkaBTPyDcSNJ0fXCUwk3r0, jti=0ca18579-a393-4af6-914e-c2583a81554e, authorities=[ROLE_PRODUCT_MANAGER], sid=GU6grlDIZKf14HIba17zH-prn0lieAiue_Gbknv6hbA}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=3acbfed4-2504-40f1-931c-9d5840e00c1a], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
16:00:44.548 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
16:00:44.551 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:00:44.551 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:00:44.555 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:00:44.556 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:00:54.071 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:00:54.071 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:00:54.073 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:00:54.073 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:00:54.074 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:00:54.687 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:00:54.689 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:00:54.690 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:00:54.690 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:00:54.691 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:00:55.196 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:00:55.198 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:00:55.199 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:00:55.199 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:00:55.200 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:00:55.728 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:00:55.730 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:00:55.736 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:00:55.742 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:00:55.742 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:00:56.333 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:00:56.334 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:00:56.334 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:00:56.334 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:00:56.335 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:00:56.857 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:00:56.858 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:00:56.860 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:00:56.860 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:00:56.860 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:00:57.449 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:00:57.451 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:00:57.452 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:00:57.453 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:00:57.453 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:00:58.022 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:00:58.024 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:00:58.032 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:00:58.033 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:00:58.033 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:00:58.583 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:00:58.583 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:00:58.583 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:00:58.584 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:00:58.584 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:00:59.101 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:00:59.102 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:00:59.102 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:00:59.103 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:00:59.103 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:01:00.002 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:01:00.002 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:01:00.004 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768294860002], value class [java.lang.Long], SQL type unknown
16:01:00.007 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:01:57.004 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
16:01:57.006 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=Lh2uGFrZcxQPC72UVHibj_j5cEtZtZnBx15TaRm0fSw%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=nK1w5935Oq8UD1MdSUcsPxdFXr6SkeUCtEujO3BYTPI
16:01:57.008 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:01:57.008 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
16:01:57.010 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:01:57.011 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:01:57.075 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=VLyaYQS09_9umCzdFo_C_l--JY46GdcruxiSCO-WO5-DJMZB5vSPXgGFjMKw-ToXHO347T_IXicGRfzufByBOYQodHqd0D9V6wagbh-HIbbBcMfKL692KvOi5ZCitKlv&state=Lh2uGFrZcxQPC72UVHibj_j5cEtZtZnBx15TaRm0fSw%3D
16:01:57.076 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:01:57.076 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:01:57.444 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:01:57.444 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
16:01:57.445 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
16:01:57.445 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 16:01:57.4254659], value class [java.sql.Timestamp], SQL type 93
16:01:57.446 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 16:02:27.4254659], value class [java.sql.Timestamp], SQL type 93
16:01:57.446 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
16:01:57.446 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 16:01:57.4254659], value class [java.sql.Timestamp], SQL type 93
16:01:57.446 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
16:01:57.446 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
16:01:57.449 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from e3b09a26-d9be-4ac3-b9ff-7ce73e7c3f21
16:01:57.449 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
16:01:57.450 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:01:57Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:31:57Z, iat=2026-01-13T09:01:57Z, nonce=nK1w5935Oq8UD1MdSUcsPxdFXr6SkeUCtEujO3BYTPI, jti=cb32aad1-3caa-40b4-a49c-455cb8d46876, authorities=[ROLE_PRODUCT_MANAGER], sid=GlQ2Jqi6CoCo5oOz0Uzi05x_KITtwR0S5fJbAKYLGJU}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=e3b09a26-d9be-4ac3-b9ff-7ce73e7c3f21], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@732bc2b9]
16:01:57.450 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:01:57Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:31:57Z, iat=2026-01-13T09:01:57Z, nonce=nK1w5935Oq8UD1MdSUcsPxdFXr6SkeUCtEujO3BYTPI, jti=cb32aad1-3caa-40b4-a49c-455cb8d46876, authorities=[ROLE_PRODUCT_MANAGER], sid=GlQ2Jqi6CoCo5oOz0Uzi05x_KITtwR0S5fJbAKYLGJU}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=e3b09a26-d9be-4ac3-b9ff-7ce73e7c3f21], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
16:01:57.452 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:01:57.452 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:01:57.456 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:01:57.456 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:01:57.463 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:01:57.463 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
16:01:57.468 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:01:57.469 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:01:57.965 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:01:57.976 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:01:57.976 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:01:57.983 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:01:57Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:31:57Z, iat=2026-01-13T09:01:57Z, nonce=nK1w5935Oq8UD1MdSUcsPxdFXr6SkeUCtEujO3BYTPI, jti=cb32aad1-3caa-40b4-a49c-455cb8d46876, authorities=[ROLE_PRODUCT_MANAGER], sid=GlQ2Jqi6CoCo5oOz0Uzi05x_KITtwR0S5fJbAKYLGJU}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=e3b09a26-d9be-4ac3-b9ff-7ce73e7c3f21], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
16:01:57.984 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
16:01:57.994 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:01:57.994 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:01:58.003 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:01:58.010 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:02:00.008 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:02:00.009 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:02:00.009 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768294920008], value class [java.lang.Long], SQL type unknown
16:02:00.012 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:02:01.112 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:02:01.113 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:02:01.113 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:02:01.119 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:01:57Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:31:57Z, iat=2026-01-13T09:01:57Z, nonce=nK1w5935Oq8UD1MdSUcsPxdFXr6SkeUCtEujO3BYTPI, jti=cb32aad1-3caa-40b4-a49c-455cb8d46876, authorities=[ROLE_PRODUCT_MANAGER], sid=GlQ2Jqi6CoCo5oOz0Uzi05x_KITtwR0S5fJbAKYLGJU}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=e3b09a26-d9be-4ac3-b9ff-7ce73e7c3f21], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
16:02:01.120 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
16:02:01.122 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:02:01.122 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:02:01.126 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:02:01.127 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:02:14.809 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:02:14.811 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:02:14.812 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:02:14.812 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:02:14.812 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:02:15.372 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:02:15.375 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:02:15.375 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:02:15.375 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:02:15.375 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:02:15.897 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:02:15.898 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:02:15.898 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:02:15.899 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:02:15.899 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:02:16.578 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:02:16.591 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:02:16.592 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:02:16.592 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:02:16.592 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:02:17.122 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:02:17.124 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:02:17.124 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:02:17.124 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:02:17.124 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:02:17.657 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:02:17.658 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:02:17.659 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:02:17.659 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:02:17.659 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:02:18.313 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:02:18.314 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:02:18.315 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:02:18.315 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:02:18.315 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:02:19.067 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:02:19.068 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:02:19.072 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:02:19.076 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:02:19.084 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:02:19.666 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:02:19.667 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:02:19.671 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:02:19.672 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:02:19.672 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:02:20.360 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:02:20.361 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:02:20.361 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:02:20.361 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:02:20.361 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:02:21.048 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:02:21.049 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:02:21.051 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:02:21.052 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:02:21.052 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:02:21.673 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:02:21.673 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:02:21.681 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:02:21.685 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:02:21.685 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:02:22.459 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:02:22.460 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:02:22.461 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:02:22.461 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:02:22.467 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:02:23.356 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:02:23.357 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:02:23.358 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:02:23.359 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:02:23.359 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:02:24.406 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:02:24.408 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:02:24.409 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:02:24.412 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:02:24.413 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:02:25.310 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:02:25.311 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:02:25.313 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:02:25.327 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:02:25.327 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:02:26.105 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:02:26.106 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:02:26.109 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:02:26.109 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:02:26.109 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:03:00.013 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:03:00.014 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:03:00.014 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768294980013], value class [java.lang.Long], SQL type unknown
16:03:00.020 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 1 expired sessions
16:03:33.642 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
16:03:33.643 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=9Flr2AMtijKBK14e2hiyYvovUFO1Whrod7aN_SpnBEM%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=Q29VNxtOvFFtI_Rry3pOnrxQXF0aPABGx0Wbq-_Vg0U
16:03:33.645 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:03:33.646 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
16:03:33.649 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:03:33.649 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:03:33.707 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=Ea119eaZP8zxkiflk_pNd15EbDea7_RhnH739IGbLPR-0JMgJ2E_pktRGUrtQCP7kGQwn5Kvuqy5Iy4T6er4ZsgmVgByaeBuW0qBu4X_ZLh9O-S57sT44yHhwUCiJ_x_&state=9Flr2AMtijKBK14e2hiyYvovUFO1Whrod7aN_SpnBEM%3D
16:03:33.707 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:03:33.709 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:03:34.035 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:03:34.035 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
16:03:34.035 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
16:03:34.035 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 16:03:34.0183882], value class [java.sql.Timestamp], SQL type 93
16:03:34.035 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 16:04:03.0183882], value class [java.sql.Timestamp], SQL type 93
16:03:34.035 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
16:03:34.035 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 16:03:34.0183882], value class [java.sql.Timestamp], SQL type 93
16:03:34.037 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
16:03:34.037 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
16:03:34.039 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from a398555f-5e3d-43d9-8c1d-ee23854e9271
16:03:34.039 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
16:03:34.040 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:03:33Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:33:34Z, iat=2026-01-13T09:03:34Z, nonce=Q29VNxtOvFFtI_Rry3pOnrxQXF0aPABGx0Wbq-_Vg0U, jti=56724e1d-cf04-4062-8def-6c9dc3c251a5, authorities=[ROLE_PRODUCT_MANAGER], sid=TcPVYZ55iD5vC41Q5R9vVkhTmgO-gf1B3tWOEJybAzM}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=a398555f-5e3d-43d9-8c1d-ee23854e9271], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@3ced3359]
16:03:34.041 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:03:33Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:33:34Z, iat=2026-01-13T09:03:34Z, nonce=Q29VNxtOvFFtI_Rry3pOnrxQXF0aPABGx0Wbq-_Vg0U, jti=56724e1d-cf04-4062-8def-6c9dc3c251a5, authorities=[ROLE_PRODUCT_MANAGER], sid=TcPVYZ55iD5vC41Q5R9vVkhTmgO-gf1B3tWOEJybAzM}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=a398555f-5e3d-43d9-8c1d-ee23854e9271], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
16:03:34.041 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:03:34.043 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:03:34.044 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:03:34.044 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:03:34.048 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:03:34.049 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
16:03:34.053 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:03:34.053 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:03:34.487 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:03:34.490 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:03:34.490 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:03:34.493 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:03:33Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:33:34Z, iat=2026-01-13T09:03:34Z, nonce=Q29VNxtOvFFtI_Rry3pOnrxQXF0aPABGx0Wbq-_Vg0U, jti=56724e1d-cf04-4062-8def-6c9dc3c251a5, authorities=[ROLE_PRODUCT_MANAGER], sid=TcPVYZ55iD5vC41Q5R9vVkhTmgO-gf1B3tWOEJybAzM}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=a398555f-5e3d-43d9-8c1d-ee23854e9271], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
16:03:34.494 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
16:03:34.503 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:03:34.503 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:03:34.507 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:03:34.508 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:03:45.743 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:03:45.767 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:03:45.768 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:03:45.769 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:03:45.769 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:03:46.363 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:03:46.363 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:03:46.363 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:03:46.364 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:03:46.364 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:03:47.032 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:03:47.033 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:03:47.035 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:03:47.035 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:03:47.036 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:03:47.656 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:03:47.656 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:03:47.657 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:03:47.657 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:03:47.657 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:03:48.242 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:03:48.252 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:03:48.255 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:03:48.256 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:03:48.256 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:03:48.963 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:03:48.964 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:03:48.966 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:03:48.967 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:03:48.968 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:03:49.583 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:03:49.586 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:03:49.587 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:03:49.587 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:03:49.587 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:03:50.297 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:03:50.299 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:03:50.301 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:03:50.303 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:03:50.303 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:03:51.043 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:03:51.044 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:03:51.045 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:03:51.046 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:03:51.046 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:03:51.639 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:03:51.640 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:03:51.640 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:03:51.641 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:03:51.641 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:03:52.187 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:03:52.187 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:03:52.189 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:03:52.189 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:03:52.189 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:03:53.062 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:03:53.066 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:03:53.066 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:03:53.067 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:03:53.067 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:03:53.685 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:03:53.687 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:03:53.695 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:03:53.708 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:03:53.710 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:03:54.292 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:03:54.293 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:03:54.295 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:03:54.295 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:03:54.298 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:03:55.087 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:03:55.089 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:03:55.089 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:03:55.091 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:03:55.091 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:03:56.179 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:03:56.180 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:03:56.182 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:03:56.182 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:03:56.182 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:03:57.087 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:03:57.088 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:03:57.089 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:03:57.090 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:03:57.091 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:03:58.013 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:03:58.014 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:03:58.014 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:03:58.015 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:03:58.015 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:03:58.802 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:03:58.805 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:03:58.806 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:03:58.810 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:03:58.815 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:04:00.011 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:04:00.012 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:04:00.013 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:04:00.015 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:04:00.016 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:04:00.016 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:04:00.016 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:04:00.017 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768295040016], value class [java.lang.Long], SQL type unknown
16:04:00.030 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 1 expired sessions
16:04:01.008 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:04:01.010 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:04:01.012 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:04:01.013 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:04:01.027 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:04:01.906 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:04:01.908 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:04:01.909 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:04:01.909 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:04:01.909 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:04:02.638 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:04:02.641 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:04:02.642 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:04:02.642 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:04:02.643 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:05:00.001 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:05:00.002 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:05:00.003 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768295100001], value class [java.lang.Long], SQL type unknown
16:05:00.005 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:06:00.014 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:06:00.014 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:06:00.014 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768295160014], value class [java.lang.Long], SQL type unknown
16:06:00.019 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 1 expired sessions
16:07:00.036 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:07:00.039 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:07:00.046 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768295220035], value class [java.lang.Long], SQL type unknown
16:07:00.067 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 1 expired sessions
16:07:01.957 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
16:07:01.975 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=BM_oKKCPtDnpACQ-nX2R2KjJKaQnfg03BLuyGyyp6TM%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=rd_RYHA4myCwflhMx8uXmlSgzLrGjObZs6WDVnM2rHs
16:07:01.977 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:07:01.977 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
16:07:01.981 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:07:01.981 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:07:02.338 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=ASXw1H_BUBK1ZV61HX0h-HIx0iwtdnOlOG2whYfOHyLHotzJWVoLanQS1yWZP7tknMTiZN1euphi4Wtl6KP1AUwDh__Rbq2PaEuAKZI4BGw0CJm_VBZnPexw4wh2dsrw&state=BM_oKKCPtDnpACQ-nX2R2KjJKaQnfg03BLuyGyyp6TM%3D
16:07:02.342 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:07:02.342 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:07:03.159 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:07:03.159 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
16:07:03.161 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
16:07:03.161 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 16:07:03.0607531], value class [java.sql.Timestamp], SQL type 93
16:07:03.162 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 16:07:32.0607531], value class [java.sql.Timestamp], SQL type 93
16:07:03.162 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
16:07:03.162 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 16:07:03.0607531], value class [java.sql.Timestamp], SQL type 93
16:07:03.162 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
16:07:03.162 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
16:07:03.170 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 593b0d0e-1766-4518-a4d7-f4983f7886d6
16:07:03.172 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
16:07:03.175 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:07:02Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:37:02Z, iat=2026-01-13T09:07:02Z, nonce=rd_RYHA4myCwflhMx8uXmlSgzLrGjObZs6WDVnM2rHs, jti=1289e62b-5001-4790-bc38-2391c1027023, authorities=[ROLE_PRODUCT_MANAGER], sid=rogBJA8Fo7yqHf8g46Pvd_ySvK1q9E1e4HQqr__y17Y}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=593b0d0e-1766-4518-a4d7-f4983f7886d6], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@27912dd5]
16:07:03.176 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:07:02Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:37:02Z, iat=2026-01-13T09:07:02Z, nonce=rd_RYHA4myCwflhMx8uXmlSgzLrGjObZs6WDVnM2rHs, jti=1289e62b-5001-4790-bc38-2391c1027023, authorities=[ROLE_PRODUCT_MANAGER], sid=rogBJA8Fo7yqHf8g46Pvd_ySvK1q9E1e4HQqr__y17Y}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=593b0d0e-1766-4518-a4d7-f4983f7886d6], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
16:07:03.180 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:07:03.181 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:07:03.182 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:07:03.183 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:07:03.187 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:07:03.189 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
16:07:03.199 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:07:03.199 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:07:03.990 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:07:04.000 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:07:04.001 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:07:04.016 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:07:02Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:37:02Z, iat=2026-01-13T09:07:02Z, nonce=rd_RYHA4myCwflhMx8uXmlSgzLrGjObZs6WDVnM2rHs, jti=1289e62b-5001-4790-bc38-2391c1027023, authorities=[ROLE_PRODUCT_MANAGER], sid=rogBJA8Fo7yqHf8g46Pvd_ySvK1q9E1e4HQqr__y17Y}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=593b0d0e-1766-4518-a4d7-f4983f7886d6], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
16:07:04.016 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
16:07:04.034 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:07:04.034 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:07:04.047 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:07:04.048 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:08:00.006 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:08:00.008 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:08:00.008 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768295280006], value class [java.lang.Long], SQL type unknown
16:08:00.011 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:08:51.323 | DEBUG | FilterChainProxy: Securing POST /protected/logout
16:08:51.328 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:08:51.328 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:08:51.334 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:07:02Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:37:02Z, iat=2026-01-13T09:07:02Z, nonce=rd_RYHA4myCwflhMx8uXmlSgzLrGjObZs6WDVnM2rHs, jti=1289e62b-5001-4790-bc38-2391c1027023, authorities=[ROLE_PRODUCT_MANAGER], sid=rogBJA8Fo7yqHf8g46Pvd_ySvK1q9E1e4HQqr__y17Y}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=593b0d0e-1766-4518-a4d7-f4983f7886d6], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
16:08:51.336 | DEBUG | LogoutFilter: Logging out [OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:07:02Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:37:02Z, iat=2026-01-13T09:07:02Z, nonce=rd_RYHA4myCwflhMx8uXmlSgzLrGjObZs6WDVnM2rHs, jti=1289e62b-5001-4790-bc38-2391c1027023, authorities=[ROLE_PRODUCT_MANAGER], sid=rogBJA8Fo7yqHf8g46Pvd_ySvK1q9E1e4HQqr__y17Y}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=593b0d0e-1766-4518-a4d7-f4983f7886d6], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
16:08:51.338 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:08:51.338 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE SESSION_ID = ?
AND MAX_INACTIVE_INTERVAL >= 0
]
16:08:51.338 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [59e85005-b582-430e-b856-3666e714b6f7], value class [java.lang.String], SQL type unknown
16:08:51.345 | DEBUG | SecurityContextLogoutHandler: Invalidated session 59e85005-b582-430e-b856-3666e714b6f7
16:08:51.347 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:08:51.348 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:08:51.354 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:08:51.354 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
16:08:51.354 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
16:08:51.356 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
16:08:51.369 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/connect/logout?id_token_hint=eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJwcm9kbWFuQGJvb2tvbW1lcmNlLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2ODI5NTIyMiwiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY4Mjk3MDIyLCJpYXQiOjE3NjgyOTUyMjIsIm5vbmNlIjoicmRfUllIQTRteUN3ZmxoTXg4dVhtbFNnekxyR2pPYlpzNldEVm5NMnJIcyIsImp0aSI6IjEyODllNjJiLTUwMDEtNDc5MC1iYzM4LTIzOTFjMTAyNzAyMyIsImF1dGhvcml0aWVzIjpbIlJPTEVfUFJPRFVDVF9NQU5BR0VSIl0sInNpZCI6InJvZ0JKQThGbzd5cUhmOGc0NlB2ZF95U3ZLMXE5RTFlNEhRcXJfX3kxN1kifQ.iQ-r9dILxI5YZyK2gX3RT2Ct2ZvuC_GJtgtz4yTFXPgJNNwPEFdBuJjFNbvU_pHKh3MKrWB9lBe4iibhpal8WZ59TEUxO4vtvodz6jZfXCzoUvgGVfK3kK5Y8hQC0oP21iBS4GIw4ApCCZce_346hX7d_0R-hpl9wqxXVrd-KfRPK-Vnx-6MQSp3unbUqgzIdwAM6gLHaffy1TyiWkxaRdIK75hF7cSvslXOKJDeOE9lC9TOAyjHSsD9dlbYtlHcHxBW1SHSHZ3dYL0drw7QZlO0BoV_jhLDoK_WlB_mtlG-YIS3_637rGahy9pWBFaJ0oNC2Eu6vRmxoKdgt-PeEw&post_logout_redirect_uri=https://auth.bookommerce.com:8282/page/store-login
16:08:58.891 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
16:08:58.894 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=D_R1mbwS-Vk1e3B9QUp05ar9d6uPkAgYO_1FXVagMu8%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=n9DG9bB5qMYi50jux0jAUEzSS7cTZMdEp9piOVrxnuQ
16:08:58.896 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:08:58.896 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
16:08:58.898 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:08:58.898 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:08:59.004 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=v3nWzsUh73UAOhMFM3dkP-fqx2SxievK95OzQgQytmc1HpRUYYb_sU1jp8GrhDSNmC4cnaZI2sMkRp7vpX9tndHpbamz0Z9RIAbxj1wNnO6i5ww3jUziDayBpfMp89e6&state=D_R1mbwS-Vk1e3B9QUp05ar9d6uPkAgYO_1FXVagMu8%3D
16:08:59.014 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:08:59.036 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:08:59.411 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:08:59.411 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
16:08:59.412 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
16:08:59.412 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 16:08:59.3808987], value class [java.sql.Timestamp], SQL type 93
16:08:59.412 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 16:09:29.3808987], value class [java.sql.Timestamp], SQL type 93
16:08:59.413 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
16:08:59.413 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 16:08:59.3808987], value class [java.sql.Timestamp], SQL type 93
16:08:59.413 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
16:08:59.413 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
16:08:59.416 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:08:59.416 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO oauth2_authorized_client (client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
16:08:59.417 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
16:08:59.417 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
16:08:59.417 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [Bearer], value class [java.lang.String], SQL type 12
16:08:59.418 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [2026-01-13 16:08:59.3808987], value class [java.sql.Timestamp], SQL type 93
16:08:59.418 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 6, parameter value [2026-01-13 16:09:29.3808987], value class [java.sql.Timestamp], SQL type 93
16:08:59.418 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [openid,profile], value class [java.lang.String], SQL type 12
16:08:59.418 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [2026-01-13 16:08:59.3808987], value class [java.sql.Timestamp], SQL type 93
16:08:59.425 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from abd3ea35-5722-4cbe-9d26-ee7bfe57fe31
16:08:59.426 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
16:08:59.428 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:08:58Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:38:59Z, iat=2026-01-13T09:08:59Z, nonce=n9DG9bB5qMYi50jux0jAUEzSS7cTZMdEp9piOVrxnuQ, jti=85211e8e-e0bd-48fc-b4d9-6ad4ada12a25, authorities=[ROLE_PRODUCT_MANAGER], sid=inrlQzIPCId3xrZhYSADYbl7fFxxKuPx2rjguUz0f-w}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=abd3ea35-5722-4cbe-9d26-ee7bfe57fe31], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@3ad3862c]
16:08:59.430 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:08:58Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:38:59Z, iat=2026-01-13T09:08:59Z, nonce=n9DG9bB5qMYi50jux0jAUEzSS7cTZMdEp9piOVrxnuQ, jti=85211e8e-e0bd-48fc-b4d9-6ad4ada12a25, authorities=[ROLE_PRODUCT_MANAGER], sid=inrlQzIPCId3xrZhYSADYbl7fFxxKuPx2rjguUz0f-w}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=abd3ea35-5722-4cbe-9d26-ee7bfe57fe31], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
16:08:59.431 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:08:59.431 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:08:59.433 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:08:59.433 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:08:59.435 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:08:59.435 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
16:08:59.446 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:08:59.446 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:08:59.980 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:08:59.982 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:08:59.983 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:08:59.986 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:08:58Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:38:59Z, iat=2026-01-13T09:08:59Z, nonce=n9DG9bB5qMYi50jux0jAUEzSS7cTZMdEp9piOVrxnuQ, jti=85211e8e-e0bd-48fc-b4d9-6ad4ada12a25, authorities=[ROLE_PRODUCT_MANAGER], sid=inrlQzIPCId3xrZhYSADYbl7fFxxKuPx2rjguUz0f-w}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=abd3ea35-5722-4cbe-9d26-ee7bfe57fe31], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
16:08:59.986 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
16:08:59.994 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:08:59.994 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:09:00.003 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:09:00.003 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:09:00.017 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:09:00.019 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:09:00.019 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768295340017], value class [java.lang.Long], SQL type unknown
16:09:00.027 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:09:16.834 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:09:16.835 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:09:16.838 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@2c89ee0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:09:16.838 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@6e35cce7, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:09:16.838 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@22b4a4e4
16:10:00.002 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:10:00.003 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:10:00.003 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768295400002], value class [java.lang.Long], SQL type unknown
16:10:00.005 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:10:34.140 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
16:10:34.141 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=4duM_exzh18KS-Etkhz3LVy1sFZy9oY0JnWXJwr_5-4%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=m6JdB-Mw6RYxHBESeYUcLNl3ERYtJrphJubywVMzWWU
16:10:34.143 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:10:34.145 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
16:10:34.148 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:10:34.148 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:10:34.215 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=gmEVaJDKhvVHiEPEVZcfy4zCShAPy4HERATDkOVxAJdcepOjhk2Lqkdmpf9zeSMDQWA81ruACueu6yPYELQD0BF97WvadH8pQowVkJqJxUL-dF53sygVekUF9QPgjNpD&state=4duM_exzh18KS-Etkhz3LVy1sFZy9oY0JnWXJwr_5-4%3D
16:10:34.216 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:10:34.217 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:10:34.647 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:10:34.647 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
16:10:34.648 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
16:10:34.648 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 16:10:34.61553], value class [java.sql.Timestamp], SQL type 93
16:10:34.648 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 16:11:04.61553], value class [java.sql.Timestamp], SQL type 93
16:10:34.648 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
16:10:34.648 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 16:10:34.61553], value class [java.sql.Timestamp], SQL type 93
16:10:34.648 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
16:10:34.649 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
16:10:34.657 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from f8459bf8-7a40-4b0e-b369-40bf695b1c9e
16:10:34.657 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
16:10:34.659 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:10:34Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:40:34Z, iat=2026-01-13T09:10:34Z, nonce=m6JdB-Mw6RYxHBESeYUcLNl3ERYtJrphJubywVMzWWU, jti=438bfeb4-d27f-4574-88e1-3375a848b9e4, authorities=[ROLE_PRODUCT_MANAGER], sid=0nuY-9SUH4rpZaYVThdFXqP1V7L33vTszE6G5pAXo8k}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=f8459bf8-7a40-4b0e-b369-40bf695b1c9e], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@430f5ba0]
16:10:34.659 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:10:34Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:40:34Z, iat=2026-01-13T09:10:34Z, nonce=m6JdB-Mw6RYxHBESeYUcLNl3ERYtJrphJubywVMzWWU, jti=438bfeb4-d27f-4574-88e1-3375a848b9e4, authorities=[ROLE_PRODUCT_MANAGER], sid=0nuY-9SUH4rpZaYVThdFXqP1V7L33vTszE6G5pAXo8k}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=f8459bf8-7a40-4b0e-b369-40bf695b1c9e], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
16:10:34.660 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:10:34.660 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:10:34.662 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:10:34.663 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:10:34.665 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:10:34.665 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
16:10:34.674 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:10:34.674 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:10:35.139 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:10:35.141 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:10:35.142 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:10:35.146 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:10:34Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:40:34Z, iat=2026-01-13T09:10:34Z, nonce=m6JdB-Mw6RYxHBESeYUcLNl3ERYtJrphJubywVMzWWU, jti=438bfeb4-d27f-4574-88e1-3375a848b9e4, authorities=[ROLE_PRODUCT_MANAGER], sid=0nuY-9SUH4rpZaYVThdFXqP1V7L33vTszE6G5pAXo8k}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=f8459bf8-7a40-4b0e-b369-40bf695b1c9e], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
16:10:35.146 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
16:10:35.150 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:10:35.150 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:10:35.163 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:10:35.164 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:10:47.157 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10
16:10:47.160 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:10:47.161 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10
16:10:47.473 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:10:47.474 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:10:47.474 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:10:47.484 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
16:10:47.496 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:10:47.498 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
16:10:47.499 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:10:47.500 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
16:10:47.500 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
16:10:47.501 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:10:47.501 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
16:10:47.501 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:10:47.501 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:10:47.512 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:10:47.507 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
16:10:47.514 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:10:47.537 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
16:10:47.512 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
16:10:47.514 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
16:10:47.628 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
16:10:47.657 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:10:47.648 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:10:47.662 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:10:47.663 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:10:47.663 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
16:10:47.664 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
16:10:47.665 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:10:47.665 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:10:47.669 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:10:47.669 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:10:50.046 | DEBUG | FilterChainProxy: Securing GET /protected/api/ratings?page=0&size=5&sort=CREATED_AT&order=DESC
16:10:50.047 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:10:50.048 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:10:50.053 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:10:34Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:40:34Z, iat=2026-01-13T09:10:34Z, nonce=m6JdB-Mw6RYxHBESeYUcLNl3ERYtJrphJubywVMzWWU, jti=438bfeb4-d27f-4574-88e1-3375a848b9e4, authorities=[ROLE_PRODUCT_MANAGER], sid=0nuY-9SUH4rpZaYVThdFXqP1V7L33vTszE6G5pAXo8k}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=f8459bf8-7a40-4b0e-b369-40bf695b1c9e], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
16:10:50.053 | DEBUG | FilterChainProxy: Secured GET /protected/api/ratings?page=0&size=5&sort=CREATED_AT&order=DESC
16:10:50.062 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:10:50.062 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
16:10:50.063 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
16:10:50.063 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
16:10:50.446 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:10:34Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:40:50Z, iat=2026-01-13T09:10:50Z, jti=f41aedcb-5692-416a-9a1b-373251799078, authorities=[ROLE_PRODUCT_MANAGER], sid=0nuY-9SUH4rpZaYVThdFXqP1V7L33vTszE6G5pAXo8k}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=f8459bf8-7a40-4b0e-b369-40bf695b1c9e], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@51aa06b6]
16:10:50.446 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:10:50.446 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
16:10:50.447 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
16:10:50.447 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 16:10:50.402829], value class [java.sql.Timestamp], SQL type 93
16:10:50.447 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 16:11:20.402829], value class [java.sql.Timestamp], SQL type 93
16:10:50.447 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
16:10:50.447 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 16:10:50.402829], value class [java.sql.Timestamp], SQL type 93
16:10:50.447 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
16:10:50.447 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
16:10:50.864 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:10:50.865 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:10:50.866 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:10:50.866 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
16:10:50.880 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:10:50.881 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:10:53.196 | DEBUG | FilterChainProxy: Securing GET /protected/api/ratings?page=0&size=5&sort=CREATED_AT&order=DESC
16:10:53.198 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:10:53.198 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:10:53.210 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:10:34Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:40:50Z, iat=2026-01-13T09:10:50Z, jti=f41aedcb-5692-416a-9a1b-373251799078, authorities=[ROLE_PRODUCT_MANAGER], sid=0nuY-9SUH4rpZaYVThdFXqP1V7L33vTszE6G5pAXo8k}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=f8459bf8-7a40-4b0e-b369-40bf695b1c9e], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
16:10:53.210 | DEBUG | FilterChainProxy: Secured GET /protected/api/ratings?page=0&size=5&sort=CREATED_AT&order=DESC
16:10:53.212 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:10:53.212 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
16:10:53.213 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
16:10:53.219 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
16:10:53.627 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:10:34Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:40:53Z, iat=2026-01-13T09:10:53Z, jti=866c330d-a379-4d93-a306-546dd4772b19, authorities=[ROLE_PRODUCT_MANAGER], sid=0nuY-9SUH4rpZaYVThdFXqP1V7L33vTszE6G5pAXo8k}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=f8459bf8-7a40-4b0e-b369-40bf695b1c9e], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@4dd8113b]
16:10:53.628 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:10:53.628 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
16:10:53.629 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
16:10:53.629 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 16:10:53.6041657], value class [java.sql.Timestamp], SQL type 93
16:10:53.629 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 16:11:23.6041657], value class [java.sql.Timestamp], SQL type 93
16:10:53.629 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
16:10:53.629 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 16:10:53.6041657], value class [java.sql.Timestamp], SQL type 93
16:10:53.631 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
16:10:53.631 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
16:10:53.968 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:10:53.968 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:10:53.969 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:10:53.971 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
16:10:53.980 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:10:53.981 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:10:56.589 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10
16:10:56.589 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:10:56.590 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10
16:10:56.770 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
16:10:56.772 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:10:56.773 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
16:10:56.780 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
16:10:56.780 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:10:56.788 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
16:10:56.788 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
16:10:56.788 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
16:10:56.788 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:10:56.789 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:10:56.790 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:10:56.789 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:10:56.789 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:10:56.790 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
16:10:56.790 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:10:56.790 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
16:10:56.790 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
16:10:56.799 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
16:10:56.812 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
16:10:56.812 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:10:56.813 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
16:10:56.844 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:10:56.850 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:10:56.945 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:10:56.917 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:10:56.936 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:10:56.960 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:10:56.960 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:10:56.961 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:10:56.965 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:11:00.005 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:11:00.006 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:11:00.007 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768295460005], value class [java.lang.Long], SQL type unknown
16:11:00.010 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:11:20.995 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10
16:11:20.996 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:11:20.997 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10
16:11:21.190 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
16:11:21.191 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:11:21.191 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
16:11:21.192 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:11:21.191 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
16:11:21.191 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:11:21.192 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
16:11:21.192 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:11:21.193 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
16:11:21.193 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:11:21.193 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
16:11:21.193 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:11:21.193 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
16:11:21.193 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
16:11:21.194 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:11:21.202 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:11:21.202 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
16:11:21.203 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
16:11:21.241 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
16:11:21.244 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:11:21.254 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:11:21.258 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:11:21.268 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:11:21.278 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:11:21.282 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:11:21.264 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
16:11:21.283 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:11:21.268 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:11:21.286 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:11:21.289 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:11:22.857 | DEBUG | FilterChainProxy: Securing GET /protected/api/ratings?page=0&size=5&sort=CREATED_AT&order=DESC
16:11:22.859 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:11:22.860 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:11:22.868 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:10:34Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:40:53Z, iat=2026-01-13T09:10:53Z, jti=866c330d-a379-4d93-a306-546dd4772b19, authorities=[ROLE_PRODUCT_MANAGER], sid=0nuY-9SUH4rpZaYVThdFXqP1V7L33vTszE6G5pAXo8k}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=f8459bf8-7a40-4b0e-b369-40bf695b1c9e], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
16:11:22.869 | DEBUG | FilterChainProxy: Secured GET /protected/api/ratings?page=0&size=5&sort=CREATED_AT&order=DESC
16:11:22.872 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:11:22.873 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
16:11:22.873 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
16:11:22.874 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
16:11:23.264 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:10:34Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:41:23Z, iat=2026-01-13T09:11:23Z, jti=0ed8066e-92ac-433f-8dba-796a5065b3c9, authorities=[ROLE_PRODUCT_MANAGER], sid=0nuY-9SUH4rpZaYVThdFXqP1V7L33vTszE6G5pAXo8k}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=f8459bf8-7a40-4b0e-b369-40bf695b1c9e], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@20686c70]
16:11:23.264 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:11:23.264 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
16:11:23.265 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
16:11:23.265 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 16:11:23.2292742], value class [java.sql.Timestamp], SQL type 93
16:11:23.266 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 16:11:53.2292742], value class [java.sql.Timestamp], SQL type 93
16:11:23.266 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
16:11:23.266 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 16:11:23.2292742], value class [java.sql.Timestamp], SQL type 93
16:11:23.266 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
16:11:23.266 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
16:11:23.648 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:11:23.648 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:11:23.650 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:11:23.650 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
16:11:23.660 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:11:23.661 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:11:48.335 | DEBUG | FilterChainProxy: Securing GET /protected/api/ratings?page=0&size=5&sort=CREATED_AT&order=DESC
16:11:48.336 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:11:48.337 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:11:48.343 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:10:34Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:41:23Z, iat=2026-01-13T09:11:23Z, jti=0ed8066e-92ac-433f-8dba-796a5065b3c9, authorities=[ROLE_PRODUCT_MANAGER], sid=0nuY-9SUH4rpZaYVThdFXqP1V7L33vTszE6G5pAXo8k}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=f8459bf8-7a40-4b0e-b369-40bf695b1c9e], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
16:11:48.344 | DEBUG | FilterChainProxy: Secured GET /protected/api/ratings?page=0&size=5&sort=CREATED_AT&order=DESC
16:11:48.345 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:11:48.346 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
16:11:48.346 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
16:11:48.348 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
16:11:48.712 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:10:34Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:41:48Z, iat=2026-01-13T09:11:48Z, jti=11699d82-9894-428a-87ac-d983024bba02, authorities=[ROLE_PRODUCT_MANAGER], sid=0nuY-9SUH4rpZaYVThdFXqP1V7L33vTszE6G5pAXo8k}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=f8459bf8-7a40-4b0e-b369-40bf695b1c9e], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@4b0b80e2]
16:11:48.713 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:11:48.713 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
16:11:48.713 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
16:11:48.713 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 16:11:48.6903796], value class [java.sql.Timestamp], SQL type 93
16:11:48.713 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 16:12:18.6903796], value class [java.sql.Timestamp], SQL type 93
16:11:48.714 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
16:11:48.714 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 16:11:48.6903796], value class [java.sql.Timestamp], SQL type 93
16:11:48.714 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
16:11:48.714 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
16:11:49.056 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:11:49.056 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:11:49.058 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:11:49.058 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
16:11:49.068 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:11:49.068 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:12:00.008 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:12:00.009 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:12:00.009 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768295520008], value class [java.lang.Long], SQL type unknown
16:12:00.025 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 1 expired sessions
16:13:00.009 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:13:00.009 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:13:00.009 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768295580009], value class [java.lang.Long], SQL type unknown
16:13:00.011 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:14:00.018 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:14:00.018 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:14:00.020 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768295640018], value class [java.lang.Long], SQL type unknown
16:14:00.026 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:15:00.013 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:15:00.014 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:15:00.014 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768295700013], value class [java.lang.Long], SQL type unknown
16:15:00.024 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 1 expired sessions
16:16:00.010 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:16:00.011 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:16:00.011 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768295760010], value class [java.lang.Long], SQL type unknown
16:16:00.013 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:22:39.504 | INFO | BeForFeApplication: Starting BeForFeApplication using Java 21.0.3 with PID 6888 (C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes started by PC in C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe)
16:22:39.506 | INFO | BeForFeApplication: No active profile set, falling back to 1 default profile: "default"
16:22:39.561 | INFO | DevToolsPropertyDefaultsPostProcessor: Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
16:22:39.561 | INFO | DevToolsPropertyDefaultsPostProcessor: For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
16:22:41.045 | INFO | RepositoryConfigurationDelegate: Bootstrapping Spring Data JPA repositories in DEFAULT mode.
16:22:41.086 | INFO | RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 23 ms. Found 0 JPA repository interfaces.
16:22:41.537 | INFO | GenericScope: BeanFactory id=13accd6c-ace7-3257-bf77-8e53872683d4
16:22:42.389 | INFO | TomcatWebServer: Tomcat initialized with port 8181 (https)
16:22:42.409 | INFO | StandardService: Starting service [Tomcat]
16:22:42.409 | INFO | StandardEngine: Starting Servlet engine: [Apache Tomcat/10.1.50]
16:22:42.547 | INFO | [/]: Initializing Spring embedded WebApplicationContext
16:22:42.548 | INFO | ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 2722 ms
16:22:42.786 | INFO | LogHelper: HHH000204: Processing PersistenceUnitInfo [name: default]
16:22:42.927 | INFO | Version: HHH000412: Hibernate ORM core version 6.6.39.Final
16:22:43.009 | INFO | RegionFactoryInitiator: HHH000026: Second-level cache disabled
16:22:43.399 | INFO | SpringPersistenceUnitInfo: No LoadTimeWeaver setup: ignoring JPA class transformer
16:22:43.467 | INFO | HikariDataSource: HikariPool-1 - Starting...
16:22:43.949 | INFO | HikariPool: HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5eb9237d
16:22:43.952 | INFO | HikariDataSource: HikariPool-1 - Start completed.
16:22:44.045 | WARN | deprecation: HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
16:22:44.064 | INFO | pooling: HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.44
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
16:22:45.011 | INFO | JtaPlatformInitiator: HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
16:22:45.121 | INFO | LocalContainerEntityManagerFactoryBean: Initialized JPA EntityManagerFactory for persistence unit 'default'
16:22:45.335 | WARN | JpaBaseConfiguration$JpaWebConfiguration: spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
16:22:45.725 | DEBUG | AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder: No authenticationProviders and no parentAuthenticationManager defined. Returning null.
16:22:45.979 | DEBUG | DefaultSecurityFilterChain: Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, OAuth2AuthorizationRequestRedirectFilter, OAuth2LoginAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
16:22:46.709 | INFO | OptionalLiveReloadServer: LiveReload server is running on port 35729
16:22:46.980 | INFO | certificate: Connector [https-jsse-nio-8181], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [Set directly - location unknown] using alias [bookommerce_ssl] with trust store [null]
16:22:46.993 | INFO | TomcatWebServer: Tomcat started on port 8181 (https) with context path '/'
16:22:47.013 | INFO | BeForFeApplication: Started BeForFeApplication in 8.13 seconds (process running for 8.981)
16:23:00.090 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:23:00.091 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:23:00.099 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768296180088], value class [java.lang.Long], SQL type unknown
16:23:00.115 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:24:00.013 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:24:00.014 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:24:00.014 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768296240013], value class [java.lang.Long], SQL type unknown
16:24:00.019 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:25:00.004 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:25:00.005 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:25:00.006 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768296300004], value class [java.lang.Long], SQL type unknown
16:25:00.010 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:25:24.265 | INFO | [/]: Initializing Spring DispatcherServlet 'dispatcherServlet'
16:25:24.266 | INFO | DispatcherServlet: Initializing Servlet 'dispatcherServlet'
16:25:24.269 | INFO | DispatcherServlet: Completed initialization in 3 ms
16:25:24.329 | DEBUG | FilterChainProxy: Securing GET /protected/api/ratings?page=0&size=5&sort=CREATED_AT&order=DESC
16:25:24.363 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:25:24.380 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@47f9bc00, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:25:24.382 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@32f41fdf, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:25:24.382 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@702cde81
16:25:41.446 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10
16:25:41.447 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:25:41.448 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10
16:25:42.147 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:25:42.154 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:25:42.164 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:25:42.176 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
16:25:42.177 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
16:25:42.178 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:25:42.178 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:25:42.178 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
16:25:42.178 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
16:25:42.183 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
16:25:42.183 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
16:25:42.185 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
16:25:42.187 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:25:42.193 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:25:42.223 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
16:25:42.202 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:25:42.223 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
16:25:42.247 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
16:25:42.337 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
16:25:42.369 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:25:42.340 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:25:42.361 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:25:42.370 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:25:42.375 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:25:42.382 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:25:42.389 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:25:42.396 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:25:42.393 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
16:25:42.395 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:25:42.398 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:25:44.583 | DEBUG | FilterChainProxy: Securing GET /protected/api/ratings?page=0&size=5&sort=CREATED_AT&order=DESC
16:25:44.586 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:25:44.587 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@47f9bc00, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:25:44.589 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@32f41fdf, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:25:44.589 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@702cde81
16:25:47.090 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10
16:25:47.091 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:25:47.092 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10
16:25:47.266 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
16:25:47.266 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
16:25:47.266 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
16:25:47.267 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:25:47.269 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
16:25:47.269 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:25:47.270 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
16:25:47.270 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
16:25:47.269 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:25:47.270 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:25:47.270 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:25:47.271 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
16:25:47.271 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
16:25:47.270 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:25:47.270 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:25:47.271 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:25:47.273 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
16:25:47.276 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
16:25:47.304 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:25:47.308 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:25:47.308 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
16:25:47.318 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:25:47.309 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:25:47.319 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:25:47.319 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:25:47.372 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
16:25:47.403 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:25:47.409 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:25:47.437 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:25:47.454 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:25:54.548 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:25:54.549 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:25:54.550 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@47f9bc00, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:25:54.550 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@32f41fdf, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:25:54.550 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@702cde81
16:26:00.001 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:26:00.002 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:26:00.004 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768296360001], value class [java.lang.Long], SQL type unknown
16:26:00.007 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:26:00.131 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
16:26:00.146 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=D7GIGB5yoRPjvb8qDO_AN_9218p4X4IoS5FLBHkE75k%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=LrDgC1aW4GYQ0A89H2NTAZ9_8Jcgz0MAnXx-whoHq_E
16:26:00.148 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:26:00.149 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
16:26:00.156 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:26:00.161 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:26:00.310 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=kjYYnLSigTqQjMTZBljX8nylW8OCNiAFbj-N1O8f0lgmyDf_DYKjeTtQXKPNUUwR5Hq27uEG9T7iLsKu7YqrH7e1Kbg6bBjLuSiG45tcV_G3D6prtpTfLMO0W3RQ1vBU&state=D7GIGB5yoRPjvb8qDO_AN_9218p4X4IoS5FLBHkE75k%3D
16:26:00.316 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:26:00.317 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:26:00.980 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:26:00.981 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
16:26:00.982 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
16:26:00.982 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 16:26:00.8219123], value class [java.sql.Timestamp], SQL type 93
16:26:00.983 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 16:26:30.8219123], value class [java.sql.Timestamp], SQL type 93
16:26:00.983 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
16:26:00.984 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 16:26:00.8219123], value class [java.sql.Timestamp], SQL type 93
16:26:00.984 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
16:26:00.984 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
16:26:00.996 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from d205360a-8864-4a5b-843b-c9f4f653ef1f
16:26:00.998 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
16:26:01.000 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:26:00Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:56:00Z, iat=2026-01-13T09:26:00Z, nonce=LrDgC1aW4GYQ0A89H2NTAZ9_8Jcgz0MAnXx-whoHq_E, jti=2d6e3ff2-4476-4425-b08b-cf65c2cc30ad, authorities=[ROLE_PRODUCT_MANAGER], sid=IPmSyRQ-JWrYdHaGWCqNoWLv7XLk_yIAIP3nYY5i49I}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=d205360a-8864-4a5b-843b-c9f4f653ef1f], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@4e5cc011]
16:26:01.001 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:26:00Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:56:00Z, iat=2026-01-13T09:26:00Z, nonce=LrDgC1aW4GYQ0A89H2NTAZ9_8Jcgz0MAnXx-whoHq_E, jti=2d6e3ff2-4476-4425-b08b-cf65c2cc30ad, authorities=[ROLE_PRODUCT_MANAGER], sid=IPmSyRQ-JWrYdHaGWCqNoWLv7XLk_yIAIP3nYY5i49I}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=d205360a-8864-4a5b-843b-c9f4f653ef1f], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
16:26:01.016 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:26:01.016 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:26:01.018 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:26:01.019 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:26:01.056 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:26:01.056 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
16:26:01.069 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:26:01.071 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:26:01.567 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:26:01.570 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:26:01.570 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:26:01.587 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:26:00Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:56:00Z, iat=2026-01-13T09:26:00Z, nonce=LrDgC1aW4GYQ0A89H2NTAZ9_8Jcgz0MAnXx-whoHq_E, jti=2d6e3ff2-4476-4425-b08b-cf65c2cc30ad, authorities=[ROLE_PRODUCT_MANAGER], sid=IPmSyRQ-JWrYdHaGWCqNoWLv7XLk_yIAIP3nYY5i49I}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=d205360a-8864-4a5b-843b-c9f4f653ef1f], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
16:26:01.587 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
16:26:01.686 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:26:01.686 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:26:01.698 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:26:01.699 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:26:05.742 | DEBUG | FilterChainProxy: Securing GET /protected/api/ratings?page=0&size=5&sort=CREATED_AT&order=DESC
16:26:05.744 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:26:05.745 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@47f9bc00, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:26:05.746 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@32f41fdf, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:26:05.746 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@702cde81
16:26:07.795 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:26:07.796 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:26:07.797 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@47f9bc00, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:26:07.797 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@32f41fdf, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:26:07.797 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@702cde81
16:27:00.005 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:27:00.006 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:27:00.007 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768296420005], value class [java.lang.Long], SQL type unknown
16:27:00.011 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:28:00.003 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:28:00.004 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:28:00.005 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768296480003], value class [java.lang.Long], SQL type unknown
16:28:00.009 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:29:00.015 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:29:00.018 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:29:00.020 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768296540015], value class [java.lang.Long], SQL type unknown
16:29:00.024 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:29:18.458 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
16:29:18.513 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=Ba3Dhjo7FDGbjnzotMlZc9nhfj_HfykGQz6ktwfGgf8%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=KalCP8QTUMc2w8ec82BQyBqnyPzuklfQm78oBG4LXLU
16:29:18.586 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:29:18.593 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
16:29:18.620 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:29:18.625 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:29:19.123 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=4ed1DYzRCV5Vtp4FAWHS0bdqWT_-jFZgg5e83irviyjkXOifJZXoOcpwJy9-JM69t4FFqYLQMDhTc8jRIORXM6bhjyKsXZFIxyIp4CZrkmh3eWl57ZbY9CcA0VqwFJ46&state=Ba3Dhjo7FDGbjnzotMlZc9nhfj_HfykGQz6ktwfGgf8%3D
16:29:19.154 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:29:19.161 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:29:21.299 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:29:21.305 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
16:29:21.308 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
16:29:21.326 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 16:29:21.1215915], value class [java.sql.Timestamp], SQL type 93
16:29:21.327 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 16:29:50.1215915], value class [java.sql.Timestamp], SQL type 93
16:29:21.335 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
16:29:21.337 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 16:29:21.1215915], value class [java.sql.Timestamp], SQL type 93
16:29:21.351 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
16:29:21.353 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
16:29:21.375 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 0ce16bfc-f03c-45d9-a7ec-f52c2e70f8d6
16:29:21.403 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
16:29:21.419 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:29:19Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:59:20Z, iat=2026-01-13T09:29:20Z, nonce=KalCP8QTUMc2w8ec82BQyBqnyPzuklfQm78oBG4LXLU, jti=bc98856f-d008-434f-bad3-e82ea5dbc2d9, authorities=[ROLE_PRODUCT_MANAGER], sid=qqiz8q74DL399Gn6N1RieXUv4J3fadpc-M2h6GxzhQ8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=0ce16bfc-f03c-45d9-a7ec-f52c2e70f8d6], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@6519c9bb]
16:29:21.424 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:29:19Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:59:20Z, iat=2026-01-13T09:29:20Z, nonce=KalCP8QTUMc2w8ec82BQyBqnyPzuklfQm78oBG4LXLU, jti=bc98856f-d008-434f-bad3-e82ea5dbc2d9, authorities=[ROLE_PRODUCT_MANAGER], sid=qqiz8q74DL399Gn6N1RieXUv4J3fadpc-M2h6GxzhQ8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=0ce16bfc-f03c-45d9-a7ec-f52c2e70f8d6], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
16:29:21.454 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:29:21.468 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:29:21.483 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:29:21.501 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:29:21.523 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:29:21.533 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
16:29:21.601 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:29:21.621 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:29:24.291 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:29:24.310 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:29:24.313 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:29:24.354 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:29:19Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:59:20Z, iat=2026-01-13T09:29:20Z, nonce=KalCP8QTUMc2w8ec82BQyBqnyPzuklfQm78oBG4LXLU, jti=bc98856f-d008-434f-bad3-e82ea5dbc2d9, authorities=[ROLE_PRODUCT_MANAGER], sid=qqiz8q74DL399Gn6N1RieXUv4J3fadpc-M2h6GxzhQ8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=0ce16bfc-f03c-45d9-a7ec-f52c2e70f8d6], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
16:29:24.355 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
16:29:24.441 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:29:24.446 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:29:24.473 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:29:24.482 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:29:33.867 | DEBUG | FilterChainProxy: Securing GET /protected/api/ratings?page=0&size=5&sort=CREATED_AT&order=DESC
16:29:33.869 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:29:33.874 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@47f9bc00, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:29:33.877 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@32f41fdf, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:29:33.879 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@702cde81
16:29:39.804 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
16:29:39.808 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=dQor45bzoltV1oEG1fyuJ5Q0B-rRlCLG_mY1SHPUp_E%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=L9dIfDMV3VZRJT1KOeclnlpZjY954cBDLOQqUgY_6pc
16:29:39.813 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:29:39.815 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
16:29:39.819 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:29:39.819 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:29:39.947 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=3EyvRiVCrIExnCEGdhPCei96u6neNIZfUYJk7ft6ADi4cWSOriN_yfJE-yeR6OIVNQ0AbmPN5CejIe1oQXiw7I8orjviMruDXfD6JeKy1J0wW06lim7ULWHf95gP7Rdo&state=dQor45bzoltV1oEG1fyuJ5Q0B-rRlCLG_mY1SHPUp_E%3D
16:29:39.951 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:29:39.951 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:29:40.665 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:29:40.665 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
16:29:40.668 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
16:29:40.669 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 16:29:40.6055468], value class [java.sql.Timestamp], SQL type 93
16:29:40.670 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 16:30:10.6055468], value class [java.sql.Timestamp], SQL type 93
16:29:40.670 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
16:29:40.672 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 16:29:40.6055468], value class [java.sql.Timestamp], SQL type 93
16:29:40.682 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
16:29:40.689 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
16:29:40.702 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 29f29bc1-ad2e-4c6c-bb5f-8057c11c284d
16:29:40.705 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
16:29:40.707 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:29:39Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:59:40Z, iat=2026-01-13T09:29:40Z, nonce=L9dIfDMV3VZRJT1KOeclnlpZjY954cBDLOQqUgY_6pc, jti=e1942be7-3253-4ad7-9067-885dca2a7c20, authorities=[ROLE_PRODUCT_MANAGER], sid=oAg8818og0h-1-h4hMhIWlN7xPCdErcFeHJwxcB_7lA}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=29f29bc1-ad2e-4c6c-bb5f-8057c11c284d], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@22825c0c]
16:29:40.723 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:29:39Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:59:40Z, iat=2026-01-13T09:29:40Z, nonce=L9dIfDMV3VZRJT1KOeclnlpZjY954cBDLOQqUgY_6pc, jti=e1942be7-3253-4ad7-9067-885dca2a7c20, authorities=[ROLE_PRODUCT_MANAGER], sid=oAg8818og0h-1-h4hMhIWlN7xPCdErcFeHJwxcB_7lA}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=29f29bc1-ad2e-4c6c-bb5f-8057c11c284d], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
16:29:40.735 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:29:40.753 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:29:40.757 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:29:40.765 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:29:40.774 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:29:40.783 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
16:29:40.800 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:29:40.801 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:29:41.854 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:29:41.862 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:29:41.871 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:29:41.894 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:29:39Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T09:59:40Z, iat=2026-01-13T09:29:40Z, nonce=L9dIfDMV3VZRJT1KOeclnlpZjY954cBDLOQqUgY_6pc, jti=e1942be7-3253-4ad7-9067-885dca2a7c20, authorities=[ROLE_PRODUCT_MANAGER], sid=oAg8818og0h-1-h4hMhIWlN7xPCdErcFeHJwxcB_7lA}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=29f29bc1-ad2e-4c6c-bb5f-8057c11c284d], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
16:29:41.903 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
16:29:41.924 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:29:41.929 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:29:41.949 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:29:41.955 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:29:47.881 | DEBUG | FilterChainProxy: Securing GET /protected/api/ratings?page=0&size=5&sort=CREATED_AT&order=DESC
16:29:47.895 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:29:47.907 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@47f9bc00, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:29:47.913 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@32f41fdf, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:29:47.913 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@702cde81
16:30:00.009 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:30:00.010 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:30:00.010 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768296600009], value class [java.lang.Long], SQL type unknown
16:30:00.035 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 1 expired sessions
16:31:00.013 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:31:00.014 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:31:00.014 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768296660013], value class [java.lang.Long], SQL type unknown
16:31:00.019 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:31:32.321 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
16:31:32.326 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=SCdh-8--q7EK3Mnh3oM8fuiee8dMwmS-U2p7BFWnGw8%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=2XwWikLcKE1vrE3jf2bvoQgHY9kSTAsyFDHSbF982TI
16:31:32.332 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:31:32.332 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
16:31:32.336 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:31:32.336 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:31:32.484 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=FpuI4W09iLnrOaphhKSzBvDfE05GQlzaK_gpT7QB2mTOmps_nAo058vJm4vJNw5hNqNxsaRsYwKblQTEkM6Rxr2asKkgbw1ttM6v8b_TADvhjpmSlwcuv4zI3wwgNVwf&state=SCdh-8--q7EK3Mnh3oM8fuiee8dMwmS-U2p7BFWnGw8%3D
16:31:32.489 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:31:32.494 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:31:32.963 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:31:32.963 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
16:31:32.964 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
16:31:32.964 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 16:31:32.9146714], value class [java.sql.Timestamp], SQL type 93
16:31:32.964 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 16:32:02.9146714], value class [java.sql.Timestamp], SQL type 93
16:31:32.964 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
16:31:32.965 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 16:31:32.9146714], value class [java.sql.Timestamp], SQL type 93
16:31:32.965 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
16:31:32.965 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
16:31:32.968 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:31:32.969 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO oauth2_authorized_client (client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
16:31:32.969 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
16:31:32.969 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
16:31:32.969 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [Bearer], value class [java.lang.String], SQL type 12
16:31:32.971 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [2026-01-13 16:31:32.9146714], value class [java.sql.Timestamp], SQL type 93
16:31:32.972 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 6, parameter value [2026-01-13 16:32:02.9146714], value class [java.sql.Timestamp], SQL type 93
16:31:32.972 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [openid,profile], value class [java.lang.String], SQL type 12
16:31:32.974 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [2026-01-13 16:31:32.9146714], value class [java.sql.Timestamp], SQL type 93
16:31:32.986 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 64b6759a-c6c9-42cd-ad39-d9d900d7dd36
16:31:32.986 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
16:31:32.987 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:31:32Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:01:32Z, iat=2026-01-13T09:31:32Z, nonce=2XwWikLcKE1vrE3jf2bvoQgHY9kSTAsyFDHSbF982TI, jti=a8d77862-c7c5-42b7-a156-db98e0fec826, authorities=[ROLE_CUSTOMER], sid=ZVmTSyGwIcd5YBbjTQ12qDVA_6hGCYwekeuO1V-nt8I}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=64b6759a-c6c9-42cd-ad39-d9d900d7dd36], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@505b6a30]
16:31:32.988 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:31:32Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:01:32Z, iat=2026-01-13T09:31:32Z, nonce=2XwWikLcKE1vrE3jf2bvoQgHY9kSTAsyFDHSbF982TI, jti=a8d77862-c7c5-42b7-a156-db98e0fec826, authorities=[ROLE_CUSTOMER], sid=ZVmTSyGwIcd5YBbjTQ12qDVA_6hGCYwekeuO1V-nt8I}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=64b6759a-c6c9-42cd-ad39-d9d900d7dd36], Granted Authorities=[ROLE_CUSTOMER]]
16:31:32.993 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:31:32.993 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:31:32.995 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:31:32.996 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:31:33.002 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:31:33.002 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
16:31:33.014 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:31:33.014 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:31:33.837 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:31:33.844 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:31:33.844 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:31:33.865 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:31:32Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:01:32Z, iat=2026-01-13T09:31:32Z, nonce=2XwWikLcKE1vrE3jf2bvoQgHY9kSTAsyFDHSbF982TI, jti=a8d77862-c7c5-42b7-a156-db98e0fec826, authorities=[ROLE_CUSTOMER], sid=ZVmTSyGwIcd5YBbjTQ12qDVA_6hGCYwekeuO1V-nt8I}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=64b6759a-c6c9-42cd-ad39-d9d900d7dd36], Granted Authorities=[ROLE_CUSTOMER]]]
16:31:33.866 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
16:31:33.885 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:31:33.885 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:31:33.898 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:31:33.898 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:31:34.169 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
16:31:34.170 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:31:34.170 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
16:31:35.272 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
16:31:35.274 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:31:35.275 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
16:31:35.286 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
16:31:35.293 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:31:35.295 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
16:31:35.299 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
16:31:35.301 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:31:35.302 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
16:31:35.302 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:31:35.302 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
16:31:35.306 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:31:35.307 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
16:31:35.307 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:31:35.307 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:31:35.308 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:31:35.309 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
16:31:35.309 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
16:31:35.361 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
16:31:35.464 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:31:35.433 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:31:35.581 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:31:35.599 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:31:35.600 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:31:35.606 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:31:35.613 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:31:35.615 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:31:35.626 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:31:35.632 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:31:35.585 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
16:31:48.719 | DEBUG | FilterChainProxy: Securing GET /protected/api/carts
16:31:48.720 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:31:48.721 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@47f9bc00, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:31:48.722 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@32f41fdf, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:31:48.722 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@702cde81
16:31:48.747 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
16:31:48.750 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=cLkM5e-DYtkS4vusKwy4Ew1xO6um_NFcr89AyvRabv8%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=AWyMf8W7tPdbzr7VLyUzDIfP0KmPLDaufkCSmRAUL9Y
16:31:48.753 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:31:48.753 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
16:31:48.757 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:31:48.759 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:31:48.866 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=4b82DplhNPkOChQ6ZEd7TlUx5k7YtYOwfCr1TbGgJjrNXTSdMwQODhJ66hz72cZjifLVo82QL27o4KL0r15DaO6MouhNWm6Iiq4kkB6UPhN6uylBrV1yS968wpmq_6QA&state=cLkM5e-DYtkS4vusKwy4Ew1xO6um_NFcr89AyvRabv8%3D
16:31:48.867 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:31:48.868 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:31:49.216 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:31:49.217 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
16:31:49.218 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
16:31:49.218 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 16:31:49.1873284], value class [java.sql.Timestamp], SQL type 93
16:31:49.218 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 16:32:19.1873284], value class [java.sql.Timestamp], SQL type 93
16:31:49.219 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
16:31:49.219 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 16:31:49.1873284], value class [java.sql.Timestamp], SQL type 93
16:31:49.219 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
16:31:49.219 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
16:31:49.226 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 64b115e8-81cb-42d8-b0aa-6fd78bd78a46
16:31:49.226 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
16:31:49.227 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:31:32Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:01:49Z, iat=2026-01-13T09:31:49Z, nonce=AWyMf8W7tPdbzr7VLyUzDIfP0KmPLDaufkCSmRAUL9Y, jti=3806b321-08b8-435c-b53f-e40892093871, authorities=[ROLE_CUSTOMER], sid=ZVmTSyGwIcd5YBbjTQ12qDVA_6hGCYwekeuO1V-nt8I}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=64b115e8-81cb-42d8-b0aa-6fd78bd78a46], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@4ed3f518]
16:31:49.227 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:31:32Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:01:49Z, iat=2026-01-13T09:31:49Z, nonce=AWyMf8W7tPdbzr7VLyUzDIfP0KmPLDaufkCSmRAUL9Y, jti=3806b321-08b8-435c-b53f-e40892093871, authorities=[ROLE_CUSTOMER], sid=ZVmTSyGwIcd5YBbjTQ12qDVA_6hGCYwekeuO1V-nt8I}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=64b115e8-81cb-42d8-b0aa-6fd78bd78a46], Granted Authorities=[ROLE_CUSTOMER]]
16:31:49.230 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:31:49.230 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:31:49.231 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:31:49.231 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:31:49.243 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:31:49.243 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
16:31:49.250 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:31:49.250 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:31:49.728 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:31:49.730 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:31:49.730 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:31:49.739 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:31:32Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:01:49Z, iat=2026-01-13T09:31:49Z, nonce=AWyMf8W7tPdbzr7VLyUzDIfP0KmPLDaufkCSmRAUL9Y, jti=3806b321-08b8-435c-b53f-e40892093871, authorities=[ROLE_CUSTOMER], sid=ZVmTSyGwIcd5YBbjTQ12qDVA_6hGCYwekeuO1V-nt8I}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=64b115e8-81cb-42d8-b0aa-6fd78bd78a46], Granted Authorities=[ROLE_CUSTOMER]]]
16:31:49.740 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
16:31:49.744 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:31:49.744 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:31:49.754 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:31:49.755 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:31:49.988 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
16:31:49.989 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:31:49.990 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
16:31:50.328 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
16:31:50.329 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:31:50.329 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
16:31:50.352 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:31:50.357 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
16:31:50.364 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:31:50.361 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
16:31:50.361 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
16:31:50.373 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:31:50.374 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
16:31:50.365 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:31:50.367 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
16:31:50.369 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:31:50.376 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:31:50.370 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:31:50.379 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
16:31:50.375 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
16:31:50.376 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
16:31:50.378 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
16:31:50.383 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:31:50.403 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
16:31:50.431 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:31:50.432 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:31:50.433 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:31:50.460 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:31:50.463 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:31:50.470 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:31:50.481 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:31:50.470 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:31:50.486 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:32:00.010 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:32:00.010 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:32:00.012 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768296720010], value class [java.lang.Long], SQL type unknown
16:32:00.015 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:32:08.646 | DEBUG | FilterChainProxy: Securing GET /protected/api/carts
16:32:08.648 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:32:08.651 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@47f9bc00, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:32:08.651 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@32f41fdf, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:32:08.652 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@702cde81
16:32:08.678 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
16:32:08.680 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=u7pto6xEvuXVHgwTutmjEmxBtFokXqjN2NbA3Hj3--o%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=CwHQy3DXMFhHa9tkda2lrWiSb74tMshF5c7sPJn5lFQ
16:32:08.682 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:32:08.683 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
16:32:08.684 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:32:08.684 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:32:18.907 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:32:18.910 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:32:18.910 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:32:18.914 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:32:18.917 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@47f9bc00, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:32:18.917 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@32f41fdf, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:32:18.918 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@702cde81
16:32:18.919 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:32:18.919 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:32:18.944 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
16:32:18.951 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:32:18.951 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:32:18.992 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=k0JIf0xAYmcaOZeBSPr6qfiRl9FvLbI1-GW6lcQ9V8g%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=CSo45NmKNbyIomPfvLzL-hvUdjARsndBoQ-M7i9GIFA
16:32:19.006 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:32:19.006 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:32:19.023 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:32:19.023 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
16:32:19.039 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:32:19.040 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:32:19.185 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
16:32:19.187 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:32:19.187 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
16:33:00.014 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:33:00.015 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:33:00.016 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768296780014], value class [java.lang.Long], SQL type unknown
16:33:00.032 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 2 expired sessions
16:34:00.009 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:34:00.009 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:34:00.010 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768296840009], value class [java.lang.Long], SQL type unknown
16:34:00.013 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:34:06.383 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
16:34:06.387 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:34:06.387 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:34:06.392 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=WJgG4acUK841-VIlCoLUuSM_xzbYGvZpwaI77fBjeRw%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=EhsfJMFT2ua-3oTTZew8xQtHfgQ1lv08t2m3-nhs28I
16:34:06.394 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:34:06.395 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:34:06.402 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:34:06.403 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
16:34:06.418 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:34:06.418 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:34:06.506 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=kn3dYjbB6ZekNorr1Z2uUkVi7rUzesU8BRtOLBccXMNIHBenjHBApWhdyIxqZK6ptAFcH9CJ_kV1gn9bwQxTH6jVS9IEfCfCMKJ6T-pZn1xDYaUtrzsd6YGcmXc7jK4K&state=WJgG4acUK841-VIlCoLUuSM_xzbYGvZpwaI77fBjeRw%3D
16:34:06.510 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:34:06.510 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:34:06.884 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:34:06.884 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
16:34:06.884 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
16:34:06.885 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 16:34:06.8484811], value class [java.sql.Timestamp], SQL type 93
16:34:06.885 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 16:34:36.8484811], value class [java.sql.Timestamp], SQL type 93
16:34:06.885 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
16:34:06.886 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 16:34:06.8484811], value class [java.sql.Timestamp], SQL type 93
16:34:06.886 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
16:34:06.886 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
16:34:06.892 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from ad6d476c-8795-42cd-96c9-37b7a13338cf
16:34:06.894 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
16:34:06.895 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:34:06Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:04:06Z, iat=2026-01-13T09:34:06Z, nonce=EhsfJMFT2ua-3oTTZew8xQtHfgQ1lv08t2m3-nhs28I, jti=93914b2c-3ef8-4a0b-9158-00e1bf784849, authorities=[ROLE_PRODUCT_MANAGER], sid=84VJrRBNIef5hxU1y6CO39hHSZbOj9ALXbT5GMAEgt4}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=ad6d476c-8795-42cd-96c9-37b7a13338cf], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@1eec4add]
16:34:06.896 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:34:06Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:04:06Z, iat=2026-01-13T09:34:06Z, nonce=EhsfJMFT2ua-3oTTZew8xQtHfgQ1lv08t2m3-nhs28I, jti=93914b2c-3ef8-4a0b-9158-00e1bf784849, authorities=[ROLE_PRODUCT_MANAGER], sid=84VJrRBNIef5hxU1y6CO39hHSZbOj9ALXbT5GMAEgt4}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=ad6d476c-8795-42cd-96c9-37b7a13338cf], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
16:34:06.899 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:34:06.900 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:34:06.901 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:34:06.901 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:34:06.903 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:34:06.903 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
16:34:06.911 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:34:06.913 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:34:07.651 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:34:07.653 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:34:07.654 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:34:07.662 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:34:06Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:04:06Z, iat=2026-01-13T09:34:06Z, nonce=EhsfJMFT2ua-3oTTZew8xQtHfgQ1lv08t2m3-nhs28I, jti=93914b2c-3ef8-4a0b-9158-00e1bf784849, authorities=[ROLE_PRODUCT_MANAGER], sid=84VJrRBNIef5hxU1y6CO39hHSZbOj9ALXbT5GMAEgt4}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=ad6d476c-8795-42cd-96c9-37b7a13338cf], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
16:34:07.663 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
16:34:07.669 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:34:07.669 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:34:07.681 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:34:07.681 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:34:16.373 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:34:16.375 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:34:16.376 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@47f9bc00, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:34:16.376 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@32f41fdf, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:34:16.377 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@702cde81
16:34:24.667 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
16:34:24.672 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=UntwUJENn7mhDAysZsT_LOFUsYr6DAZP1fTmo-_IRHM%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=aix7TtbR-NELZoixy3znEkMzC5wqBkbHdNX79XPCFog
16:34:24.679 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:34:24.680 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
16:34:24.681 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:34:24.683 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:34:24.778 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=QXITDdnrX7zLwajw9EPkUwPM4FOZRpx7Wrr5Au0RqYdfQmg6HUrw9FXwCQd-uPRdUt67ZQAhLPLbd70s6hR7GueKvu6q2B3JwLy4juWXKPFJ-3kFsqSy_OUIF1Mn8XJY&state=UntwUJENn7mhDAysZsT_LOFUsYr6DAZP1fTmo-_IRHM%3D
16:34:24.780 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:34:24.781 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:34:25.185 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:34:25.185 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
16:34:25.185 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
16:34:25.187 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 16:34:25.15641], value class [java.sql.Timestamp], SQL type 93
16:34:25.187 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 16:34:55.15641], value class [java.sql.Timestamp], SQL type 93
16:34:25.187 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
16:34:25.187 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 16:34:25.15641], value class [java.sql.Timestamp], SQL type 93
16:34:25.187 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
16:34:25.188 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
16:34:25.196 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 261895c9-4c1f-4382-8a38-d24c3fac9f76
16:34:25.197 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
16:34:25.198 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:34:24Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:04:25Z, iat=2026-01-13T09:34:25Z, nonce=aix7TtbR-NELZoixy3znEkMzC5wqBkbHdNX79XPCFog, jti=e199c53d-9a5b-46d9-a35c-091d8f80ff98, authorities=[ROLE_PRODUCT_MANAGER], sid=IgGwVazUNfiLzmMRtnz9GSsXyEPXwm7D9vvMG2KtuxY}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=261895c9-4c1f-4382-8a38-d24c3fac9f76], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@51803c79]
16:34:25.199 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:34:24Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:04:25Z, iat=2026-01-13T09:34:25Z, nonce=aix7TtbR-NELZoixy3znEkMzC5wqBkbHdNX79XPCFog, jti=e199c53d-9a5b-46d9-a35c-091d8f80ff98, authorities=[ROLE_PRODUCT_MANAGER], sid=IgGwVazUNfiLzmMRtnz9GSsXyEPXwm7D9vvMG2KtuxY}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=261895c9-4c1f-4382-8a38-d24c3fac9f76], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
16:34:25.200 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:34:25.200 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:34:25.202 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:34:25.202 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:34:25.205 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:34:25.205 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
16:34:25.214 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:34:25.215 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:34:25.771 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:34:25.776 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:34:25.783 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:34:25.804 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:34:24Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:04:25Z, iat=2026-01-13T09:34:25Z, nonce=aix7TtbR-NELZoixy3znEkMzC5wqBkbHdNX79XPCFog, jti=e199c53d-9a5b-46d9-a35c-091d8f80ff98, authorities=[ROLE_PRODUCT_MANAGER], sid=IgGwVazUNfiLzmMRtnz9GSsXyEPXwm7D9vvMG2KtuxY}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=261895c9-4c1f-4382-8a38-d24c3fac9f76], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
16:34:25.804 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
16:34:25.810 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:34:25.812 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:34:25.825 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:34:25.825 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:34:31.387 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:34:31.391 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:34:31.391 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:34:31.397 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:34:24Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:04:25Z, iat=2026-01-13T09:34:25Z, nonce=aix7TtbR-NELZoixy3znEkMzC5wqBkbHdNX79XPCFog, jti=e199c53d-9a5b-46d9-a35c-091d8f80ff98, authorities=[ROLE_PRODUCT_MANAGER], sid=IgGwVazUNfiLzmMRtnz9GSsXyEPXwm7D9vvMG2KtuxY}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=261895c9-4c1f-4382-8a38-d24c3fac9f76], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
16:34:31.397 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
16:34:31.406 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:34:31.407 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:34:31.423 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:34:31.425 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:34:38.755 | DEBUG | FilterChainProxy: Securing GET /protected/api/ratings?page=0&size=5&sort=CREATED_AT&order=DESC
16:34:38.757 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:34:38.759 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@47f9bc00, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:34:38.760 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@32f41fdf, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:34:38.761 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@702cde81
16:34:58.889 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:34:58.892 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:34:58.893 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@47f9bc00, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:34:58.894 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@32f41fdf, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:34:58.894 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@702cde81
16:34:59.106 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
16:34:59.106 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:34:59.107 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
16:34:59.558 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
16:34:59.559 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:34:59.559 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
16:34:59.568 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
16:34:59.569 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:34:59.571 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
16:34:59.571 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
16:34:59.575 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:34:59.581 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
16:34:59.581 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
16:34:59.584 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:34:59.587 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
16:34:59.587 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:34:59.592 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:34:59.602 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:34:59.587 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
16:34:59.610 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:34:59.616 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
16:34:59.623 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
16:34:59.626 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:34:59.627 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
16:34:59.717 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:34:59.734 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:34:59.736 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:34:59.739 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:34:59.751 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:34:59.752 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:34:59.757 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:34:59.759 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:34:59.760 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:35:00.007 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:35:00.007 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:35:00.008 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768296900007], value class [java.lang.Long], SQL type unknown
16:35:00.025 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 2 expired sessions
16:35:02.537 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
16:35:02.540 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=9egX51U98UXTPRMC2lgXErqUdxykSAgI8p3ojquRtlg%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=9I3ZZw_WPhGwv0U8OIrRZBd3Oj0G3U1HzOfx74WVSoU
16:35:02.542 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:35:02.542 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
16:35:02.544 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:35:02.545 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:35:09.815 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
16:35:09.817 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:35:09.817 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:35:09.823 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=qO27lPrITGg6b5kWKFSH-20t7wHc_qb-9pSuo8KXpJ0%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=zDZKADqDQShiyFGBpSccgOAbMvPDFO3N24uTN8V1QtU
16:35:09.826 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:35:09.826 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:35:09.829 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:35:09.829 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
16:35:09.833 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:35:09.833 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:35:09.930 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=8hP7ORJdD-VAA_y7s44YgrO2VSdDs9AYykIeqAOqhX_YJEkTiFnYUIG7dp5Jw0IsAKYLsdWZsrGfEMlxeB8g_D-fvVdOlh0N_AQAfXsDccsfvrvjAIG9HewI2y7bDk98&state=qO27lPrITGg6b5kWKFSH-20t7wHc_qb-9pSuo8KXpJ0%3D
16:35:09.932 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:35:09.932 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:35:10.291 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:35:10.292 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
16:35:10.292 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
16:35:10.292 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 16:35:10.26766], value class [java.sql.Timestamp], SQL type 93
16:35:10.292 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 16:35:40.26766], value class [java.sql.Timestamp], SQL type 93
16:35:10.292 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
16:35:10.292 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 16:35:10.26766], value class [java.sql.Timestamp], SQL type 93
16:35:10.294 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
16:35:10.294 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
16:35:10.297 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 6c29782c-f5c2-4141-864b-173c39d246a3
16:35:10.298 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
16:35:10.298 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:35:09Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:05:10Z, iat=2026-01-13T09:35:10Z, nonce=zDZKADqDQShiyFGBpSccgOAbMvPDFO3N24uTN8V1QtU, jti=15f13c30-be32-473d-954f-328eb73c1fbd, authorities=[ROLE_CUSTOMER], sid=00mmnBC3sBDExwyn0sD7mld91Hm8Q9FAKmHeod0KUq8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=6c29782c-f5c2-4141-864b-173c39d246a3], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@609b6512]
16:35:10.299 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:35:09Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:05:10Z, iat=2026-01-13T09:35:10Z, nonce=zDZKADqDQShiyFGBpSccgOAbMvPDFO3N24uTN8V1QtU, jti=15f13c30-be32-473d-954f-328eb73c1fbd, authorities=[ROLE_CUSTOMER], sid=00mmnBC3sBDExwyn0sD7mld91Hm8Q9FAKmHeod0KUq8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=6c29782c-f5c2-4141-864b-173c39d246a3], Granted Authorities=[ROLE_CUSTOMER]]
16:35:10.300 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:35:10.301 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:35:10.305 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:35:10.305 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:35:10.310 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:35:10.310 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
16:35:10.314 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:35:10.314 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:35:10.934 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:35:10.937 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:35:10.937 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:35:10.944 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:35:09Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:05:10Z, iat=2026-01-13T09:35:10Z, nonce=zDZKADqDQShiyFGBpSccgOAbMvPDFO3N24uTN8V1QtU, jti=15f13c30-be32-473d-954f-328eb73c1fbd, authorities=[ROLE_CUSTOMER], sid=00mmnBC3sBDExwyn0sD7mld91Hm8Q9FAKmHeod0KUq8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=6c29782c-f5c2-4141-864b-173c39d246a3], Granted Authorities=[ROLE_CUSTOMER]]]
16:35:10.945 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
16:35:10.948 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:35:10.949 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:35:10.961 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:35:10.961 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:35:11.212 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
16:35:11.213 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:11.213 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
16:35:11.622 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:35:11.622 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:11.623 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:35:11.639 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
16:35:11.664 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:11.649 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
16:35:11.651 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
16:35:11.670 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:11.664 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
16:35:11.664 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
16:35:11.669 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
16:35:11.670 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:11.671 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
16:35:11.675 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:11.684 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
16:35:11.675 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:11.676 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
16:35:11.698 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
16:35:11.698 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
16:35:11.710 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:11.712 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
16:35:11.743 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:35:11.748 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:11.749 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:35:11.748 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:35:11.759 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:11.760 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:35:11.775 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:35:11.791 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:11.794 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:35:15.507 | DEBUG | FilterChainProxy: Securing GET /protected/api/carts
16:35:15.508 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:15.509 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@47f9bc00, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:35:15.509 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@32f41fdf, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:35:15.510 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@702cde81
16:35:15.535 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
16:35:15.537 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=kxp5G3gQ1a_CGvdYXxwLJua46eoEpxsw5u78k4TJ1XQ%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=WGsc2HB2nHTaWo8M0MWE_sAzAUIpxg24cRz5x79OQCw
16:35:15.540 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:35:15.540 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
16:35:15.542 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:35:15.543 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:35:15.635 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=gI9NORbQ6bcstiSyT2GvuZuqEvrwPIL1eDNsA-12wK_Uv1_9NL-OQswy92ksYP-OsRc4NygIFnuGPEsFmXmShIDej7QE6RqEgDDUdH91vw0GTiPUXippHdmXI1EHFNok&state=kxp5G3gQ1a_CGvdYXxwLJua46eoEpxsw5u78k4TJ1XQ%3D
16:35:15.637 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:35:15.637 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:35:16.142 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:35:16.143 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
16:35:16.144 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
16:35:16.144 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 16:35:16.1141683], value class [java.sql.Timestamp], SQL type 93
16:35:16.144 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 16:35:46.1141683], value class [java.sql.Timestamp], SQL type 93
16:35:16.145 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
16:35:16.145 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 16:35:16.1141683], value class [java.sql.Timestamp], SQL type 93
16:35:16.145 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
16:35:16.145 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
16:35:16.150 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from dba9a8ae-0100-4e6f-8dfa-f4bc3784159a
16:35:16.150 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
16:35:16.151 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:35:09Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:05:16Z, iat=2026-01-13T09:35:16Z, nonce=WGsc2HB2nHTaWo8M0MWE_sAzAUIpxg24cRz5x79OQCw, jti=c60d9a80-6d45-4255-a977-1187fd347899, authorities=[ROLE_CUSTOMER], sid=00mmnBC3sBDExwyn0sD7mld91Hm8Q9FAKmHeod0KUq8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=dba9a8ae-0100-4e6f-8dfa-f4bc3784159a], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@469ebb33]
16:35:16.151 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:35:09Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:05:16Z, iat=2026-01-13T09:35:16Z, nonce=WGsc2HB2nHTaWo8M0MWE_sAzAUIpxg24cRz5x79OQCw, jti=c60d9a80-6d45-4255-a977-1187fd347899, authorities=[ROLE_CUSTOMER], sid=00mmnBC3sBDExwyn0sD7mld91Hm8Q9FAKmHeod0KUq8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=dba9a8ae-0100-4e6f-8dfa-f4bc3784159a], Granted Authorities=[ROLE_CUSTOMER]]
16:35:16.153 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:35:16.153 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:35:16.155 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:35:16.156 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:35:16.161 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:35:16.161 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
16:35:16.169 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:35:16.169 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:35:16.780 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:35:16.785 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:35:16.786 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:35:16.795 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:35:09Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:05:16Z, iat=2026-01-13T09:35:16Z, nonce=WGsc2HB2nHTaWo8M0MWE_sAzAUIpxg24cRz5x79OQCw, jti=c60d9a80-6d45-4255-a977-1187fd347899, authorities=[ROLE_CUSTOMER], sid=00mmnBC3sBDExwyn0sD7mld91Hm8Q9FAKmHeod0KUq8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=dba9a8ae-0100-4e6f-8dfa-f4bc3784159a], Granted Authorities=[ROLE_CUSTOMER]]]
16:35:16.796 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
16:35:16.805 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:35:16.805 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:35:16.813 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:35:16.813 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:35:17.112 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
16:35:17.113 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:17.114 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
16:35:17.634 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:35:17.635 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:17.636 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:35:17.647 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
16:35:17.652 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:17.658 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
16:35:17.647 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
16:35:17.652 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
16:35:17.673 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:17.658 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
16:35:17.662 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
16:35:17.669 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:17.676 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
16:35:17.686 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
16:35:17.689 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:17.701 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
16:35:17.690 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:17.690 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
16:35:17.692 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:17.706 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
16:35:17.704 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
16:35:17.708 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:35:17.724 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:17.726 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:35:17.746 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:35:17.754 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:17.755 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:35:17.774 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:35:17.801 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:17.803 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:35:39.563 | DEBUG | FilterChainProxy: Securing POST /protected/logout
16:35:39.635 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:35:39.635 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:35:39.637 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:35:09Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:05:16Z, iat=2026-01-13T09:35:16Z, nonce=WGsc2HB2nHTaWo8M0MWE_sAzAUIpxg24cRz5x79OQCw, jti=c60d9a80-6d45-4255-a977-1187fd347899, authorities=[ROLE_CUSTOMER], sid=00mmnBC3sBDExwyn0sD7mld91Hm8Q9FAKmHeod0KUq8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=dba9a8ae-0100-4e6f-8dfa-f4bc3784159a], Granted Authorities=[ROLE_CUSTOMER]]]
16:35:39.640 | DEBUG | LogoutFilter: Logging out [OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:35:09Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:05:16Z, iat=2026-01-13T09:35:16Z, nonce=WGsc2HB2nHTaWo8M0MWE_sAzAUIpxg24cRz5x79OQCw, jti=c60d9a80-6d45-4255-a977-1187fd347899, authorities=[ROLE_CUSTOMER], sid=00mmnBC3sBDExwyn0sD7mld91Hm8Q9FAKmHeod0KUq8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=dba9a8ae-0100-4e6f-8dfa-f4bc3784159a], Granted Authorities=[ROLE_CUSTOMER]]]
16:35:39.652 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:35:39.652 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE SESSION_ID = ?
AND MAX_INACTIVE_INTERVAL >= 0
]
16:35:39.652 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [88c4bac5-3783-4c55-bf09-9ce1aa92a774], value class [java.lang.String], SQL type unknown
16:35:39.657 | DEBUG | SecurityContextLogoutHandler: Invalidated session 88c4bac5-3783-4c55-bf09-9ce1aa92a774
16:35:39.661 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:35:39.662 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:35:39.686 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:35:39.687 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
16:35:39.687 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
16:35:39.688 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
16:35:39.735 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/connect/logout?id_token_hint=eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJuZ3V5ZW52aWV0YW5oLnBlcnNvbmFsQGdtYWlsLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2ODI5NjkwOSwiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY4Mjk4NzE2LCJpYXQiOjE3NjgyOTY5MTYsIm5vbmNlIjoiV0dzYzJIQjJuSFRhV284TTBNV0Vfc0F6QVVJcHhnMjRjUno1eDc5T1FDdyIsImp0aSI6ImM2MGQ5YTgwLTZkNDUtNDI1NS1hOTc3LTExODdmZDM0Nzg5OSIsImF1dGhvcml0aWVzIjpbIlJPTEVfQ1VTVE9NRVIiXSwic2lkIjoiMDBtbW5CQzNzQkRFeHd5bjBzRDdtbGQ5MUhtOFE5RkFLbUhlb2QwS1VxOCJ9.ghwzQikC-e3g89Edb94tGgE7AxdyZfXlDo03Lt3vp87kFoT4NEnJeWKEeWlDnqe7lRAHiEpSOcUXUSlMWE2S8C_L0fE9OtSsPfeuBd_8IPytC6PpINC91we63w5KI0OIGJ6Iv_OTloaYm1GOCu-XEALXSW3HekxMs3QPpRQgHIHwOmrckW0BHSfdQG-VlpbCpTZKon6ZFQDJV7hnq6cmSp4sIHni1kXyv8fPi1pTClK4Q8gMTpZAguYZJ7YTEBWxvVxAKxhV-V2llx_MOyC5LhJVrayW9w2CGQkTp3b-zv9wLPOHqYSNc2A7dmwW_Is77HpqUx7FoDM341OlczNySA&post_logout_redirect_uri=https://app.bookommerce.com:8080
16:35:40.316 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:35:40.316 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:40.317 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@47f9bc00, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:35:40.317 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@32f41fdf, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:35:40.318 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@702cde81
16:35:40.525 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
16:35:40.527 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:40.528 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
16:35:40.871 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:35:40.874 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:40.875 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:35:40.881 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
16:35:40.889 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:40.891 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
16:35:40.894 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
16:35:40.904 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:40.910 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
16:35:40.881 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
16:35:40.917 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:40.894 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
16:35:40.928 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
16:35:40.928 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:40.928 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
16:35:40.896 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
16:35:40.922 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:35:40.924 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:35:40.931 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:40.933 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:40.934 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:40.935 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
16:35:40.942 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:35:40.936 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:35:40.938 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:35:40.944 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:40.970 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
16:35:40.997 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:35:40.999 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:35:41.002 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
16:36:00.015 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:36:00.015 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:36:00.016 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768296960015], value class [java.lang.Long], SQL type unknown
16:36:00.018 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:37:00.019 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:37:00.020 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:37:00.021 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768297020019], value class [java.lang.Long], SQL type unknown
16:37:00.025 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:38:00.003 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:38:00.003 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:38:00.004 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768297080003], value class [java.lang.Long], SQL type unknown
16:38:00.016 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 2 expired sessions
16:39:00.011 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:39:00.011 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:39:00.013 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768297140011], value class [java.lang.Long], SQL type unknown
16:39:00.024 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 1 expired sessions
16:39:59.727 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
16:39:59.728 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=R55cLs3cvAcqY6s1usx9Olrq_3qjADm6g66aYOumEBM%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=Z7C9XTvCt_x6rxY7jPydNrNLKMUt3nMBic4cyAbUc6E
16:39:59.732 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:39:59.733 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
16:39:59.736 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:39:59.737 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:40:00.010 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:40:00.024 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:40:00.033 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768297200010], value class [java.lang.Long], SQL type unknown
16:40:00.046 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:40:07.653 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
16:40:07.656 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:40:07.656 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:40:07.661 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=a7IVFH6X8lYPLpypwYn_uLHEBJ6TzoEeHaifrCT5kQA%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=ATmGn0BH0ufbPyfQKaQqA98sXcms80ydQ4cJPZSxK8g
16:40:07.665 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:40:07.665 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:40:07.667 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:40:07.668 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
16:40:07.680 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:40:07.681 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:40:07.753 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=KH14a16U-nF0AS4C6LXW3TC2XvX-1yIXrRMCq9cqkp5t-J4RN8_yTYoTjFuYPbDz5lqNIdAingLLYJ1_0cAk5AFjMnPlUZJEsKgAvtpBSfRE3umZ-e0P_8lHOuGeOopJ&state=a7IVFH6X8lYPLpypwYn_uLHEBJ6TzoEeHaifrCT5kQA%3D
16:40:07.760 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:40:07.761 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:40:08.178 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:40:08.178 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
16:40:08.179 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
16:40:08.179 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 16:40:08.1480202], value class [java.sql.Timestamp], SQL type 93
16:40:08.179 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 16:40:38.1480202], value class [java.sql.Timestamp], SQL type 93
16:40:08.179 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
16:40:08.179 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 16:40:08.1480202], value class [java.sql.Timestamp], SQL type 93
16:40:08.179 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
16:40:08.179 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
16:40:08.181 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:40:08.181 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO oauth2_authorized_client (client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
16:40:08.181 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
16:40:08.181 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
16:40:08.182 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [Bearer], value class [java.lang.String], SQL type 12
16:40:08.182 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [2026-01-13 16:40:08.1480202], value class [java.sql.Timestamp], SQL type 93
16:40:08.182 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 6, parameter value [2026-01-13 16:40:38.1480202], value class [java.sql.Timestamp], SQL type 93
16:40:08.182 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [openid,profile], value class [java.lang.String], SQL type 12
16:40:08.182 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [2026-01-13 16:40:08.1480202], value class [java.sql.Timestamp], SQL type 93
16:40:08.193 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from bbb6035c-238a-4e95-b942-3d1cf9c0f92c
16:40:08.195 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
16:40:08.197 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:40:07Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:10:08Z, iat=2026-01-13T09:40:08Z, nonce=ATmGn0BH0ufbPyfQKaQqA98sXcms80ydQ4cJPZSxK8g, jti=4f295249-c1f2-40b9-89eb-1eea516a22f8, authorities=[ROLE_CUSTOMER], sid=eq6oB0U7C-y9dd2RPfSBWz1iNL2RlvoP-jBs5QaS6as}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=bbb6035c-238a-4e95-b942-3d1cf9c0f92c], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@47a0ae48]
16:40:08.197 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:40:07Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:10:08Z, iat=2026-01-13T09:40:08Z, nonce=ATmGn0BH0ufbPyfQKaQqA98sXcms80ydQ4cJPZSxK8g, jti=4f295249-c1f2-40b9-89eb-1eea516a22f8, authorities=[ROLE_CUSTOMER], sid=eq6oB0U7C-y9dd2RPfSBWz1iNL2RlvoP-jBs5QaS6as}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=bbb6035c-238a-4e95-b942-3d1cf9c0f92c], Granted Authorities=[ROLE_CUSTOMER]]
16:40:08.199 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:40:08.200 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:40:08.201 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:40:08.201 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:40:08.206 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:40:08.209 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
16:40:08.218 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:40:08.218 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:40:08.857 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:40:08.861 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:40:08.861 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:40:08.867 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:40:07Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:10:08Z, iat=2026-01-13T09:40:08Z, nonce=ATmGn0BH0ufbPyfQKaQqA98sXcms80ydQ4cJPZSxK8g, jti=4f295249-c1f2-40b9-89eb-1eea516a22f8, authorities=[ROLE_CUSTOMER], sid=eq6oB0U7C-y9dd2RPfSBWz1iNL2RlvoP-jBs5QaS6as}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=bbb6035c-238a-4e95-b942-3d1cf9c0f92c], Granted Authorities=[ROLE_CUSTOMER]]]
16:40:08.868 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
16:40:08.872 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:40:08.873 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:40:08.885 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:40:08.886 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:40:09.108 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
16:40:09.111 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:40:09.113 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
16:40:09.484 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
16:40:09.484 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:40:09.485 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
16:40:09.496 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:40:09.498 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:40:09.502 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:40:09.500 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
16:40:09.502 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
16:40:09.515 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:40:09.520 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
16:40:09.502 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
16:40:09.502 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
16:40:09.510 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:40:09.543 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
16:40:09.543 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:40:09.544 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:40:09.547 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
16:40:09.545 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
16:40:09.546 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:40:09.547 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
16:40:09.569 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:40:09.582 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
16:40:09.583 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:40:09.583 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:40:09.634 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:40:09.634 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:40:09.651 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:40:09.653 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:40:09.662 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:40:09.664 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:40:27.000 | DEBUG | FilterChainProxy: Securing GET /protected/api/carts
16:40:27.029 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:40:27.034 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@47f9bc00, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:40:27.035 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@32f41fdf, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:40:27.035 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@702cde81
16:40:27.080 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
16:40:27.081 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=Ea3SpU6VbTMogJ0KKGr1vbE11k4a0k4Gn-YfW3pkfho%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=iPHjjBmbD0t2wl73xF8TLGEfteClAWCijAW-PTSEF68
16:40:27.084 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:40:27.084 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
16:40:27.087 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:40:27.089 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:40:27.186 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=AYzHYGJLtA0eNsHkg3LPICydsTRE17w5Bq5aoxL7JMaWXBlcln6MBtkldnsXpyB9Wtoq11DzDNsCL_iY6lX7-DRmh_sjhbPlbvHg9KYxyEqma_44Cr-yKA-TXH-D-oXK&state=Ea3SpU6VbTMogJ0KKGr1vbE11k4a0k4Gn-YfW3pkfho%3D
16:40:27.188 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:40:27.189 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:40:27.551 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:40:27.551 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
16:40:27.552 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
16:40:27.552 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 16:40:27.5350442], value class [java.sql.Timestamp], SQL type 93
16:40:27.552 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 16:40:57.5350442], value class [java.sql.Timestamp], SQL type 93
16:40:27.552 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
16:40:27.553 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 16:40:27.5350442], value class [java.sql.Timestamp], SQL type 93
16:40:27.553 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
16:40:27.553 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
16:40:27.560 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from afa9bb48-2af0-438d-a224-ed2a22ef1ecb
16:40:27.561 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
16:40:27.561 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:40:07Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:10:27Z, iat=2026-01-13T09:40:27Z, nonce=iPHjjBmbD0t2wl73xF8TLGEfteClAWCijAW-PTSEF68, jti=c1839758-0df7-4a6a-8877-5c53096a8646, authorities=[ROLE_CUSTOMER], sid=eq6oB0U7C-y9dd2RPfSBWz1iNL2RlvoP-jBs5QaS6as}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=afa9bb48-2af0-438d-a224-ed2a22ef1ecb], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@2bfe8752]
16:40:27.561 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:40:07Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:10:27Z, iat=2026-01-13T09:40:27Z, nonce=iPHjjBmbD0t2wl73xF8TLGEfteClAWCijAW-PTSEF68, jti=c1839758-0df7-4a6a-8877-5c53096a8646, authorities=[ROLE_CUSTOMER], sid=eq6oB0U7C-y9dd2RPfSBWz1iNL2RlvoP-jBs5QaS6as}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=afa9bb48-2af0-438d-a224-ed2a22ef1ecb], Granted Authorities=[ROLE_CUSTOMER]]
16:40:27.563 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:40:27.563 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:40:27.565 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:40:27.565 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:40:27.567 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:40:27.567 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
16:40:27.575 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:40:27.575 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:40:28.072 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:40:28.075 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:40:28.076 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:40:28.082 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:40:07Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:10:27Z, iat=2026-01-13T09:40:27Z, nonce=iPHjjBmbD0t2wl73xF8TLGEfteClAWCijAW-PTSEF68, jti=c1839758-0df7-4a6a-8877-5c53096a8646, authorities=[ROLE_CUSTOMER], sid=eq6oB0U7C-y9dd2RPfSBWz1iNL2RlvoP-jBs5QaS6as}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=afa9bb48-2af0-438d-a224-ed2a22ef1ecb], Granted Authorities=[ROLE_CUSTOMER]]]
16:40:28.113 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
16:40:28.127 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:40:28.135 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:40:28.160 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:40:28.161 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:40:28.428 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
16:40:28.430 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:40:28.430 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
16:40:28.760 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:40:28.761 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:40:28.763 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:40:28.771 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
16:40:28.774 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
16:40:28.777 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
16:40:28.781 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:40:28.780 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
16:40:28.780 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
16:40:28.781 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:40:28.783 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:40:28.783 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
16:40:28.782 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:40:28.783 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
16:40:28.782 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
16:40:28.782 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:40:28.783 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
16:40:28.792 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
16:40:28.799 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
16:40:28.808 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:40:28.809 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
16:40:28.837 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:40:28.841 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:40:28.842 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:40:28.849 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:40:28.846 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:40:28.847 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:40:28.863 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:40:28.849 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:40:28.865 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:41:00.013 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:41:00.014 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:41:00.014 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768297260013], value class [java.lang.Long], SQL type unknown
16:41:00.017 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:42:00.012 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:42:00.012 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:42:00.013 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768297320012], value class [java.lang.Long], SQL type unknown
16:42:00.016 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:42:19.507 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:42:19.512 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:42:19.512 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:42:19.518 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:40:07Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:10:27Z, iat=2026-01-13T09:40:27Z, nonce=iPHjjBmbD0t2wl73xF8TLGEfteClAWCijAW-PTSEF68, jti=c1839758-0df7-4a6a-8877-5c53096a8646, authorities=[ROLE_CUSTOMER], sid=eq6oB0U7C-y9dd2RPfSBWz1iNL2RlvoP-jBs5QaS6as}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=afa9bb48-2af0-438d-a224-ed2a22ef1ecb], Granted Authorities=[ROLE_CUSTOMER]]]
16:42:19.519 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
16:42:19.524 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:42:19.524 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:42:19.535 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:42:19.537 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:42:20.018 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
16:42:20.019 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:42:20.019 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
16:42:20.779 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:42:20.785 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:42:20.786 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:42:20.786 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
16:42:20.789 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:42:20.789 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
16:42:20.802 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
16:42:20.804 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:42:20.808 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
16:42:20.872 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
16:42:20.873 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:42:20.873 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
16:42:20.882 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
16:42:20.884 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:42:20.886 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
16:42:20.888 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
16:42:20.888 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:42:20.891 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
16:42:20.951 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
16:42:20.952 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:42:20.953 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
16:42:20.956 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:42:20.956 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:42:20.956 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:42:20.961 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:42:20.961 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:42:20.963 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:42:20.976 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:42:20.979 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:42:20.981 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:42:21.650 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:42:21.657 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:42:21.658 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:42:21.666 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:40:07Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:10:27Z, iat=2026-01-13T09:40:27Z, nonce=iPHjjBmbD0t2wl73xF8TLGEfteClAWCijAW-PTSEF68, jti=c1839758-0df7-4a6a-8877-5c53096a8646, authorities=[ROLE_CUSTOMER], sid=eq6oB0U7C-y9dd2RPfSBWz1iNL2RlvoP-jBs5QaS6as}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=afa9bb48-2af0-438d-a224-ed2a22ef1ecb], Granted Authorities=[ROLE_CUSTOMER]]]
16:42:21.667 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
16:42:21.674 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:42:21.674 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:42:21.688 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:42:21.689 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:42:22.216 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:42:22.219 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:42:22.219 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:42:22.227 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:40:07Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:10:27Z, iat=2026-01-13T09:40:27Z, nonce=iPHjjBmbD0t2wl73xF8TLGEfteClAWCijAW-PTSEF68, jti=c1839758-0df7-4a6a-8877-5c53096a8646, authorities=[ROLE_CUSTOMER], sid=eq6oB0U7C-y9dd2RPfSBWz1iNL2RlvoP-jBs5QaS6as}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=afa9bb48-2af0-438d-a224-ed2a22ef1ecb], Granted Authorities=[ROLE_CUSTOMER]]]
16:42:22.227 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
16:42:22.232 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:42:22.235 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:42:22.248 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:42:22.249 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:42:22.952 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
16:42:22.953 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:42:22.954 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
16:42:24.273 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:42:24.273 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
16:42:24.274 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:42:24.274 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:42:24.275 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
16:42:24.275 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:42:24.300 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
16:42:24.304 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:42:24.304 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
16:42:24.372 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
16:42:24.374 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:42:24.374 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
16:42:24.375 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
16:42:24.375 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:42:24.376 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
16:42:24.393 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
16:42:24.394 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:42:24.395 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
16:42:24.402 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
16:42:24.406 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:42:24.406 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
16:42:24.424 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:42:24.433 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:42:24.434 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:42:24.436 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:42:24.437 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:42:24.439 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:42:24.444 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:42:24.445 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:42:24.451 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:43:00.006 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:43:00.006 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:43:00.007 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768297380006], value class [java.lang.Long], SQL type unknown
16:43:00.014 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:43:15.741 | DEBUG | FilterChainProxy: Securing GET /protected/api/carts
16:43:15.744 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:43:15.744 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:43:15.753 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:40:07Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:10:27Z, iat=2026-01-13T09:40:27Z, nonce=iPHjjBmbD0t2wl73xF8TLGEfteClAWCijAW-PTSEF68, jti=c1839758-0df7-4a6a-8877-5c53096a8646, authorities=[ROLE_CUSTOMER], sid=eq6oB0U7C-y9dd2RPfSBWz1iNL2RlvoP-jBs5QaS6as}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=afa9bb48-2af0-438d-a224-ed2a22ef1ecb], Granted Authorities=[ROLE_CUSTOMER]]]
16:43:15.754 | DEBUG | FilterChainProxy: Secured GET /protected/api/carts
16:43:15.944 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:43:15.944 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
16:43:15.944 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
16:43:15.945 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
16:43:16.552 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T09:40:07Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:13:16Z, iat=2026-01-13T09:43:16Z, jti=5c78d6ae-8772-4fe0-8d70-d52a51eff35e, authorities=[ROLE_CUSTOMER], sid=eq6oB0U7C-y9dd2RPfSBWz1iNL2RlvoP-jBs5QaS6as}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=afa9bb48-2af0-438d-a224-ed2a22ef1ecb], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@138dceed]
16:43:16.553 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:43:16.553 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
16:43:16.554 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
16:43:16.554 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 16:43:16.4520788], value class [java.sql.Timestamp], SQL type 93
16:43:16.554 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 16:43:45.4520788], value class [java.sql.Timestamp], SQL type 93
16:43:16.555 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
16:43:16.555 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 16:43:16.4520788], value class [java.sql.Timestamp], SQL type 93
16:43:16.556 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
16:43:16.556 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
16:43:17.133 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:43:17.133 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:43:17.134 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:43:17.135 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
16:43:17.148 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:43:17.149 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:43:18.788 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
16:43:18.792 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:43:18.802 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
16:43:18.923 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:43:18.924 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:43:18.924 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:43:18.963 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
16:43:18.965 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:43:18.966 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
16:43:18.986 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
16:43:18.987 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:43:18.987 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
16:43:19.016 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
16:43:19.016 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:43:19.018 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
16:43:19.040 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
16:43:19.040 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:43:19.041 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
16:43:19.060 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
16:43:19.062 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:43:19.062 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
16:43:19.082 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
16:43:19.082 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:43:19.083 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
16:43:19.102 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:43:19.103 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:43:19.103 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:43:19.120 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:43:19.120 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:43:19.120 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:43:19.134 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:43:19.134 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:43:19.135 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:43:28.631 | DEBUG | FilterChainProxy: Securing GET /protected/api/carts
16:43:28.632 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:43:28.635 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@47f9bc00, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:43:28.635 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@32f41fdf, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:43:28.635 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@702cde81
16:43:28.659 | DEBUG | FilterChainProxy: Securing GET /page/login
16:43:28.661 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:43:28.779 | DEBUG | HttpSessionRequestCache: Saved request https://bff.bookommerce.com:8181/page/login?continue to session
16:43:28.781 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@47f9bc00, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:43:28.782 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint@717c9b59
16:43:28.784 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/page/login
16:43:28.790 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:43:28.790 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
16:43:28.794 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:43:28.794 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:44:00.015 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:44:00.016 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:44:00.017 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768297440015], value class [java.lang.Long], SQL type unknown
16:44:00.027 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 1 expired sessions
16:45:00.006 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:45:00.007 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:45:00.007 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768297500006], value class [java.lang.Long], SQL type unknown
16:45:00.011 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:46:00.003 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:46:00.003 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:46:00.004 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768297560003], value class [java.lang.Long], SQL type unknown
16:46:00.008 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:47:00.017 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:47:00.018 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:47:00.020 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768297620017], value class [java.lang.Long], SQL type unknown
16:47:00.036 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 2 expired sessions
16:48:00.003 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:48:00.004 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:48:00.004 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768297680003], value class [java.lang.Long], SQL type unknown
16:48:00.008 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:49:00.014 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:49:00.014 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:49:00.015 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768297740014], value class [java.lang.Long], SQL type unknown
16:49:00.022 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:50:00.005 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:50:00.007 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:50:00.007 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768297800005], value class [java.lang.Long], SQL type unknown
16:50:00.011 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:51:00.005 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:51:00.005 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:51:00.006 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768297860005], value class [java.lang.Long], SQL type unknown
16:51:00.010 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:52:00.008 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:52:00.008 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:52:00.009 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768297920008], value class [java.lang.Long], SQL type unknown
16:52:00.017 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:53:00.008 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:53:00.009 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:53:00.010 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768297980008], value class [java.lang.Long], SQL type unknown
16:53:00.037 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:54:00.010 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:54:00.011 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:54:00.013 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768298040010], value class [java.lang.Long], SQL type unknown
16:54:00.016 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:55:00.007 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:55:00.009 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:55:00.010 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768298100007], value class [java.lang.Long], SQL type unknown
16:55:00.017 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:56:00.079 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:56:00.079 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:56:00.080 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768298160079], value class [java.lang.Long], SQL type unknown
16:56:00.082 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:57:00.017 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:57:00.018 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:57:00.018 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768298220017], value class [java.lang.Long], SQL type unknown
16:57:00.021 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:58:00.006 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:58:00.007 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:58:00.008 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768298280006], value class [java.lang.Long], SQL type unknown
16:58:00.011 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
16:59:00.013 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:59:00.016 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
16:59:00.016 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768298340013], value class [java.lang.Long], SQL type unknown
16:59:00.019 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
17:00:00.015 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:00:00.017 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
17:00:00.018 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768298400015], value class [java.lang.Long], SQL type unknown
17:00:00.022 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
17:01:00.014 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:01:00.020 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
17:01:00.022 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768298460014], value class [java.lang.Long], SQL type unknown
17:01:00.024 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
17:02:00.017 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:02:00.018 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
17:02:00.019 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768298520017], value class [java.lang.Long], SQL type unknown
17:02:00.023 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
17:03:00.011 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:03:00.013 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
17:03:00.014 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768298580011], value class [java.lang.Long], SQL type unknown
17:03:00.047 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
17:04:00.006 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:04:00.006 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
17:04:00.006 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768298640006], value class [java.lang.Long], SQL type unknown
17:04:00.010 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
17:04:00.359 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
17:04:00.399 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=CfUHdo_akkg8ZO5sR3vYJ_3X5wDL8dsOzfBj7laugBw%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=dbKxtCKLWU9iXPN1x-ksUkMbobVVVLQnfnrieF2_Gbs
17:04:00.407 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:04:00.407 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
17:04:00.416 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:04:00.417 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
17:04:00.678 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=g9EkkFr48J8axGJ1Y9J7flW7zioa2jWxfGvCv2jN3YyZYqGeL60BIPMCnKvknN5G_wPqDcE_nmrdRggtool4ID-girfFl1mYmcCuaxEKsjlQZQ00IGFGwKI_95w-cZJH&state=CfUHdo_akkg8ZO5sR3vYJ_3X5wDL8dsOzfBj7laugBw%3D
17:04:00.694 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:04:00.695 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:04:01.553 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:04:01.553 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
17:04:01.555 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
17:04:01.558 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 17:04:01.3811875], value class [java.sql.Timestamp], SQL type 93
17:04:01.559 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 17:04:31.3811875], value class [java.sql.Timestamp], SQL type 93
17:04:01.559 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
17:04:01.559 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 17:04:01.3811875], value class [java.sql.Timestamp], SQL type 93
17:04:01.559 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
17:04:01.559 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
17:04:01.575 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from a3251744-76b1-432c-ab59-04dfe1a37a6b
17:04:01.579 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
17:04:01.586 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T10:04:00Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:34:01Z, iat=2026-01-13T10:04:01Z, nonce=dbKxtCKLWU9iXPN1x-ksUkMbobVVVLQnfnrieF2_Gbs, jti=df97b694-7c21-4ad1-a502-646bc38b2c85, authorities=[ROLE_CUSTOMER], sid=g2zJW_nELrC6sqG9k5CaZB1_mEw3FXouIWAQDpWFa2s}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=a3251744-76b1-432c-ab59-04dfe1a37a6b], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@66e803c6]
17:04:01.587 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T10:04:00Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:34:01Z, iat=2026-01-13T10:04:01Z, nonce=dbKxtCKLWU9iXPN1x-ksUkMbobVVVLQnfnrieF2_Gbs, jti=df97b694-7c21-4ad1-a502-646bc38b2c85, authorities=[ROLE_CUSTOMER], sid=g2zJW_nELrC6sqG9k5CaZB1_mEw3FXouIWAQDpWFa2s}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=a3251744-76b1-432c-ab59-04dfe1a37a6b], Granted Authorities=[ROLE_CUSTOMER]]
17:04:01.599 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:04:01.599 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
17:04:01.602 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:04:01.603 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
17:04:01.613 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:04:01.614 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
17:04:01.624 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:04:01.624 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:04:02.568 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
17:04:02.574 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:04:02.577 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:04:02.604 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T10:04:00Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:34:01Z, iat=2026-01-13T10:04:01Z, nonce=dbKxtCKLWU9iXPN1x-ksUkMbobVVVLQnfnrieF2_Gbs, jti=df97b694-7c21-4ad1-a502-646bc38b2c85, authorities=[ROLE_CUSTOMER], sid=g2zJW_nELrC6sqG9k5CaZB1_mEw3FXouIWAQDpWFa2s}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=a3251744-76b1-432c-ab59-04dfe1a37a6b], Granted Authorities=[ROLE_CUSTOMER]]]
17:04:02.605 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
17:04:02.691 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:04:02.691 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
17:04:02.705 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:04:02.705 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:04:02.960 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
17:04:02.966 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:04:02.967 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
17:04:03.867 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
17:04:03.867 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:04:03.868 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
17:04:03.879 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
17:04:03.880 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
17:04:03.882 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:04:03.889 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
17:04:03.881 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:04:03.893 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
17:04:03.896 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
17:04:03.905 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
17:04:03.898 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
17:04:03.905 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:04:03.905 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:04:03.905 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:04:03.905 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
17:04:03.905 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
17:04:03.906 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
17:04:03.943 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
17:04:03.956 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:04:03.963 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
17:04:03.999 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
17:04:04.004 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:04:04.005 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
17:04:04.040 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
17:04:04.043 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:04:04.040 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
17:04:04.048 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
17:04:04.050 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:04:04.055 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
17:04:15.461 | DEBUG | FilterChainProxy: Securing GET /protected/api/carts
17:04:15.463 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:04:15.465 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@47f9bc00, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
17:04:15.466 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@32f41fdf, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
17:04:15.467 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@702cde81
17:04:15.491 | DEBUG | FilterChainProxy: Securing GET /page/login?session_expired
17:04:15.492 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:04:15.496 | DEBUG | HttpSessionRequestCache: Saved request https://bff.bookommerce.com:8181/page/login?session_expired&continue to session
17:04:15.497 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@47f9bc00, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
17:04:15.499 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint@717c9b59
17:04:15.500 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/page/login
17:04:15.501 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:04:15.502 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
17:04:15.505 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:04:15.505 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
17:05:00.013 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:05:00.013 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
17:05:00.014 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768298700013], value class [java.lang.Long], SQL type unknown
17:05:00.017 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
17:06:00.014 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:06:00.015 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
17:06:00.016 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768298760014], value class [java.lang.Long], SQL type unknown
17:06:00.019 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
17:06:19.200 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
17:06:19.205 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:06:19.207 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:06:19.211 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=ouAN_lyeL8OfvWjheBuj60zAEvFc4MDDwkHK2Tsu5b4%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=HlsgjeJ4Gc6ioH8euJ__qFIEqwVDZQmwi8c21XZDf00
17:06:19.212 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:06:19.212 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
17:06:19.213 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:06:19.213 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
17:06:19.224 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:06:19.225 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:06:19.305 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=VBpYmDGSv46FjdfGmWEgTV-vMVxlsDQqId0UFqjRjJy6ciivN4r0Z4WyNofAsq6HiTa5i5EIWpzOio76yZJHJySQIY8RGKsdHPJLCOsMAbBCJX83bd6HmuRCzSfP6Pxw&state=ouAN_lyeL8OfvWjheBuj60zAEvFc4MDDwkHK2Tsu5b4%3D
17:06:19.306 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:06:19.306 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:06:19.693 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:06:19.693 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
17:06:19.693 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
17:06:19.693 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 17:06:19.661921], value class [java.sql.Timestamp], SQL type 93
17:06:19.693 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 17:06:48.661921], value class [java.sql.Timestamp], SQL type 93
17:06:19.694 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
17:06:19.694 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 17:06:19.661921], value class [java.sql.Timestamp], SQL type 93
17:06:19.694 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
17:06:19.694 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
17:06:19.701 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from dca1ff46-bd36-4d65-ab02-d74dc3f18c72
17:06:19.704 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
17:06:19.706 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T10:06:19Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:36:19Z, iat=2026-01-13T10:06:19Z, nonce=HlsgjeJ4Gc6ioH8euJ__qFIEqwVDZQmwi8c21XZDf00, jti=5d271b02-54f8-40e8-9617-14b95c1cc88d, authorities=[ROLE_CUSTOMER], sid=UwxK-wgWQDjfVya8vTW9UZLqifS7lORHmmgyGoR7SVk}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=dca1ff46-bd36-4d65-ab02-d74dc3f18c72], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@6b928085]
17:06:19.707 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T10:06:19Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:36:19Z, iat=2026-01-13T10:06:19Z, nonce=HlsgjeJ4Gc6ioH8euJ__qFIEqwVDZQmwi8c21XZDf00, jti=5d271b02-54f8-40e8-9617-14b95c1cc88d, authorities=[ROLE_CUSTOMER], sid=UwxK-wgWQDjfVya8vTW9UZLqifS7lORHmmgyGoR7SVk}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=dca1ff46-bd36-4d65-ab02-d74dc3f18c72], Granted Authorities=[ROLE_CUSTOMER]]
17:06:19.710 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:06:19.710 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
17:06:19.713 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:06:19.714 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
17:06:19.720 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:06:19.721 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
17:06:19.731 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:06:19.731 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:06:20.244 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
17:06:20.248 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:06:20.248 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:06:20.256 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T10:06:19Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:36:19Z, iat=2026-01-13T10:06:19Z, nonce=HlsgjeJ4Gc6ioH8euJ__qFIEqwVDZQmwi8c21XZDf00, jti=5d271b02-54f8-40e8-9617-14b95c1cc88d, authorities=[ROLE_CUSTOMER], sid=UwxK-wgWQDjfVya8vTW9UZLqifS7lORHmmgyGoR7SVk}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=dca1ff46-bd36-4d65-ab02-d74dc3f18c72], Granted Authorities=[ROLE_CUSTOMER]]]
17:06:20.257 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
17:06:20.261 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:06:20.262 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
17:06:20.275 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:06:20.276 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:06:20.547 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
17:06:20.548 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:06:20.548 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
17:06:20.903 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
17:06:20.905 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:06:20.907 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
17:06:20.916 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
17:06:20.917 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
17:06:20.931 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:06:20.934 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
17:06:20.919 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
17:06:20.923 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
17:06:20.942 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:06:20.943 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
17:06:20.924 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:06:20.926 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
17:06:20.949 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
17:06:20.941 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:06:20.941 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
17:06:20.949 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:06:20.962 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
17:06:20.958 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
17:06:20.962 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:06:20.988 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
17:06:21.005 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
17:06:21.038 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:06:21.029 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
17:06:21.043 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
17:06:21.045 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:06:21.046 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
17:06:21.156 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
17:06:21.228 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:06:21.274 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
17:06:39.612 | DEBUG | FilterChainProxy: Securing GET /protected/api/carts
17:06:39.613 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:06:39.615 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@47f9bc00, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
17:06:39.618 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@32f41fdf, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
17:06:39.619 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@702cde81
17:06:39.642 | DEBUG | FilterChainProxy: Securing GET /page/login?session_expired
17:06:39.644 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:06:39.645 | DEBUG | HttpSessionRequestCache: Saved request https://bff.bookommerce.com:8181/page/login?session_expired&continue to session
17:06:39.645 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@47f9bc00, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
17:06:39.646 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint@717c9b59
17:06:39.651 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/page/login
17:06:39.655 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:06:39.657 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
17:06:39.660 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:06:39.660 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
17:07:00.004 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:07:00.005 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
17:07:00.006 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768298820004], value class [java.lang.Long], SQL type unknown
17:07:00.009 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
17:08:00.016 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:08:00.017 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
17:08:00.017 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768298880016], value class [java.lang.Long], SQL type unknown
17:08:00.026 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 1 expired sessions
17:08:10.737 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
17:08:10.740 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:08:10.740 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:08:10.743 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=2IHtysaS8F6xl9052sZszZM-lhehO6J2k-YBPPbmMSg%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=4JI0_fmYGpKOsSsZt0l4ESjh6_ph0jFIPyJJHAZWp0Q
17:08:10.744 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:08:10.746 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
17:08:10.750 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:08:10.750 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
17:08:10.759 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:08:10.759 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:08:10.827 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=BL8ie9H4GffVR3aqPeebT4mVbAIHKyt8wJpoQlxEWni_GW0M3yZk3yFeaF9fL6DCykRa22RMTlQdY9D6GG5LCq63ov_jjVVvynFbUlSs7dp1BauOm_HprlpRzEKyJkGJ&state=2IHtysaS8F6xl9052sZszZM-lhehO6J2k-YBPPbmMSg%3D
17:08:10.829 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:08:10.829 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:08:11.207 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:08:11.234 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
17:08:11.239 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
17:08:11.250 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 17:08:11.1552227], value class [java.sql.Timestamp], SQL type 93
17:08:11.269 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 17:08:41.1552227], value class [java.sql.Timestamp], SQL type 93
17:08:11.274 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
17:08:11.275 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 17:08:11.1552227], value class [java.sql.Timestamp], SQL type 93
17:08:11.276 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
17:08:11.290 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
17:08:11.300 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 06d9e0e0-1780-4ca8-9075-be6a053725cf
17:08:11.301 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
17:08:11.301 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T10:08:10Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:38:11Z, iat=2026-01-13T10:08:11Z, nonce=4JI0_fmYGpKOsSsZt0l4ESjh6_ph0jFIPyJJHAZWp0Q, jti=4c536283-4748-4aec-b07d-248420f87b0e, authorities=[ROLE_CUSTOMER], sid=XMIS06_BLwPf-OS635ZcJFW7gxtvE53EEu-GE1nYu5c}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=06d9e0e0-1780-4ca8-9075-be6a053725cf], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@6e9c8a71]
17:08:11.301 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T10:08:10Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:38:11Z, iat=2026-01-13T10:08:11Z, nonce=4JI0_fmYGpKOsSsZt0l4ESjh6_ph0jFIPyJJHAZWp0Q, jti=4c536283-4748-4aec-b07d-248420f87b0e, authorities=[ROLE_CUSTOMER], sid=XMIS06_BLwPf-OS635ZcJFW7gxtvE53EEu-GE1nYu5c}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=06d9e0e0-1780-4ca8-9075-be6a053725cf], Granted Authorities=[ROLE_CUSTOMER]]
17:08:11.303 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:08:11.303 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
17:08:11.305 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:08:11.305 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
17:08:11.308 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:08:11.310 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
17:08:11.322 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:08:11.340 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:08:12.093 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
17:08:12.095 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:08:12.097 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:08:12.102 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T10:08:10Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:38:11Z, iat=2026-01-13T10:08:11Z, nonce=4JI0_fmYGpKOsSsZt0l4ESjh6_ph0jFIPyJJHAZWp0Q, jti=4c536283-4748-4aec-b07d-248420f87b0e, authorities=[ROLE_CUSTOMER], sid=XMIS06_BLwPf-OS635ZcJFW7gxtvE53EEu-GE1nYu5c}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=06d9e0e0-1780-4ca8-9075-be6a053725cf], Granted Authorities=[ROLE_CUSTOMER]]]
17:08:12.102 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
17:08:12.111 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:08:12.116 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
17:08:12.129 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:08:12.130 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:08:12.376 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
17:08:12.378 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:08:12.383 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
17:08:12.802 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
17:08:12.803 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:08:12.804 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
17:08:12.814 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
17:08:12.814 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
17:08:12.819 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:08:12.819 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
17:08:12.818 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
17:08:12.824 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:08:12.837 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
17:08:12.818 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
17:08:12.818 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
17:08:12.819 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:08:12.839 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:08:12.839 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
17:08:12.839 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:08:12.840 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
17:08:12.839 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
17:08:12.839 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
17:08:12.840 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:08:12.842 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
17:08:12.864 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
17:08:12.868 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:08:12.871 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
17:08:12.877 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
17:08:12.886 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:08:12.889 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
17:08:12.892 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
17:08:12.901 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:08:12.905 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
17:08:23.876 | DEBUG | FilterChainProxy: Securing GET /protected/api/carts
17:08:23.877 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:08:23.877 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@47f9bc00, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
17:08:23.878 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@32f41fdf, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
17:08:23.878 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@702cde81
17:08:23.899 | DEBUG | FilterChainProxy: Securing GET /page/login?session_expired
17:08:23.900 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:08:23.902 | DEBUG | HttpSessionRequestCache: Saved request https://bff.bookommerce.com:8181/page/login?session_expired&continue to session
17:08:23.903 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@47f9bc00, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
17:08:23.904 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint@717c9b59
17:08:23.904 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/page/login
17:08:23.907 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:08:23.907 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
17:08:23.910 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:08:23.911 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
17:09:00.009 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:09:00.010 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
17:09:00.012 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768298940009], value class [java.lang.Long], SQL type unknown
17:09:00.015 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
17:10:00.005 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:10:00.005 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
17:10:00.006 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768299000005], value class [java.lang.Long], SQL type unknown
17:10:00.019 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 1 expired sessions
17:10:48.055 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
17:10:48.057 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:10:48.058 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:10:48.062 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=TxOImoMeusfe4qArQUt_ZhPRVjyquBXwFzYQNm7x0YM%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=ZKNra7zWOkkb3SSLQu8rXui1DlAoNJv-L6xUAcE1keQ
17:10:48.064 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:10:48.065 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
17:10:48.067 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:10:48.069 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
17:10:48.079 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:10:48.079 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:10:48.154 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=z0BoMnnKhZ9-IGxnUfSmBcupp0uQjB06e9y4xoYUVJtCFDvsg8l773MWjJDcStDXuscN3rwDE48pM6gUn3ENdY8aE6ZpF5shmecBfuIRRIjTnLjAso9cN2GG50u_k0N6&state=TxOImoMeusfe4qArQUt_ZhPRVjyquBXwFzYQNm7x0YM%3D
17:10:48.155 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:10:48.155 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:10:48.638 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:10:48.638 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
17:10:48.639 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
17:10:48.639 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 17:10:48.6116759], value class [java.sql.Timestamp], SQL type 93
17:10:48.639 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 17:11:18.6116759], value class [java.sql.Timestamp], SQL type 93
17:10:48.639 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
17:10:48.639 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 17:10:48.6116759], value class [java.sql.Timestamp], SQL type 93
17:10:48.639 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
17:10:48.639 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
17:10:48.647 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 28be8e38-95a9-431e-8aae-4d5aecdb1cf3
17:10:48.648 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
17:10:48.648 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T10:10:48Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:40:48Z, iat=2026-01-13T10:10:48Z, nonce=ZKNra7zWOkkb3SSLQu8rXui1DlAoNJv-L6xUAcE1keQ, jti=d863054c-9718-4aae-84d9-425e2884c533, authorities=[ROLE_CUSTOMER], sid=0L9M8ueWRn69xugTrznjFQctFVkiTFrXO6trrouVH14}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=28be8e38-95a9-431e-8aae-4d5aecdb1cf3], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@63692db8]
17:10:48.648 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T10:10:48Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:40:48Z, iat=2026-01-13T10:10:48Z, nonce=ZKNra7zWOkkb3SSLQu8rXui1DlAoNJv-L6xUAcE1keQ, jti=d863054c-9718-4aae-84d9-425e2884c533, authorities=[ROLE_CUSTOMER], sid=0L9M8ueWRn69xugTrznjFQctFVkiTFrXO6trrouVH14}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=28be8e38-95a9-431e-8aae-4d5aecdb1cf3], Granted Authorities=[ROLE_CUSTOMER]]
17:10:48.651 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:10:48.651 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
17:10:48.653 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:10:48.653 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
17:10:48.655 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:10:48.656 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
17:10:48.664 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:10:48.664 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:10:49.191 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
17:10:49.193 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:10:49.193 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:10:49.200 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T10:10:48Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:40:48Z, iat=2026-01-13T10:10:48Z, nonce=ZKNra7zWOkkb3SSLQu8rXui1DlAoNJv-L6xUAcE1keQ, jti=d863054c-9718-4aae-84d9-425e2884c533, authorities=[ROLE_CUSTOMER], sid=0L9M8ueWRn69xugTrznjFQctFVkiTFrXO6trrouVH14}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=28be8e38-95a9-431e-8aae-4d5aecdb1cf3], Granted Authorities=[ROLE_CUSTOMER]]]
17:10:49.200 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
17:10:49.206 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:10:49.207 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
17:10:49.219 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:10:49.219 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:10:49.436 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
17:10:49.437 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:10:49.437 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
17:10:49.777 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
17:10:49.781 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:10:49.781 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
17:10:49.789 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
17:10:49.795 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:10:49.791 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
17:10:49.801 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
17:10:49.802 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:10:49.799 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
17:10:49.803 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:10:49.802 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
17:10:49.803 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
17:10:49.804 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
17:10:49.844 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:10:49.849 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
17:10:49.849 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
17:10:49.859 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:10:49.864 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
17:10:49.864 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
17:10:49.871 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:10:49.874 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
17:10:49.959 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
17:10:49.965 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:10:49.971 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
17:10:49.971 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
17:10:49.972 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:10:49.972 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
17:10:49.973 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
17:10:49.974 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:10:50.040 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
17:11:00.003 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:11:00.006 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
17:11:00.006 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768299060003], value class [java.lang.Long], SQL type unknown
17:11:00.016 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
17:11:03.030 | DEBUG | FilterChainProxy: Securing GET /protected/api/carts
17:11:03.034 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:11:03.041 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@47f9bc00, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
17:11:03.041 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@32f41fdf, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
17:11:03.041 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@702cde81
17:11:03.072 | DEBUG | FilterChainProxy: Securing GET /page/login?session_expired
17:11:03.072 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:11:03.074 | DEBUG | HttpSessionRequestCache: Saved request https://bff.bookommerce.com:8181/page/login?session_expired&continue to session
17:11:03.074 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@47f9bc00, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
17:11:03.075 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint@717c9b59
17:11:03.075 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/page/login
17:11:03.077 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:11:03.077 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
17:11:03.080 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:11:03.080 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
17:12:00.015 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:12:00.017 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
17:12:00.018 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768299120015], value class [java.lang.Long], SQL type unknown
17:12:00.031 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 1 expired sessions
17:13:00.021 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:13:00.029 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
17:13:00.034 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768299180021], value class [java.lang.Long], SQL type unknown
17:13:00.044 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
17:13:00.402 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
17:13:00.413 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:13:00.413 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:13:00.433 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=DuFFA4nGcaQLAn3Fwu2caTZ3pzHDnU46_GJOSfUHATY%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=6_YfQRD_Xad7eRfNS-QOvPrxNhGXKafCAuTJ7T3iVf8
17:13:00.436 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:13:00.436 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
17:13:00.445 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:13:00.447 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
17:13:00.463 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:13:00.465 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:13:00.641 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=ovqAxEJbwlTO1TqBjxxSwCf1R6JiyvsEVfAoShrWdxLCagzoBgXLPdcZRT-31kTSeIAAovrm_apuIFFBoqL8nQXjznPkjG0K-7owYj1uGLQE4paUM25mCl9jmV2F-Cwf&state=DuFFA4nGcaQLAn3Fwu2caTZ3pzHDnU46_GJOSfUHATY%3D
17:13:00.647 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:13:00.647 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:13:01.171 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:13:01.171 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
17:13:01.172 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
17:13:01.174 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 17:13:01.1318084], value class [java.sql.Timestamp], SQL type 93
17:13:01.176 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 17:13:30.1318084], value class [java.sql.Timestamp], SQL type 93
17:13:01.177 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
17:13:01.177 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 17:13:01.1318084], value class [java.sql.Timestamp], SQL type 93
17:13:01.177 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
17:13:01.177 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
17:13:01.186 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from e2fe4aec-1578-499e-ad4b-93c8fae689c6
17:13:01.186 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
17:13:01.188 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T10:13:00Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:43:01Z, iat=2026-01-13T10:13:01Z, nonce=6_YfQRD_Xad7eRfNS-QOvPrxNhGXKafCAuTJ7T3iVf8, jti=00036738-d35a-491a-922e-a14507439f8d, authorities=[ROLE_CUSTOMER], sid=9fmrdF-BncE5y1v3yIMQQx1F7TSkH8oJrI7PeUgonJ4}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=e2fe4aec-1578-499e-ad4b-93c8fae689c6], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@3be6cb35]
17:13:01.189 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T10:13:00Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:43:01Z, iat=2026-01-13T10:13:01Z, nonce=6_YfQRD_Xad7eRfNS-QOvPrxNhGXKafCAuTJ7T3iVf8, jti=00036738-d35a-491a-922e-a14507439f8d, authorities=[ROLE_CUSTOMER], sid=9fmrdF-BncE5y1v3yIMQQx1F7TSkH8oJrI7PeUgonJ4}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=e2fe4aec-1578-499e-ad4b-93c8fae689c6], Granted Authorities=[ROLE_CUSTOMER]]
17:13:01.196 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:13:01.196 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
17:13:01.198 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:13:01.198 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
17:13:01.202 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:13:01.203 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
17:13:01.213 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:13:01.213 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:13:02.083 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
17:13:02.087 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:13:02.088 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:13:02.104 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-13T10:13:00Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:43:01Z, iat=2026-01-13T10:13:01Z, nonce=6_YfQRD_Xad7eRfNS-QOvPrxNhGXKafCAuTJ7T3iVf8, jti=00036738-d35a-491a-922e-a14507439f8d, authorities=[ROLE_CUSTOMER], sid=9fmrdF-BncE5y1v3yIMQQx1F7TSkH8oJrI7PeUgonJ4}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=e2fe4aec-1578-499e-ad4b-93c8fae689c6], Granted Authorities=[ROLE_CUSTOMER]]]
17:13:02.105 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
17:13:02.120 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:13:02.120 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
17:13:02.132 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:13:02.132 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:13:02.397 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
17:13:02.397 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:13:02.398 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
17:13:03.123 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
17:13:03.125 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:13:03.125 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
17:13:03.156 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
17:13:03.158 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
17:13:03.161 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:13:03.161 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
17:13:03.161 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
17:13:03.162 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:13:03.162 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
17:13:03.163 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
17:13:03.163 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:13:03.163 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:13:03.163 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
17:13:03.164 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
17:13:03.164 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:13:03.164 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
17:13:03.165 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
17:13:03.284 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
17:13:03.300 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
17:13:03.304 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:13:03.306 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:13:03.311 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
17:13:03.316 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
17:13:03.473 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
17:13:03.504 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:13:03.489 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
17:13:03.537 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
17:13:03.547 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:13:03.547 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
17:13:08.880 | DEBUG | FilterChainProxy: Securing GET /protected/api/carts
17:13:08.883 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:13:08.887 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@47f9bc00, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
17:13:08.889 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@32f41fdf, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
17:13:08.889 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@702cde81
17:14:00.097 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:14:00.103 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
17:14:00.117 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768299240096], value class [java.lang.Long], SQL type unknown
17:14:00.169 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 1 expired sessions
17:14:49.362 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
17:14:49.378 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=ccJOzsQYtinSUu5RBKQ6ll7WIHFxRZMi_oe9yY-ErTs%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=MPxc6s1EWsFnZ27bPbMUDhvQ1DdrSHUkYABSOmS0GhA
17:14:49.382 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:14:49.382 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
17:14:49.385 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:14:49.386 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
17:14:49.536 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=T89KzAUjeFE-3lQszppSUB1w1fUJb2f39VZ7X4CPdNKSZXqvWJ-thHodT2u-9BdslgSgG35TMH85ol5JvLHEqC7fQalsptBxKRl0rHaLt0yEEOTGTQ_fEyFiHO7y-h1G&state=ccJOzsQYtinSUu5RBKQ6ll7WIHFxRZMi_oe9yY-ErTs%3D
17:14:49.539 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:14:49.539 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:14:49.983 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:14:49.983 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
17:14:49.983 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
17:14:49.985 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-13 17:14:49.9452845], value class [java.sql.Timestamp], SQL type 93
17:14:49.985 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-13 17:15:18.9452845], value class [java.sql.Timestamp], SQL type 93
17:14:49.985 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
17:14:49.986 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-13 17:14:49.9452845], value class [java.sql.Timestamp], SQL type 93
17:14:49.987 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
17:14:49.990 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
17:14:49.999 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 509de536-fc3a-434e-8f7d-6da86025e0d0
17:14:49.999 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
17:14:50.002 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T10:14:49Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:44:49Z, iat=2026-01-13T10:14:49Z, nonce=MPxc6s1EWsFnZ27bPbMUDhvQ1DdrSHUkYABSOmS0GhA, jti=88ed6a81-ab33-45a3-9964-1625e68e673b, authorities=[ROLE_PRODUCT_MANAGER], sid=zeUfJz2MCEqVJabbVB9nCsOxMlWhM-srbwaj2WSlCf8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=509de536-fc3a-434e-8f7d-6da86025e0d0], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@1518cbce]
17:14:50.003 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T10:14:49Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:44:49Z, iat=2026-01-13T10:14:49Z, nonce=MPxc6s1EWsFnZ27bPbMUDhvQ1DdrSHUkYABSOmS0GhA, jti=88ed6a81-ab33-45a3-9964-1625e68e673b, authorities=[ROLE_PRODUCT_MANAGER], sid=zeUfJz2MCEqVJabbVB9nCsOxMlWhM-srbwaj2WSlCf8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=509de536-fc3a-434e-8f7d-6da86025e0d0], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
17:14:50.010 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:14:50.011 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
17:14:50.013 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:14:50.014 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
17:14:50.019 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:14:50.019 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
17:14:50.042 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:14:50.043 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:14:51.004 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
17:14:51.013 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:14:51.013 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:14:51.041 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-13T10:14:49Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-13T10:44:49Z, iat=2026-01-13T10:14:49Z, nonce=MPxc6s1EWsFnZ27bPbMUDhvQ1DdrSHUkYABSOmS0GhA, jti=88ed6a81-ab33-45a3-9964-1625e68e673b, authorities=[ROLE_PRODUCT_MANAGER], sid=zeUfJz2MCEqVJabbVB9nCsOxMlWhM-srbwaj2WSlCf8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=509de536-fc3a-434e-8f7d-6da86025e0d0], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
17:14:51.042 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
17:14:51.100 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:14:51.100 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
17:14:51.112 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:14:51.113 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:15:00.013 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:15:00.014 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE EXPIRY_TIME < ?
]
17:15:00.015 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1768299300013], value class [java.lang.Long], SQL type unknown
17:15:00.020 | DEBUG | JdbcIndexedSessionRepository: Cleaned up 0 expired sessions
17:15:07.837 | DEBUG | FilterChainProxy: Securing GET /protected/api/ratings?page=0&size=5&sort=CREATED_AT&order=DESC
17:15:07.839 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:15:07.841 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@47f9bc00, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
17:15:07.842 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@32f41fdf, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
17:15:07.842 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@702cde81
