08:03:25.207 | INFO | BeForFeApplication: Starting BeForFeApplication using Java 21.0.3 with PID 17468 (C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes started by PC in C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe)
08:03:25.292 | INFO | BeForFeApplication: No active profile set, falling back to 1 default profile: "default"
08:03:26.718 | INFO | DevToolsPropertyDefaultsPostProcessor: Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
08:03:27.384 | INFO | DevToolsPropertyDefaultsPostProcessor: For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
08:03:37.289 | INFO | RepositoryConfigurationDelegate: Bootstrapping Spring Data JPA repositories in DEFAULT mode.
08:03:37.502 | INFO | RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 71 ms. Found 0 JPA repository interfaces.
08:03:38.755 | INFO | GenericScope: BeanFactory id=9f238d32-db58-3e04-8344-6f44253e8abb
08:03:41.867 | INFO | TomcatWebServer: Tomcat initialized with port 8181 (https)
08:03:42.116 | INFO | StandardService: Starting service [Tomcat]
08:03:42.492 | INFO | StandardEngine: Starting Servlet engine: [Apache Tomcat/10.1.50]
08:03:42.890 | INFO | [/]: Initializing Spring embedded WebApplicationContext
08:03:43.037 | INFO | ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 13078 ms
08:03:44.808 | INFO | LogHelper: HHH000204: Processing PersistenceUnitInfo [name: default]
08:03:45.067 | INFO | Version: HHH000412: Hibernate ORM core version 6.6.39.Final
08:03:45.312 | INFO | RegionFactoryInitiator: HHH000026: Second-level cache disabled
08:03:46.510 | INFO | SpringPersistenceUnitInfo: No LoadTimeWeaver setup: ignoring JPA class transformer
08:03:46.753 | INFO | HikariDataSource: HikariPool-1 - Starting...
08:03:48.325 | INFO | HikariPool: HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@42830024
08:03:48.330 | INFO | HikariDataSource: HikariPool-1 - Start completed.
08:03:48.470 | WARN | deprecation: HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
08:03:48.566 | INFO | pooling: HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.44
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
08:03:51.188 | INFO | JtaPlatformInitiator: HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
08:03:51.353 | INFO | LocalContainerEntityManagerFactoryBean: Initialized JPA EntityManagerFactory for persistence unit 'default'
08:03:51.805 | WARN | JpaBaseConfiguration$JpaWebConfiguration: spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
08:03:52.700 | DEBUG | AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder: No authenticationProviders and no parentAuthenticationManager defined. Returning null.
08:03:53.322 | DEBUG | DefaultSecurityFilterChain: Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, OAuth2AuthorizationRequestRedirectFilter, OAuth2LoginAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
08:03:55.023 | INFO | OptionalLiveReloadServer: LiveReload server is running on port 35729
08:03:55.827 | INFO | certificate: Connector [https-jsse-nio-8181], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [Set directly - location unknown] using alias [bookommerce_ssl] with trust store [null]
08:03:55.948 | INFO | TomcatWebServer: Tomcat started on port 8181 (https) with context path '/'
08:03:56.382 | INFO | BeForFeApplication: Started BeForFeApplication in 34.507 seconds (process running for 37.211)
08:04:34.595 | INFO | [/]: Initializing Spring DispatcherServlet 'dispatcherServlet'
08:04:34.601 | INFO | DispatcherServlet: Initializing Servlet 'dispatcherServlet'
08:04:34.609 | INFO | DispatcherServlet: Completed initialization in 5 ms
08:04:34.732 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
08:04:34.806 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=Pyzu8iWRTDOh46Gnr9vrxDtTp3juaLlKI_o00U6Nx3M%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=5mnBrZVE9OKFo9Q-cehFBJ11lYOVbBbnnhWTBCEe9Q4
08:04:34.973 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:04:34.973 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
08:04:35.017 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:04:35.019 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
08:04:35.691 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=hjMmr8vE5Hro0YUjCza320lDOCcXQOx_KFihw86_bbFFW938yE1VMVvvRVDIK22QWaD5wt9UywGbBGIuVLZanpVhT3TX-4ReWe-PdivUPA1e_-RVNMugJ8QujTblFg-M&state=Pyzu8iWRTDOh46Gnr9vrxDtTp3juaLlKI_o00U6Nx3M%3D
08:04:35.706 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:04:35.706 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:04:38.121 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:04:38.127 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
08:04:38.146 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
08:04:38.150 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-12 08:04:37.5553459], value class [java.sql.Timestamp], SQL type 93
08:04:38.150 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-12 08:19:37.5553459], value class [java.sql.Timestamp], SQL type 93
08:04:38.150 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
08:04:38.150 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-12 08:04:37.5553459], value class [java.sql.Timestamp], SQL type 93
08:04:38.153 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
08:04:38.154 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
08:04:38.180 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 2ad01a04-b6ba-4f27-8127-4038d4d2806d
08:04:38.184 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
08:04:38.184 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:04:35Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T01:34:37Z, iat=2026-01-12T01:04:37Z, nonce=5mnBrZVE9OKFo9Q-cehFBJ11lYOVbBbnnhWTBCEe9Q4, jti=5e6eacda-ebb8-4c0f-9424-091b22555d60, authorities=[ROLE_CUSTOMER], sid=3xKq0sz6G-DDbpPAQhkpKis1g3bPonIcGqkcdcl3xVI}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=2ad01a04-b6ba-4f27-8127-4038d4d2806d], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@10af7a68]
08:04:38.188 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:04:35Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T01:34:37Z, iat=2026-01-12T01:04:37Z, nonce=5mnBrZVE9OKFo9Q-cehFBJ11lYOVbBbnnhWTBCEe9Q4, jti=5e6eacda-ebb8-4c0f-9424-091b22555d60, authorities=[ROLE_CUSTOMER], sid=3xKq0sz6G-DDbpPAQhkpKis1g3bPonIcGqkcdcl3xVI}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=2ad01a04-b6ba-4f27-8127-4038d4d2806d], Granted Authorities=[ROLE_CUSTOMER]]
08:04:38.213 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:04:38.214 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
08:04:38.223 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:04:38.224 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
08:04:38.311 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:04:38.312 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
08:04:38.325 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:04:38.329 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:04:42.802 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
08:04:42.841 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:04:42.842 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:04:42.868 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:04:35Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T01:34:37Z, iat=2026-01-12T01:04:37Z, nonce=5mnBrZVE9OKFo9Q-cehFBJ11lYOVbBbnnhWTBCEe9Q4, jti=5e6eacda-ebb8-4c0f-9424-091b22555d60, authorities=[ROLE_CUSTOMER], sid=3xKq0sz6G-DDbpPAQhkpKis1g3bPonIcGqkcdcl3xVI}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=2ad01a04-b6ba-4f27-8127-4038d4d2806d], Granted Authorities=[ROLE_CUSTOMER]]]
08:04:42.874 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
08:04:43.099 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:04:43.099 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
08:04:43.120 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:04:43.120 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:04:43.587 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
08:04:43.593 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
08:04:45.463 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:04:45.898 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
08:04:45.905 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
08:04:45.924 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
08:04:45.939 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
08:04:45.960 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
08:04:45.971 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
08:04:45.991 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
08:04:45.991 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
08:04:45.991 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
08:04:45.991 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
08:04:45.993 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
08:04:46.006 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
08:04:46.144 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:04:46.204 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
08:04:46.236 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
08:04:46.369 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:04:46.414 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
08:04:46.497 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
08:04:46.545 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:04:46.548 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:04:46.568 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:04:46.588 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
08:04:46.608 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
08:04:46.622 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:04:46.626 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:04:46.611 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
08:04:46.643 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
08:04:46.698 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:04:46.700 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:04:46.766 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:04:59.529 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/logout
08:04:59.541 | DEBUG | FilterChainProxy: Securing POST /protected/logout
08:04:59.547 | DEBUG | CsrfFilter: Invalid CSRF token found for https://bff.bookommerce.com:8181/protected/logout
08:04:59.550 | DEBUG | AccessDeniedHandlerImpl: Responding with 403 status code
08:04:59.573 | DEBUG | FilterChainProxy: Securing POST /error
08:04:59.575 | DEBUG | FilterChainProxy: Secured POST /error
08:04:59.617 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:18:59.169 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/logout
08:18:59.247 | DEBUG | FilterChainProxy: Securing POST /protected/logout
08:18:59.306 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:18:59.308 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:18:59.447 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:04:35Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T01:34:37Z, iat=2026-01-12T01:04:37Z, nonce=5mnBrZVE9OKFo9Q-cehFBJ11lYOVbBbnnhWTBCEe9Q4, jti=5e6eacda-ebb8-4c0f-9424-091b22555d60, authorities=[ROLE_CUSTOMER], sid=3xKq0sz6G-DDbpPAQhkpKis1g3bPonIcGqkcdcl3xVI}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=2ad01a04-b6ba-4f27-8127-4038d4d2806d], Granted Authorities=[ROLE_CUSTOMER]]]
08:18:59.451 | DEBUG | LogoutFilter: Logging out [OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:04:35Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T01:34:37Z, iat=2026-01-12T01:04:37Z, nonce=5mnBrZVE9OKFo9Q-cehFBJ11lYOVbBbnnhWTBCEe9Q4, jti=5e6eacda-ebb8-4c0f-9424-091b22555d60, authorities=[ROLE_CUSTOMER], sid=3xKq0sz6G-DDbpPAQhkpKis1g3bPonIcGqkcdcl3xVI}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=2ad01a04-b6ba-4f27-8127-4038d4d2806d], Granted Authorities=[ROLE_CUSTOMER]]]
08:18:59.503 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:18:59.503 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE SESSION_ID = ?
AND MAX_INACTIVE_INTERVAL >= 0
]
08:18:59.510 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [8112c5da-903b-49a6-9c2f-6a7f7171192c], value class [java.lang.String], SQL type unknown
08:18:59.547 | DEBUG | SecurityContextLogoutHandler: Invalidated session 8112c5da-903b-49a6-9c2f-6a7f7171192c
08:18:59.554 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:18:59.555 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:18:59.600 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:18:59.601 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
08:18:59.601 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
08:18:59.601 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
08:18:59.702 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/connect/logout?id_token_hint=eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJuZ3V5ZW52aWV0YW5oLnBlcnNvbmFsQGdtYWlsLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2ODE3OTg3NSwiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY4MTgxNjc3LCJpYXQiOjE3NjgxNzk4NzcsIm5vbmNlIjoiNW1uQnJaVkU5T0tGbzlRLWNlaEZCSjExbFlPVmJCYm5uaFdUQkNFZTlRNCIsImp0aSI6IjVlNmVhY2RhLWViYjgtNGMwZi05NDI0LTA5MWIyMjU1NWQ2MCIsImF1dGhvcml0aWVzIjpbIlJPTEVfQ1VTVE9NRVIiXSwic2lkIjoiM3hLcTBzejZHLUREYnBQQVFoa3BLaXMxZzNiUG9uSWNHcWtjZGNsM3hWSSJ9.Ab3kjslzKtEwjrM8Mh_rYd_dSbiQgRM-D0KvE0565TkfWkJQRf6UF99LVPYpv25uttxl3pghrXiiO_X3bFW7VU2JFRLFG1FQN1SZPH3EfJ96ZoMBxhSyAKLBJBcOR8yR9LXfs3r4RponPlEuVVf_H6L8LXT5wSIw3H2lj7TmP-v9kA_n33ZfkxfT6rbeSJ64uPJtcGjyNRKRnGiA6tg4jfm8GR6sI1w5HKQTjpALbrRL9Pgk14kpsP4Wmuqt8qT3mPRjy5z1YVMK5vmCxP_yFV0lPVoS0JMXjlOXqfbZ822-ZUJ0WgJBf9KlYpomeOfcYchzHZIZTspFsiR2RabMjg&post_logout_redirect_uri=https://app.bookommerce.com:8080
08:31:25.390 | INFO | LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener: Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
08:31:25.543 | INFO | GracefulShutdown: Commencing graceful shutdown. Waiting for active requests to complete
08:31:25.599 | INFO | GracefulShutdown: Graceful shutdown complete
08:31:25.679 | INFO | LocalContainerEntityManagerFactoryBean: Closing JPA EntityManagerFactory for persistence unit 'default'
08:31:25.756 | INFO | HikariDataSource: HikariPool-1 - Shutdown initiated...
08:31:25.780 | INFO | HikariDataSource: HikariPool-1 - Shutdown completed.
08:31:26.320 | INFO | BeForFeApplication: Starting BeForFeApplication using Java 21.0.3 with PID 17468 (C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes started by PC in C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe)
08:31:26.321 | INFO | BeForFeApplication: No active profile set, falling back to 1 default profile: "default"
08:31:27.347 | INFO | RepositoryConfigurationDelegate: Bootstrapping Spring Data JPA repositories in DEFAULT mode.
08:31:27.354 | INFO | RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 4 ms. Found 0 JPA repository interfaces.
08:31:27.537 | INFO | GenericScope: BeanFactory id=9f238d32-db58-3e04-8344-6f44253e8abb
08:31:27.678 | INFO | TomcatWebServer: Tomcat initialized with port 8181 (https)
08:31:27.680 | INFO | StandardService: Starting service [Tomcat]
08:31:27.680 | INFO | StandardEngine: Starting Servlet engine: [Apache Tomcat/10.1.50]
08:31:27.736 | INFO | [/]: Initializing Spring embedded WebApplicationContext
08:31:27.737 | INFO | ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 1039 ms
08:31:27.835 | INFO | LogHelper: HHH000204: Processing PersistenceUnitInfo [name: default]
08:31:27.839 | INFO | RegionFactoryInitiator: HHH000026: Second-level cache disabled
08:31:27.853 | INFO | SpringPersistenceUnitInfo: No LoadTimeWeaver setup: ignoring JPA class transformer
08:31:27.854 | INFO | HikariDataSource: HikariPool-2 - Starting...
08:31:27.877 | INFO | HikariPool: HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@49e86829
08:31:27.877 | INFO | HikariDataSource: HikariPool-2 - Start completed.
08:31:27.882 | WARN | deprecation: HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
08:31:27.883 | INFO | pooling: HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 8.0.44
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
08:31:27.961 | INFO | JtaPlatformInitiator: HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
08:31:28.068 | INFO | LocalContainerEntityManagerFactoryBean: Initialized JPA EntityManagerFactory for persistence unit 'default'
08:31:28.193 | WARN | JpaBaseConfiguration$JpaWebConfiguration: spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
08:31:28.309 | DEBUG | AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder: No authenticationProviders and no parentAuthenticationManager defined. Returning null.
08:31:28.396 | DEBUG | DefaultSecurityFilterChain: Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, OAuth2AuthorizationRequestRedirectFilter, OAuth2LoginAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
08:31:28.539 | INFO | OptionalLiveReloadServer: LiveReload server is running on port 35729
08:31:28.700 | INFO | certificate: Connector [https-jsse-nio-8181], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [Set directly - location unknown] using alias [bookommerce_ssl] with trust store [C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes\bookommerce-ssl.p12]
08:31:28.734 | INFO | TomcatWebServer: Tomcat started on port 8181 (https) with context path '/'
08:31:28.802 | INFO | BeForFeApplication: Started BeForFeApplication in 2.605 seconds (process running for 1689.632)
08:31:28.807 | INFO | ConditionEvaluationDeltaLoggingListener: Condition evaluation unchanged
08:33:09.416 | INFO | [/]: Initializing Spring DispatcherServlet 'dispatcherServlet'
08:33:09.417 | INFO | DispatcherServlet: Initializing Servlet 'dispatcherServlet'
08:33:09.425 | INFO | DispatcherServlet: Completed initialization in 7 ms
08:33:09.440 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
08:33:09.447 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=jriPqBLg_NSrVO1bZcrqkM0Z4wyqwmqGRT9CThnis2Y%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=lpx9all6XfopqMx8scyqjETiI71VK0ZIt3gtHKrmdSk
08:33:09.463 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:33:09.464 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
08:33:09.477 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:33:09.479 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
08:33:09.974 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=_V5LQw1OsVyH-25VVzcAys5dvgvjB5_RV-Wu3gGYSsew-JZZrLijH3tZkqaoBRT6XfiGLDKfld4tAtJqlV8Oxkb7M198ADiM1ItNMFQYtAR_MGRvuizIz05NwvSpsHPU&state=jriPqBLg_NSrVO1bZcrqkM0Z4wyqwmqGRT9CThnis2Y%3D
08:33:09.981 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:33:09.982 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:33:11.463 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:33:11.464 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
08:33:11.467 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
08:33:11.467 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-12 08:33:11.3272723], value class [java.sql.Timestamp], SQL type 93
08:33:11.467 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-12 08:48:11.3272723], value class [java.sql.Timestamp], SQL type 93
08:33:11.467 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
08:33:11.467 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-12 08:33:11.3272723], value class [java.sql.Timestamp], SQL type 93
08:33:11.467 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
08:33:11.467 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
08:33:11.478 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:33:11.478 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO oauth2_authorized_client (client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
08:33:11.478 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
08:33:11.482 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
08:33:11.484 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [Bearer], value class [java.lang.String], SQL type 12
08:33:11.484 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [2026-01-12 08:33:11.3272723], value class [java.sql.Timestamp], SQL type 93
08:33:11.484 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 6, parameter value [2026-01-12 08:48:11.3272723], value class [java.sql.Timestamp], SQL type 93
08:33:11.486 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [openid,profile], value class [java.lang.String], SQL type 12
08:33:11.486 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [2026-01-12 08:33:11.3272723], value class [java.sql.Timestamp], SQL type 93
08:33:11.499 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 56d10277-f258-4277-805a-23127a021859
08:33:11.502 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
08:33:11.502 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:33:09Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:03:11Z, iat=2026-01-12T01:33:11Z, nonce=lpx9all6XfopqMx8scyqjETiI71VK0ZIt3gtHKrmdSk, jti=c8cbc211-ff5f-4cae-8cd5-17f699d19ad5, authorities=[ROLE_CUSTOMER], sid=91Hx_k_1TUMObOuFZyMpELknNj6kGKp0JzCdN5RWvL0}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=56d10277-f258-4277-805a-23127a021859], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@4fa76650]
08:33:11.505 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:33:09Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:03:11Z, iat=2026-01-12T01:33:11Z, nonce=lpx9all6XfopqMx8scyqjETiI71VK0ZIt3gtHKrmdSk, jti=c8cbc211-ff5f-4cae-8cd5-17f699d19ad5, authorities=[ROLE_CUSTOMER], sid=91Hx_k_1TUMObOuFZyMpELknNj6kGKp0JzCdN5RWvL0}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=56d10277-f258-4277-805a-23127a021859], Granted Authorities=[ROLE_CUSTOMER]]
08:33:11.509 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:33:11.512 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
08:33:11.516 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:33:11.516 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
08:33:11.528 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:33:11.528 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
08:33:11.542 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:33:11.542 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:33:12.984 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
08:33:12.994 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:33:12.994 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:33:13.016 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:33:09Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:03:11Z, iat=2026-01-12T01:33:11Z, nonce=lpx9all6XfopqMx8scyqjETiI71VK0ZIt3gtHKrmdSk, jti=c8cbc211-ff5f-4cae-8cd5-17f699d19ad5, authorities=[ROLE_CUSTOMER], sid=91Hx_k_1TUMObOuFZyMpELknNj6kGKp0JzCdN5RWvL0}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=56d10277-f258-4277-805a-23127a021859], Granted Authorities=[ROLE_CUSTOMER]]]
08:33:13.018 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
08:33:13.060 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:33:13.060 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
08:33:13.074 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:33:13.075 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:33:13.555 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
08:33:13.556 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
08:33:14.783 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:33:15.353 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
08:33:15.386 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
08:33:15.396 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
08:33:15.405 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
08:33:15.421 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
08:33:15.460 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
08:33:15.463 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
08:33:15.462 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
08:33:15.482 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
08:33:15.484 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
08:33:15.493 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
08:33:15.498 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
08:33:15.632 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:33:15.640 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
08:33:15.678 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
08:33:15.702 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:33:15.708 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
08:33:15.711 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
08:33:15.735 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:33:15.763 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
08:33:15.789 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:33:15.798 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
08:33:15.812 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:33:15.820 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
08:33:15.846 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:33:15.846 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
08:33:15.858 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:33:15.875 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:33:15.908 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:33:15.919 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:33:33.313 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/logout
08:33:33.333 | DEBUG | FilterChainProxy: Securing POST /protected/logout
08:33:33.347 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:33:33.347 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:33:33.359 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:33:09Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:03:11Z, iat=2026-01-12T01:33:11Z, nonce=lpx9all6XfopqMx8scyqjETiI71VK0ZIt3gtHKrmdSk, jti=c8cbc211-ff5f-4cae-8cd5-17f699d19ad5, authorities=[ROLE_CUSTOMER], sid=91Hx_k_1TUMObOuFZyMpELknNj6kGKp0JzCdN5RWvL0}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=56d10277-f258-4277-805a-23127a021859], Granted Authorities=[ROLE_CUSTOMER]]]
08:33:33.360 | DEBUG | LogoutFilter: Logging out [OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:33:09Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:03:11Z, iat=2026-01-12T01:33:11Z, nonce=lpx9all6XfopqMx8scyqjETiI71VK0ZIt3gtHKrmdSk, jti=c8cbc211-ff5f-4cae-8cd5-17f699d19ad5, authorities=[ROLE_CUSTOMER], sid=91Hx_k_1TUMObOuFZyMpELknNj6kGKp0JzCdN5RWvL0}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=56d10277-f258-4277-805a-23127a021859], Granted Authorities=[ROLE_CUSTOMER]]]
08:33:33.363 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:33:33.364 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE SESSION_ID = ?
AND MAX_INACTIVE_INTERVAL >= 0
]
08:33:33.364 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [44ca3ce8-6c08-44c0-abff-b1002e65b9da], value class [java.lang.String], SQL type unknown
08:33:33.376 | DEBUG | SecurityContextLogoutHandler: Invalidated session 44ca3ce8-6c08-44c0-abff-b1002e65b9da
08:33:33.379 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:33:33.381 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:33:33.388 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:33:33.388 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
08:33:33.390 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
08:33:33.396 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
08:38:19.020 | INFO | LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener: Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
08:38:19.095 | INFO | GracefulShutdown: Commencing graceful shutdown. Waiting for active requests to complete
08:38:19.143 | INFO | GracefulShutdown: Graceful shutdown complete
08:38:19.239 | INFO | LocalContainerEntityManagerFactoryBean: Closing JPA EntityManagerFactory for persistence unit 'default'
08:38:19.288 | INFO | HikariDataSource: HikariPool-2 - Shutdown initiated...
08:38:19.331 | INFO | HikariDataSource: HikariPool-2 - Shutdown completed.
08:38:20.044 | INFO | BeForFeApplication: Starting BeForFeApplication using Java 21.0.3 with PID 17468 (C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes started by PC in C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe)
08:38:20.046 | INFO | BeForFeApplication: No active profile set, falling back to 1 default profile: "default"
08:38:20.833 | INFO | RepositoryConfigurationDelegate: Bootstrapping Spring Data JPA repositories in DEFAULT mode.
08:38:20.843 | INFO | RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 6 ms. Found 0 JPA repository interfaces.
08:38:20.995 | INFO | GenericScope: BeanFactory id=9f238d32-db58-3e04-8344-6f44253e8abb
08:38:21.118 | INFO | TomcatWebServer: Tomcat initialized with port 8181 (https)
08:38:21.119 | INFO | StandardService: Starting service [Tomcat]
08:38:21.120 | INFO | StandardEngine: Starting Servlet engine: [Apache Tomcat/10.1.50]
08:38:21.160 | INFO | [/]: Initializing Spring embedded WebApplicationContext
08:38:21.160 | INFO | ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 981 ms
08:38:21.220 | INFO | LogHelper: HHH000204: Processing PersistenceUnitInfo [name: default]
08:38:21.223 | INFO | RegionFactoryInitiator: HHH000026: Second-level cache disabled
08:38:21.242 | INFO | SpringPersistenceUnitInfo: No LoadTimeWeaver setup: ignoring JPA class transformer
08:38:21.245 | INFO | HikariDataSource: HikariPool-3 - Starting...
08:38:21.279 | INFO | HikariPool: HikariPool-3 - Added connection com.mysql.cj.jdbc.ConnectionImpl@27667603
08:38:21.280 | INFO | HikariDataSource: HikariPool-3 - Start completed.
08:38:21.283 | WARN | deprecation: HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
08:38:21.284 | INFO | pooling: HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 8.0.44
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
08:38:21.408 | INFO | JtaPlatformInitiator: HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
08:38:21.481 | INFO | LocalContainerEntityManagerFactoryBean: Initialized JPA EntityManagerFactory for persistence unit 'default'
08:38:21.601 | WARN | JpaBaseConfiguration$JpaWebConfiguration: spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
08:38:21.713 | DEBUG | AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder: No authenticationProviders and no parentAuthenticationManager defined. Returning null.
08:38:21.795 | DEBUG | DefaultSecurityFilterChain: Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, OAuth2AuthorizationRequestRedirectFilter, OAuth2LoginAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
08:38:21.914 | INFO | OptionalLiveReloadServer: LiveReload server is running on port 35729
08:38:22.125 | INFO | certificate: Connector [https-jsse-nio-8181], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [Set directly - location unknown] using alias [bookommerce_ssl] with trust store [C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes\bookommerce-ssl.p12]
08:38:22.128 | INFO | TomcatWebServer: Tomcat started on port 8181 (https) with context path '/'
08:38:22.137 | INFO | BeForFeApplication: Started BeForFeApplication in 2.226 seconds (process running for 2102.967)
08:38:22.139 | INFO | ConditionEvaluationDeltaLoggingListener: Condition evaluation unchanged
08:38:26.423 | INFO | LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener: Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
08:38:26.426 | INFO | GracefulShutdown: Commencing graceful shutdown. Waiting for active requests to complete
08:38:26.441 | INFO | GracefulShutdown: Graceful shutdown complete
08:38:26.448 | INFO | LocalContainerEntityManagerFactoryBean: Closing JPA EntityManagerFactory for persistence unit 'default'
08:38:26.451 | INFO | HikariDataSource: HikariPool-3 - Shutdown initiated...
08:38:26.467 | INFO | HikariDataSource: HikariPool-3 - Shutdown completed.
08:38:26.644 | INFO | BeForFeApplication: Starting BeForFeApplication using Java 21.0.3 with PID 17468 (C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes started by PC in C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe)
08:38:26.645 | INFO | BeForFeApplication: No active profile set, falling back to 1 default profile: "default"
08:38:27.088 | INFO | RepositoryConfigurationDelegate: Bootstrapping Spring Data JPA repositories in DEFAULT mode.
08:38:27.093 | INFO | RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 3 ms. Found 0 JPA repository interfaces.
08:38:27.235 | INFO | GenericScope: BeanFactory id=9f238d32-db58-3e04-8344-6f44253e8abb
08:38:27.318 | INFO | TomcatWebServer: Tomcat initialized with port 8181 (https)
08:38:27.319 | INFO | StandardService: Starting service [Tomcat]
08:38:27.319 | INFO | StandardEngine: Starting Servlet engine: [Apache Tomcat/10.1.50]
08:38:27.357 | INFO | [/]: Initializing Spring embedded WebApplicationContext
08:38:27.357 | INFO | ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 615 ms
08:38:27.401 | INFO | LogHelper: HHH000204: Processing PersistenceUnitInfo [name: default]
08:38:27.407 | INFO | RegionFactoryInitiator: HHH000026: Second-level cache disabled
08:38:27.416 | INFO | SpringPersistenceUnitInfo: No LoadTimeWeaver setup: ignoring JPA class transformer
08:38:27.418 | INFO | HikariDataSource: HikariPool-4 - Starting...
08:38:27.440 | INFO | HikariPool: HikariPool-4 - Added connection com.mysql.cj.jdbc.ConnectionImpl@a92be0
08:38:27.440 | INFO | HikariDataSource: HikariPool-4 - Start completed.
08:38:27.443 | WARN | deprecation: HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
08:38:27.445 | INFO | pooling: HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-4)']
	Database driver: undefined/unknown
	Database version: 8.0.44
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
08:38:27.517 | INFO | JtaPlatformInitiator: HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
08:38:27.546 | INFO | LocalContainerEntityManagerFactoryBean: Initialized JPA EntityManagerFactory for persistence unit 'default'
08:38:27.605 | WARN | JpaBaseConfiguration$JpaWebConfiguration: spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
08:38:27.695 | DEBUG | AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder: No authenticationProviders and no parentAuthenticationManager defined. Returning null.
08:38:27.747 | DEBUG | DefaultSecurityFilterChain: Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, OAuth2AuthorizationRequestRedirectFilter, OAuth2LoginAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
08:38:27.852 | INFO | OptionalLiveReloadServer: LiveReload server is running on port 35729
08:38:27.927 | INFO | certificate: Connector [https-jsse-nio-8181], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [Set directly - location unknown] using alias [bookommerce_ssl] with trust store [C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes\bookommerce-ssl.p12]
08:38:27.931 | INFO | TomcatWebServer: Tomcat started on port 8181 (https) with context path '/'
08:38:27.940 | INFO | BeForFeApplication: Started BeForFeApplication in 1.38 seconds (process running for 2108.769)
08:38:27.942 | INFO | ConditionEvaluationDeltaLoggingListener: Condition evaluation unchanged
08:41:58.949 | INFO | LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener: Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
08:41:59.000 | INFO | GracefulShutdown: Commencing graceful shutdown. Waiting for active requests to complete
08:41:59.055 | INFO | GracefulShutdown: Graceful shutdown complete
08:41:59.071 | INFO | LocalContainerEntityManagerFactoryBean: Closing JPA EntityManagerFactory for persistence unit 'default'
08:41:59.082 | INFO | HikariDataSource: HikariPool-4 - Shutdown initiated...
08:41:59.104 | INFO | HikariDataSource: HikariPool-4 - Shutdown completed.
08:41:59.453 | INFO | BeForFeApplication: Starting BeForFeApplication using Java 21.0.3 with PID 17468 (C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes started by PC in C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe)
08:41:59.455 | INFO | BeForFeApplication: No active profile set, falling back to 1 default profile: "default"
08:41:59.913 | INFO | RepositoryConfigurationDelegate: Bootstrapping Spring Data JPA repositories in DEFAULT mode.
08:41:59.922 | INFO | RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 7 ms. Found 0 JPA repository interfaces.
08:42:00.045 | INFO | GenericScope: BeanFactory id=9f238d32-db58-3e04-8344-6f44253e8abb
08:42:00.119 | INFO | TomcatWebServer: Tomcat initialized with port 8181 (https)
08:42:00.121 | INFO | StandardService: Starting service [Tomcat]
08:42:00.122 | INFO | StandardEngine: Starting Servlet engine: [Apache Tomcat/10.1.50]
08:42:00.178 | INFO | [/]: Initializing Spring embedded WebApplicationContext
08:42:00.179 | INFO | ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 597 ms
08:42:00.231 | INFO | LogHelper: HHH000204: Processing PersistenceUnitInfo [name: default]
08:42:00.236 | INFO | RegionFactoryInitiator: HHH000026: Second-level cache disabled
08:42:00.253 | INFO | SpringPersistenceUnitInfo: No LoadTimeWeaver setup: ignoring JPA class transformer
08:42:00.255 | INFO | HikariDataSource: HikariPool-5 - Starting...
08:42:00.292 | INFO | HikariPool: HikariPool-5 - Added connection com.mysql.cj.jdbc.ConnectionImpl@461a1e3a
08:42:00.293 | INFO | HikariDataSource: HikariPool-5 - Start completed.
08:42:00.299 | WARN | deprecation: HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
08:42:00.300 | INFO | pooling: HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-5)']
	Database driver: undefined/unknown
	Database version: 8.0.44
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
08:42:00.391 | INFO | JtaPlatformInitiator: HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
08:42:00.422 | INFO | LocalContainerEntityManagerFactoryBean: Initialized JPA EntityManagerFactory for persistence unit 'default'
08:42:00.467 | WARN | JpaBaseConfiguration$JpaWebConfiguration: spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
08:42:00.525 | DEBUG | AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder: No authenticationProviders and no parentAuthenticationManager defined. Returning null.
08:42:00.570 | DEBUG | DefaultSecurityFilterChain: Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, OAuth2AuthorizationRequestRedirectFilter, OAuth2LoginAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
08:42:00.739 | INFO | OptionalLiveReloadServer: LiveReload server is running on port 35729
08:42:00.826 | INFO | certificate: Connector [https-jsse-nio-8181], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [Set directly - location unknown] using alias [bookommerce_ssl] with trust store [C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes\bookommerce-ssl.p12]
08:42:00.831 | INFO | TomcatWebServer: Tomcat started on port 8181 (https) with context path '/'
08:42:00.841 | INFO | BeForFeApplication: Started BeForFeApplication in 1.494 seconds (process running for 2321.67)
08:42:00.843 | INFO | ConditionEvaluationDeltaLoggingListener: Condition evaluation unchanged
08:43:03.523 | INFO | [/]: Initializing Spring DispatcherServlet 'dispatcherServlet'
08:43:03.530 | INFO | DispatcherServlet: Initializing Servlet 'dispatcherServlet'
08:43:03.547 | INFO | DispatcherServlet: Completed initialization in 8 ms
08:43:03.561 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
08:43:03.578 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=y4mVdoZ-TqegumOz_Bhkh7oZXBWPc5_XrlgpgVRUQGk%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=B5VZYcNHc2qMbt3UUne2nXMyPMpHtbxzsLBUS9VPflE
08:43:03.585 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:43:03.587 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
08:43:03.593 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:43:03.594 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
08:43:03.873 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=Iu38B0v--IDMd4tvEmr6UR8R69DVe5VdhIO_xYIhzAqpy4jwCV5wOBGdIH-UTxjYNdMelTomU7EWb3hKm-wGLnlynCmc66JX8oyM_xYOfHtjOSBo_qGCCy4Opa-i6Bph&state=y4mVdoZ-TqegumOz_Bhkh7oZXBWPc5_XrlgpgVRUQGk%3D
08:43:03.877 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:43:03.877 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:43:05.279 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:43:05.282 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
08:43:05.283 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
08:43:05.284 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-12 08:43:05.1368738], value class [java.sql.Timestamp], SQL type 93
08:43:05.284 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-12 08:58:05.1368738], value class [java.sql.Timestamp], SQL type 93
08:43:05.284 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
08:43:05.285 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-12 08:43:05.1368738], value class [java.sql.Timestamp], SQL type 93
08:43:05.287 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
08:43:05.300 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
08:43:05.306 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:43:05.310 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO oauth2_authorized_client (client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
08:43:05.311 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
08:43:05.312 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
08:43:05.313 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [Bearer], value class [java.lang.String], SQL type 12
08:43:05.315 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [2026-01-12 08:43:05.1368738], value class [java.sql.Timestamp], SQL type 93
08:43:05.315 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 6, parameter value [2026-01-12 08:58:05.1368738], value class [java.sql.Timestamp], SQL type 93
08:43:05.315 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [openid,profile], value class [java.lang.String], SQL type 12
08:43:05.316 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [2026-01-12 08:43:05.1368738], value class [java.sql.Timestamp], SQL type 93
08:43:05.321 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from a310c798-23ba-4611-9b86-189cca920316
08:43:05.324 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
08:43:05.326 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:43:03Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:13:05Z, iat=2026-01-12T01:43:05Z, nonce=B5VZYcNHc2qMbt3UUne2nXMyPMpHtbxzsLBUS9VPflE, jti=1fb14256-153a-417c-9ef3-eb2b8befb42a, authorities=[ROLE_CUSTOMER], sid=hDUtSgvhJgmLtyuqqX-ChRN5nTyFSLFBUMuulWnpyBg}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=a310c798-23ba-4611-9b86-189cca920316], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@5ae22ffc]
08:43:05.329 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:43:03Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:13:05Z, iat=2026-01-12T01:43:05Z, nonce=B5VZYcNHc2qMbt3UUne2nXMyPMpHtbxzsLBUS9VPflE, jti=1fb14256-153a-417c-9ef3-eb2b8befb42a, authorities=[ROLE_CUSTOMER], sid=hDUtSgvhJgmLtyuqqX-ChRN5nTyFSLFBUMuulWnpyBg}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=a310c798-23ba-4611-9b86-189cca920316], Granted Authorities=[ROLE_CUSTOMER]]
08:43:05.334 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:43:05.336 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
08:43:05.340 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:43:05.341 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
08:43:05.352 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:43:05.353 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
08:43:05.363 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:43:05.363 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:43:06.479 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
08:43:06.488 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:43:06.488 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:43:06.516 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:43:03Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:13:05Z, iat=2026-01-12T01:43:05Z, nonce=B5VZYcNHc2qMbt3UUne2nXMyPMpHtbxzsLBUS9VPflE, jti=1fb14256-153a-417c-9ef3-eb2b8befb42a, authorities=[ROLE_CUSTOMER], sid=hDUtSgvhJgmLtyuqqX-ChRN5nTyFSLFBUMuulWnpyBg}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=a310c798-23ba-4611-9b86-189cca920316], Granted Authorities=[ROLE_CUSTOMER]]]
08:43:06.517 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
08:43:06.549 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:43:06.552 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
08:43:06.563 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:43:06.566 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:43:06.937 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
08:43:06.942 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
08:43:08.036 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:43:08.557 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
08:43:08.560 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
08:43:08.566 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
08:43:08.600 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
08:43:08.566 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
08:43:08.602 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
08:43:08.577 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
08:43:08.596 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
08:43:08.615 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
08:43:08.621 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
08:43:08.635 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
08:43:08.635 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
08:43:08.851 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:43:08.934 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
08:43:08.947 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:43:08.960 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
08:43:08.963 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
08:43:09.036 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
08:43:09.041 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:43:09.055 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:43:09.058 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:43:09.066 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
08:43:09.069 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
08:43:09.070 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
08:43:09.070 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
08:43:09.126 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:43:09.134 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:43:09.134 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:43:09.149 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:43:09.163 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:44:03.471 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/logout
08:44:03.503 | DEBUG | FilterChainProxy: Securing POST /protected/logout
08:44:03.508 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:44:03.509 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:44:03.521 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:43:03Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:13:05Z, iat=2026-01-12T01:43:05Z, nonce=B5VZYcNHc2qMbt3UUne2nXMyPMpHtbxzsLBUS9VPflE, jti=1fb14256-153a-417c-9ef3-eb2b8befb42a, authorities=[ROLE_CUSTOMER], sid=hDUtSgvhJgmLtyuqqX-ChRN5nTyFSLFBUMuulWnpyBg}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=a310c798-23ba-4611-9b86-189cca920316], Granted Authorities=[ROLE_CUSTOMER]]]
08:44:03.522 | DEBUG | LogoutFilter: Logging out [OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:43:03Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:13:05Z, iat=2026-01-12T01:43:05Z, nonce=B5VZYcNHc2qMbt3UUne2nXMyPMpHtbxzsLBUS9VPflE, jti=1fb14256-153a-417c-9ef3-eb2b8befb42a, authorities=[ROLE_CUSTOMER], sid=hDUtSgvhJgmLtyuqqX-ChRN5nTyFSLFBUMuulWnpyBg}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=a310c798-23ba-4611-9b86-189cca920316], Granted Authorities=[ROLE_CUSTOMER]]]
08:44:03.525 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:44:03.525 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE SESSION_ID = ?
AND MAX_INACTIVE_INTERVAL >= 0
]
08:44:03.526 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [91c03d91-8df6-41c9-a365-3c90218feceb], value class [java.lang.String], SQL type unknown
08:44:03.535 | DEBUG | SecurityContextLogoutHandler: Invalidated session 91c03d91-8df6-41c9-a365-3c90218feceb
08:44:03.537 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:44:03.537 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:44:03.544 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:44:03.546 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
08:44:03.548 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
08:44:03.550 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
08:45:07.859 | INFO | LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener: Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
08:45:07.872 | INFO | GracefulShutdown: Commencing graceful shutdown. Waiting for active requests to complete
08:45:07.885 | INFO | GracefulShutdown: Graceful shutdown complete
08:45:07.901 | INFO | LocalContainerEntityManagerFactoryBean: Closing JPA EntityManagerFactory for persistence unit 'default'
08:45:07.910 | INFO | HikariDataSource: HikariPool-5 - Shutdown initiated...
08:45:07.930 | INFO | HikariDataSource: HikariPool-5 - Shutdown completed.
08:45:08.191 | INFO | BeForFeApplication: Starting BeForFeApplication using Java 21.0.3 with PID 17468 (C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes started by PC in C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe)
08:45:08.191 | INFO | BeForFeApplication: No active profile set, falling back to 1 default profile: "default"
08:45:08.569 | INFO | RepositoryConfigurationDelegate: Bootstrapping Spring Data JPA repositories in DEFAULT mode.
08:45:08.575 | INFO | RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 4 ms. Found 0 JPA repository interfaces.
08:45:08.718 | INFO | GenericScope: BeanFactory id=9f238d32-db58-3e04-8344-6f44253e8abb
08:45:08.809 | INFO | TomcatWebServer: Tomcat initialized with port 8181 (https)
08:45:08.810 | INFO | StandardService: Starting service [Tomcat]
08:45:08.810 | INFO | StandardEngine: Starting Servlet engine: [Apache Tomcat/10.1.50]
08:45:08.848 | INFO | [/]: Initializing Spring embedded WebApplicationContext
08:45:08.848 | INFO | ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 575 ms
08:45:08.904 | INFO | LogHelper: HHH000204: Processing PersistenceUnitInfo [name: default]
08:45:08.907 | INFO | RegionFactoryInitiator: HHH000026: Second-level cache disabled
08:45:08.919 | INFO | SpringPersistenceUnitInfo: No LoadTimeWeaver setup: ignoring JPA class transformer
08:45:08.920 | INFO | HikariDataSource: HikariPool-6 - Starting...
08:45:08.982 | INFO | HikariPool: HikariPool-6 - Added connection com.mysql.cj.jdbc.ConnectionImpl@60944fad
08:45:08.982 | INFO | HikariDataSource: HikariPool-6 - Start completed.
08:45:08.986 | WARN | deprecation: HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
08:45:08.987 | INFO | pooling: HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-6)']
	Database driver: undefined/unknown
	Database version: 8.0.44
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
08:45:09.087 | INFO | JtaPlatformInitiator: HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
08:45:09.145 | INFO | LocalContainerEntityManagerFactoryBean: Initialized JPA EntityManagerFactory for persistence unit 'default'
08:45:09.202 | WARN | JpaBaseConfiguration$JpaWebConfiguration: spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
08:45:09.274 | DEBUG | AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder: No authenticationProviders and no parentAuthenticationManager defined. Returning null.
08:45:09.331 | DEBUG | DefaultSecurityFilterChain: Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, OAuth2AuthorizationRequestRedirectFilter, OAuth2LoginAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
08:45:09.411 | INFO | OptionalLiveReloadServer: LiveReload server is running on port 35729
08:45:09.474 | INFO | certificate: Connector [https-jsse-nio-8181], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [Set directly - location unknown] using alias [bookommerce_ssl] with trust store [C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes\bookommerce-ssl.p12]
08:45:09.478 | INFO | TomcatWebServer: Tomcat started on port 8181 (https) with context path '/'
08:45:09.492 | INFO | BeForFeApplication: Started BeForFeApplication in 1.36 seconds (process running for 2510.321)
08:45:09.495 | INFO | ConditionEvaluationDeltaLoggingListener: Condition evaluation unchanged
08:45:47.614 | INFO | [/]: Initializing Spring DispatcherServlet 'dispatcherServlet'
08:45:47.614 | INFO | DispatcherServlet: Initializing Servlet 'dispatcherServlet'
08:45:47.621 | INFO | DispatcherServlet: Completed initialization in 6 ms
08:45:47.628 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
08:45:47.632 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=8APxTZ3STYkkUq1tWqr9Ltc28Jo0AMDOAXQ_ot6QiKE%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=5AyYx_XpzkRYWYcUh_c6qc85hT4OjTngGenZ70w6O6s
08:45:47.639 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:45:47.639 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
08:45:47.647 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:45:47.649 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
08:45:47.902 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=-xgxla_faknCLs5z1wWaTtPmV6uF2QHrmGI1QwxYa60Eibn7kX6HTjtd6RVM8GdqXkbza7chK85vId9xOyDjJZGu8jKYatjh3I4c7L0EH9gVBVOqPz7WU67dT_zRvnSG&state=8APxTZ3STYkkUq1tWqr9Ltc28Jo0AMDOAXQ_ot6QiKE%3D
08:45:47.909 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:45:47.909 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:45:49.078 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:45:49.078 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
08:45:49.082 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
08:45:49.082 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-12 08:45:48.9889568], value class [java.sql.Timestamp], SQL type 93
08:45:49.084 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-12 09:00:47.9889568], value class [java.sql.Timestamp], SQL type 93
08:45:49.084 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
08:45:49.084 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-12 08:45:48.9889568], value class [java.sql.Timestamp], SQL type 93
08:45:49.084 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
08:45:49.086 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
08:45:49.091 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:45:49.091 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO oauth2_authorized_client (client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
08:45:49.091 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
08:45:49.091 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
08:45:49.095 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [Bearer], value class [java.lang.String], SQL type 12
08:45:49.095 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [2026-01-12 08:45:48.9889568], value class [java.sql.Timestamp], SQL type 93
08:45:49.095 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 6, parameter value [2026-01-12 09:00:47.9889568], value class [java.sql.Timestamp], SQL type 93
08:45:49.095 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [openid,profile], value class [java.lang.String], SQL type 12
08:45:49.097 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [2026-01-12 08:45:48.9889568], value class [java.sql.Timestamp], SQL type 93
08:45:49.108 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from b0a65057-f6e2-4ba9-902d-ef2b2a74df09
08:45:49.108 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
08:45:49.110 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:45:47Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:15:48Z, iat=2026-01-12T01:45:48Z, nonce=5AyYx_XpzkRYWYcUh_c6qc85hT4OjTngGenZ70w6O6s, jti=ad1270c5-f825-4bae-9488-7d4fd96bd358, authorities=[ROLE_CUSTOMER], sid=YQW5J_ZWpM1U9qMLWv0yFFwT1nh_Oq6RapxSP7ajN44}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=b0a65057-f6e2-4ba9-902d-ef2b2a74df09], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@2b46fd4c]
08:45:49.110 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:45:47Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:15:48Z, iat=2026-01-12T01:45:48Z, nonce=5AyYx_XpzkRYWYcUh_c6qc85hT4OjTngGenZ70w6O6s, jti=ad1270c5-f825-4bae-9488-7d4fd96bd358, authorities=[ROLE_CUSTOMER], sid=YQW5J_ZWpM1U9qMLWv0yFFwT1nh_Oq6RapxSP7ajN44}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=b0a65057-f6e2-4ba9-902d-ef2b2a74df09], Granted Authorities=[ROLE_CUSTOMER]]
08:45:49.116 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:45:49.118 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
08:45:49.124 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:45:49.124 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
08:45:49.136 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:45:49.136 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
08:45:49.145 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:45:49.145 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:45:49.994 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
08:45:49.998 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:45:49.998 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:45:50.020 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:45:47Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:15:48Z, iat=2026-01-12T01:45:48Z, nonce=5AyYx_XpzkRYWYcUh_c6qc85hT4OjTngGenZ70w6O6s, jti=ad1270c5-f825-4bae-9488-7d4fd96bd358, authorities=[ROLE_CUSTOMER], sid=YQW5J_ZWpM1U9qMLWv0yFFwT1nh_Oq6RapxSP7ajN44}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=b0a65057-f6e2-4ba9-902d-ef2b2a74df09], Granted Authorities=[ROLE_CUSTOMER]]]
08:45:50.020 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
08:45:50.044 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:45:50.046 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
08:45:50.061 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:45:50.061 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:45:50.500 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
08:45:50.502 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
08:45:50.911 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:45:51.363 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
08:45:51.375 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
08:45:51.443 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
08:45:51.443 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
08:45:51.461 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
08:45:51.473 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
08:45:51.463 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
08:45:51.470 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
08:45:51.472 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
08:45:51.484 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
08:45:51.535 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
08:45:51.551 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
08:45:51.706 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:45:51.730 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
08:45:51.730 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
08:45:51.811 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:45:51.832 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
08:45:51.838 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
08:45:51.945 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:45:51.994 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:45:52.020 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
08:45:52.038 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:45:52.027 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:45:52.002 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:45:52.043 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
08:45:52.043 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:45:52.071 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
08:45:52.078 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
08:45:52.203 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:45:52.367 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:46:03.928 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/logout
08:46:03.941 | DEBUG | FilterChainProxy: Securing POST /protected/logout
08:46:03.952 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:46:03.952 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:46:03.962 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:45:47Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:15:48Z, iat=2026-01-12T01:45:48Z, nonce=5AyYx_XpzkRYWYcUh_c6qc85hT4OjTngGenZ70w6O6s, jti=ad1270c5-f825-4bae-9488-7d4fd96bd358, authorities=[ROLE_CUSTOMER], sid=YQW5J_ZWpM1U9qMLWv0yFFwT1nh_Oq6RapxSP7ajN44}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=b0a65057-f6e2-4ba9-902d-ef2b2a74df09], Granted Authorities=[ROLE_CUSTOMER]]]
08:46:03.963 | DEBUG | LogoutFilter: Logging out [OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:45:47Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:15:48Z, iat=2026-01-12T01:45:48Z, nonce=5AyYx_XpzkRYWYcUh_c6qc85hT4OjTngGenZ70w6O6s, jti=ad1270c5-f825-4bae-9488-7d4fd96bd358, authorities=[ROLE_CUSTOMER], sid=YQW5J_ZWpM1U9qMLWv0yFFwT1nh_Oq6RapxSP7ajN44}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=b0a65057-f6e2-4ba9-902d-ef2b2a74df09], Granted Authorities=[ROLE_CUSTOMER]]]
08:46:03.972 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:46:03.976 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE SESSION_ID = ?
AND MAX_INACTIVE_INTERVAL >= 0
]
08:46:03.977 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [e01bdd78-1ebf-461c-be7c-4fcf9667d35d], value class [java.lang.String], SQL type unknown
08:46:03.989 | DEBUG | SecurityContextLogoutHandler: Invalidated session e01bdd78-1ebf-461c-be7c-4fcf9667d35d
08:46:03.991 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:46:03.992 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:46:04.002 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:46:04.004 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
08:46:04.005 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
08:46:04.013 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
08:48:40.234 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
08:48:40.282 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=2h058EoXIPSOijpIMYtmiVGoVMLc3pUItdOH2kwsB54%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=b0akIZByohmV0FBvXzsr2I1r9mMEgHoG8WqwtpdkQho
08:48:40.316 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:48:40.316 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
08:48:40.336 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:48:40.338 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
08:48:40.512 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=B0ERh9nalmZRQ-MNzypt4_JtU55E0o-QN_v92afuz4EEwjIjSqUCpRZJc-DSiLc397-WimlnJzRdwM5aLxuFhCQdJYJ2iX2TXrghV-nLfHR-IeB5KvchNJl-PT-JUKyF&state=2h058EoXIPSOijpIMYtmiVGoVMLc3pUItdOH2kwsB54%3D
08:48:40.516 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:48:40.519 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:48:41.747 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:48:41.747 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
08:48:41.751 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
08:48:41.751 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-12 08:48:41.6558182], value class [java.sql.Timestamp], SQL type 93
08:48:41.751 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-12 09:03:41.6558182], value class [java.sql.Timestamp], SQL type 93
08:48:41.751 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
08:48:41.751 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-12 08:48:41.6558182], value class [java.sql.Timestamp], SQL type 93
08:48:41.751 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
08:48:41.751 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
08:48:41.761 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:48:41.761 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO oauth2_authorized_client (client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
08:48:41.764 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
08:48:41.764 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
08:48:41.766 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [Bearer], value class [java.lang.String], SQL type 12
08:48:41.766 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [2026-01-12 08:48:41.6558182], value class [java.sql.Timestamp], SQL type 93
08:48:41.768 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 6, parameter value [2026-01-12 09:03:41.6558182], value class [java.sql.Timestamp], SQL type 93
08:48:41.768 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [openid,profile], value class [java.lang.String], SQL type 12
08:48:41.768 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [2026-01-12 08:48:41.6558182], value class [java.sql.Timestamp], SQL type 93
08:48:41.779 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 6a31c839-7a35-4af0-aae8-28f89ed8ccba
08:48:41.781 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
08:48:41.784 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:48:40Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:18:41Z, iat=2026-01-12T01:48:41Z, nonce=b0akIZByohmV0FBvXzsr2I1r9mMEgHoG8WqwtpdkQho, jti=2cfc2fde-48f5-4cb2-85f1-a9433115ad03, authorities=[ROLE_CUSTOMER], sid=a2Gere-GrLq23BqP0Hn7KqoCcjTiTvDDzN82vCpzDFE}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=6a31c839-7a35-4af0-aae8-28f89ed8ccba], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@5bc9b2fc]
08:48:41.786 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:48:40Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:18:41Z, iat=2026-01-12T01:48:41Z, nonce=b0akIZByohmV0FBvXzsr2I1r9mMEgHoG8WqwtpdkQho, jti=2cfc2fde-48f5-4cb2-85f1-a9433115ad03, authorities=[ROLE_CUSTOMER], sid=a2Gere-GrLq23BqP0Hn7KqoCcjTiTvDDzN82vCpzDFE}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=6a31c839-7a35-4af0-aae8-28f89ed8ccba], Granted Authorities=[ROLE_CUSTOMER]]
08:48:41.797 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:48:41.797 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
08:48:41.801 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:48:41.803 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
08:48:41.813 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:48:41.814 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
08:48:41.824 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:48:41.824 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:48:42.598 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
08:48:42.606 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:48:42.607 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:48:42.621 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:48:40Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:18:41Z, iat=2026-01-12T01:48:41Z, nonce=b0akIZByohmV0FBvXzsr2I1r9mMEgHoG8WqwtpdkQho, jti=2cfc2fde-48f5-4cb2-85f1-a9433115ad03, authorities=[ROLE_CUSTOMER], sid=a2Gere-GrLq23BqP0Hn7KqoCcjTiTvDDzN82vCpzDFE}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=6a31c839-7a35-4af0-aae8-28f89ed8ccba], Granted Authorities=[ROLE_CUSTOMER]]]
08:48:42.623 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
08:48:42.645 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:48:42.647 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
08:48:42.660 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:48:42.662 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:48:43.064 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
08:48:43.066 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
08:48:43.869 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:48:44.340 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
08:48:44.344 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
08:48:44.359 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
08:48:44.361 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
08:48:44.370 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
08:48:44.374 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
08:48:44.375 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
08:48:44.380 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
08:48:44.384 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
08:48:44.384 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
08:48:44.387 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
08:48:44.397 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
08:48:44.471 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:48:44.519 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
08:48:44.525 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
08:48:44.579 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:48:44.591 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
08:48:44.593 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
08:48:44.710 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:48:44.760 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
08:48:44.739 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:48:44.761 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:48:44.775 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:48:44.775 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:48:44.792 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
08:48:44.791 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
08:48:44.802 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
08:48:44.840 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:48:45.017 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:48:45.035 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:48:48.049 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/logout
08:48:48.069 | DEBUG | FilterChainProxy: Securing POST /protected/logout
08:48:48.078 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:48:48.079 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:48:48.093 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:48:40Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:18:41Z, iat=2026-01-12T01:48:41Z, nonce=b0akIZByohmV0FBvXzsr2I1r9mMEgHoG8WqwtpdkQho, jti=2cfc2fde-48f5-4cb2-85f1-a9433115ad03, authorities=[ROLE_CUSTOMER], sid=a2Gere-GrLq23BqP0Hn7KqoCcjTiTvDDzN82vCpzDFE}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=6a31c839-7a35-4af0-aae8-28f89ed8ccba], Granted Authorities=[ROLE_CUSTOMER]]]
08:48:48.096 | DEBUG | LogoutFilter: Logging out [OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:48:40Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:18:41Z, iat=2026-01-12T01:48:41Z, nonce=b0akIZByohmV0FBvXzsr2I1r9mMEgHoG8WqwtpdkQho, jti=2cfc2fde-48f5-4cb2-85f1-a9433115ad03, authorities=[ROLE_CUSTOMER], sid=a2Gere-GrLq23BqP0Hn7KqoCcjTiTvDDzN82vCpzDFE}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=6a31c839-7a35-4af0-aae8-28f89ed8ccba], Granted Authorities=[ROLE_CUSTOMER]]]
08:48:48.100 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:48:48.101 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE SESSION_ID = ?
AND MAX_INACTIVE_INTERVAL >= 0
]
08:48:48.102 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [dd8f7568-5b7b-416b-97db-c81ae365e06c], value class [java.lang.String], SQL type unknown
08:48:48.114 | DEBUG | SecurityContextLogoutHandler: Invalidated session dd8f7568-5b7b-416b-97db-c81ae365e06c
08:48:48.117 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:48:48.117 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:48:48.126 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:48:48.127 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
08:48:48.127 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
08:48:48.128 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
08:48:51.932 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
08:48:51.934 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:48:52.197 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@37a21ab, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
08:48:52.197 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@614aaa7d, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
08:48:52.197 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@3590c105
08:48:52.689 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
08:48:52.691 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
08:48:52.847 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:48:53.138 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
08:48:53.144 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
08:48:53.166 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
08:48:53.172 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
08:48:53.179 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
08:48:53.190 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
08:48:53.199 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
08:48:53.221 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
08:48:53.226 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
08:48:53.231 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
08:48:53.252 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
08:48:53.272 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
08:48:53.306 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:48:53.342 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
08:48:53.323 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:48:53.339 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:48:53.339 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:48:53.352 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
08:48:53.347 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
08:48:53.364 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
08:48:53.350 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
08:48:53.367 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
08:48:53.377 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
08:48:53.372 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
08:48:53.434 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:48:53.436 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:48:53.519 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:48:53.514 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:48:53.521 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:48:53.531 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:55:23.707 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
08:55:23.749 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
08:55:23.770 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@37a21ab, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
08:55:23.771 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@614aaa7d, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
08:55:23.771 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@3590c105
08:55:30.642 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
08:55:30.661 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=xbHDIRwd_wa-YNOmDV_UHsme1bbe0kiSh-MaEd2Lnhk%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=BUYbhuKRYNYzyuT1VhQKY6cKHh4Lf6PRN_vmLhmNBG4
08:55:30.684 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:55:30.685 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
08:55:30.697 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:55:30.697 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
08:55:30.874 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=ckpvFKcMoz-CpM7UyM0TLhoADduemoy-31XfnWT1tpoPk4aMdgzT4MEpnoBWMYIPiPlsVhVqJauNSXsQ1SCBDVy93XmeyJ-ZJDADoZ5x5dEToYjIXBnND_Wd04emqbk3&state=xbHDIRwd_wa-YNOmDV_UHsme1bbe0kiSh-MaEd2Lnhk%3D
08:55:30.876 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:55:30.876 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:55:31.488 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:55:31.489 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
08:55:31.494 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
08:55:31.495 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-12 08:55:31.3953038], value class [java.sql.Timestamp], SQL type 93
08:55:31.496 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-12 09:10:31.3953038], value class [java.sql.Timestamp], SQL type 93
08:55:31.496 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
08:55:31.497 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-12 08:55:31.3953038], value class [java.sql.Timestamp], SQL type 93
08:55:31.497 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
08:55:31.497 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
08:55:31.506 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:55:31.506 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO oauth2_authorized_client (client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
08:55:31.507 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
08:55:31.508 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
08:55:31.508 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [Bearer], value class [java.lang.String], SQL type 12
08:55:31.508 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [2026-01-12 08:55:31.3953038], value class [java.sql.Timestamp], SQL type 93
08:55:31.508 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 6, parameter value [2026-01-12 09:10:31.3953038], value class [java.sql.Timestamp], SQL type 93
08:55:31.509 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [openid,profile], value class [java.lang.String], SQL type 12
08:55:31.509 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [2026-01-12 08:55:31.3953038], value class [java.sql.Timestamp], SQL type 93
08:55:31.516 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from abc5efc7-ecca-4fe7-98de-753b0a3cae9c
08:55:31.517 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
08:55:31.522 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:55:30Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:25:31Z, iat=2026-01-12T01:55:31Z, nonce=BUYbhuKRYNYzyuT1VhQKY6cKHh4Lf6PRN_vmLhmNBG4, jti=79928f17-1c5b-48f2-a744-cc52e3f1c539, authorities=[ROLE_PRODUCT_MANAGER], sid=rji4TfF-cG82dGRgeCf3Jla4kQL6630prJcHqXGqX8o}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=abc5efc7-ecca-4fe7-98de-753b0a3cae9c], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@318ab57]
08:55:31.523 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:55:30Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:25:31Z, iat=2026-01-12T01:55:31Z, nonce=BUYbhuKRYNYzyuT1VhQKY6cKHh4Lf6PRN_vmLhmNBG4, jti=79928f17-1c5b-48f2-a744-cc52e3f1c539, authorities=[ROLE_PRODUCT_MANAGER], sid=rji4TfF-cG82dGRgeCf3Jla4kQL6630prJcHqXGqX8o}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=abc5efc7-ecca-4fe7-98de-753b0a3cae9c], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
08:55:31.536 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:55:31.539 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
08:55:31.552 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:55:31.553 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
08:55:31.578 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:55:31.578 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
08:55:31.586 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:55:31.586 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:55:32.065 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
08:55:32.066 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:55:32.067 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:55:32.084 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:55:30Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:25:31Z, iat=2026-01-12T01:55:31Z, nonce=BUYbhuKRYNYzyuT1VhQKY6cKHh4Lf6PRN_vmLhmNBG4, jti=79928f17-1c5b-48f2-a744-cc52e3f1c539, authorities=[ROLE_PRODUCT_MANAGER], sid=rji4TfF-cG82dGRgeCf3Jla4kQL6630prJcHqXGqX8o}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=abc5efc7-ecca-4fe7-98de-753b0a3cae9c], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
08:55:32.086 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
08:55:32.130 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:55:32.131 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
08:55:32.142 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:55:32.143 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:55:41.597 | DEBUG | FilterChainProxy: Securing GET /protected/page/confirm-logout
08:55:41.601 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:55:41.601 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:55:41.606 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:55:30Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:25:31Z, iat=2026-01-12T01:55:31Z, nonce=BUYbhuKRYNYzyuT1VhQKY6cKHh4Lf6PRN_vmLhmNBG4, jti=79928f17-1c5b-48f2-a744-cc52e3f1c539, authorities=[ROLE_PRODUCT_MANAGER], sid=rji4TfF-cG82dGRgeCf3Jla4kQL6630prJcHqXGqX8o}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=abc5efc7-ecca-4fe7-98de-753b0a3cae9c], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
08:55:41.608 | DEBUG | FilterChainProxy: Secured GET /protected/page/confirm-logout
08:55:42.661 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:55:42.661 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
08:55:42.672 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:55:42.672 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:55:51.042 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
08:55:51.043 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:55:51.043 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
08:55:51.047 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:55:30Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:25:31Z, iat=2026-01-12T01:55:31Z, nonce=BUYbhuKRYNYzyuT1VhQKY6cKHh4Lf6PRN_vmLhmNBG4, jti=79928f17-1c5b-48f2-a744-cc52e3f1c539, authorities=[ROLE_PRODUCT_MANAGER], sid=rji4TfF-cG82dGRgeCf3Jla4kQL6630prJcHqXGqX8o}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=abc5efc7-ecca-4fe7-98de-753b0a3cae9c], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
08:55:51.048 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
08:55:51.054 | DEBUG | JdbcTemplate: Executing prepared SQL update
08:55:51.054 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
08:55:51.062 | DEBUG | JdbcTemplate: Executing prepared SQL query
08:55:51.062 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:01:08.956 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
09:01:08.997 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:01:08.998 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:01:09.078 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:55:30Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:25:31Z, iat=2026-01-12T01:55:31Z, nonce=BUYbhuKRYNYzyuT1VhQKY6cKHh4Lf6PRN_vmLhmNBG4, jti=79928f17-1c5b-48f2-a744-cc52e3f1c539, authorities=[ROLE_PRODUCT_MANAGER], sid=rji4TfF-cG82dGRgeCf3Jla4kQL6630prJcHqXGqX8o}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=abc5efc7-ecca-4fe7-98de-753b0a3cae9c], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:01:09.079 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
09:01:09.109 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:01:09.111 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
09:01:09.146 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:01:09.146 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:01:09.374 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
09:01:09.380 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:01:09.380 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:01:09.387 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:55:30Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:25:31Z, iat=2026-01-12T01:55:31Z, nonce=BUYbhuKRYNYzyuT1VhQKY6cKHh4Lf6PRN_vmLhmNBG4, jti=79928f17-1c5b-48f2-a744-cc52e3f1c539, authorities=[ROLE_PRODUCT_MANAGER], sid=rji4TfF-cG82dGRgeCf3Jla4kQL6630prJcHqXGqX8o}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=abc5efc7-ecca-4fe7-98de-753b0a3cae9c], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:01:09.388 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
09:01:09.392 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:01:09.392 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
09:01:09.402 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:01:09.402 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:01:24.393 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
09:01:24.404 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:01:24.405 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:01:24.416 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:55:30Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:25:31Z, iat=2026-01-12T01:55:31Z, nonce=BUYbhuKRYNYzyuT1VhQKY6cKHh4Lf6PRN_vmLhmNBG4, jti=79928f17-1c5b-48f2-a744-cc52e3f1c539, authorities=[ROLE_PRODUCT_MANAGER], sid=rji4TfF-cG82dGRgeCf3Jla4kQL6630prJcHqXGqX8o}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=abc5efc7-ecca-4fe7-98de-753b0a3cae9c], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:01:24.417 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
09:01:24.428 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:01:24.428 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
09:01:24.441 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:01:24.441 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:03:26.283 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
09:03:26.287 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:03:26.288 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:03:26.295 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:55:30Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:25:31Z, iat=2026-01-12T01:55:31Z, nonce=BUYbhuKRYNYzyuT1VhQKY6cKHh4Lf6PRN_vmLhmNBG4, jti=79928f17-1c5b-48f2-a744-cc52e3f1c539, authorities=[ROLE_PRODUCT_MANAGER], sid=rji4TfF-cG82dGRgeCf3Jla4kQL6630prJcHqXGqX8o}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=abc5efc7-ecca-4fe7-98de-753b0a3cae9c], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:03:26.295 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
09:03:26.300 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:03:26.300 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
09:03:26.310 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:03:26.310 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:03:26.927 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
09:03:26.930 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:03:26.931 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:03:26.952 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:55:30Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:25:31Z, iat=2026-01-12T01:55:31Z, nonce=BUYbhuKRYNYzyuT1VhQKY6cKHh4Lf6PRN_vmLhmNBG4, jti=79928f17-1c5b-48f2-a744-cc52e3f1c539, authorities=[ROLE_PRODUCT_MANAGER], sid=rji4TfF-cG82dGRgeCf3Jla4kQL6630prJcHqXGqX8o}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=abc5efc7-ecca-4fe7-98de-753b0a3cae9c], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:03:26.953 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
09:03:26.956 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:03:26.957 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
09:03:26.990 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:03:26.990 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:03:34.156 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/logout
09:03:34.172 | DEBUG | FilterChainProxy: Securing POST /protected/logout
09:03:34.174 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:03:34.175 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:03:34.182 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:55:30Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:25:31Z, iat=2026-01-12T01:55:31Z, nonce=BUYbhuKRYNYzyuT1VhQKY6cKHh4Lf6PRN_vmLhmNBG4, jti=79928f17-1c5b-48f2-a744-cc52e3f1c539, authorities=[ROLE_PRODUCT_MANAGER], sid=rji4TfF-cG82dGRgeCf3Jla4kQL6630prJcHqXGqX8o}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=abc5efc7-ecca-4fe7-98de-753b0a3cae9c], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:03:34.182 | DEBUG | LogoutFilter: Logging out [OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T01:55:30Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:25:31Z, iat=2026-01-12T01:55:31Z, nonce=BUYbhuKRYNYzyuT1VhQKY6cKHh4Lf6PRN_vmLhmNBG4, jti=79928f17-1c5b-48f2-a744-cc52e3f1c539, authorities=[ROLE_PRODUCT_MANAGER], sid=rji4TfF-cG82dGRgeCf3Jla4kQL6630prJcHqXGqX8o}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=abc5efc7-ecca-4fe7-98de-753b0a3cae9c], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:03:34.184 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:03:34.184 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE SESSION_ID = ?
AND MAX_INACTIVE_INTERVAL >= 0
]
09:03:34.185 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [824e4bee-6843-4903-914b-b79f7ef52d68], value class [java.lang.String], SQL type unknown
09:03:34.199 | DEBUG | SecurityContextLogoutHandler: Invalidated session 824e4bee-6843-4903-914b-b79f7ef52d68
09:03:34.200 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:03:34.200 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:03:34.204 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:03:34.204 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
09:03:34.205 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
09:03:34.205 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
09:09:01.874 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
09:09:01.881 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=s2DRixC5IKJyMeLdwMKHS3mImpHm-ls_UZ1ZJzJm17M%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=aX_5ug8Jhy9QB77UdFZIWC2xg-zzBtcXPlkGRZD5DcQ
09:09:01.887 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:09:01.887 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
09:09:01.892 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:09:01.893 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
09:09:02.004 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=3waryphsdJLTJkc2PewdLXitHP4afl076Ow7OCAJ_C4M25D9zYBmnZJJK7A4DNuJOGot2apMd9FHI1vKP_A25tmanJhJoYxE3hQREuHLRO9TsqewmE-w3iBraWW_ep7E&state=s2DRixC5IKJyMeLdwMKHS3mImpHm-ls_UZ1ZJzJm17M%3D
09:09:02.006 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:09:02.006 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:09:02.517 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:09:02.517 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
09:09:02.518 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
09:09:02.518 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-12 09:09:02.470583], value class [java.sql.Timestamp], SQL type 93
09:09:02.519 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-12 09:24:02.470583], value class [java.sql.Timestamp], SQL type 93
09:09:02.519 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
09:09:02.519 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-12 09:09:02.470583], value class [java.sql.Timestamp], SQL type 93
09:09:02.521 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
09:09:02.521 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
09:09:02.524 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:09:02.525 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO oauth2_authorized_client (client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
09:09:02.526 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
09:09:02.526 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
09:09:02.526 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [Bearer], value class [java.lang.String], SQL type 12
09:09:02.526 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [2026-01-12 09:09:02.470583], value class [java.sql.Timestamp], SQL type 93
09:09:02.526 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 6, parameter value [2026-01-12 09:24:02.470583], value class [java.sql.Timestamp], SQL type 93
09:09:02.526 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [openid,profile], value class [java.lang.String], SQL type 12
09:09:02.526 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [2026-01-12 09:09:02.470583], value class [java.sql.Timestamp], SQL type 93
09:09:02.534 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 74ab6973-494f-4855-8357-569e3e09d61f
09:09:02.535 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
09:09:02.535 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:09:01Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:39:02Z, iat=2026-01-12T02:09:02Z, nonce=aX_5ug8Jhy9QB77UdFZIWC2xg-zzBtcXPlkGRZD5DcQ, jti=2c6d21ae-3abb-42fe-8eee-247c732c93d3, authorities=[ROLE_PRODUCT_MANAGER], sid=_USXtHhETD8FwDjmp3zJ_r9-PJjR5dOXY31iaSV2ew8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=74ab6973-494f-4855-8357-569e3e09d61f], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@15b62171]
09:09:02.536 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:09:01Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:39:02Z, iat=2026-01-12T02:09:02Z, nonce=aX_5ug8Jhy9QB77UdFZIWC2xg-zzBtcXPlkGRZD5DcQ, jti=2c6d21ae-3abb-42fe-8eee-247c732c93d3, authorities=[ROLE_PRODUCT_MANAGER], sid=_USXtHhETD8FwDjmp3zJ_r9-PJjR5dOXY31iaSV2ew8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=74ab6973-494f-4855-8357-569e3e09d61f], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
09:09:02.541 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:09:02.541 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
09:09:02.544 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:09:02.544 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
09:09:02.549 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:09:02.549 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
09:09:02.558 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:09:02.558 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:09:02.987 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
09:09:02.989 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:09:02.990 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:09:02.992 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:09:01Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:39:02Z, iat=2026-01-12T02:09:02Z, nonce=aX_5ug8Jhy9QB77UdFZIWC2xg-zzBtcXPlkGRZD5DcQ, jti=2c6d21ae-3abb-42fe-8eee-247c732c93d3, authorities=[ROLE_PRODUCT_MANAGER], sid=_USXtHhETD8FwDjmp3zJ_r9-PJjR5dOXY31iaSV2ew8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=74ab6973-494f-4855-8357-569e3e09d61f], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:09:02.993 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
09:09:03.006 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:09:03.007 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
09:09:03.018 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:09:03.018 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:09:06.548 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/logout
09:09:06.563 | DEBUG | FilterChainProxy: Securing POST /protected/logout
09:09:06.565 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:09:06.565 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:09:06.570 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:09:01Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:39:02Z, iat=2026-01-12T02:09:02Z, nonce=aX_5ug8Jhy9QB77UdFZIWC2xg-zzBtcXPlkGRZD5DcQ, jti=2c6d21ae-3abb-42fe-8eee-247c732c93d3, authorities=[ROLE_PRODUCT_MANAGER], sid=_USXtHhETD8FwDjmp3zJ_r9-PJjR5dOXY31iaSV2ew8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=74ab6973-494f-4855-8357-569e3e09d61f], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:09:06.570 | DEBUG | LogoutFilter: Logging out [OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:09:01Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:39:02Z, iat=2026-01-12T02:09:02Z, nonce=aX_5ug8Jhy9QB77UdFZIWC2xg-zzBtcXPlkGRZD5DcQ, jti=2c6d21ae-3abb-42fe-8eee-247c732c93d3, authorities=[ROLE_PRODUCT_MANAGER], sid=_USXtHhETD8FwDjmp3zJ_r9-PJjR5dOXY31iaSV2ew8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=74ab6973-494f-4855-8357-569e3e09d61f], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:09:06.571 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:09:06.571 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE SESSION_ID = ?
AND MAX_INACTIVE_INTERVAL >= 0
]
09:09:06.571 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bc46ea6c-640b-4176-92ab-d05b65a1b4db], value class [java.lang.String], SQL type unknown
09:09:06.579 | DEBUG | SecurityContextLogoutHandler: Invalidated session bc46ea6c-640b-4176-92ab-d05b65a1b4db
09:09:06.580 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:09:06.580 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:09:06.582 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:09:06.582 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
09:09:06.582 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
09:09:06.582 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
09:09:08.281 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
09:09:08.282 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:09:08.286 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@37a21ab, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
09:09:08.287 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@614aaa7d, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
09:09:08.287 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@3590c105
09:09:08.499 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
09:09:08.502 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
09:09:08.941 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:09:09.111 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
09:09:09.112 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
09:09:09.120 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
09:09:09.126 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
09:09:09.127 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
09:09:09.125 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
09:09:09.136 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
09:09:09.137 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
09:09:09.137 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
09:09:09.142 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
09:09:09.143 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
09:09:09.146 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
09:09:09.207 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:09:09.222 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:09:09.243 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
09:09:09.284 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
09:09:09.284 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
09:09:09.315 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
09:09:09.321 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:09:09.331 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
09:09:09.337 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:09:09.340 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
09:09:09.342 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
09:09:09.345 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
09:09:09.483 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:09:09.511 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:09:09.513 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:09:09.550 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:09:09.556 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:09:09.560 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:10:31.839 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
09:10:31.844 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=vAtSI5qEEfaMCUL0kK3xNYfY4PyIcn-ZgOl48ifKi74%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=em0SEU1UEIc2eN-HouPMKTxP8B9-6J09gZ4pYriSeio
09:10:31.846 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:10:31.846 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
09:10:31.848 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:10:31.849 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
09:10:51.711 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
09:10:51.715 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:10:51.715 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:10:51.732 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=nOCcjp_7U5PBe0wQdUCXJzVjgMAM6Q8eutTr2p3xbe0%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=Qpa-4BQrCtaOJR58YaFK_i2as_YSSU2XMFxU14ey-_M
09:10:51.736 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:10:51.736 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
09:10:51.749 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:10:51.749 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
09:10:51.758 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:10:51.758 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:10:51.841 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=76f5jjfrxMUJ9Iy6Ux9DRmC368os0YsHQz6k2dXWn9COBglUAKkSgWXlGqn9YDL2ab9KkQkn1zgbfIj9Pki_Iyxr77R-ZyhUWpk8DWFsNwbyX1yzh6pycx4Pv2Yh3eeW&state=nOCcjp_7U5PBe0wQdUCXJzVjgMAM6Q8eutTr2p3xbe0%3D
09:10:51.843 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:10:51.843 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:10:52.376 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:10:52.376 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
09:10:52.377 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
09:10:52.377 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-12 09:10:52.3533426], value class [java.sql.Timestamp], SQL type 93
09:10:52.377 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-12 09:25:52.3533426], value class [java.sql.Timestamp], SQL type 93
09:10:52.377 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
09:10:52.378 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-12 09:10:52.3533426], value class [java.sql.Timestamp], SQL type 93
09:10:52.378 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
09:10:52.378 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
09:10:52.381 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:10:52.381 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO oauth2_authorized_client (client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
09:10:52.383 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
09:10:52.383 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
09:10:52.383 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [Bearer], value class [java.lang.String], SQL type 12
09:10:52.383 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [2026-01-12 09:10:52.3533426], value class [java.sql.Timestamp], SQL type 93
09:10:52.383 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 6, parameter value [2026-01-12 09:25:52.3533426], value class [java.sql.Timestamp], SQL type 93
09:10:52.383 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [openid,profile], value class [java.lang.String], SQL type 12
09:10:52.383 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [2026-01-12 09:10:52.3533426], value class [java.sql.Timestamp], SQL type 93
09:10:52.389 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 6a6157ef-5db7-482a-9384-fa20ec273994
09:10:52.389 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
09:10:52.390 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:10:51Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:40:52Z, iat=2026-01-12T02:10:52Z, nonce=Qpa-4BQrCtaOJR58YaFK_i2as_YSSU2XMFxU14ey-_M, jti=1dd17844-6fbb-450c-aa39-dc1d5bc04634, authorities=[ROLE_PRODUCT_MANAGER], sid=KjZBbqUCgNnauzM1yQP2NdfeUCafdrsXDksnLiKHzSg}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=6a6157ef-5db7-482a-9384-fa20ec273994], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@39a4c2fb]
09:10:52.390 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:10:51Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:40:52Z, iat=2026-01-12T02:10:52Z, nonce=Qpa-4BQrCtaOJR58YaFK_i2as_YSSU2XMFxU14ey-_M, jti=1dd17844-6fbb-450c-aa39-dc1d5bc04634, authorities=[ROLE_PRODUCT_MANAGER], sid=KjZBbqUCgNnauzM1yQP2NdfeUCafdrsXDksnLiKHzSg}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=6a6157ef-5db7-482a-9384-fa20ec273994], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
09:10:52.392 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:10:52.392 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
09:10:52.395 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:10:52.395 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
09:10:52.399 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:10:52.400 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
09:10:52.408 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:10:52.408 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:10:52.801 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
09:10:52.803 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:10:52.803 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:10:52.806 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:10:51Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:40:52Z, iat=2026-01-12T02:10:52Z, nonce=Qpa-4BQrCtaOJR58YaFK_i2as_YSSU2XMFxU14ey-_M, jti=1dd17844-6fbb-450c-aa39-dc1d5bc04634, authorities=[ROLE_PRODUCT_MANAGER], sid=KjZBbqUCgNnauzM1yQP2NdfeUCafdrsXDksnLiKHzSg}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=6a6157ef-5db7-482a-9384-fa20ec273994], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:10:52.806 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
09:10:52.810 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:10:52.810 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
09:10:52.820 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:10:52.820 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:10:55.548 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/logout
09:10:55.557 | DEBUG | FilterChainProxy: Securing POST /protected/logout
09:10:55.561 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:10:55.562 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:10:55.566 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:10:51Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:40:52Z, iat=2026-01-12T02:10:52Z, nonce=Qpa-4BQrCtaOJR58YaFK_i2as_YSSU2XMFxU14ey-_M, jti=1dd17844-6fbb-450c-aa39-dc1d5bc04634, authorities=[ROLE_PRODUCT_MANAGER], sid=KjZBbqUCgNnauzM1yQP2NdfeUCafdrsXDksnLiKHzSg}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=6a6157ef-5db7-482a-9384-fa20ec273994], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:10:55.567 | DEBUG | LogoutFilter: Logging out [OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:10:51Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:40:52Z, iat=2026-01-12T02:10:52Z, nonce=Qpa-4BQrCtaOJR58YaFK_i2as_YSSU2XMFxU14ey-_M, jti=1dd17844-6fbb-450c-aa39-dc1d5bc04634, authorities=[ROLE_PRODUCT_MANAGER], sid=KjZBbqUCgNnauzM1yQP2NdfeUCafdrsXDksnLiKHzSg}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=6a6157ef-5db7-482a-9384-fa20ec273994], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:10:55.568 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:10:55.569 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE SESSION_ID = ?
AND MAX_INACTIVE_INTERVAL >= 0
]
09:10:55.570 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [c9c3f0af-03d3-498b-95c2-a7b551365b00], value class [java.lang.String], SQL type unknown
09:10:55.579 | DEBUG | SecurityContextLogoutHandler: Invalidated session c9c3f0af-03d3-498b-95c2-a7b551365b00
09:10:55.580 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:10:55.580 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:10:55.585 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:10:55.585 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
09:10:55.586 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
09:10:55.586 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
09:10:56.861 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
09:10:56.863 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:10:56.863 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@37a21ab, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
09:10:56.864 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@614aaa7d, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
09:10:56.864 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@3590c105
09:10:57.052 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
09:10:57.054 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
09:10:57.144 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:10:57.334 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
09:10:57.335 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
09:10:57.357 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
09:10:57.357 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
09:10:57.362 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
09:10:57.380 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
09:10:57.377 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
09:10:57.382 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
09:10:57.378 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
09:10:57.376 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
09:10:57.391 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
09:10:57.393 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
09:10:57.406 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:10:57.418 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
09:10:57.490 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
09:10:57.512 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:10:57.519 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:10:57.521 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
09:10:57.527 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
09:10:57.521 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
09:10:57.542 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
09:10:57.547 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:10:57.573 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
09:10:57.579 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
09:10:57.581 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:10:57.593 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:10:57.635 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:10:57.642 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:10:57.653 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:10:57.675 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:11:12.776 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
09:11:12.777 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=Dgui8wdCtD-dvflN_ImEzEWObEzFSCP8ydAed6wc_sw%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=4NigO0dP75OkiuFtl29Mch-HJ-8CcNTPl0SLw9oMsBY
09:11:12.779 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:11:12.779 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
09:11:12.782 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:11:12.782 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
09:11:21.957 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
09:11:21.959 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:11:21.959 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:11:21.964 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=-KO7YipAXCP6nBZTLcGXP4B9IKdJLZFK0kOrrDZVHzE%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=KKiZ0MpgThrdxYc0obht8If2UeibJ_gsdkLIwjwHbzU
09:11:21.966 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:11:21.966 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
09:11:21.969 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:11:21.970 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
09:11:21.978 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:11:21.979 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:11:22.093 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=y4__2jicxPx46BPEzMldUMvSeLZaJgHsZJzzNjsI0CGPOC1P60aLiLnTUR4z-CpDnSS0sXlqqVh5GLo8Yp3uOxKLgkHizHeX4rweZv3FHzQBAd6a2hbx9koIqoKJrRK0&state=-KO7YipAXCP6nBZTLcGXP4B9IKdJLZFK0kOrrDZVHzE%3D
09:11:22.094 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:11:22.095 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:11:22.591 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:11:22.591 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
09:11:22.591 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
09:11:22.591 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-12 09:11:22.5671391], value class [java.sql.Timestamp], SQL type 93
09:11:22.591 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-12 09:26:22.5671391], value class [java.sql.Timestamp], SQL type 93
09:11:22.592 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
09:11:22.592 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-12 09:11:22.5671391], value class [java.sql.Timestamp], SQL type 93
09:11:22.592 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
09:11:22.592 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
09:11:22.595 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:11:22.595 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO oauth2_authorized_client (client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
09:11:22.596 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
09:11:22.596 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
09:11:22.597 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [Bearer], value class [java.lang.String], SQL type 12
09:11:22.597 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [2026-01-12 09:11:22.5671391], value class [java.sql.Timestamp], SQL type 93
09:11:22.597 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 6, parameter value [2026-01-12 09:26:22.5671391], value class [java.sql.Timestamp], SQL type 93
09:11:22.598 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [openid,profile], value class [java.lang.String], SQL type 12
09:11:22.598 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [2026-01-12 09:11:22.5671391], value class [java.sql.Timestamp], SQL type 93
09:11:22.604 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 2f1494cd-f2e6-4cd5-b8d4-c9276b82a75a
09:11:22.605 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
09:11:22.605 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:11:22Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:41:22Z, iat=2026-01-12T02:11:22Z, nonce=KKiZ0MpgThrdxYc0obht8If2UeibJ_gsdkLIwjwHbzU, jti=56e9689b-88c0-4182-a7db-f81090c647af, authorities=[ROLE_PRODUCT_MANAGER], sid=7f8lDqbpExnfEynHlXDJKUvLNrspN9Bz0NwJ3fW0aqw}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=2f1494cd-f2e6-4cd5-b8d4-c9276b82a75a], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@42aaaa96]
09:11:22.607 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:11:22Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:41:22Z, iat=2026-01-12T02:11:22Z, nonce=KKiZ0MpgThrdxYc0obht8If2UeibJ_gsdkLIwjwHbzU, jti=56e9689b-88c0-4182-a7db-f81090c647af, authorities=[ROLE_PRODUCT_MANAGER], sid=7f8lDqbpExnfEynHlXDJKUvLNrspN9Bz0NwJ3fW0aqw}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=2f1494cd-f2e6-4cd5-b8d4-c9276b82a75a], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
09:11:22.608 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:11:22.609 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
09:11:22.610 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:11:22.610 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
09:11:22.612 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:11:22.613 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
09:11:22.622 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:11:22.623 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:11:23.016 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
09:11:23.029 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:11:23.029 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:11:23.034 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:11:22Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:41:22Z, iat=2026-01-12T02:11:22Z, nonce=KKiZ0MpgThrdxYc0obht8If2UeibJ_gsdkLIwjwHbzU, jti=56e9689b-88c0-4182-a7db-f81090c647af, authorities=[ROLE_PRODUCT_MANAGER], sid=7f8lDqbpExnfEynHlXDJKUvLNrspN9Bz0NwJ3fW0aqw}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=2f1494cd-f2e6-4cd5-b8d4-c9276b82a75a], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:11:23.034 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
09:11:23.040 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:11:23.040 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
09:11:23.051 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:11:23.052 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:11:25.404 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/logout
09:11:25.408 | DEBUG | FilterChainProxy: Securing POST /protected/logout
09:11:25.411 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:11:25.411 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:11:25.417 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:11:22Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:41:22Z, iat=2026-01-12T02:11:22Z, nonce=KKiZ0MpgThrdxYc0obht8If2UeibJ_gsdkLIwjwHbzU, jti=56e9689b-88c0-4182-a7db-f81090c647af, authorities=[ROLE_PRODUCT_MANAGER], sid=7f8lDqbpExnfEynHlXDJKUvLNrspN9Bz0NwJ3fW0aqw}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=2f1494cd-f2e6-4cd5-b8d4-c9276b82a75a], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:11:25.418 | DEBUG | LogoutFilter: Logging out [OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:11:22Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:41:22Z, iat=2026-01-12T02:11:22Z, nonce=KKiZ0MpgThrdxYc0obht8If2UeibJ_gsdkLIwjwHbzU, jti=56e9689b-88c0-4182-a7db-f81090c647af, authorities=[ROLE_PRODUCT_MANAGER], sid=7f8lDqbpExnfEynHlXDJKUvLNrspN9Bz0NwJ3fW0aqw}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=2f1494cd-f2e6-4cd5-b8d4-c9276b82a75a], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:11:25.421 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:11:25.421 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE SESSION_ID = ?
AND MAX_INACTIVE_INTERVAL >= 0
]
09:11:25.422 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [796d985d-250b-4ced-905a-fe7fa3bd74e3], value class [java.lang.String], SQL type unknown
09:11:25.431 | DEBUG | SecurityContextLogoutHandler: Invalidated session 796d985d-250b-4ced-905a-fe7fa3bd74e3
09:11:25.432 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:11:25.433 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:11:25.436 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:11:25.436 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
09:11:25.436 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
09:11:25.437 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
09:11:43.004 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
09:11:43.006 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=wmBGiOQjlGTIxEFkHY_9CMK2HRvwnk2GuhkooAg6koc%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=_Eg2UcIqirBgF0E_Io_kHGksBuu3ZgkgrrcpLQ58y4Q
09:11:43.007 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:11:43.008 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
09:11:43.010 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:11:43.011 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
09:11:43.087 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=3hX5ahZSXbFUnytQvLtpuBx4tZ47TxB5L3sAUkr5E5AxRoPJloGv0hbfFvAcYqaxZd-ytU8T9NozfDRzUtlLZuco907-y1wi5jhyggrN3BHwpQr_Zz4d7awFoPJY7gzo&state=wmBGiOQjlGTIxEFkHY_9CMK2HRvwnk2GuhkooAg6koc%3D
09:11:43.089 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:11:43.089 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:11:43.552 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:11:43.553 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
09:11:43.553 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
09:11:43.553 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-12 09:11:43.5322867], value class [java.sql.Timestamp], SQL type 93
09:11:43.554 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-12 09:26:43.5322867], value class [java.sql.Timestamp], SQL type 93
09:11:43.554 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
09:11:43.554 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-12 09:11:43.5322867], value class [java.sql.Timestamp], SQL type 93
09:11:43.554 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
09:11:43.554 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
09:11:43.555 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:11:43.556 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO oauth2_authorized_client (client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
09:11:43.556 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
09:11:43.556 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
09:11:43.556 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [Bearer], value class [java.lang.String], SQL type 12
09:11:43.557 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [2026-01-12 09:11:43.5322867], value class [java.sql.Timestamp], SQL type 93
09:11:43.557 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 6, parameter value [2026-01-12 09:26:43.5322867], value class [java.sql.Timestamp], SQL type 93
09:11:43.557 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [openid,profile], value class [java.lang.String], SQL type 12
09:11:43.557 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [2026-01-12 09:11:43.5322867], value class [java.sql.Timestamp], SQL type 93
09:11:43.564 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from a1a739cf-e110-4286-8b03-9c54f5afc36a
09:11:43.566 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
09:11:43.567 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:11:43Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:41:43Z, iat=2026-01-12T02:11:43Z, nonce=_Eg2UcIqirBgF0E_Io_kHGksBuu3ZgkgrrcpLQ58y4Q, jti=dbd2a1f2-6796-4c23-bcfa-b4679593acf7, authorities=[ROLE_PRODUCT_MANAGER], sid=29vJ3XhFONx_itJdmaRGOxx5FKOsF0K8i8b_nHUpgOY}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=a1a739cf-e110-4286-8b03-9c54f5afc36a], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@4861075f]
09:11:43.567 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:11:43Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:41:43Z, iat=2026-01-12T02:11:43Z, nonce=_Eg2UcIqirBgF0E_Io_kHGksBuu3ZgkgrrcpLQ58y4Q, jti=dbd2a1f2-6796-4c23-bcfa-b4679593acf7, authorities=[ROLE_PRODUCT_MANAGER], sid=29vJ3XhFONx_itJdmaRGOxx5FKOsF0K8i8b_nHUpgOY}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=a1a739cf-e110-4286-8b03-9c54f5afc36a], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
09:11:43.568 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:11:43.568 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
09:11:43.570 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:11:43.570 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
09:11:43.572 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:11:43.572 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
09:11:43.580 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:11:43.580 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:11:44.091 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
09:11:44.096 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:11:44.097 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:11:44.112 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:11:43Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:41:43Z, iat=2026-01-12T02:11:43Z, nonce=_Eg2UcIqirBgF0E_Io_kHGksBuu3ZgkgrrcpLQ58y4Q, jti=dbd2a1f2-6796-4c23-bcfa-b4679593acf7, authorities=[ROLE_PRODUCT_MANAGER], sid=29vJ3XhFONx_itJdmaRGOxx5FKOsF0K8i8b_nHUpgOY}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=a1a739cf-e110-4286-8b03-9c54f5afc36a], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:11:44.114 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
09:11:44.120 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:11:44.121 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
09:11:44.132 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:11:44.133 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:11:46.500 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/logout
09:11:46.506 | DEBUG | FilterChainProxy: Securing POST /protected/logout
09:11:46.508 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:11:46.508 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:11:46.514 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:11:43Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:41:43Z, iat=2026-01-12T02:11:43Z, nonce=_Eg2UcIqirBgF0E_Io_kHGksBuu3ZgkgrrcpLQ58y4Q, jti=dbd2a1f2-6796-4c23-bcfa-b4679593acf7, authorities=[ROLE_PRODUCT_MANAGER], sid=29vJ3XhFONx_itJdmaRGOxx5FKOsF0K8i8b_nHUpgOY}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=a1a739cf-e110-4286-8b03-9c54f5afc36a], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:11:46.515 | DEBUG | LogoutFilter: Logging out [OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:11:43Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:41:43Z, iat=2026-01-12T02:11:43Z, nonce=_Eg2UcIqirBgF0E_Io_kHGksBuu3ZgkgrrcpLQ58y4Q, jti=dbd2a1f2-6796-4c23-bcfa-b4679593acf7, authorities=[ROLE_PRODUCT_MANAGER], sid=29vJ3XhFONx_itJdmaRGOxx5FKOsF0K8i8b_nHUpgOY}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=a1a739cf-e110-4286-8b03-9c54f5afc36a], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:11:46.516 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:11:46.517 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE SESSION_ID = ?
AND MAX_INACTIVE_INTERVAL >= 0
]
09:11:46.517 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [e24f86c7-07e1-467f-8af2-30e46e5ea2bd], value class [java.lang.String], SQL type unknown
09:11:46.525 | DEBUG | SecurityContextLogoutHandler: Invalidated session e24f86c7-07e1-467f-8af2-30e46e5ea2bd
09:11:46.526 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:11:46.526 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:11:46.529 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:11:46.529 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
09:11:46.529 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
09:11:46.529 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
09:11:48.077 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
09:11:48.080 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:11:48.081 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@37a21ab, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
09:11:48.082 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@614aaa7d, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
09:11:48.082 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@3590c105
09:11:48.335 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
09:11:48.335 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
09:11:48.401 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:11:48.578 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
09:11:48.581 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
09:11:48.594 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
09:11:48.599 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
09:11:48.595 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
09:11:48.601 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
09:11:48.605 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
09:11:48.603 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
09:11:48.607 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
09:11:48.611 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
09:11:48.615 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
09:11:48.623 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
09:11:48.734 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:11:48.742 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:11:48.753 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
09:11:48.754 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
09:11:48.756 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
09:11:48.764 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
09:11:48.773 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:11:48.785 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
09:11:48.820 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
09:11:48.825 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:11:48.834 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:11:48.838 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
09:11:48.839 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:11:48.845 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
09:11:48.845 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:11:48.866 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:11:48.868 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:11:48.877 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:17:18.943 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
09:17:19.032 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=eLD3xMH-oMCpNvGlGT9b0I-w0oTnLOIPMRFMowCWOyE%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=VBu55lFuANHQRxqlcc41Z9dOsxeFvZTk_sG3Yyds16g
09:17:19.083 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:17:19.083 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
09:17:19.133 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:17:19.133 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
09:17:19.426 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=1h8LfjKILMgww-LhbGrtMkI-ntdS0htgpll52Fb9Yg95RO1FmI5WmM-BGLrxEXnSUeAVWTfHUqglKlgHkyLvH0jVODNe-OX9XA5ODWsDeGk_wHfsrK3Zii7WhId-p5iI&state=eLD3xMH-oMCpNvGlGT9b0I-w0oTnLOIPMRFMowCWOyE%3D
09:17:19.443 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:17:19.443 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:17:20.133 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:17:20.133 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
09:17:20.136 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
09:17:20.138 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-12 09:17:20.0417438], value class [java.sql.Timestamp], SQL type 93
09:17:20.138 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-12 09:32:20.0417438], value class [java.sql.Timestamp], SQL type 93
09:17:20.140 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
09:17:20.141 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-12 09:17:20.0417438], value class [java.sql.Timestamp], SQL type 93
09:17:20.141 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
09:17:20.141 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
09:17:20.147 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:17:20.148 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO oauth2_authorized_client (client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
09:17:20.149 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
09:17:20.149 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
09:17:20.149 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [Bearer], value class [java.lang.String], SQL type 12
09:17:20.150 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [2026-01-12 09:17:20.0417438], value class [java.sql.Timestamp], SQL type 93
09:17:20.152 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 6, parameter value [2026-01-12 09:32:20.0417438], value class [java.sql.Timestamp], SQL type 93
09:17:20.161 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [openid,profile], value class [java.lang.String], SQL type 12
09:17:20.164 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [2026-01-12 09:17:20.0417438], value class [java.sql.Timestamp], SQL type 93
09:17:20.171 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 8b132bcc-d41c-42d1-84ed-ee4b5b93ad74
09:17:20.174 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
09:17:20.178 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:17:19Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:47:19Z, iat=2026-01-12T02:17:19Z, nonce=VBu55lFuANHQRxqlcc41Z9dOsxeFvZTk_sG3Yyds16g, jti=a289dda5-82c5-444b-8d75-dad97d70ad25, authorities=[ROLE_PRODUCT_MANAGER], sid=57Y1lPRW3f52oGq2hXVs2AHxo_DiJ71BgImJcWlhRyA}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=8b132bcc-d41c-42d1-84ed-ee4b5b93ad74], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@41a725e8]
09:17:20.178 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:17:19Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:47:19Z, iat=2026-01-12T02:17:19Z, nonce=VBu55lFuANHQRxqlcc41Z9dOsxeFvZTk_sG3Yyds16g, jti=a289dda5-82c5-444b-8d75-dad97d70ad25, authorities=[ROLE_PRODUCT_MANAGER], sid=57Y1lPRW3f52oGq2hXVs2AHxo_DiJ71BgImJcWlhRyA}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=8b132bcc-d41c-42d1-84ed-ee4b5b93ad74], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
09:17:20.190 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:17:20.190 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
09:17:20.195 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:17:20.195 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
09:17:20.203 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:17:20.203 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
09:17:20.212 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:17:20.213 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:17:22.779 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
09:17:22.784 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:17:22.784 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:17:22.794 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:17:19Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:47:19Z, iat=2026-01-12T02:17:19Z, nonce=VBu55lFuANHQRxqlcc41Z9dOsxeFvZTk_sG3Yyds16g, jti=a289dda5-82c5-444b-8d75-dad97d70ad25, authorities=[ROLE_PRODUCT_MANAGER], sid=57Y1lPRW3f52oGq2hXVs2AHxo_DiJ71BgImJcWlhRyA}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=8b132bcc-d41c-42d1-84ed-ee4b5b93ad74], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:17:22.794 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
09:17:22.838 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:17:22.838 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
09:17:22.850 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:17:22.850 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:17:25.327 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/logout
09:17:25.331 | DEBUG | FilterChainProxy: Securing POST /protected/logout
09:17:25.333 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:17:25.333 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:17:25.338 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:17:19Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:47:19Z, iat=2026-01-12T02:17:19Z, nonce=VBu55lFuANHQRxqlcc41Z9dOsxeFvZTk_sG3Yyds16g, jti=a289dda5-82c5-444b-8d75-dad97d70ad25, authorities=[ROLE_PRODUCT_MANAGER], sid=57Y1lPRW3f52oGq2hXVs2AHxo_DiJ71BgImJcWlhRyA}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=8b132bcc-d41c-42d1-84ed-ee4b5b93ad74], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:17:25.339 | DEBUG | LogoutFilter: Logging out [OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:17:19Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:47:19Z, iat=2026-01-12T02:17:19Z, nonce=VBu55lFuANHQRxqlcc41Z9dOsxeFvZTk_sG3Yyds16g, jti=a289dda5-82c5-444b-8d75-dad97d70ad25, authorities=[ROLE_PRODUCT_MANAGER], sid=57Y1lPRW3f52oGq2hXVs2AHxo_DiJ71BgImJcWlhRyA}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=8b132bcc-d41c-42d1-84ed-ee4b5b93ad74], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:17:25.344 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:17:25.345 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE SESSION_ID = ?
AND MAX_INACTIVE_INTERVAL >= 0
]
09:17:25.345 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [0d5bebd1-1791-48d1-b4df-57e11afceef0], value class [java.lang.String], SQL type unknown
09:17:25.354 | DEBUG | SecurityContextLogoutHandler: Invalidated session 0d5bebd1-1791-48d1-b4df-57e11afceef0
09:17:25.355 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:17:25.356 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:17:25.361 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:17:25.361 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
09:17:25.363 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
09:17:25.363 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
09:17:55.295 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
09:17:55.297 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=Z9_qrPuJa1gZuSsn7s2q5llsUBKu-Z4PRYC8jLVtFzc%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=6CdX_iu8QZqcI7-fz7uATDvuGtwQcgBYvPbD5JcqHl0
09:17:55.299 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:17:55.299 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
09:17:55.302 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:17:55.302 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
09:17:55.374 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=9iRUEa3izjwozuS7bsmQ-EWeIT--kbHCZBErVwGYxEJEc_etpA95ntUg9g_G-Un5Im6HY-slCfehobfYNlCID8O5l21BVJ2emeXDeNcyAoGESmw9ZOpDrq6m1BUZDlqS&state=Z9_qrPuJa1gZuSsn7s2q5llsUBKu-Z4PRYC8jLVtFzc%3D
09:17:55.376 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:17:55.376 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:17:55.878 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:17:55.879 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
09:17:55.879 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
09:17:55.879 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-12 09:17:55.7893416], value class [java.sql.Timestamp], SQL type 93
09:17:55.879 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-12 09:32:55.7893416], value class [java.sql.Timestamp], SQL type 93
09:17:55.880 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
09:17:55.880 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-12 09:17:55.7893416], value class [java.sql.Timestamp], SQL type 93
09:17:55.880 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
09:17:55.880 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
09:17:55.883 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:17:55.884 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO oauth2_authorized_client (client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
09:17:55.885 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
09:17:55.886 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
09:17:55.887 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [Bearer], value class [java.lang.String], SQL type 12
09:17:55.887 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [2026-01-12 09:17:55.7893416], value class [java.sql.Timestamp], SQL type 93
09:17:55.888 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 6, parameter value [2026-01-12 09:32:55.7893416], value class [java.sql.Timestamp], SQL type 93
09:17:55.892 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [openid,profile], value class [java.lang.String], SQL type 12
09:17:55.893 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [2026-01-12 09:17:55.7893416], value class [java.sql.Timestamp], SQL type 93
09:17:55.902 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 8607cacc-eb50-4091-98dc-d0d78b1e732a
09:17:55.903 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
09:17:55.904 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:17:55Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:47:55Z, iat=2026-01-12T02:17:55Z, nonce=6CdX_iu8QZqcI7-fz7uATDvuGtwQcgBYvPbD5JcqHl0, jti=88d3886c-e0b9-4b36-b212-05cd061d4843, authorities=[ROLE_PRODUCT_MANAGER], sid=9aSCp6rp4ToBXgynqnCRKgbQ9dns9cSMKrG4pcRHh_U}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=8607cacc-eb50-4091-98dc-d0d78b1e732a], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@22d4d589]
09:17:55.905 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:17:55Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:47:55Z, iat=2026-01-12T02:17:55Z, nonce=6CdX_iu8QZqcI7-fz7uATDvuGtwQcgBYvPbD5JcqHl0, jti=88d3886c-e0b9-4b36-b212-05cd061d4843, authorities=[ROLE_PRODUCT_MANAGER], sid=9aSCp6rp4ToBXgynqnCRKgbQ9dns9cSMKrG4pcRHh_U}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=8607cacc-eb50-4091-98dc-d0d78b1e732a], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
09:17:55.907 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:17:55.908 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
09:17:55.911 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:17:55.911 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
09:17:55.916 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:17:55.917 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
09:17:55.926 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:17:55.927 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:17:56.361 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
09:17:56.363 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:17:56.363 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:17:56.369 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:17:55Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:47:55Z, iat=2026-01-12T02:17:55Z, nonce=6CdX_iu8QZqcI7-fz7uATDvuGtwQcgBYvPbD5JcqHl0, jti=88d3886c-e0b9-4b36-b212-05cd061d4843, authorities=[ROLE_PRODUCT_MANAGER], sid=9aSCp6rp4ToBXgynqnCRKgbQ9dns9cSMKrG4pcRHh_U}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=8607cacc-eb50-4091-98dc-d0d78b1e732a], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:17:56.370 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
09:17:56.375 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:17:56.375 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
09:17:56.384 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:17:56.384 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:17:58.603 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/logout
09:17:58.610 | DEBUG | FilterChainProxy: Securing POST /protected/logout
09:17:58.623 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:17:58.623 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:17:58.630 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:17:55Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:47:55Z, iat=2026-01-12T02:17:55Z, nonce=6CdX_iu8QZqcI7-fz7uATDvuGtwQcgBYvPbD5JcqHl0, jti=88d3886c-e0b9-4b36-b212-05cd061d4843, authorities=[ROLE_PRODUCT_MANAGER], sid=9aSCp6rp4ToBXgynqnCRKgbQ9dns9cSMKrG4pcRHh_U}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=8607cacc-eb50-4091-98dc-d0d78b1e732a], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:17:58.631 | DEBUG | LogoutFilter: Logging out [OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:17:55Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:47:55Z, iat=2026-01-12T02:17:55Z, nonce=6CdX_iu8QZqcI7-fz7uATDvuGtwQcgBYvPbD5JcqHl0, jti=88d3886c-e0b9-4b36-b212-05cd061d4843, authorities=[ROLE_PRODUCT_MANAGER], sid=9aSCp6rp4ToBXgynqnCRKgbQ9dns9cSMKrG4pcRHh_U}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=8607cacc-eb50-4091-98dc-d0d78b1e732a], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:17:58.632 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:17:58.632 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE SESSION_ID = ?
AND MAX_INACTIVE_INTERVAL >= 0
]
09:17:58.633 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [1d775080-c3c8-4233-98a8-56e057ecf3fa], value class [java.lang.String], SQL type unknown
09:17:58.643 | DEBUG | SecurityContextLogoutHandler: Invalidated session 1d775080-c3c8-4233-98a8-56e057ecf3fa
09:17:58.653 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:17:58.653 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:17:58.655 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:17:58.656 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
09:17:58.656 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
09:17:58.656 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
09:18:03.765 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
09:18:03.766 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:18:03.774 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@37a21ab, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
09:18:03.776 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@614aaa7d, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
09:18:03.776 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@3590c105
09:18:04.116 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
09:18:04.118 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
09:18:05.016 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:18:05.216 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
09:18:05.216 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
09:18:05.228 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
09:18:05.228 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
09:18:05.230 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
09:18:05.230 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
09:18:05.237 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
09:18:05.238 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
09:18:05.243 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
09:18:05.249 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
09:18:05.251 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
09:18:05.251 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
09:18:05.363 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:18:05.380 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
09:18:05.392 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
09:18:05.393 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:18:05.455 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
09:18:05.458 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
09:18:05.482 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:18:05.486 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:18:05.498 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:18:05.509 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
09:18:05.511 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:18:05.521 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
09:18:05.534 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
09:18:05.538 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:18:05.542 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
09:18:05.619 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:18:05.630 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:18:05.662 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:19:03.626 | DEBUG | FilterChainProxy: Securing GET /protected/logout
09:19:03.629 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:19:03.751 | DEBUG | HttpSessionRequestCache: Saved request https://bff.bookommerce.com:8181/protected/logout?continue to session
09:19:03.753 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@37a21ab, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
09:19:03.754 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint@1f1c972a
09:19:03.755 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/page/login
09:19:03.758 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:19:03.758 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
09:19:03.760 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:19:03.760 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
09:24:38.027 | INFO | LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener: Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
09:24:38.132 | INFO | GracefulShutdown: Commencing graceful shutdown. Waiting for active requests to complete
09:24:38.180 | INFO | GracefulShutdown: Graceful shutdown complete
09:24:38.241 | INFO | LocalContainerEntityManagerFactoryBean: Closing JPA EntityManagerFactory for persistence unit 'default'
09:24:38.276 | INFO | HikariDataSource: HikariPool-6 - Shutdown initiated...
09:24:38.314 | INFO | HikariDataSource: HikariPool-6 - Shutdown completed.
09:24:39.444 | INFO | BeForFeApplication: Starting BeForFeApplication using Java 21.0.3 with PID 17468 (C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes started by PC in C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe)
09:24:39.444 | INFO | BeForFeApplication: No active profile set, falling back to 1 default profile: "default"
09:24:40.006 | INFO | RepositoryConfigurationDelegate: Bootstrapping Spring Data JPA repositories in DEFAULT mode.
09:24:40.017 | INFO | RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 7 ms. Found 0 JPA repository interfaces.
09:24:40.125 | INFO | GenericScope: BeanFactory id=9f238d32-db58-3e04-8344-6f44253e8abb
09:24:40.396 | INFO | TomcatWebServer: Tomcat initialized with port 8181 (https)
09:24:40.401 | INFO | StandardService: Starting service [Tomcat]
09:24:40.405 | INFO | StandardEngine: Starting Servlet engine: [Apache Tomcat/10.1.50]
09:24:40.460 | INFO | [/]: Initializing Spring embedded WebApplicationContext
09:24:40.460 | INFO | ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 903 ms
09:24:40.625 | INFO | LogHelper: HHH000204: Processing PersistenceUnitInfo [name: default]
09:24:40.646 | INFO | RegionFactoryInitiator: HHH000026: Second-level cache disabled
09:24:40.696 | INFO | SpringPersistenceUnitInfo: No LoadTimeWeaver setup: ignoring JPA class transformer
09:24:40.698 | INFO | HikariDataSource: HikariPool-7 - Starting...
09:24:40.763 | INFO | HikariPool: HikariPool-7 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3793fe1e
09:24:40.770 | INFO | HikariDataSource: HikariPool-7 - Start completed.
09:24:40.780 | WARN | deprecation: HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
09:24:40.782 | INFO | pooling: HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-7)']
	Database driver: undefined/unknown
	Database version: 8.0.44
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
09:24:40.990 | INFO | JtaPlatformInitiator: HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
09:24:41.106 | INFO | LocalContainerEntityManagerFactoryBean: Initialized JPA EntityManagerFactory for persistence unit 'default'
09:24:41.246 | WARN | JpaBaseConfiguration$JpaWebConfiguration: spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
09:24:41.429 | DEBUG | AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder: No authenticationProviders and no parentAuthenticationManager defined. Returning null.
09:24:41.564 | DEBUG | DefaultSecurityFilterChain: Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, OAuth2AuthorizationRequestRedirectFilter, OAuth2LoginAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
09:24:41.758 | INFO | OptionalLiveReloadServer: LiveReload server is running on port 35729
09:24:41.847 | INFO | certificate: Connector [https-jsse-nio-8181], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [Set directly - location unknown] using alias [bookommerce_ssl] with trust store [C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes\bookommerce-ssl.p12]
09:24:41.854 | INFO | TomcatWebServer: Tomcat started on port 8181 (https) with context path '/'
09:24:41.867 | INFO | BeForFeApplication: Started BeForFeApplication in 2.569 seconds (process running for 4882.696)
09:24:41.870 | INFO | ConditionEvaluationDeltaLoggingListener: Condition evaluation unchanged
09:24:51.392 | INFO | LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener: Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
09:24:51.394 | INFO | GracefulShutdown: Commencing graceful shutdown. Waiting for active requests to complete
09:24:51.405 | INFO | GracefulShutdown: Graceful shutdown complete
09:24:51.412 | INFO | LocalContainerEntityManagerFactoryBean: Closing JPA EntityManagerFactory for persistence unit 'default'
09:24:51.414 | INFO | HikariDataSource: HikariPool-7 - Shutdown initiated...
09:24:51.422 | INFO | HikariDataSource: HikariPool-7 - Shutdown completed.
09:24:51.589 | INFO | BeForFeApplication: Starting BeForFeApplication using Java 21.0.3 with PID 17468 (C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes started by PC in C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe)
09:24:51.589 | INFO | BeForFeApplication: No active profile set, falling back to 1 default profile: "default"
09:24:51.914 | INFO | RepositoryConfigurationDelegate: Bootstrapping Spring Data JPA repositories in DEFAULT mode.
09:24:51.920 | INFO | RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 4 ms. Found 0 JPA repository interfaces.
09:24:51.986 | INFO | GenericScope: BeanFactory id=9f238d32-db58-3e04-8344-6f44253e8abb
09:24:52.052 | INFO | TomcatWebServer: Tomcat initialized with port 8181 (https)
09:24:52.053 | INFO | StandardService: Starting service [Tomcat]
09:24:52.053 | INFO | StandardEngine: Starting Servlet engine: [Apache Tomcat/10.1.50]
09:24:52.085 | INFO | [/]: Initializing Spring embedded WebApplicationContext
09:24:52.085 | INFO | ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 443 ms
09:24:52.119 | INFO | LogHelper: HHH000204: Processing PersistenceUnitInfo [name: default]
09:24:52.121 | INFO | RegionFactoryInitiator: HHH000026: Second-level cache disabled
09:24:52.129 | INFO | SpringPersistenceUnitInfo: No LoadTimeWeaver setup: ignoring JPA class transformer
09:24:52.130 | INFO | HikariDataSource: HikariPool-8 - Starting...
09:24:52.146 | INFO | HikariPool: HikariPool-8 - Added connection com.mysql.cj.jdbc.ConnectionImpl@47a73d12
09:24:52.146 | INFO | HikariDataSource: HikariPool-8 - Start completed.
09:24:52.148 | WARN | deprecation: HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
09:24:52.148 | INFO | pooling: HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-8)']
	Database driver: undefined/unknown
	Database version: 8.0.44
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
09:24:52.205 | INFO | JtaPlatformInitiator: HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
09:24:52.223 | INFO | LocalContainerEntityManagerFactoryBean: Initialized JPA EntityManagerFactory for persistence unit 'default'
09:24:52.271 | WARN | JpaBaseConfiguration$JpaWebConfiguration: spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
09:24:52.564 | DEBUG | AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder: No authenticationProviders and no parentAuthenticationManager defined. Returning null.
09:24:52.666 | DEBUG | DefaultSecurityFilterChain: Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, OAuth2AuthorizationRequestRedirectFilter, OAuth2LoginAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
09:24:52.762 | INFO | OptionalLiveReloadServer: LiveReload server is running on port 35729
09:24:52.847 | INFO | certificate: Connector [https-jsse-nio-8181], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [Set directly - location unknown] using alias [bookommerce_ssl] with trust store [C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes\bookommerce-ssl.p12]
09:24:52.852 | INFO | TomcatWebServer: Tomcat started on port 8181 (https) with context path '/'
09:24:52.865 | INFO | BeForFeApplication: Started BeForFeApplication in 1.314 seconds (process running for 4893.693)
09:24:52.866 | INFO | ConditionEvaluationDeltaLoggingListener: Condition evaluation unchanged
09:26:52.692 | INFO | [/]: Initializing Spring DispatcherServlet 'dispatcherServlet'
09:26:52.708 | INFO | DispatcherServlet: Initializing Servlet 'dispatcherServlet'
09:26:52.847 | INFO | DispatcherServlet: Completed initialization in 135 ms
09:26:52.914 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
09:26:52.937 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=COzVmthg_Zvv4QalXEm5LdujY8Dz-3tJBOBnR0x7R3c%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=qb6Wo7WVL-eEjW-RPmuoDxACnLQJOLIVU0xZAVHhmKs
09:26:53.038 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:26:53.039 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
09:26:53.064 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:26:53.065 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
09:26:53.254 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=zUMpDDe1Hhn2udhvB_afRivkwEN_4LElygy0VuWU7XLVLnpjN7r-ZwmCi6wVCV7mQL7ByauLqwFmVPbwAEuv0grYPxCIbkHhTkagsjS9c_6_9CC57rYQpH90BB04tPig&state=COzVmthg_Zvv4QalXEm5LdujY8Dz-3tJBOBnR0x7R3c%3D
09:26:53.262 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:26:53.262 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:26:53.864 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:26:53.865 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
09:26:53.868 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
09:26:53.871 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-12 09:26:53.7720158], value class [java.sql.Timestamp], SQL type 93
09:26:53.871 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-12 09:41:53.7720158], value class [java.sql.Timestamp], SQL type 93
09:26:53.872 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
09:26:53.872 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-12 09:26:53.7720158], value class [java.sql.Timestamp], SQL type 93
09:26:53.872 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
09:26:53.873 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
09:26:53.883 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:26:53.884 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO oauth2_authorized_client (client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
09:26:53.885 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
09:26:53.886 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
09:26:53.886 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [Bearer], value class [java.lang.String], SQL type 12
09:26:53.886 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [2026-01-12 09:26:53.7720158], value class [java.sql.Timestamp], SQL type 93
09:26:53.886 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 6, parameter value [2026-01-12 09:41:53.7720158], value class [java.sql.Timestamp], SQL type 93
09:26:53.887 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [openid,profile], value class [java.lang.String], SQL type 12
09:26:53.887 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [2026-01-12 09:26:53.7720158], value class [java.sql.Timestamp], SQL type 93
09:26:53.894 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 982e7df3-95ca-47f9-88b2-115c0feb086c
09:26:53.901 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
09:26:53.906 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:26:53Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:56:53Z, iat=2026-01-12T02:26:53Z, nonce=qb6Wo7WVL-eEjW-RPmuoDxACnLQJOLIVU0xZAVHhmKs, jti=f0d4f213-27e3-4bf8-8f69-b93f429065db, authorities=[ROLE_CUSTOMER], sid=ZVH45jeunzUpn3eTq1BAc3cU0Car72s2D1HwUxKpbIA}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=982e7df3-95ca-47f9-88b2-115c0feb086c], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@e3c5050]
09:26:53.907 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:26:53Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:56:53Z, iat=2026-01-12T02:26:53Z, nonce=qb6Wo7WVL-eEjW-RPmuoDxACnLQJOLIVU0xZAVHhmKs, jti=f0d4f213-27e3-4bf8-8f69-b93f429065db, authorities=[ROLE_CUSTOMER], sid=ZVH45jeunzUpn3eTq1BAc3cU0Car72s2D1HwUxKpbIA}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=982e7df3-95ca-47f9-88b2-115c0feb086c], Granted Authorities=[ROLE_CUSTOMER]]
09:26:53.918 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:26:53.919 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
09:26:53.923 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:26:53.923 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
09:26:53.929 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:26:53.930 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
09:26:53.937 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:26:53.937 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:26:54.794 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
09:26:54.814 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:26:54.814 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:26:54.834 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:26:53Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:56:53Z, iat=2026-01-12T02:26:53Z, nonce=qb6Wo7WVL-eEjW-RPmuoDxACnLQJOLIVU0xZAVHhmKs, jti=f0d4f213-27e3-4bf8-8f69-b93f429065db, authorities=[ROLE_CUSTOMER], sid=ZVH45jeunzUpn3eTq1BAc3cU0Car72s2D1HwUxKpbIA}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=982e7df3-95ca-47f9-88b2-115c0feb086c], Granted Authorities=[ROLE_CUSTOMER]]]
09:26:54.834 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
09:26:54.979 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:26:54.980 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
09:26:54.993 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:26:54.993 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:26:55.236 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
09:26:55.238 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
09:26:55.884 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:26:56.145 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
09:26:56.157 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
09:26:56.157 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
09:26:56.157 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
09:26:56.158 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
09:26:56.158 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
09:26:56.160 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
09:26:56.163 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
09:26:56.163 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
09:26:56.166 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
09:26:56.168 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
09:26:56.172 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
09:26:56.273 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:26:56.287 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
09:26:56.300 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
09:26:56.330 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:26:56.334 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
09:26:56.338 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
09:26:56.430 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:26:56.436 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:26:56.442 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
09:26:56.447 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:26:56.449 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
09:26:56.451 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
09:26:56.452 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:26:56.453 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:26:56.455 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
09:26:56.484 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:26:56.546 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:26:56.547 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:29:14.035 | DEBUG | FilterChainProxy: Securing POST /protected/logout
09:29:14.097 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:29:14.097 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:29:14.131 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:26:53Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:56:53Z, iat=2026-01-12T02:26:53Z, nonce=qb6Wo7WVL-eEjW-RPmuoDxACnLQJOLIVU0xZAVHhmKs, jti=f0d4f213-27e3-4bf8-8f69-b93f429065db, authorities=[ROLE_CUSTOMER], sid=ZVH45jeunzUpn3eTq1BAc3cU0Car72s2D1HwUxKpbIA}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=982e7df3-95ca-47f9-88b2-115c0feb086c], Granted Authorities=[ROLE_CUSTOMER]]]
09:29:14.132 | DEBUG | LogoutFilter: Logging out [OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:26:53Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:56:53Z, iat=2026-01-12T02:26:53Z, nonce=qb6Wo7WVL-eEjW-RPmuoDxACnLQJOLIVU0xZAVHhmKs, jti=f0d4f213-27e3-4bf8-8f69-b93f429065db, authorities=[ROLE_CUSTOMER], sid=ZVH45jeunzUpn3eTq1BAc3cU0Car72s2D1HwUxKpbIA}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=982e7df3-95ca-47f9-88b2-115c0feb086c], Granted Authorities=[ROLE_CUSTOMER]]]
09:29:14.139 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:29:14.140 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE SESSION_ID = ?
AND MAX_INACTIVE_INTERVAL >= 0
]
09:29:14.142 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [dd3eba72-61ad-4fc5-b8f7-a64cfbd9d71c], value class [java.lang.String], SQL type unknown
09:29:14.156 | DEBUG | SecurityContextLogoutHandler: Invalidated session dd3eba72-61ad-4fc5-b8f7-a64cfbd9d71c
09:29:14.158 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:29:14.158 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:29:14.166 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:29:14.167 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
09:29:14.167 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
09:29:14.167 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
09:29:14.184 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/connect/logout?id_token_hint=eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJuZ3V5ZW52aWV0YW5oLnBlcnNvbmFsQGdtYWlsLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2ODE4NDgxMywiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY4MTg2NjEzLCJpYXQiOjE3NjgxODQ4MTMsIm5vbmNlIjoicWI2V283V1ZMLWVFalctUlBtdW9EeEFDbkxRSk9MSVZVMHhaQVZIaG1LcyIsImp0aSI6ImYwZDRmMjEzLTI3ZTMtNGJmOC04ZjY5LWI5M2Y0MjkwNjVkYiIsImF1dGhvcml0aWVzIjpbIlJPTEVfQ1VTVE9NRVIiXSwic2lkIjoiWlZINDVqZXVuelVwbjNlVHExQkFjM2NVMENhcjcyczJEMUh3VXhLcGJJQSJ9.HfbRTVoOvF-tvdHA_OwzSiCSiqYTxYvDKa_WEvwYB07NqcCPcorUaK_YVs4U6Jwf0X8xr1JIdYGM6hGQzWBkRhs0WA5wa9s2vzidhJFqBXRK8zcU2YW7Ftv9h3surV6cpYJsFN8LfkOjAHdP0oGEp46Pj_RjepsdQEQLpwcB0NDa1R0o5uONyecpzS3r5Lli7WF31OF_ZaX3f4wegWPi49JN3q6C43dD2geqGWEuy3kw0hkrjOo3_tk5llDwTI45Ryv5Oe_RW5M10CN_m6_uozzqFYfGEBRQFkmyiU4GR4TuIVJ4RAc8ASkxNmUR0B3EU7TRsxdu-MDt3oEiIDQI4g&post_logout_redirect_uri=https://app.bookommerce.com:8080
09:29:15.109 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
09:29:15.111 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:29:15.122 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@97ab7aa, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
09:29:15.123 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@7bd48f5, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
09:29:15.124 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@382dcda
09:29:15.338 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
09:29:15.341 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
09:29:15.608 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:29:15.786 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
09:29:15.787 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
09:29:15.788 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
09:29:15.791 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
09:29:15.794 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
09:29:15.797 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
09:29:15.817 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
09:29:15.822 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
09:29:15.817 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
09:29:15.827 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
09:29:15.828 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
09:29:15.829 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
09:29:15.852 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:29:15.856 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
09:29:15.857 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
09:29:15.914 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:29:15.921 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:29:15.922 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
09:29:15.922 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
09:29:15.924 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:29:15.927 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
09:29:15.931 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
09:29:15.934 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
09:29:15.979 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
09:29:15.996 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:29:16.021 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:29:16.040 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:29:16.040 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:29:16.085 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:29:16.085 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
09:29:21.803 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
09:29:21.805 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=eM0vvb8uTb5bTQmTRMyzQ6lJ23PJFmZ44DRuHUGWmlM%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=t_7KjzQQ_eo7iVAYGjT3UZNBmMLyFbj2jLIte700g2Q
09:29:21.807 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:29:21.809 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
09:29:21.813 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:29:21.815 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
09:29:29.674 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
09:29:29.678 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:29:29.679 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:29:29.686 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=goFhITEX604nzKrhbx8b3UvI4NDVVPVeX9-GLn45p_Y%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=ay7M9gTCDXXCHNBHZA1MJ98liR6q9Qkb6woH39D-Lgs
09:29:29.688 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:29:29.689 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
09:29:29.691 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:29:29.691 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
09:29:29.700 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:29:29.700 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:29:29.762 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=-ATh4d4mu6GIxG0Z_THaOWhThF9Krri4Au68chY_bVtwxzpX4gW_O_mYIvN493qWfE1pbHVUEZhYe4dKHfJ8taXoK5bCyiwO0eL5HnA9MT1sXnwN-Zeh_2CcGdHHPldc&state=goFhITEX604nzKrhbx8b3UvI4NDVVPVeX9-GLn45p_Y%3D
09:29:29.763 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:29:29.764 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:29:30.205 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:29:30.205 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
09:29:30.206 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
09:29:30.206 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-12 09:29:30.1577012], value class [java.sql.Timestamp], SQL type 93
09:29:30.207 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-12 09:44:30.1577012], value class [java.sql.Timestamp], SQL type 93
09:29:30.207 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
09:29:30.207 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-12 09:29:30.1577012], value class [java.sql.Timestamp], SQL type 93
09:29:30.207 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
09:29:30.208 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
09:29:30.210 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:29:30.210 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO oauth2_authorized_client (client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
09:29:30.211 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
09:29:30.211 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
09:29:30.214 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [Bearer], value class [java.lang.String], SQL type 12
09:29:30.217 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [2026-01-12 09:29:30.1577012], value class [java.sql.Timestamp], SQL type 93
09:29:30.217 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 6, parameter value [2026-01-12 09:44:30.1577012], value class [java.sql.Timestamp], SQL type 93
09:29:30.218 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [openid,profile], value class [java.lang.String], SQL type 12
09:29:30.218 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [2026-01-12 09:29:30.1577012], value class [java.sql.Timestamp], SQL type 93
09:29:30.223 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 059068c3-e4a2-4a82-b59a-92d47b00dc18
09:29:30.224 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
09:29:30.224 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:29:29Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:59:30Z, iat=2026-01-12T02:29:30Z, nonce=ay7M9gTCDXXCHNBHZA1MJ98liR6q9Qkb6woH39D-Lgs, jti=01d84fbe-dba3-40e3-9e08-f12a7b431412, authorities=[ROLE_PRODUCT_MANAGER], sid=0nVTc3pN4ciV7OwG6J7XSdisul4ue_jj_q2gDhFnQDI}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=059068c3-e4a2-4a82-b59a-92d47b00dc18], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@41f771f0]
09:29:30.225 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:29:29Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:59:30Z, iat=2026-01-12T02:29:30Z, nonce=ay7M9gTCDXXCHNBHZA1MJ98liR6q9Qkb6woH39D-Lgs, jti=01d84fbe-dba3-40e3-9e08-f12a7b431412, authorities=[ROLE_PRODUCT_MANAGER], sid=0nVTc3pN4ciV7OwG6J7XSdisul4ue_jj_q2gDhFnQDI}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=059068c3-e4a2-4a82-b59a-92d47b00dc18], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
09:29:30.228 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:29:30.228 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
09:29:30.233 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:29:30.233 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
09:29:30.239 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:29:30.239 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
09:29:30.243 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:29:30.243 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:29:30.852 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
09:29:30.856 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:29:30.856 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:29:30.860 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:29:29Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:59:30Z, iat=2026-01-12T02:29:30Z, nonce=ay7M9gTCDXXCHNBHZA1MJ98liR6q9Qkb6woH39D-Lgs, jti=01d84fbe-dba3-40e3-9e08-f12a7b431412, authorities=[ROLE_PRODUCT_MANAGER], sid=0nVTc3pN4ciV7OwG6J7XSdisul4ue_jj_q2gDhFnQDI}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=059068c3-e4a2-4a82-b59a-92d47b00dc18], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:29:30.861 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
09:29:30.871 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:29:30.871 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
09:29:30.877 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:29:30.877 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:30:18.052 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
09:30:18.058 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:30:18.059 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:30:18.068 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:29:29Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:59:30Z, iat=2026-01-12T02:29:30Z, nonce=ay7M9gTCDXXCHNBHZA1MJ98liR6q9Qkb6woH39D-Lgs, jti=01d84fbe-dba3-40e3-9e08-f12a7b431412, authorities=[ROLE_PRODUCT_MANAGER], sid=0nVTc3pN4ciV7OwG6J7XSdisul4ue_jj_q2gDhFnQDI}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=059068c3-e4a2-4a82-b59a-92d47b00dc18], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:30:18.069 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
09:30:18.074 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:30:18.074 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
09:30:18.083 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:30:18.083 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:30:18.970 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
09:30:18.972 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:30:18.972 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:30:18.976 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:29:29Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:59:30Z, iat=2026-01-12T02:29:30Z, nonce=ay7M9gTCDXXCHNBHZA1MJ98liR6q9Qkb6woH39D-Lgs, jti=01d84fbe-dba3-40e3-9e08-f12a7b431412, authorities=[ROLE_PRODUCT_MANAGER], sid=0nVTc3pN4ciV7OwG6J7XSdisul4ue_jj_q2gDhFnQDI}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=059068c3-e4a2-4a82-b59a-92d47b00dc18], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:30:18.977 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
09:30:18.979 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:30:18.980 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
09:30:18.987 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:30:18.987 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:30:33.756 | DEBUG | FilterChainProxy: Securing POST /protected/logout
09:30:33.760 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:30:33.760 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:30:33.764 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:29:29Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:59:30Z, iat=2026-01-12T02:29:30Z, nonce=ay7M9gTCDXXCHNBHZA1MJ98liR6q9Qkb6woH39D-Lgs, jti=01d84fbe-dba3-40e3-9e08-f12a7b431412, authorities=[ROLE_PRODUCT_MANAGER], sid=0nVTc3pN4ciV7OwG6J7XSdisul4ue_jj_q2gDhFnQDI}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=059068c3-e4a2-4a82-b59a-92d47b00dc18], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:30:33.764 | DEBUG | LogoutFilter: Logging out [OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:29:29Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T02:59:30Z, iat=2026-01-12T02:29:30Z, nonce=ay7M9gTCDXXCHNBHZA1MJ98liR6q9Qkb6woH39D-Lgs, jti=01d84fbe-dba3-40e3-9e08-f12a7b431412, authorities=[ROLE_PRODUCT_MANAGER], sid=0nVTc3pN4ciV7OwG6J7XSdisul4ue_jj_q2gDhFnQDI}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=059068c3-e4a2-4a82-b59a-92d47b00dc18], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:30:33.766 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:30:33.767 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE SESSION_ID = ?
AND MAX_INACTIVE_INTERVAL >= 0
]
09:30:33.767 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [0559d463-ea09-4e27-bb15-358135b0b7cc], value class [java.lang.String], SQL type unknown
09:30:33.775 | DEBUG | SecurityContextLogoutHandler: Invalidated session 0559d463-ea09-4e27-bb15-358135b0b7cc
09:30:33.776 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:30:33.778 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:30:33.781 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:30:33.781 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
09:30:33.782 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
09:30:33.782 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
09:30:33.789 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/connect/logout?id_token_hint=eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJwcm9kbWFuQGJvb2tvbW1lcmNlLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2ODE4NDk2OSwiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY4MTg2NzcwLCJpYXQiOjE3NjgxODQ5NzAsIm5vbmNlIjoiYXk3TTlnVENEWFhDSE5CSFpBMU1KOThsaVI2cTlRa2I2d29IMzlELUxncyIsImp0aSI6IjAxZDg0ZmJlLWRiYTMtNDBlMy05ZTA4LWYxMmE3YjQzMTQxMiIsImF1dGhvcml0aWVzIjpbIlJPTEVfUFJPRFVDVF9NQU5BR0VSIl0sInNpZCI6IjBuVlRjM3BONGNpVjdPd0c2SjdYU2Rpc3VsNHVlX2pqX3EyZ0RoRm5RREkifQ.Wzf4vZilVrf7xE5tjtCMdUMNd2r67M-pJKCeZ1AHk699sNqbXxw_EGeTMtArbsCtV29OehR1G837c_F71dbw6n7tgS1YNL5kLWI5ibwrUYtQwhdMrs2gueLeOjrI4HnF_BWE0vh0riXwC7BnlV0th7eNS2fiRIoApSxZT7pOyxS48KZGaF5W-8PXkTM_awWIn20IRFSdNfGIwk6PmlH-2Z6L0DlpwyIkoomnQlJKWEll8fFrhjNhdUNnbYY4gDddvv33xpxvxwATpqo5Baj1swkUww86O73EVIKuFqc7FwYUB1tDVQi2cTZxzwU7PLtSe6C7km4NQTmN9eOT-iwwYg&post_logout_redirect_uri=https://auth.bookommerce.com:8282/page/store-login
09:32:26.792 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
09:32:26.794 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=P-ZEPx6wxwLJfrOGNbZlx_ioBOxJbBNGveuZGNEK4NQ%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=08byXHlZL1xj7lrlzEHuIDq8wbE8WpT7VTI9aphgFLU
09:32:26.797 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:32:26.797 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
09:32:26.804 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:32:26.805 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
09:32:27.041 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=NHuOummLQ4ZwS7rAk5iaPttM55-cPxYzImV2095kBXZTB2S66zYF9Rxx9b6WmXBenGM307ojIzMp3vRXIEW5jKQ99up0BCxywr2MXa6rUOjSMlZQGnHXpkIa335jvu9u&state=P-ZEPx6wxwLJfrOGNbZlx_ioBOxJbBNGveuZGNEK4NQ%3D
09:32:27.043 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:32:27.044 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:32:27.620 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:32:27.620 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
09:32:27.621 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
09:32:27.621 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-12 09:32:27.5747981], value class [java.sql.Timestamp], SQL type 93
09:32:27.621 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-12 09:47:26.5747981], value class [java.sql.Timestamp], SQL type 93
09:32:27.623 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
09:32:27.623 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-12 09:32:27.5747981], value class [java.sql.Timestamp], SQL type 93
09:32:27.623 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
09:32:27.624 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
09:32:27.626 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:32:27.626 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO oauth2_authorized_client (client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
09:32:27.627 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
09:32:27.627 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
09:32:27.627 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [Bearer], value class [java.lang.String], SQL type 12
09:32:27.627 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [2026-01-12 09:32:27.5747981], value class [java.sql.Timestamp], SQL type 93
09:32:27.627 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 6, parameter value [2026-01-12 09:47:26.5747981], value class [java.sql.Timestamp], SQL type 93
09:32:27.628 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [openid,profile], value class [java.lang.String], SQL type 12
09:32:27.628 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [2026-01-12 09:32:27.5747981], value class [java.sql.Timestamp], SQL type 93
09:32:27.632 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 55ce16c3-5116-4098-9819-57af08e7e281
09:32:27.633 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
09:32:27.634 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:32:27Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T03:02:27Z, iat=2026-01-12T02:32:27Z, nonce=08byXHlZL1xj7lrlzEHuIDq8wbE8WpT7VTI9aphgFLU, jti=1dc503bd-83b1-48a2-bd4d-5b5491371ae0, authorities=[ROLE_PRODUCT_MANAGER], sid=Sdo0eVfmscdWh2pliDcQvYX0mw_2sOc2ELrh2IrPWQM}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=55ce16c3-5116-4098-9819-57af08e7e281], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@4754e26d]
09:32:27.634 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:32:27Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T03:02:27Z, iat=2026-01-12T02:32:27Z, nonce=08byXHlZL1xj7lrlzEHuIDq8wbE8WpT7VTI9aphgFLU, jti=1dc503bd-83b1-48a2-bd4d-5b5491371ae0, authorities=[ROLE_PRODUCT_MANAGER], sid=Sdo0eVfmscdWh2pliDcQvYX0mw_2sOc2ELrh2IrPWQM}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=55ce16c3-5116-4098-9819-57af08e7e281], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
09:32:27.637 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:32:27.639 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
09:32:27.657 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:32:27.658 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
09:32:27.662 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:32:27.662 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
09:32:27.666 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:32:27.666 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:32:28.267 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
09:32:28.270 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:32:28.270 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:32:28.277 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:32:27Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T03:02:27Z, iat=2026-01-12T02:32:27Z, nonce=08byXHlZL1xj7lrlzEHuIDq8wbE8WpT7VTI9aphgFLU, jti=1dc503bd-83b1-48a2-bd4d-5b5491371ae0, authorities=[ROLE_PRODUCT_MANAGER], sid=Sdo0eVfmscdWh2pliDcQvYX0mw_2sOc2ELrh2IrPWQM}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=55ce16c3-5116-4098-9819-57af08e7e281], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:32:28.278 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
09:32:28.286 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:32:28.286 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
09:32:28.295 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:32:28.295 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:32:53.673 | DEBUG | FilterChainProxy: Securing POST /protected/logout
09:32:53.675 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:32:53.676 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:32:53.682 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:32:27Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T03:02:27Z, iat=2026-01-12T02:32:27Z, nonce=08byXHlZL1xj7lrlzEHuIDq8wbE8WpT7VTI9aphgFLU, jti=1dc503bd-83b1-48a2-bd4d-5b5491371ae0, authorities=[ROLE_PRODUCT_MANAGER], sid=Sdo0eVfmscdWh2pliDcQvYX0mw_2sOc2ELrh2IrPWQM}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=55ce16c3-5116-4098-9819-57af08e7e281], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:32:53.683 | DEBUG | LogoutFilter: Logging out [OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T02:32:27Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T03:02:27Z, iat=2026-01-12T02:32:27Z, nonce=08byXHlZL1xj7lrlzEHuIDq8wbE8WpT7VTI9aphgFLU, jti=1dc503bd-83b1-48a2-bd4d-5b5491371ae0, authorities=[ROLE_PRODUCT_MANAGER], sid=Sdo0eVfmscdWh2pliDcQvYX0mw_2sOc2ELrh2IrPWQM}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=55ce16c3-5116-4098-9819-57af08e7e281], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
09:32:53.686 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:32:53.686 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE SESSION_ID = ?
AND MAX_INACTIVE_INTERVAL >= 0
]
09:32:53.686 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [f4e832db-9782-45c9-8af8-d16344c3d969], value class [java.lang.String], SQL type unknown
09:32:53.691 | DEBUG | SecurityContextLogoutHandler: Invalidated session f4e832db-9782-45c9-8af8-d16344c3d969
09:32:53.692 | DEBUG | JdbcTemplate: Executing prepared SQL query
09:32:53.692 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
09:32:53.697 | DEBUG | JdbcTemplate: Executing prepared SQL update
09:32:53.697 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
09:32:53.697 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
09:32:53.698 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
09:32:53.702 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/connect/logout?id_token_hint=eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJwcm9kbWFuQGJvb2tvbW1lcmNlLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2ODE4NTE0NywiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY4MTg2OTQ3LCJpYXQiOjE3NjgxODUxNDcsIm5vbmNlIjoiMDhieVhIbFpMMXhqN2xybHpFSHVJRHE4d2JFOFdwVDdWVEk5YXBoZ0ZMVSIsImp0aSI6IjFkYzUwM2JkLTgzYjEtNDhhMi1iZDRkLTViNTQ5MTM3MWFlMCIsImF1dGhvcml0aWVzIjpbIlJPTEVfUFJPRFVDVF9NQU5BR0VSIl0sInNpZCI6IlNkbzBlVmZtc2NkV2gycGxpRGNRdllYMG13XzJzT2MyRUxyaDJJclBXUU0ifQ.iorTpx08Ej91Ko0bAHfljZMFzL7hnR_l3NwzLi31F_Qv4dTJ0C24BCMIvadVy0rIcXg0UC7JIM9o7mjFSBARHnUbFiv4X_szNPkXHC4AG2frsTQ9sFUVfEBl1YdQiYY495qNTjlhlt9gWQXA7U41eDreM9ehqhFe4jny_9He3Bn1veO6aHuyTVPfqaATv2PoFaXAOpt7YF_1DXUqUGcje3884rXm5fU6kjXMT9Tk6Ca1c2sxVzCzccRbDriV6GItfkaNzDO43P49BJ4vmpmUEZc8VzIjvoH3LZoyfNE0vDVJkub2nBPDOuebvgINyP9NgD3PD8FTiuAIQHq2EaSkzA&post_logout_redirect_uri=https://auth.bookommerce.com:8282/page/store-login
10:31:07.684 | INFO | BeForFeApplication: Starting BeForFeApplication using Java 21.0.3 with PID 9372 (C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes started by PC in C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe)
10:31:07.696 | INFO | BeForFeApplication: No active profile set, falling back to 1 default profile: "default"
10:31:08.199 | INFO | DevToolsPropertyDefaultsPostProcessor: Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
10:31:08.200 | INFO | DevToolsPropertyDefaultsPostProcessor: For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
10:31:11.709 | INFO | RepositoryConfigurationDelegate: Bootstrapping Spring Data JPA repositories in DEFAULT mode.
10:31:11.794 | INFO | RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 48 ms. Found 0 JPA repository interfaces.
10:31:12.817 | INFO | GenericScope: BeanFactory id=9f238d32-db58-3e04-8344-6f44253e8abb
10:31:14.968 | INFO | TomcatWebServer: Tomcat initialized with port 8181 (https)
10:31:15.016 | INFO | StandardService: Starting service [Tomcat]
10:31:15.035 | INFO | StandardEngine: Starting Servlet engine: [Apache Tomcat/10.1.50]
10:31:15.533 | INFO | [/]: Initializing Spring embedded WebApplicationContext
10:31:15.536 | INFO | ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 6709 ms
10:31:17.153 | INFO | LogHelper: HHH000204: Processing PersistenceUnitInfo [name: default]
10:31:17.633 | INFO | Version: HHH000412: Hibernate ORM core version 6.6.39.Final
10:31:17.812 | INFO | RegionFactoryInitiator: HHH000026: Second-level cache disabled
10:31:19.050 | INFO | SpringPersistenceUnitInfo: No LoadTimeWeaver setup: ignoring JPA class transformer
10:31:19.145 | INFO | HikariDataSource: HikariPool-1 - Starting...
10:31:20.527 | INFO | HikariPool: HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1cfb0c2e
10:31:20.535 | INFO | HikariDataSource: HikariPool-1 - Start completed.
10:31:20.695 | WARN | deprecation: HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
10:31:20.760 | INFO | pooling: HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.44
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
10:31:23.750 | INFO | JtaPlatformInitiator: HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
10:31:23.901 | INFO | LocalContainerEntityManagerFactoryBean: Initialized JPA EntityManagerFactory for persistence unit 'default'
10:31:24.325 | WARN | JpaBaseConfiguration$JpaWebConfiguration: spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
10:31:24.968 | DEBUG | AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder: No authenticationProviders and no parentAuthenticationManager defined. Returning null.
10:31:25.690 | DEBUG | DefaultSecurityFilterChain: Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, OAuth2AuthorizationRequestRedirectFilter, OAuth2LoginAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
10:31:27.329 | INFO | OptionalLiveReloadServer: LiveReload server is running on port 35729
10:31:28.359 | INFO | certificate: Connector [https-jsse-nio-8181], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [Set directly - location unknown] using alias [bookommerce_ssl] with trust store [null]
10:31:28.414 | INFO | TomcatWebServer: Tomcat started on port 8181 (https) with context path '/'
10:31:28.700 | INFO | BeForFeApplication: Started BeForFeApplication in 22.966 seconds (process running for 25.264)
10:32:22.956 | INFO | [/]: Initializing Spring DispatcherServlet 'dispatcherServlet'
10:32:22.957 | INFO | DispatcherServlet: Initializing Servlet 'dispatcherServlet'
10:32:22.959 | INFO | DispatcherServlet: Completed initialization in 2 ms
10:32:23.002 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
10:32:23.021 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=LZm0Tac_Xa2IME0TcrQ82wcRE_9h4Djdg24pni29Gc0%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=nnZ_sILqyv1NEQmfdZSXaH9fj1hRyM-3ygiDP5UeolY
10:32:23.089 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:32:23.090 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
10:32:23.107 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:32:23.107 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
10:32:23.477 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=kSs8fXwXZj6lmzS5v73zFwx2jgOYtxEVJJBSxxVsPZIGQ4qkRdAebAqd1a0ZI6j3Lh1zpT312J6-4haHE48LDZkgQIhAvBpXhKP4ipxMYmK5HVocZBDc-tFm6LhsFz5B&state=LZm0Tac_Xa2IME0TcrQ82wcRE_9h4Djdg24pni29Gc0%3D
10:32:23.483 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:32:23.483 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:32:24.549 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:32:24.550 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
10:32:24.559 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
10:32:24.561 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-12 10:32:24.275475], value class [java.sql.Timestamp], SQL type 93
10:32:24.562 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-12 10:47:24.275475], value class [java.sql.Timestamp], SQL type 93
10:32:24.562 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
10:32:24.562 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-12 10:32:24.275475], value class [java.sql.Timestamp], SQL type 93
10:32:24.562 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
10:32:24.563 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
10:32:24.624 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:32:24.626 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO oauth2_authorized_client (client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
10:32:24.628 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
10:32:24.628 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
10:32:24.629 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [Bearer], value class [java.lang.String], SQL type 12
10:32:24.630 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [2026-01-12 10:32:24.275475], value class [java.sql.Timestamp], SQL type 93
10:32:24.630 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 6, parameter value [2026-01-12 10:47:24.275475], value class [java.sql.Timestamp], SQL type 93
10:32:24.630 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [openid,profile], value class [java.lang.String], SQL type 12
10:32:24.631 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [2026-01-12 10:32:24.275475], value class [java.sql.Timestamp], SQL type 93
10:32:24.666 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 81f302b0-9800-4742-bfed-63bd16b1cd08
10:32:24.669 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
10:32:24.670 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:02:24Z, iat=2026-01-12T03:32:24Z, nonce=nnZ_sILqyv1NEQmfdZSXaH9fj1hRyM-3ygiDP5UeolY, jti=dcb67aa4-0d0b-46ef-9f93-67a9ad232aff, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@6236c1b]
10:32:24.672 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:02:24Z, iat=2026-01-12T03:32:24Z, nonce=nnZ_sILqyv1NEQmfdZSXaH9fj1hRyM-3ygiDP5UeolY, jti=dcb67aa4-0d0b-46ef-9f93-67a9ad232aff, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]
10:32:24.684 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:32:24.685 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
10:32:24.707 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:32:24.707 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
10:32:24.746 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:32:24.746 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
10:32:24.769 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:32:24.771 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:32:26.872 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
10:32:26.883 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:32:26.883 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:32:26.896 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:02:24Z, iat=2026-01-12T03:32:24Z, nonce=nnZ_sILqyv1NEQmfdZSXaH9fj1hRyM-3ygiDP5UeolY, jti=dcb67aa4-0d0b-46ef-9f93-67a9ad232aff, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]]
10:32:26.899 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
10:32:27.003 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:32:27.004 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
10:32:27.015 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:32:27.016 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:32:27.282 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
10:32:27.285 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
10:32:28.241 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
10:32:28.481 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
10:32:28.483 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
10:32:28.522 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
10:32:28.527 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
10:32:28.555 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
10:32:28.552 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
10:32:28.561 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
10:32:28.561 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
10:32:28.564 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
10:32:28.565 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
10:32:28.578 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
10:32:28.583 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
10:32:28.634 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
10:32:28.646 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
10:32:28.649 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
10:32:28.776 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
10:32:28.801 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
10:32:28.836 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
10:32:28.838 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
10:32:28.845 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
10:32:28.859 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
10:32:28.860 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
10:32:28.875 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
10:32:28.879 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
10:32:28.894 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
10:32:28.909 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
10:32:28.905 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
10:32:28.915 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
10:32:28.931 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
10:32:28.946 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
10:32:46.935 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/api/carts/items
10:32:46.947 | DEBUG | FilterChainProxy: Securing POST /protected/api/carts/items
10:32:46.951 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:32:46.951 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:32:46.958 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:02:24Z, iat=2026-01-12T03:32:24Z, nonce=nnZ_sILqyv1NEQmfdZSXaH9fj1hRyM-3ygiDP5UeolY, jti=dcb67aa4-0d0b-46ef-9f93-67a9ad232aff, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]]
10:32:46.958 | DEBUG | FilterChainProxy: Secured POST /protected/api/carts/items
10:32:46.974 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:32:46.975 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
10:32:46.976 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
10:32:46.976 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
10:32:47.789 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:32:47.790 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
10:32:47.798 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:32:47.798 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:32:59.153 | DEBUG | FilterChainProxy: Securing GET /api/genres
10:32:59.155 | DEBUG | FilterChainProxy: Secured GET /api/genres
10:32:59.198 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
10:33:22.991 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/api/carts/items
10:33:23.004 | DEBUG | FilterChainProxy: Securing POST /protected/api/carts/items
10:33:23.007 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:33:23.008 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:33:23.017 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:02:24Z, iat=2026-01-12T03:32:24Z, nonce=nnZ_sILqyv1NEQmfdZSXaH9fj1hRyM-3ygiDP5UeolY, jti=dcb67aa4-0d0b-46ef-9f93-67a9ad232aff, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]]
10:33:23.017 | DEBUG | FilterChainProxy: Secured POST /protected/api/carts/items
10:33:23.019 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:33:23.019 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
10:33:23.019 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
10:33:23.020 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
10:33:23.478 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:33:23.478 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
10:33:23.485 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:33:23.486 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:33:57.677 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/api/carts/items
10:33:57.688 | DEBUG | FilterChainProxy: Securing POST /protected/api/carts/items
10:33:57.690 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:33:57.691 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:33:57.695 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:02:24Z, iat=2026-01-12T03:32:24Z, nonce=nnZ_sILqyv1NEQmfdZSXaH9fj1hRyM-3ygiDP5UeolY, jti=dcb67aa4-0d0b-46ef-9f93-67a9ad232aff, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]]
10:33:57.697 | DEBUG | FilterChainProxy: Secured POST /protected/api/carts/items
10:33:57.699 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:33:57.701 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
10:33:57.703 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
10:33:57.704 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
10:33:58.186 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:33:58.186 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
10:33:58.192 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:33:58.192 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:36:12.686 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/api/carts/items
10:36:12.729 | DEBUG | FilterChainProxy: Securing POST /protected/api/carts/items
10:36:12.734 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:36:12.734 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:36:12.745 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:02:24Z, iat=2026-01-12T03:32:24Z, nonce=nnZ_sILqyv1NEQmfdZSXaH9fj1hRyM-3ygiDP5UeolY, jti=dcb67aa4-0d0b-46ef-9f93-67a9ad232aff, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]]
10:36:12.745 | DEBUG | FilterChainProxy: Secured POST /protected/api/carts/items
10:36:12.750 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:36:12.751 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
10:36:12.752 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
10:36:12.753 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
10:36:13.303 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:36:13.303 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
10:36:46.931 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:36:46.932 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:40:33.568 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/api/carts/items
10:40:33.591 | DEBUG | FilterChainProxy: Securing POST /protected/api/carts/items
10:40:33.596 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:40:33.596 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:40:33.609 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:02:24Z, iat=2026-01-12T03:32:24Z, nonce=nnZ_sILqyv1NEQmfdZSXaH9fj1hRyM-3ygiDP5UeolY, jti=dcb67aa4-0d0b-46ef-9f93-67a9ad232aff, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]]
10:40:33.610 | DEBUG | FilterChainProxy: Secured POST /protected/api/carts/items
10:40:33.616 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:40:33.616 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
10:40:33.616 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
10:40:33.620 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
10:40:34.114 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:40:34.116 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
10:40:39.362 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:40:39.362 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:40:49.448 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/api/carts/items
10:40:49.492 | DEBUG | FilterChainProxy: Securing POST /protected/api/carts/items
10:40:49.496 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:40:49.497 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:40:49.502 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:02:24Z, iat=2026-01-12T03:32:24Z, nonce=nnZ_sILqyv1NEQmfdZSXaH9fj1hRyM-3ygiDP5UeolY, jti=dcb67aa4-0d0b-46ef-9f93-67a9ad232aff, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]]
10:40:49.502 | DEBUG | FilterChainProxy: Secured POST /protected/api/carts/items
10:40:49.504 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:40:49.504 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
10:40:49.505 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
10:40:49.505 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
10:40:49.946 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:40:49.946 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
10:40:52.925 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:40:52.925 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:41:52.602 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/api/carts/items
10:41:52.617 | DEBUG | FilterChainProxy: Securing POST /protected/api/carts/items
10:41:52.620 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:41:52.621 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:41:52.628 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:02:24Z, iat=2026-01-12T03:32:24Z, nonce=nnZ_sILqyv1NEQmfdZSXaH9fj1hRyM-3ygiDP5UeolY, jti=dcb67aa4-0d0b-46ef-9f93-67a9ad232aff, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]]
10:41:52.629 | DEBUG | FilterChainProxy: Secured POST /protected/api/carts/items
10:41:52.632 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:41:52.632 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
10:41:52.634 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
10:41:52.634 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
10:41:53.133 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:41:53.134 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
10:41:56.737 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:41:56.737 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:43:30.938 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/api/carts/items
10:43:30.952 | DEBUG | FilterChainProxy: Securing POST /protected/api/carts/items
10:43:30.958 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:43:30.958 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:43:30.964 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:02:24Z, iat=2026-01-12T03:32:24Z, nonce=nnZ_sILqyv1NEQmfdZSXaH9fj1hRyM-3ygiDP5UeolY, jti=dcb67aa4-0d0b-46ef-9f93-67a9ad232aff, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]]
10:43:30.965 | DEBUG | FilterChainProxy: Secured POST /protected/api/carts/items
10:43:30.966 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:43:30.968 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
10:43:30.968 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
10:43:30.968 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
10:43:31.509 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:43:31.510 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
10:43:31.520 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:43:31.520 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:53:13.815 | INFO | BeForFeApplication: Starting BeForFeApplication using Java 21.0.3 with PID 1424 (C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes started by PC in C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe)
10:53:13.818 | INFO | BeForFeApplication: No active profile set, falling back to 1 default profile: "default"
10:53:13.897 | INFO | DevToolsPropertyDefaultsPostProcessor: Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
10:53:13.897 | INFO | DevToolsPropertyDefaultsPostProcessor: For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
10:53:15.283 | INFO | RepositoryConfigurationDelegate: Bootstrapping Spring Data JPA repositories in DEFAULT mode.
10:53:15.390 | INFO | RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 94 ms. Found 0 JPA repository interfaces.
10:53:15.797 | INFO | GenericScope: BeanFactory id=9f238d32-db58-3e04-8344-6f44253e8abb
10:53:16.479 | INFO | TomcatWebServer: Tomcat initialized with port 8181 (https)
10:53:16.499 | INFO | StandardService: Starting service [Tomcat]
10:53:16.500 | INFO | StandardEngine: Starting Servlet engine: [Apache Tomcat/10.1.50]
10:53:16.554 | INFO | [/]: Initializing Spring embedded WebApplicationContext
10:53:16.555 | INFO | ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 2440 ms
10:53:16.795 | INFO | LogHelper: HHH000204: Processing PersistenceUnitInfo [name: default]
10:53:16.875 | INFO | Version: HHH000412: Hibernate ORM core version 6.6.39.Final
10:53:16.913 | INFO | RegionFactoryInitiator: HHH000026: Second-level cache disabled
10:53:17.243 | INFO | SpringPersistenceUnitInfo: No LoadTimeWeaver setup: ignoring JPA class transformer
10:53:17.280 | INFO | HikariDataSource: HikariPool-1 - Starting...
10:53:17.689 | INFO | HikariPool: HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7540d7a6
10:53:17.691 | INFO | HikariDataSource: HikariPool-1 - Start completed.
10:53:17.768 | WARN | deprecation: HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
10:53:17.784 | INFO | pooling: HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.44
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
10:53:18.639 | INFO | JtaPlatformInitiator: HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
10:53:18.739 | INFO | LocalContainerEntityManagerFactoryBean: Initialized JPA EntityManagerFactory for persistence unit 'default'
10:53:18.943 | WARN | JpaBaseConfiguration$JpaWebConfiguration: spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
10:53:19.241 | DEBUG | AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder: No authenticationProviders and no parentAuthenticationManager defined. Returning null.
10:53:19.473 | DEBUG | DefaultSecurityFilterChain: Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, OAuth2AuthorizationRequestRedirectFilter, OAuth2LoginAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
10:53:20.142 | INFO | OptionalLiveReloadServer: LiveReload server is running on port 35729
10:53:20.471 | INFO | certificate: Connector [https-jsse-nio-8181], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [Set directly - location unknown] using alias [bookommerce_ssl] with trust store [null]
10:53:20.493 | INFO | TomcatWebServer: Tomcat started on port 8181 (https) with context path '/'
10:53:20.524 | INFO | BeForFeApplication: Started BeForFeApplication in 7.316 seconds (process running for 8.247)
10:53:54.040 | INFO | [/]: Initializing Spring DispatcherServlet 'dispatcherServlet'
10:53:54.041 | INFO | DispatcherServlet: Initializing Servlet 'dispatcherServlet'
10:53:54.045 | INFO | DispatcherServlet: Completed initialization in 4 ms
10:53:54.113 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/api/carts/items
10:53:54.155 | DEBUG | FilterChainProxy: Securing POST /protected/api/carts/items
10:53:54.223 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:53:54.227 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:53:54.295 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:02:24Z, iat=2026-01-12T03:32:24Z, nonce=nnZ_sILqyv1NEQmfdZSXaH9fj1hRyM-3ygiDP5UeolY, jti=dcb67aa4-0d0b-46ef-9f93-67a9ad232aff, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]]
10:53:54.297 | DEBUG | FilterChainProxy: Secured POST /protected/api/carts/items
10:53:54.329 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:53:54.331 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
10:53:54.337 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
10:53:54.339 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
10:53:55.692 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:23:55Z, iat=2026-01-12T03:53:55Z, jti=a6374299-2d97-48b2-b1fc-61e5e6142c26, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@47ebc56]
10:53:55.693 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:53:55.693 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
10:53:55.697 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
10:53:55.697 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-12 10:53:55.4494692], value class [java.sql.Timestamp], SQL type 93
10:53:55.697 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-12 11:08:55.4494692], value class [java.sql.Timestamp], SQL type 93
10:53:55.697 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
10:53:55.697 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-12 10:53:55.4494692], value class [java.sql.Timestamp], SQL type 93
10:53:55.697 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
10:53:55.697 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
10:53:56.658 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:53:56.658 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
10:53:56.663 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:53:56.663 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
10:53:56.683 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:53:56.684 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:55:59.085 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/api/carts/items
10:55:59.102 | DEBUG | FilterChainProxy: Securing POST /protected/api/carts/items
10:55:59.107 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:55:59.107 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:55:59.116 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:23:55Z, iat=2026-01-12T03:53:55Z, jti=a6374299-2d97-48b2-b1fc-61e5e6142c26, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]]
10:55:59.116 | DEBUG | FilterChainProxy: Secured POST /protected/api/carts/items
10:55:59.119 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:55:59.119 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
10:55:59.121 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
10:55:59.121 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
10:55:59.622 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:55:59.623 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
10:56:31.634 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:56:31.634 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:59:11.344 | DEBUG | FilterChainProxy: Securing GET /protected/api/carts
10:59:11.349 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:11.349 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:59:11.358 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:23:55Z, iat=2026-01-12T03:53:55Z, jti=a6374299-2d97-48b2-b1fc-61e5e6142c26, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]]
10:59:11.359 | DEBUG | FilterChainProxy: Secured GET /protected/api/carts
10:59:11.363 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:11.363 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
10:59:11.363 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
10:59:11.363 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
10:59:12.051 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:59:12.051 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
10:59:12.064 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:12.064 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:59:12.227 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
10:59:12.231 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
10:59:12.256 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
10:59:12.260 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
10:59:12.263 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
10:59:12.264 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
10:59:12.270 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
10:59:12.275 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
10:59:12.281 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
10:59:12.283 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
10:59:12.283 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
10:59:12.283 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
10:59:12.394 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
10:59:12.425 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
10:59:12.466 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
10:59:12.481 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
10:59:12.491 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
10:59:12.494 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
10:59:24.945 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/api/carts/items/32
10:59:24.958 | DEBUG | FilterChainProxy: Securing DELETE /protected/api/carts/items/32
10:59:24.962 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:24.962 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:59:24.970 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:23:55Z, iat=2026-01-12T03:53:55Z, jti=a6374299-2d97-48b2-b1fc-61e5e6142c26, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]]
10:59:24.970 | DEBUG | FilterChainProxy: Secured DELETE /protected/api/carts/items/32
10:59:24.973 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:24.974 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
10:59:24.975 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
10:59:24.975 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
10:59:25.689 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:59:25.689 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
10:59:25.697 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:25.697 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:59:25.709 | DEBUG | FilterChainProxy: Securing GET /protected/api/carts
10:59:25.711 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:25.711 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:59:25.716 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:23:55Z, iat=2026-01-12T03:53:55Z, jti=a6374299-2d97-48b2-b1fc-61e5e6142c26, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]]
10:59:25.717 | DEBUG | FilterChainProxy: Secured GET /protected/api/carts
10:59:25.719 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:25.719 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
10:59:25.720 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
10:59:25.721 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
10:59:26.265 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:59:26.269 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
10:59:26.274 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:26.274 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:59:27.160 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/api/carts/items/34
10:59:27.163 | DEBUG | FilterChainProxy: Securing DELETE /protected/api/carts/items/34
10:59:27.164 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:27.166 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:59:27.170 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:23:55Z, iat=2026-01-12T03:53:55Z, jti=a6374299-2d97-48b2-b1fc-61e5e6142c26, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]]
10:59:27.171 | DEBUG | FilterChainProxy: Secured DELETE /protected/api/carts/items/34
10:59:27.175 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:27.175 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
10:59:27.176 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
10:59:27.176 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
10:59:27.629 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:59:27.630 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
10:59:27.637 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:27.637 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:59:27.650 | DEBUG | FilterChainProxy: Securing GET /protected/api/carts
10:59:27.652 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:27.652 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:59:27.659 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:23:55Z, iat=2026-01-12T03:53:55Z, jti=a6374299-2d97-48b2-b1fc-61e5e6142c26, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]]
10:59:27.660 | DEBUG | FilterChainProxy: Secured GET /protected/api/carts
10:59:27.665 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:27.666 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
10:59:27.666 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
10:59:27.666 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
10:59:28.134 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:59:28.134 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
10:59:28.147 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:28.148 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:59:30.842 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/api/carts/items/35
10:59:30.847 | DEBUG | FilterChainProxy: Securing DELETE /protected/api/carts/items/35
10:59:30.851 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:30.852 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:59:30.859 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:23:55Z, iat=2026-01-12T03:53:55Z, jti=a6374299-2d97-48b2-b1fc-61e5e6142c26, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]]
10:59:30.860 | DEBUG | FilterChainProxy: Secured DELETE /protected/api/carts/items/35
10:59:30.862 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:30.863 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
10:59:30.863 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
10:59:30.864 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
10:59:31.291 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:59:31.293 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
10:59:31.302 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:31.302 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:59:31.311 | DEBUG | FilterChainProxy: Securing GET /protected/api/carts
10:59:31.314 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:31.314 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:59:31.319 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:23:55Z, iat=2026-01-12T03:53:55Z, jti=a6374299-2d97-48b2-b1fc-61e5e6142c26, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]]
10:59:31.320 | DEBUG | FilterChainProxy: Secured GET /protected/api/carts
10:59:31.323 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:31.323 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
10:59:31.324 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
10:59:31.324 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
10:59:31.725 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:59:31.725 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
10:59:31.734 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:31.736 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:59:32.871 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/api/carts/items/36
10:59:32.879 | DEBUG | FilterChainProxy: Securing DELETE /protected/api/carts/items/36
10:59:32.882 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:32.883 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:59:32.887 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:23:55Z, iat=2026-01-12T03:53:55Z, jti=a6374299-2d97-48b2-b1fc-61e5e6142c26, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]]
10:59:32.889 | DEBUG | FilterChainProxy: Secured DELETE /protected/api/carts/items/36
10:59:32.890 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:32.891 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
10:59:32.893 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
10:59:32.896 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
10:59:33.357 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:59:33.358 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
10:59:33.366 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:33.366 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:59:33.374 | DEBUG | FilterChainProxy: Securing GET /protected/api/carts
10:59:33.375 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:33.376 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:59:33.381 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:23:55Z, iat=2026-01-12T03:53:55Z, jti=a6374299-2d97-48b2-b1fc-61e5e6142c26, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]]
10:59:33.382 | DEBUG | FilterChainProxy: Secured GET /protected/api/carts
10:59:33.383 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:33.384 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
10:59:33.384 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
10:59:33.384 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
10:59:33.734 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:59:33.734 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
10:59:33.745 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:33.745 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:59:35.743 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/api/carts/items/33
10:59:35.748 | DEBUG | FilterChainProxy: Securing DELETE /protected/api/carts/items/33
10:59:35.750 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:35.750 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:59:35.759 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:23:55Z, iat=2026-01-12T03:53:55Z, jti=a6374299-2d97-48b2-b1fc-61e5e6142c26, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]]
10:59:35.760 | DEBUG | FilterChainProxy: Secured DELETE /protected/api/carts/items/33
10:59:35.761 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:35.761 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
10:59:35.762 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
10:59:35.762 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
10:59:36.260 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:59:36.260 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
10:59:36.271 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:36.272 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:59:36.281 | DEBUG | FilterChainProxy: Securing GET /protected/api/carts
10:59:36.283 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:36.283 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:59:36.289 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:23:55Z, iat=2026-01-12T03:53:55Z, jti=a6374299-2d97-48b2-b1fc-61e5e6142c26, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]]
10:59:36.289 | DEBUG | FilterChainProxy: Secured GET /protected/api/carts
10:59:36.291 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:36.292 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
10:59:36.293 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
10:59:36.293 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
10:59:36.740 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:59:36.741 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
10:59:36.750 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:36.751 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:59:40.576 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/api/carts/items/31
10:59:40.580 | DEBUG | FilterChainProxy: Securing DELETE /protected/api/carts/items/31
10:59:40.581 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:40.582 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:59:40.586 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:23:55Z, iat=2026-01-12T03:53:55Z, jti=a6374299-2d97-48b2-b1fc-61e5e6142c26, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]]
10:59:40.588 | DEBUG | FilterChainProxy: Secured DELETE /protected/api/carts/items/31
10:59:40.590 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:40.591 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
10:59:40.591 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
10:59:40.591 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
10:59:41.012 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:59:41.012 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
10:59:41.020 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:41.021 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:59:41.032 | DEBUG | FilterChainProxy: Securing GET /protected/api/carts
10:59:41.033 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:41.033 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:59:41.039 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:23:55Z, iat=2026-01-12T03:53:55Z, jti=a6374299-2d97-48b2-b1fc-61e5e6142c26, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]]
10:59:41.040 | DEBUG | FilterChainProxy: Secured GET /protected/api/carts
10:59:41.042 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:41.043 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
10:59:41.044 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
10:59:41.044 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
10:59:41.516 | DEBUG | JdbcTemplate: Executing prepared SQL update
10:59:41.517 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
10:59:41.526 | DEBUG | JdbcTemplate: Executing prepared SQL query
10:59:41.527 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
10:59:44.014 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
10:59:44.018 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
10:59:44.104 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
10:59:44.301 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
10:59:44.303 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
10:59:44.320 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
10:59:44.323 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
10:59:44.324 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
10:59:44.325 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
10:59:44.340 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
10:59:44.340 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
10:59:44.346 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
10:59:44.348 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
10:59:44.358 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
10:59:44.388 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
10:59:44.396 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
10:59:44.397 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
10:59:44.398 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
10:59:44.408 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
10:59:44.413 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
10:59:44.420 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
10:59:44.420 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
10:59:44.429 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
10:59:44.443 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
10:59:44.443 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
10:59:44.454 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
10:59:44.454 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
10:59:44.480 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
10:59:44.482 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
10:59:44.486 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
10:59:44.511 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
10:59:44.521 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
10:59:44.531 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
11:04:54.166 | INFO | LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener: Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
11:04:54.206 | INFO | GracefulShutdown: Commencing graceful shutdown. Waiting for active requests to complete
11:04:54.223 | INFO | GracefulShutdown: Graceful shutdown complete
11:04:54.263 | INFO | LocalContainerEntityManagerFactoryBean: Closing JPA EntityManagerFactory for persistence unit 'default'
11:04:54.321 | INFO | HikariDataSource: HikariPool-1 - Shutdown initiated...
11:04:54.338 | INFO | HikariDataSource: HikariPool-1 - Shutdown completed.
11:04:54.828 | INFO | BeForFeApplication: Starting BeForFeApplication using Java 21.0.3 with PID 1424 (C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes started by PC in C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe)
11:04:54.829 | INFO | BeForFeApplication: No active profile set, falling back to 1 default profile: "default"
11:04:55.383 | INFO | RepositoryConfigurationDelegate: Bootstrapping Spring Data JPA repositories in DEFAULT mode.
11:04:55.388 | INFO | RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 3 ms. Found 0 JPA repository interfaces.
11:04:55.484 | INFO | GenericScope: BeanFactory id=9f238d32-db58-3e04-8344-6f44253e8abb
11:04:55.576 | INFO | TomcatWebServer: Tomcat initialized with port 8181 (https)
11:04:55.577 | INFO | StandardService: Starting service [Tomcat]
11:04:55.578 | INFO | StandardEngine: Starting Servlet engine: [Apache Tomcat/10.1.50]
11:04:55.607 | INFO | [/]: Initializing Spring embedded WebApplicationContext
11:04:55.608 | INFO | ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 625 ms
11:04:55.653 | INFO | LogHelper: HHH000204: Processing PersistenceUnitInfo [name: default]
11:04:55.657 | INFO | RegionFactoryInitiator: HHH000026: Second-level cache disabled
11:04:55.672 | INFO | SpringPersistenceUnitInfo: No LoadTimeWeaver setup: ignoring JPA class transformer
11:04:55.675 | INFO | HikariDataSource: HikariPool-2 - Starting...
11:04:55.700 | INFO | HikariPool: HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@36fdc953
11:04:55.700 | INFO | HikariDataSource: HikariPool-2 - Start completed.
11:04:55.702 | WARN | deprecation: HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
11:04:55.703 | INFO | pooling: HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 8.0.44
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
11:04:55.782 | INFO | JtaPlatformInitiator: HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
11:04:55.838 | INFO | LocalContainerEntityManagerFactoryBean: Initialized JPA EntityManagerFactory for persistence unit 'default'
11:04:55.891 | WARN | JpaBaseConfiguration$JpaWebConfiguration: spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
11:04:55.973 | DEBUG | AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder: No authenticationProviders and no parentAuthenticationManager defined. Returning null.
11:04:56.021 | DEBUG | DefaultSecurityFilterChain: Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, OAuth2AuthorizationRequestRedirectFilter, OAuth2LoginAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
11:04:56.162 | INFO | OptionalLiveReloadServer: LiveReload server is running on port 35729
11:04:56.257 | INFO | certificate: Connector [https-jsse-nio-8181], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [Set directly - location unknown] using alias [bookommerce_ssl] with trust store [C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes\bookommerce-ssl.p12]
11:04:56.261 | INFO | TomcatWebServer: Tomcat started on port 8181 (https) with context path '/'
11:04:56.277 | INFO | BeForFeApplication: Started BeForFeApplication in 1.553 seconds (process running for 703.999)
11:04:56.281 | INFO | ConditionEvaluationDeltaLoggingListener: Condition evaluation unchanged
11:05:44.345 | INFO | [/]: Initializing Spring DispatcherServlet 'dispatcherServlet'
11:05:44.347 | INFO | DispatcherServlet: Initializing Servlet 'dispatcherServlet'
11:05:44.350 | INFO | DispatcherServlet: Completed initialization in 3 ms
11:05:44.353 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/api/carts/items
11:05:44.383 | DEBUG | FilterChainProxy: Securing POST /protected/api/carts/items
11:05:44.393 | DEBUG | JdbcTemplate: Executing prepared SQL query
11:05:44.393 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
11:05:44.412 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:23:55Z, iat=2026-01-12T03:53:55Z, jti=a6374299-2d97-48b2-b1fc-61e5e6142c26, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]]
11:05:44.413 | DEBUG | FilterChainProxy: Secured POST /protected/api/carts/items
11:05:44.421 | DEBUG | JdbcTemplate: Executing prepared SQL query
11:05:44.421 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
11:05:44.422 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
11:05:44.422 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
11:05:45.103 | DEBUG | JdbcTemplate: Executing prepared SQL update
11:05:45.103 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
11:05:45.111 | DEBUG | JdbcTemplate: Executing prepared SQL query
11:05:45.111 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
11:06:10.373 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/api/carts/items
11:06:10.382 | DEBUG | FilterChainProxy: Securing POST /protected/api/carts/items
11:06:10.384 | DEBUG | JdbcTemplate: Executing prepared SQL query
11:06:10.384 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
11:06:10.390 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:23:55Z, iat=2026-01-12T03:53:55Z, jti=a6374299-2d97-48b2-b1fc-61e5e6142c26, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]]
11:06:10.392 | DEBUG | FilterChainProxy: Secured POST /protected/api/carts/items
11:06:10.394 | DEBUG | JdbcTemplate: Executing prepared SQL query
11:06:10.394 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
11:06:10.394 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
11:06:10.395 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
11:06:10.825 | DEBUG | JdbcTemplate: Executing prepared SQL update
11:06:10.826 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
11:06:10.831 | DEBUG | JdbcTemplate: Executing prepared SQL query
11:06:10.832 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
11:16:25.435 | INFO | LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener: Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
11:16:25.518 | INFO | GracefulShutdown: Commencing graceful shutdown. Waiting for active requests to complete
11:16:25.548 | INFO | GracefulShutdown: Graceful shutdown complete
11:16:25.580 | INFO | LocalContainerEntityManagerFactoryBean: Closing JPA EntityManagerFactory for persistence unit 'default'
11:16:25.600 | INFO | HikariDataSource: HikariPool-2 - Shutdown initiated...
11:16:25.618 | INFO | HikariDataSource: HikariPool-2 - Shutdown completed.
11:16:25.956 | INFO | BeForFeApplication: Starting BeForFeApplication using Java 21.0.3 with PID 1424 (C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes started by PC in C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe)
11:16:25.956 | INFO | BeForFeApplication: No active profile set, falling back to 1 default profile: "default"
11:16:26.425 | INFO | RepositoryConfigurationDelegate: Bootstrapping Spring Data JPA repositories in DEFAULT mode.
11:16:26.437 | INFO | RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 8 ms. Found 0 JPA repository interfaces.
11:16:26.555 | INFO | GenericScope: BeanFactory id=9f238d32-db58-3e04-8344-6f44253e8abb
11:16:26.645 | INFO | TomcatWebServer: Tomcat initialized with port 8181 (https)
11:16:26.645 | INFO | StandardService: Starting service [Tomcat]
11:16:26.647 | INFO | StandardEngine: Starting Servlet engine: [Apache Tomcat/10.1.50]
11:16:26.688 | INFO | [/]: Initializing Spring embedded WebApplicationContext
11:16:26.688 | INFO | ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 629 ms
11:16:26.742 | INFO | LogHelper: HHH000204: Processing PersistenceUnitInfo [name: default]
11:16:26.745 | INFO | RegionFactoryInitiator: HHH000026: Second-level cache disabled
11:16:26.756 | INFO | SpringPersistenceUnitInfo: No LoadTimeWeaver setup: ignoring JPA class transformer
11:16:26.757 | INFO | HikariDataSource: HikariPool-3 - Starting...
11:16:26.864 | INFO | HikariPool: HikariPool-3 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5549cebf
11:16:26.866 | INFO | HikariDataSource: HikariPool-3 - Start completed.
11:16:26.868 | WARN | deprecation: HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
11:16:26.869 | INFO | pooling: HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 8.0.44
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
11:16:26.947 | INFO | JtaPlatformInitiator: HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
11:16:26.996 | INFO | LocalContainerEntityManagerFactoryBean: Initialized JPA EntityManagerFactory for persistence unit 'default'
11:16:27.072 | WARN | JpaBaseConfiguration$JpaWebConfiguration: spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
11:16:27.176 | DEBUG | AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder: No authenticationProviders and no parentAuthenticationManager defined. Returning null.
11:16:27.238 | DEBUG | DefaultSecurityFilterChain: Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, OAuth2AuthorizationRequestRedirectFilter, OAuth2LoginAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
11:16:27.367 | INFO | OptionalLiveReloadServer: LiveReload server is running on port 35729
11:16:27.455 | INFO | certificate: Connector [https-jsse-nio-8181], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [Set directly - location unknown] using alias [bookommerce_ssl] with trust store [C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes\bookommerce-ssl.p12]
11:16:27.459 | INFO | TomcatWebServer: Tomcat started on port 8181 (https) with context path '/'
11:16:27.469 | INFO | BeForFeApplication: Started BeForFeApplication in 1.597 seconds (process running for 1395.192)
11:16:27.471 | INFO | ConditionEvaluationDeltaLoggingListener: Condition evaluation unchanged
11:16:51.790 | INFO | [/]: Initializing Spring DispatcherServlet 'dispatcherServlet'
11:16:51.791 | INFO | DispatcherServlet: Initializing Servlet 'dispatcherServlet'
11:16:51.792 | INFO | DispatcherServlet: Completed initialization in 1 ms
11:16:51.794 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/api/carts/items
11:16:51.814 | DEBUG | FilterChainProxy: Securing POST /protected/api/carts/items
11:16:51.820 | DEBUG | JdbcTemplate: Executing prepared SQL query
11:16:51.820 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
11:16:51.858 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:23:55Z, iat=2026-01-12T03:53:55Z, jti=a6374299-2d97-48b2-b1fc-61e5e6142c26, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]]
11:16:51.858 | DEBUG | FilterChainProxy: Secured POST /protected/api/carts/items
11:16:51.861 | DEBUG | JdbcTemplate: Executing prepared SQL query
11:16:51.861 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
11:16:51.861 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
11:16:51.863 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
11:16:52.399 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T03:32:23Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T04:46:52Z, iat=2026-01-12T04:16:52Z, jti=84dd8b13-2a5e-441c-b177-31a93ab2e7ec, authorities=[ROLE_CUSTOMER], sid=4mygPvD2dz-kugoa4Ef63qBwPVgweVw_gPhU9DZcdW8}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=81f302b0-9800-4742-bfed-63bd16b1cd08], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@3a572352]
11:16:52.401 | DEBUG | JdbcTemplate: Executing prepared SQL update
11:16:52.401 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
11:16:52.403 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
11:16:52.404 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-12 11:16:52.3548214], value class [java.sql.Timestamp], SQL type 93
11:16:52.404 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-12 11:31:52.3548214], value class [java.sql.Timestamp], SQL type 93
11:16:52.405 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
11:16:52.405 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-12 11:16:52.3548214], value class [java.sql.Timestamp], SQL type 93
11:16:52.405 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
11:16:52.406 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
11:16:53.175 | DEBUG | JdbcTemplate: Executing prepared SQL update
11:16:53.175 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
11:16:53.178 | DEBUG | JdbcTemplate: Executing prepared SQL update
11:16:53.178 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
11:16:53.186 | DEBUG | JdbcTemplate: Executing prepared SQL query
11:16:53.186 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:17:31.296 | INFO | BeForFeApplication: Starting BeForFeApplication using Java 21.0.3 with PID 2112 (C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes started by PC in C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe)
16:17:31.311 | INFO | BeForFeApplication: No active profile set, falling back to 1 default profile: "default"
16:17:31.505 | INFO | DevToolsPropertyDefaultsPostProcessor: Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
16:17:31.523 | INFO | DevToolsPropertyDefaultsPostProcessor: For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
16:17:39.565 | INFO | RepositoryConfigurationDelegate: Bootstrapping Spring Data JPA repositories in DEFAULT mode.
16:17:39.679 | INFO | RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 51 ms. Found 0 JPA repository interfaces.
16:17:41.444 | INFO | GenericScope: BeanFactory id=13accd6c-ace7-3257-bf77-8e53872683d4
16:17:45.734 | INFO | TomcatWebServer: Tomcat initialized with port 8181 (https)
16:17:45.784 | INFO | StandardService: Starting service [Tomcat]
16:17:45.788 | INFO | StandardEngine: Starting Servlet engine: [Apache Tomcat/10.1.50]
16:17:46.087 | INFO | [/]: Initializing Spring embedded WebApplicationContext
16:17:46.132 | INFO | ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 13771 ms
16:17:46.908 | INFO | LogHelper: HHH000204: Processing PersistenceUnitInfo [name: default]
16:17:47.171 | INFO | Version: HHH000412: Hibernate ORM core version 6.6.39.Final
16:17:47.579 | INFO | RegionFactoryInitiator: HHH000026: Second-level cache disabled
16:17:49.785 | INFO | SpringPersistenceUnitInfo: No LoadTimeWeaver setup: ignoring JPA class transformer
16:17:49.903 | INFO | HikariDataSource: HikariPool-1 - Starting...
16:17:51.210 | INFO | HikariPool: HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3b0f5a09
16:17:51.225 | INFO | HikariDataSource: HikariPool-1 - Start completed.
16:17:51.374 | WARN | deprecation: HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
16:17:51.655 | INFO | pooling: HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.44
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
16:17:56.421 | INFO | JtaPlatformInitiator: HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
16:17:56.540 | INFO | LocalContainerEntityManagerFactoryBean: Initialized JPA EntityManagerFactory for persistence unit 'default'
16:17:56.977 | WARN | JpaBaseConfiguration$JpaWebConfiguration: spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
16:17:59.278 | DEBUG | AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder: No authenticationProviders and no parentAuthenticationManager defined. Returning null.
16:17:59.984 | DEBUG | DefaultSecurityFilterChain: Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, OAuth2AuthorizationRequestRedirectFilter, OAuth2LoginAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
16:18:00.965 | WARN | OptionalLiveReloadServer: Unable to start LiveReload server
16:18:01.392 | INFO | certificate: Connector [https-jsse-nio-8181], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [Set directly - location unknown] using alias [bookommerce_ssl] with trust store [null]
16:18:01.423 | INFO | TomcatWebServer: Tomcat started on port 8181 (https) with context path '/'
16:18:01.472 | INFO | BeForFeApplication: Started BeForFeApplication in 31.924 seconds (process running for 40.125)
16:18:56.603 | INFO | [/]: Initializing Spring DispatcherServlet 'dispatcherServlet'
16:18:56.605 | INFO | DispatcherServlet: Initializing Servlet 'dispatcherServlet'
16:18:56.615 | INFO | DispatcherServlet: Completed initialization in 9 ms
16:18:56.710 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
16:18:56.779 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=88au1D9BQah0vdvio-GTwbaHNT_axWNsnVzw4cZUiPQ%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=nwtwDAO3lqeoLnRFcsZ9PJBzseiy6nb65Zrx2VJkEbU
16:18:56.959 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:18:56.964 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
16:18:57.001 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:18:57.002 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:18:57.742 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=_23jF5kk9EtGWy2sMmERrvxrMmh62_3WdRWflIHl8ZZrXQsa-Ws-SwoyvCvL6L0U1gWlobzO0ReU7ZQV0DCoxAg4V78eFZMvBsU8vGH_ILsMnX6yoc1wTR6SUJXBkZg7&state=88au1D9BQah0vdvio-GTwbaHNT_axWNsnVzw4cZUiPQ%3D
16:18:57.762 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:18:57.764 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:19:00.319 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:19:00.319 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
16:19:00.347 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
16:19:00.351 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-12 16:18:59.7871438], value class [java.sql.Timestamp], SQL type 93
16:19:00.352 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-12 16:19:04.7871438], value class [java.sql.Timestamp], SQL type 93
16:19:00.353 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
16:19:00.354 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-12 16:18:59.7871438], value class [java.sql.Timestamp], SQL type 93
16:19:00.359 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
16:19:00.360 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
16:19:00.387 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from cf4b142b-1a4d-4dbe-bb1f-ffc8a0ce7138
16:19:00.399 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
16:19:00.401 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T09:18:57Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T09:48:59Z, iat=2026-01-12T09:18:59Z, nonce=nwtwDAO3lqeoLnRFcsZ9PJBzseiy6nb65Zrx2VJkEbU, jti=f5b58bf5-2b72-4efd-9f2d-76b96263fa43, authorities=[ROLE_CUSTOMER], sid=TslqK3Ka0T0SM9mZcJ2VPYggVRVsknRVMUtLBF2WhGQ}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=cf4b142b-1a4d-4dbe-bb1f-ffc8a0ce7138], Granted Authorities=[ROLE_CUSTOMER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@6165f9d7]
16:19:00.402 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T09:18:57Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T09:48:59Z, iat=2026-01-12T09:18:59Z, nonce=nwtwDAO3lqeoLnRFcsZ9PJBzseiy6nb65Zrx2VJkEbU, jti=f5b58bf5-2b72-4efd-9f2d-76b96263fa43, authorities=[ROLE_CUSTOMER], sid=TslqK3Ka0T0SM9mZcJ2VPYggVRVsknRVMUtLBF2WhGQ}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=cf4b142b-1a4d-4dbe-bb1f-ffc8a0ce7138], Granted Authorities=[ROLE_CUSTOMER]]
16:19:00.428 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:19:00.429 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:19:00.435 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:19:00.435 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:19:00.499 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:19:00.500 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
16:19:00.516 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:19:00.516 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:19:05.179 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:19:05.202 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:19:05.203 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:19:05.233 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T09:18:57Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T09:48:59Z, iat=2026-01-12T09:18:59Z, nonce=nwtwDAO3lqeoLnRFcsZ9PJBzseiy6nb65Zrx2VJkEbU, jti=f5b58bf5-2b72-4efd-9f2d-76b96263fa43, authorities=[ROLE_CUSTOMER], sid=TslqK3Ka0T0SM9mZcJ2VPYggVRVsknRVMUtLBF2WhGQ}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=cf4b142b-1a4d-4dbe-bb1f-ffc8a0ce7138], Granted Authorities=[ROLE_CUSTOMER]]]
16:19:05.234 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
16:19:05.438 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:19:05.439 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:19:05.456 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:19:05.459 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:19:05.979 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
16:19:05.984 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:19:05.985 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
16:19:08.731 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
16:19:08.756 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
16:19:08.761 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:19:08.765 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:19:08.782 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
16:19:08.788 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:19:08.796 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:19:08.810 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
16:19:08.776 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
16:19:08.797 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
16:19:08.811 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
16:19:08.812 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
16:19:08.817 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:19:08.832 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
16:19:08.836 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:19:08.857 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
16:19:08.869 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:19:08.880 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
16:19:09.093 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
16:19:09.099 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:19:09.106 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
16:19:09.130 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:19:09.199 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:19:09.214 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:19:09.218 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:19:09.231 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:19:09.235 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:19:09.247 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
16:19:09.248 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
16:19:09.250 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
16:19:44.897 | DEBUG | FilterChainProxy: Securing GET /protected/api/carts
16:19:44.902 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:19:44.902 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:19:44.919 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T09:18:57Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T09:48:59Z, iat=2026-01-12T09:18:59Z, nonce=nwtwDAO3lqeoLnRFcsZ9PJBzseiy6nb65Zrx2VJkEbU, jti=f5b58bf5-2b72-4efd-9f2d-76b96263fa43, authorities=[ROLE_CUSTOMER], sid=TslqK3Ka0T0SM9mZcJ2VPYggVRVsknRVMUtLBF2WhGQ}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=cf4b142b-1a4d-4dbe-bb1f-ffc8a0ce7138], Granted Authorities=[ROLE_CUSTOMER]]]
16:19:44.920 | DEBUG | FilterChainProxy: Secured GET /protected/api/carts
16:19:44.950 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:19:44.951 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
16:19:44.952 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
16:19:44.953 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
16:19:45.925 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:19:45.928 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
16:19:45.931 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
16:19:45.933 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
16:20:03.744 | WARN | ExceptionHandlerExceptionResolver: Resolved [org.springframework.security.oauth2.client.ClientAuthorizationException: [invalid_grant] ]
16:20:03.751 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:20:03.751 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:20:47.769 | INFO | LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener: Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
16:20:47.807 | INFO | GracefulShutdown: Commencing graceful shutdown. Waiting for active requests to complete
16:20:47.835 | INFO | GracefulShutdown: Graceful shutdown complete
16:20:47.870 | INFO | LocalContainerEntityManagerFactoryBean: Closing JPA EntityManagerFactory for persistence unit 'default'
16:20:47.880 | INFO | HikariDataSource: HikariPool-1 - Shutdown initiated...
16:20:47.894 | INFO | HikariDataSource: HikariPool-1 - Shutdown completed.
16:20:48.163 | INFO | BeForFeApplication: Starting BeForFeApplication using Java 21.0.3 with PID 2112 (C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes started by PC in C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe)
16:20:48.164 | INFO | BeForFeApplication: No active profile set, falling back to 1 default profile: "default"
16:20:48.771 | INFO | RepositoryConfigurationDelegate: Bootstrapping Spring Data JPA repositories in DEFAULT mode.
16:20:48.783 | INFO | RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 8 ms. Found 0 JPA repository interfaces.
16:20:48.958 | INFO | GenericScope: BeanFactory id=13accd6c-ace7-3257-bf77-8e53872683d4
16:20:49.133 | INFO | TomcatWebServer: Tomcat initialized with port 8181 (https)
16:20:49.136 | INFO | StandardService: Starting service [Tomcat]
16:20:49.137 | INFO | StandardEngine: Starting Servlet engine: [Apache Tomcat/10.1.50]
16:20:49.261 | INFO | [/]: Initializing Spring embedded WebApplicationContext
16:20:49.261 | INFO | ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 958 ms
16:20:49.428 | INFO | LogHelper: HHH000204: Processing PersistenceUnitInfo [name: default]
16:20:49.436 | INFO | RegionFactoryInitiator: HHH000026: Second-level cache disabled
16:20:49.474 | INFO | SpringPersistenceUnitInfo: No LoadTimeWeaver setup: ignoring JPA class transformer
16:20:49.481 | INFO | HikariDataSource: HikariPool-2 - Starting...
16:20:49.584 | INFO | HikariPool: HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2eb85fa3
16:20:49.585 | INFO | HikariDataSource: HikariPool-2 - Start completed.
16:20:49.590 | WARN | deprecation: HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
16:20:49.591 | INFO | pooling: HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 8.0.44
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
16:20:49.749 | INFO | JtaPlatformInitiator: HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
16:20:49.807 | INFO | LocalContainerEntityManagerFactoryBean: Initialized JPA EntityManagerFactory for persistence unit 'default'
16:20:49.883 | WARN | JpaBaseConfiguration$JpaWebConfiguration: spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
16:20:49.974 | DEBUG | AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder: No authenticationProviders and no parentAuthenticationManager defined. Returning null.
16:20:50.029 | DEBUG | DefaultSecurityFilterChain: Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, OAuth2AuthorizationRequestRedirectFilter, OAuth2LoginAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
16:20:50.164 | WARN | OptionalLiveReloadServer: Unable to start LiveReload server
16:20:50.293 | INFO | certificate: Connector [https-jsse-nio-8181], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [Set directly - location unknown] using alias [bookommerce_ssl] with trust store [C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes\bookommerce-ssl.p12]
16:20:50.301 | INFO | TomcatWebServer: Tomcat started on port 8181 (https) with context path '/'
16:20:50.320 | INFO | BeForFeApplication: Started BeForFeApplication in 2.228 seconds (process running for 208.972)
16:20:50.323 | INFO | ConditionEvaluationDeltaLoggingListener: Condition evaluation unchanged
16:21:00.174 | INFO | LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener: Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
16:21:00.194 | INFO | GracefulShutdown: Commencing graceful shutdown. Waiting for active requests to complete
16:21:00.226 | INFO | GracefulShutdown: Graceful shutdown complete
16:21:00.251 | INFO | LocalContainerEntityManagerFactoryBean: Closing JPA EntityManagerFactory for persistence unit 'default'
16:21:00.253 | INFO | HikariDataSource: HikariPool-2 - Shutdown initiated...
16:21:00.294 | INFO | HikariDataSource: HikariPool-2 - Shutdown completed.
16:21:01.213 | INFO | BeForFeApplication: Starting BeForFeApplication using Java 21.0.3 with PID 2112 (C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes started by PC in C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe)
16:21:01.221 | INFO | BeForFeApplication: No active profile set, falling back to 1 default profile: "default"
16:21:02.017 | INFO | RepositoryConfigurationDelegate: Bootstrapping Spring Data JPA repositories in DEFAULT mode.
16:21:02.023 | INFO | RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 4 ms. Found 0 JPA repository interfaces.
16:21:02.140 | INFO | GenericScope: BeanFactory id=13accd6c-ace7-3257-bf77-8e53872683d4
16:21:02.223 | INFO | TomcatWebServer: Tomcat initialized with port 8181 (https)
16:21:02.225 | INFO | StandardService: Starting service [Tomcat]
16:21:02.225 | INFO | StandardEngine: Starting Servlet engine: [Apache Tomcat/10.1.50]
16:21:02.259 | INFO | [/]: Initializing Spring embedded WebApplicationContext
16:21:02.260 | INFO | ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 770 ms
16:21:02.303 | INFO | LogHelper: HHH000204: Processing PersistenceUnitInfo [name: default]
16:21:02.307 | INFO | RegionFactoryInitiator: HHH000026: Second-level cache disabled
16:21:02.318 | INFO | SpringPersistenceUnitInfo: No LoadTimeWeaver setup: ignoring JPA class transformer
16:21:02.319 | INFO | HikariDataSource: HikariPool-3 - Starting...
16:21:02.340 | INFO | HikariPool: HikariPool-3 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6ead5cd1
16:21:02.340 | INFO | HikariDataSource: HikariPool-3 - Start completed.
16:21:02.342 | WARN | deprecation: HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
16:21:02.343 | INFO | pooling: HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 8.0.44
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
16:21:02.406 | INFO | JtaPlatformInitiator: HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
16:21:02.427 | INFO | LocalContainerEntityManagerFactoryBean: Initialized JPA EntityManagerFactory for persistence unit 'default'
16:21:02.497 | WARN | JpaBaseConfiguration$JpaWebConfiguration: spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
16:21:02.576 | DEBUG | AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder: No authenticationProviders and no parentAuthenticationManager defined. Returning null.
16:21:02.629 | DEBUG | DefaultSecurityFilterChain: Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, OAuth2AuthorizationRequestRedirectFilter, OAuth2LoginAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
16:21:02.724 | WARN | OptionalLiveReloadServer: Unable to start LiveReload server
16:21:02.796 | INFO | certificate: Connector [https-jsse-nio-8181], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [Set directly - location unknown] using alias [bookommerce_ssl] with trust store [C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes\bookommerce-ssl.p12]
16:21:02.801 | INFO | TomcatWebServer: Tomcat started on port 8181 (https) with context path '/'
16:21:02.812 | INFO | BeForFeApplication: Started BeForFeApplication in 2.15 seconds (process running for 221.466)
16:21:02.814 | INFO | ConditionEvaluationDeltaLoggingListener: Condition evaluation unchanged
16:22:25.513 | INFO | [/]: Initializing Spring DispatcherServlet 'dispatcherServlet'
16:22:25.515 | INFO | DispatcherServlet: Initializing Servlet 'dispatcherServlet'
16:22:25.520 | INFO | DispatcherServlet: Completed initialization in 5 ms
16:22:25.534 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:22:25.541 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:22:25.545 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:22:25.578 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T09:18:57Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T09:48:59Z, iat=2026-01-12T09:18:59Z, nonce=nwtwDAO3lqeoLnRFcsZ9PJBzseiy6nb65Zrx2VJkEbU, jti=f5b58bf5-2b72-4efd-9f2d-76b96263fa43, authorities=[ROLE_CUSTOMER], sid=TslqK3Ka0T0SM9mZcJ2VPYggVRVsknRVMUtLBF2WhGQ}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=cf4b142b-1a4d-4dbe-bb1f-ffc8a0ce7138], Granted Authorities=[ROLE_CUSTOMER]]]
16:22:25.579 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
16:22:25.601 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:22:25.601 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:22:25.617 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:22:25.618 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:22:25.921 | DEBUG | FilterChainProxy: Securing GET /protected/api/carts
16:22:25.923 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:22:25.924 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:22:25.935 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [nguyenvietanh.personal@gmail.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=nguyenvietanh.personal@gmail.com, aud=[bff], azp=bff, auth_time=2026-01-12T09:18:57Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T09:48:59Z, iat=2026-01-12T09:18:59Z, nonce=nwtwDAO3lqeoLnRFcsZ9PJBzseiy6nb65Zrx2VJkEbU, jti=f5b58bf5-2b72-4efd-9f2d-76b96263fa43, authorities=[ROLE_CUSTOMER], sid=TslqK3Ka0T0SM9mZcJ2VPYggVRVsknRVMUtLBF2WhGQ}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=cf4b142b-1a4d-4dbe-bb1f-ffc8a0ce7138], Granted Authorities=[ROLE_CUSTOMER]]]
16:22:25.937 | DEBUG | FilterChainProxy: Secured GET /protected/api/carts
16:22:25.946 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:22:25.947 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
16:22:25.950 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
16:22:25.951 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [nguyenvietanh.personal@gmail.com], value class [java.lang.String], SQL type 12
16:22:36.218 | WARN | ExceptionHandlerExceptionResolver: Resolved [org.springframework.security.oauth2.client.ClientAuthorizationRequiredException: [client_authorization_required] Authorization required for Client Registration Id: bff]
16:22:36.222 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:22:36.223 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:53:43.035 | INFO | BeForFeApplication: Starting BeForFeApplication using Java 21.0.3 with PID 14768 (C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes started by PC in C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe)
16:53:43.062 | INFO | BeForFeApplication: No active profile set, falling back to 1 default profile: "default"
16:53:43.353 | INFO | DevToolsPropertyDefaultsPostProcessor: Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
16:53:43.362 | INFO | DevToolsPropertyDefaultsPostProcessor: For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
16:53:53.663 | INFO | RepositoryConfigurationDelegate: Bootstrapping Spring Data JPA repositories in DEFAULT mode.
16:53:53.895 | INFO | RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 85 ms. Found 0 JPA repository interfaces.
16:53:57.865 | INFO | GenericScope: BeanFactory id=13accd6c-ace7-3257-bf77-8e53872683d4
16:54:02.478 | INFO | TomcatWebServer: Tomcat initialized with port 8181 (https)
16:54:02.860 | INFO | StandardService: Starting service [Tomcat]
16:54:02.956 | INFO | StandardEngine: Starting Servlet engine: [Apache Tomcat/10.1.50]
16:54:03.234 | INFO | [/]: Initializing Spring embedded WebApplicationContext
16:54:03.269 | INFO | ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 19379 ms
16:54:05.735 | INFO | LogHelper: HHH000204: Processing PersistenceUnitInfo [name: default]
16:54:07.113 | INFO | Version: HHH000412: Hibernate ORM core version 6.6.39.Final
16:54:07.428 | INFO | RegionFactoryInitiator: HHH000026: Second-level cache disabled
16:54:11.035 | INFO | SpringPersistenceUnitInfo: No LoadTimeWeaver setup: ignoring JPA class transformer
16:54:11.924 | INFO | HikariDataSource: HikariPool-1 - Starting...
16:54:16.445 | INFO | HikariPool: HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@26522d0e
16:54:16.452 | INFO | HikariDataSource: HikariPool-1 - Start completed.
16:54:16.731 | WARN | deprecation: HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
16:54:16.874 | INFO | pooling: HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.44
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
16:54:31.835 | INFO | JtaPlatformInitiator: HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
16:54:32.080 | INFO | LocalContainerEntityManagerFactoryBean: Initialized JPA EntityManagerFactory for persistence unit 'default'
16:54:33.912 | WARN | JpaBaseConfiguration$JpaWebConfiguration: spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
16:54:36.409 | DEBUG | AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder: No authenticationProviders and no parentAuthenticationManager defined. Returning null.
16:54:37.563 | DEBUG | DefaultSecurityFilterChain: Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, OAuth2AuthorizationRequestRedirectFilter, OAuth2LoginAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
16:54:42.346 | WARN | OptionalLiveReloadServer: Unable to start LiveReload server
16:54:45.827 | INFO | certificate: Connector [https-jsse-nio-8181], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [Set directly - location unknown] using alias [bookommerce_ssl] with trust store [null]
16:54:46.479 | INFO | TomcatWebServer: Tomcat started on port 8181 (https) with context path '/'
16:54:46.755 | INFO | BeForFeApplication: Started BeForFeApplication in 67.121 seconds (process running for 72.243)
16:58:45.600 | INFO | [/]: Initializing Spring DispatcherServlet 'dispatcherServlet'
16:58:45.615 | INFO | DispatcherServlet: Initializing Servlet 'dispatcherServlet'
16:58:45.739 | INFO | DispatcherServlet: Completed initialization in 123 ms
16:58:45.890 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:58:45.943 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:58:45.975 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@4f3b35f6, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:58:45.976 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@43e10204, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:58:45.977 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@32b13c8
16:58:54.093 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
16:58:54.133 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=DUobFfFmgG0-_pnJ61XW1OtPAn3DNdpC4urXiRX5sU8%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=7-dABrrTrt_Tkkm4x05jMmu39-rfkG1ksM6ATLPEsIE
16:58:54.278 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:58:54.279 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
16:58:54.306 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:58:54.307 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:58:54.691 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=r50uX1SbJHAZANchDVYUXrR3EcPOAiDMO7GJWXZ8FHg_6WjMdc-7Pxz_M1B93HWK0Z5twtttLGD7RaKQVStvsZ3IL98JCSuf2ZqHxT3ucDTdFcMCKBsHdTYM0hH_d3hi&state=DUobFfFmgG0-_pnJ61XW1OtPAn3DNdpC4urXiRX5sU8%3D
16:58:54.698 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:58:54.699 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:58:55.731 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:58:55.731 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
16:58:55.741 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
16:58:55.743 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-12 16:58:55.4843301], value class [java.sql.Timestamp], SQL type 93
16:58:55.744 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-12 17:13:55.4843301], value class [java.sql.Timestamp], SQL type 93
16:58:55.744 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
16:58:55.745 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-12 16:58:55.4843301], value class [java.sql.Timestamp], SQL type 93
16:58:55.745 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
16:58:55.745 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
16:58:55.757 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:58:55.758 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO oauth2_authorized_client (client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
16:58:55.759 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
16:58:55.760 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
16:58:55.760 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [Bearer], value class [java.lang.String], SQL type 12
16:58:55.760 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [2026-01-12 16:58:55.4843301], value class [java.sql.Timestamp], SQL type 93
16:58:55.760 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 6, parameter value [2026-01-12 17:13:55.4843301], value class [java.sql.Timestamp], SQL type 93
16:58:55.761 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [openid,profile], value class [java.lang.String], SQL type 12
16:58:55.761 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [2026-01-12 16:58:55.4843301], value class [java.sql.Timestamp], SQL type 93
16:58:55.766 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 1f63e8c2-4f5c-4d15-bbeb-714259afea2d
16:58:55.767 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
16:58:55.772 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T09:58:54Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T10:28:55Z, iat=2026-01-12T09:58:55Z, nonce=7-dABrrTrt_Tkkm4x05jMmu39-rfkG1ksM6ATLPEsIE, jti=5c2da316-d6fe-4d51-a04b-baa3c7073d98, authorities=[ROLE_PRODUCT_MANAGER], sid=CHLx4OusOkyk3cbJfuIAkloI6uLidmF9wl_XbP-9SEQ}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=1f63e8c2-4f5c-4d15-bbeb-714259afea2d], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@22eabfb9]
16:58:55.773 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T09:58:54Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T10:28:55Z, iat=2026-01-12T09:58:55Z, nonce=7-dABrrTrt_Tkkm4x05jMmu39-rfkG1ksM6ATLPEsIE, jti=5c2da316-d6fe-4d51-a04b-baa3c7073d98, authorities=[ROLE_PRODUCT_MANAGER], sid=CHLx4OusOkyk3cbJfuIAkloI6uLidmF9wl_XbP-9SEQ}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=1f63e8c2-4f5c-4d15-bbeb-714259afea2d], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
16:58:55.796 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:58:55.796 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:58:55.798 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:58:55.798 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
16:58:55.833 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:58:55.833 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
16:58:55.843 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:58:55.844 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:58:56.361 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:58:56.365 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:58:56.366 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:58:56.381 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T09:58:54Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T10:28:55Z, iat=2026-01-12T09:58:55Z, nonce=7-dABrrTrt_Tkkm4x05jMmu39-rfkG1ksM6ATLPEsIE, jti=5c2da316-d6fe-4d51-a04b-baa3c7073d98, authorities=[ROLE_PRODUCT_MANAGER], sid=CHLx4OusOkyk3cbJfuIAkloI6uLidmF9wl_XbP-9SEQ}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=1f63e8c2-4f5c-4d15-bbeb-714259afea2d], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
16:58:56.381 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
16:58:56.525 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:58:56.526 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:58:56.540 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:58:56.541 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:59:12.656 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:59:12.665 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:59:12.665 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:59:12.679 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T09:58:54Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T10:28:55Z, iat=2026-01-12T09:58:55Z, nonce=7-dABrrTrt_Tkkm4x05jMmu39-rfkG1ksM6ATLPEsIE, jti=5c2da316-d6fe-4d51-a04b-baa3c7073d98, authorities=[ROLE_PRODUCT_MANAGER], sid=CHLx4OusOkyk3cbJfuIAkloI6uLidmF9wl_XbP-9SEQ}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=1f63e8c2-4f5c-4d15-bbeb-714259afea2d], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
16:59:12.679 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
16:59:12.688 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:59:12.690 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:59:12.706 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:59:12.708 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:59:12.793 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:59:12.796 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:59:12.797 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:59:12.803 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T09:58:54Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T10:28:55Z, iat=2026-01-12T09:58:55Z, nonce=7-dABrrTrt_Tkkm4x05jMmu39-rfkG1ksM6ATLPEsIE, jti=5c2da316-d6fe-4d51-a04b-baa3c7073d98, authorities=[ROLE_PRODUCT_MANAGER], sid=CHLx4OusOkyk3cbJfuIAkloI6uLidmF9wl_XbP-9SEQ}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=1f63e8c2-4f5c-4d15-bbeb-714259afea2d], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
16:59:12.808 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
16:59:12.814 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:59:12.815 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:59:12.828 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:59:12.828 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:59:33.905 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:59:33.908 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:59:33.909 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:59:33.914 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T09:58:54Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T10:28:55Z, iat=2026-01-12T09:58:55Z, nonce=7-dABrrTrt_Tkkm4x05jMmu39-rfkG1ksM6ATLPEsIE, jti=5c2da316-d6fe-4d51-a04b-baa3c7073d98, authorities=[ROLE_PRODUCT_MANAGER], sid=CHLx4OusOkyk3cbJfuIAkloI6uLidmF9wl_XbP-9SEQ}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=1f63e8c2-4f5c-4d15-bbeb-714259afea2d], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
16:59:33.915 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
16:59:33.919 | DEBUG | JdbcTemplate: Executing prepared SQL update
16:59:33.919 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
16:59:33.928 | DEBUG | JdbcTemplate: Executing prepared SQL query
16:59:33.928 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
16:59:58.985 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
16:59:58.993 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
16:59:59.023 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@4f3b35f6, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
16:59:59.023 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@43e10204, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
16:59:59.023 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@32b13c8
17:00:04.994 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
17:00:05.018 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=tvlPMFCxO0qkWrsY6FIlNRIssoy7BgJmd_F7jQq5dEs%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=l4FhnhUulZDxYk76aYXcz_aifICv3N9hkQF3l_QKK64
17:00:05.029 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:00:05.029 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
17:00:05.035 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:00:05.036 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
17:00:05.229 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=_0IkFU_qDg1OStf5uc7gxzr9c-PyyqtYYg5LY9lqbFsXjgfy-hCajNN-1NvYVOf7zo467_UQEYjrsPTzVjJOqzpZG0vZG-x_U2AyJ3m8rb8jEXUtEwiPzWBKew5m_Lqh&state=tvlPMFCxO0qkWrsY6FIlNRIssoy7BgJmd_F7jQq5dEs%3D
17:00:05.232 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:00:05.234 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:00:06.034 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:00:06.035 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
17:00:06.038 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
17:00:06.040 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-12 17:00:05.9671793], value class [java.sql.Timestamp], SQL type 93
17:00:06.040 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-12 17:15:05.9671793], value class [java.sql.Timestamp], SQL type 93
17:00:06.040 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
17:00:06.041 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-12 17:00:05.9671793], value class [java.sql.Timestamp], SQL type 93
17:00:06.041 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
17:00:06.041 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
17:00:06.054 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 4be18a4f-9961-41cc-930f-1af67883df72
17:00:06.055 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
17:00:06.057 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T10:00:05Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T10:30:05Z, iat=2026-01-12T10:00:05Z, nonce=l4FhnhUulZDxYk76aYXcz_aifICv3N9hkQF3l_QKK64, jti=657076e6-35d7-4803-af55-201cb175b550, authorities=[ROLE_PRODUCT_MANAGER], sid=yeVYOCd3RfRUBiw1yeokmMD93Yh7Dfroo_W4BDna03g}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=4be18a4f-9961-41cc-930f-1af67883df72], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@26c61716]
17:00:06.058 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T10:00:05Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T10:30:05Z, iat=2026-01-12T10:00:05Z, nonce=l4FhnhUulZDxYk76aYXcz_aifICv3N9hkQF3l_QKK64, jti=657076e6-35d7-4803-af55-201cb175b550, authorities=[ROLE_PRODUCT_MANAGER], sid=yeVYOCd3RfRUBiw1yeokmMD93Yh7Dfroo_W4BDna03g}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=4be18a4f-9961-41cc-930f-1af67883df72], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
17:00:06.064 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:00:06.065 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
17:00:06.067 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:00:06.069 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
17:00:06.086 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:00:06.086 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
17:00:06.099 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:00:06.100 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:00:06.703 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
17:00:06.706 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:00:06.707 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:00:06.720 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T10:00:05Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T10:30:05Z, iat=2026-01-12T10:00:05Z, nonce=l4FhnhUulZDxYk76aYXcz_aifICv3N9hkQF3l_QKK64, jti=657076e6-35d7-4803-af55-201cb175b550, authorities=[ROLE_PRODUCT_MANAGER], sid=yeVYOCd3RfRUBiw1yeokmMD93Yh7Dfroo_W4BDna03g}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=4be18a4f-9961-41cc-930f-1af67883df72], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
17:00:06.721 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
17:00:06.735 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:00:06.736 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
17:00:06.752 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:00:06.753 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:00:09.556 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/logout
17:00:09.642 | DEBUG | FilterChainProxy: Securing POST /protected/logout
17:00:09.678 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:00:09.679 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:00:09.685 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T10:00:05Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T10:30:05Z, iat=2026-01-12T10:00:05Z, nonce=l4FhnhUulZDxYk76aYXcz_aifICv3N9hkQF3l_QKK64, jti=657076e6-35d7-4803-af55-201cb175b550, authorities=[ROLE_PRODUCT_MANAGER], sid=yeVYOCd3RfRUBiw1yeokmMD93Yh7Dfroo_W4BDna03g}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=4be18a4f-9961-41cc-930f-1af67883df72], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
17:00:09.686 | DEBUG | LogoutFilter: Logging out [OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T10:00:05Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T10:30:05Z, iat=2026-01-12T10:00:05Z, nonce=l4FhnhUulZDxYk76aYXcz_aifICv3N9hkQF3l_QKK64, jti=657076e6-35d7-4803-af55-201cb175b550, authorities=[ROLE_PRODUCT_MANAGER], sid=yeVYOCd3RfRUBiw1yeokmMD93Yh7Dfroo_W4BDna03g}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=4be18a4f-9961-41cc-930f-1af67883df72], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
17:00:09.726 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:00:09.727 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE SESSION_ID = ?
AND MAX_INACTIVE_INTERVAL >= 0
]
17:00:09.728 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [aeefd853-43cc-4ddd-8400-4c88a0133ad0], value class [java.lang.String], SQL type unknown
17:00:09.739 | DEBUG | SecurityContextLogoutHandler: Invalidated session aeefd853-43cc-4ddd-8400-4c88a0133ad0
17:00:09.741 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:00:09.742 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:00:09.777 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:00:09.778 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
17:00:09.779 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
17:00:09.779 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
17:01:13.706 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
17:01:13.711 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:01:13.713 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@4f3b35f6, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
17:01:13.713 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@43e10204, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
17:01:13.714 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@32b13c8
17:01:18.884 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
17:01:18.888 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=JpnJ5NoBz8WGIL_k4oji2Zo0uXTu7ptAFaN3Ysa_J4w%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=z-sabOHmckUZV2zcteoyK-zt27S_7AiqcDgjVqK8Ou8
17:01:18.891 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:01:18.892 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
17:01:18.894 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:01:18.894 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
17:01:18.981 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=2-mKGjp2JZg5_oHANC-8v_ihfZGtaDGPgjc2AE71vnK9We0shV446BzRgbDUHimHSKmD9cCL5eOBzSeNHaKmpyNmqSpA69KGSDiZnthstbnqdYBxx_oXZOP8wZoJtoA0&state=JpnJ5NoBz8WGIL_k4oji2Zo0uXTu7ptAFaN3Ysa_J4w%3D
17:01:18.986 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:01:18.988 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:01:19.446 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:01:19.446 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
17:01:19.448 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
17:01:19.448 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-12 17:01:19.3935454], value class [java.sql.Timestamp], SQL type 93
17:01:19.448 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-12 17:16:19.3935454], value class [java.sql.Timestamp], SQL type 93
17:01:19.448 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
17:01:19.450 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-12 17:01:19.3935454], value class [java.sql.Timestamp], SQL type 93
17:01:19.452 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
17:01:19.452 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
17:01:19.456 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:01:19.457 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO oauth2_authorized_client (client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
17:01:19.457 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
17:01:19.458 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
17:01:19.458 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [Bearer], value class [java.lang.String], SQL type 12
17:01:19.458 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [2026-01-12 17:01:19.3935454], value class [java.sql.Timestamp], SQL type 93
17:01:19.458 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 6, parameter value [2026-01-12 17:16:19.3935454], value class [java.sql.Timestamp], SQL type 93
17:01:19.458 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [openid,profile], value class [java.lang.String], SQL type 12
17:01:19.459 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [2026-01-12 17:01:19.3935454], value class [java.sql.Timestamp], SQL type 93
17:01:19.468 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 7218c786-fcb8-4998-a180-d5b16d237666
17:01:19.471 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
17:01:19.471 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T10:01:18Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T10:31:19Z, iat=2026-01-12T10:01:19Z, nonce=z-sabOHmckUZV2zcteoyK-zt27S_7AiqcDgjVqK8Ou8, jti=1c61b77c-2f29-4f5f-b014-9d761540d1f7, authorities=[ROLE_PRODUCT_MANAGER], sid=R-477rC2tYx9wfS3n25fbXeHurW9vjhmy1Hzm_RJ_f4}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7218c786-fcb8-4998-a180-d5b16d237666], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@42d68d46]
17:01:19.472 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T10:01:18Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T10:31:19Z, iat=2026-01-12T10:01:19Z, nonce=z-sabOHmckUZV2zcteoyK-zt27S_7AiqcDgjVqK8Ou8, jti=1c61b77c-2f29-4f5f-b014-9d761540d1f7, authorities=[ROLE_PRODUCT_MANAGER], sid=R-477rC2tYx9wfS3n25fbXeHurW9vjhmy1Hzm_RJ_f4}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7218c786-fcb8-4998-a180-d5b16d237666], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
17:01:19.478 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:01:19.478 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
17:01:19.480 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:01:19.483 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
17:01:19.491 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:01:19.491 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
17:01:19.498 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:01:19.498 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:01:20.104 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
17:01:20.111 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:01:20.112 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:01:20.126 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T10:01:18Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T10:31:19Z, iat=2026-01-12T10:01:19Z, nonce=z-sabOHmckUZV2zcteoyK-zt27S_7AiqcDgjVqK8Ou8, jti=1c61b77c-2f29-4f5f-b014-9d761540d1f7, authorities=[ROLE_PRODUCT_MANAGER], sid=R-477rC2tYx9wfS3n25fbXeHurW9vjhmy1Hzm_RJ_f4}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7218c786-fcb8-4998-a180-d5b16d237666], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
17:01:20.126 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
17:01:20.135 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:01:20.135 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
17:01:20.146 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:01:20.147 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:01:22.984 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/logout
17:01:22.995 | DEBUG | FilterChainProxy: Securing POST /protected/logout
17:01:23.003 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:01:23.004 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:01:23.011 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T10:01:18Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T10:31:19Z, iat=2026-01-12T10:01:19Z, nonce=z-sabOHmckUZV2zcteoyK-zt27S_7AiqcDgjVqK8Ou8, jti=1c61b77c-2f29-4f5f-b014-9d761540d1f7, authorities=[ROLE_PRODUCT_MANAGER], sid=R-477rC2tYx9wfS3n25fbXeHurW9vjhmy1Hzm_RJ_f4}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7218c786-fcb8-4998-a180-d5b16d237666], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
17:01:23.012 | DEBUG | LogoutFilter: Logging out [OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T10:01:18Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T10:31:19Z, iat=2026-01-12T10:01:19Z, nonce=z-sabOHmckUZV2zcteoyK-zt27S_7AiqcDgjVqK8Ou8, jti=1c61b77c-2f29-4f5f-b014-9d761540d1f7, authorities=[ROLE_PRODUCT_MANAGER], sid=R-477rC2tYx9wfS3n25fbXeHurW9vjhmy1Hzm_RJ_f4}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=7218c786-fcb8-4998-a180-d5b16d237666], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
17:01:23.015 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:01:23.015 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE SESSION_ID = ?
AND MAX_INACTIVE_INTERVAL >= 0
]
17:01:23.017 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [e24055c0-f886-45a9-aeb6-14184af9a833], value class [java.lang.String], SQL type unknown
17:01:23.027 | DEBUG | SecurityContextLogoutHandler: Invalidated session e24055c0-f886-45a9-aeb6-14184af9a833
17:01:23.028 | DEBUG | JdbcTemplate: Executing prepared SQL query
17:01:23.028 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
17:01:23.036 | DEBUG | JdbcTemplate: Executing prepared SQL update
17:01:23.037 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
17:01:23.037 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
17:01:23.038 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
17:01:26.720 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
17:01:26.722 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:01:26.725 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@4f3b35f6, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
17:01:26.726 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@43e10204, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
17:01:26.726 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@32b13c8
17:01:27.369 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
17:01:27.384 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:01:27.388 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
17:01:32.268 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
17:01:32.269 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:01:32.272 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
17:01:32.288 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
17:01:32.294 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:01:32.300 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
17:01:32.302 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
17:01:32.309 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
17:01:32.313 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
17:01:32.327 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:01:32.317 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
17:01:32.317 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:01:32.323 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:01:32.332 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
17:01:32.333 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:01:32.335 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
17:01:32.335 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
17:01:32.340 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
17:01:32.523 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
17:01:32.533 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:01:32.538 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
17:01:32.690 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
17:01:32.695 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
17:01:32.696 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
17:01:32.699 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:01:32.699 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:01:32.701 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
17:01:32.701 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
17:01:32.702 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
17:01:32.712 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
19:14:31.117 | WARN | HikariPool: HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=2h5m49s984ms781s600ns).
19:14:51.843 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
19:14:51.859 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
19:14:51.873 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@4f3b35f6, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
19:14:51.875 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@43e10204, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
19:14:51.876 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@32b13c8
19:14:52.178 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10&sort=TITLE&order=ASC
19:14:52.179 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
19:14:52.182 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10&sort=TITLE&order=ASC
19:14:52.865 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
19:14:52.866 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
19:14:52.869 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
19:14:52.876 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
19:14:52.878 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
19:14:52.891 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
19:14:52.890 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
19:14:52.895 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
19:14:52.895 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
19:14:52.895 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
19:14:52.895 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
19:14:52.897 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
19:14:52.907 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
19:14:52.910 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
19:14:52.926 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
19:14:52.926 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
19:14:52.928 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
19:14:52.940 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
19:14:52.984 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
19:14:53.032 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
19:14:53.065 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
19:14:53.080 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
19:14:53.114 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
19:14:53.127 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
19:14:53.144 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
19:14:53.146 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
19:14:53.191 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
19:14:53.194 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
19:14:53.149 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
19:14:53.196 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
19:19:39.458 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
19:19:39.484 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
19:19:39.488 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@4f3b35f6, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]
19:19:39.489 | DEBUG | DelegatingAuthenticationEntryPoint: Trying to match using MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.HeaderContentNegotiationStrategy@43e10204, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[]]
19:19:39.489 | DEBUG | DelegatingAuthenticationEntryPoint: Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@32b13c8
19:19:48.558 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
19:19:48.577 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=_SP8bFv8C85exP8bk_mPSoYdWMOWOPMTqLxRq2jOsY8%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=eFg9RPQRswrS3-kx2Av4-hz6MKUsmXnlULChbZocmYc
19:19:48.602 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:19:48.604 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
19:19:48.622 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:19:48.623 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
19:19:48.828 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=QnTcSbUdhbf1LzoAyzZrKV9D8g_0LfWvLEq34g19dHs9WjQol0-aMUbVzu3ZGnilU3SpkahQqpVqY69_e_eKrEsxRgYtCyt0ln9PIwlmGyC31Wa3IRPz-yn5uii5z0s7&state=_SP8bFv8C85exP8bk_mPSoYdWMOWOPMTqLxRq2jOsY8%3D
19:19:48.831 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:19:48.831 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:19:49.389 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:19:49.391 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
19:19:49.392 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
19:19:49.393 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-12 19:19:49.3173893], value class [java.sql.Timestamp], SQL type 93
19:19:49.393 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-12 19:34:48.3173893], value class [java.sql.Timestamp], SQL type 93
19:19:49.394 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
19:19:49.394 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-12 19:19:49.3173893], value class [java.sql.Timestamp], SQL type 93
19:19:49.395 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
19:19:49.395 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
19:19:49.397 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:19:49.397 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO oauth2_authorized_client (client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
19:19:49.398 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
19:19:49.398 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
19:19:49.398 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [Bearer], value class [java.lang.String], SQL type 12
19:19:49.398 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [2026-01-12 19:19:49.3173893], value class [java.sql.Timestamp], SQL type 93
19:19:49.399 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 6, parameter value [2026-01-12 19:34:48.3173893], value class [java.sql.Timestamp], SQL type 93
19:19:49.399 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [openid,profile], value class [java.lang.String], SQL type 12
19:19:49.399 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [2026-01-12 19:19:49.3173893], value class [java.sql.Timestamp], SQL type 93
19:19:49.408 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 0b10bc59-675d-4fa1-bfea-974d7e9088ad
19:19:49.409 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
19:19:49.417 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T12:19:48Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T12:49:49Z, iat=2026-01-12T12:19:49Z, nonce=eFg9RPQRswrS3-kx2Av4-hz6MKUsmXnlULChbZocmYc, jti=35d20b1c-deb1-4197-8816-12289983fa09, authorities=[ROLE_PRODUCT_MANAGER], sid=5mecL9iUFdNRiq45dEzCaeqo4a2bDko2C8p0I4AdAI4}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=0b10bc59-675d-4fa1-bfea-974d7e9088ad], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@4f2d984a]
19:19:49.418 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T12:19:48Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T12:49:49Z, iat=2026-01-12T12:19:49Z, nonce=eFg9RPQRswrS3-kx2Av4-hz6MKUsmXnlULChbZocmYc, jti=35d20b1c-deb1-4197-8816-12289983fa09, authorities=[ROLE_PRODUCT_MANAGER], sid=5mecL9iUFdNRiq45dEzCaeqo4a2bDko2C8p0I4AdAI4}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=0b10bc59-675d-4fa1-bfea-974d7e9088ad], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
19:19:49.434 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:19:49.434 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
19:19:49.440 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:19:49.442 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
19:19:49.458 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:19:49.458 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
19:19:49.466 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:19:49.466 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:19:50.029 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
19:19:50.031 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:19:50.031 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:19:50.044 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T12:19:48Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T12:49:49Z, iat=2026-01-12T12:19:49Z, nonce=eFg9RPQRswrS3-kx2Av4-hz6MKUsmXnlULChbZocmYc, jti=35d20b1c-deb1-4197-8816-12289983fa09, authorities=[ROLE_PRODUCT_MANAGER], sid=5mecL9iUFdNRiq45dEzCaeqo4a2bDko2C8p0I4AdAI4}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=0b10bc59-675d-4fa1-bfea-974d7e9088ad], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
19:19:50.046 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
19:19:50.092 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:19:50.092 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
19:19:50.106 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:19:50.107 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:19:52.713 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/logout
19:19:52.721 | DEBUG | FilterChainProxy: Securing POST /protected/logout
19:19:52.727 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:19:52.727 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:19:52.734 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T12:19:48Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T12:49:49Z, iat=2026-01-12T12:19:49Z, nonce=eFg9RPQRswrS3-kx2Av4-hz6MKUsmXnlULChbZocmYc, jti=35d20b1c-deb1-4197-8816-12289983fa09, authorities=[ROLE_PRODUCT_MANAGER], sid=5mecL9iUFdNRiq45dEzCaeqo4a2bDko2C8p0I4AdAI4}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=0b10bc59-675d-4fa1-bfea-974d7e9088ad], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
19:19:52.736 | DEBUG | LogoutFilter: Logging out [OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T12:19:48Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T12:49:49Z, iat=2026-01-12T12:19:49Z, nonce=eFg9RPQRswrS3-kx2Av4-hz6MKUsmXnlULChbZocmYc, jti=35d20b1c-deb1-4197-8816-12289983fa09, authorities=[ROLE_PRODUCT_MANAGER], sid=5mecL9iUFdNRiq45dEzCaeqo4a2bDko2C8p0I4AdAI4}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=0b10bc59-675d-4fa1-bfea-974d7e9088ad], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
19:19:52.738 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:19:52.738 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE SESSION_ID = ?
AND MAX_INACTIVE_INTERVAL >= 0
]
19:19:52.739 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [6cbf7bb2-d766-445a-9e06-78f17399fe5b], value class [java.lang.String], SQL type unknown
19:19:52.750 | DEBUG | SecurityContextLogoutHandler: Invalidated session 6cbf7bb2-d766-445a-9e06-78f17399fe5b
19:19:52.753 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:19:52.755 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:19:52.757 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:19:52.758 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
19:19:52.759 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
19:19:52.759 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
19:20:53.058 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
19:20:53.064 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=pZmvcKwR-bgev_fMaj0YRmswcZD8LydC-lxJO3EhnJ4%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=InVhcRYIShOS7FZ-LTwEJ4GqWPHFa_UcZBkLenc8XGY
19:20:53.066 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:20:53.066 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
19:20:53.071 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:20:53.071 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
19:20:53.185 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=C9ZiaReMRfiyBaYNkP912PAmI9Y0CrzirzOAikXnfVCwkpA07gk6cy8vGphVBwem22rfZAUOXLR0YyhMiua8afPZgiySKK6XxEzBR0dXrve6gIorj2yEq9X5OQ_VawAs&state=pZmvcKwR-bgev_fMaj0YRmswcZD8LydC-lxJO3EhnJ4%3D
19:20:53.187 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:20:53.188 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:20:53.719 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:20:53.719 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
19:20:53.721 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
19:20:53.721 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-12 19:20:53.6849148], value class [java.sql.Timestamp], SQL type 93
19:20:53.721 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-12 19:35:53.6849148], value class [java.sql.Timestamp], SQL type 93
19:20:53.722 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
19:20:53.722 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-12 19:20:53.6849148], value class [java.sql.Timestamp], SQL type 93
19:20:53.722 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
19:20:53.722 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
19:20:53.726 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:20:53.728 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO oauth2_authorized_client (client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
19:20:53.732 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
19:20:53.732 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
19:20:53.732 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [Bearer], value class [java.lang.String], SQL type 12
19:20:53.733 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [2026-01-12 19:20:53.6849148], value class [java.sql.Timestamp], SQL type 93
19:20:53.733 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 6, parameter value [2026-01-12 19:35:53.6849148], value class [java.sql.Timestamp], SQL type 93
19:20:53.733 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [openid,profile], value class [java.lang.String], SQL type 12
19:20:53.734 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [2026-01-12 19:20:53.6849148], value class [java.sql.Timestamp], SQL type 93
19:20:53.739 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from e54ad659-8081-439c-ac6c-a2b2206c2fcd
19:20:53.739 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
19:20:53.742 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T12:20:53Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T12:50:53Z, iat=2026-01-12T12:20:53Z, nonce=InVhcRYIShOS7FZ-LTwEJ4GqWPHFa_UcZBkLenc8XGY, jti=be25b4e7-d2d1-4a3f-9c25-91057b4eb82a, authorities=[ROLE_PRODUCT_MANAGER], sid=ilWBYdqwXya8pGq0TvT_LZbMkkxh1aJnozK5HbMsyio}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=e54ad659-8081-439c-ac6c-a2b2206c2fcd], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@53a26dc9]
19:20:53.744 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T12:20:53Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T12:50:53Z, iat=2026-01-12T12:20:53Z, nonce=InVhcRYIShOS7FZ-LTwEJ4GqWPHFa_UcZBkLenc8XGY, jti=be25b4e7-d2d1-4a3f-9c25-91057b4eb82a, authorities=[ROLE_PRODUCT_MANAGER], sid=ilWBYdqwXya8pGq0TvT_LZbMkkxh1aJnozK5HbMsyio}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=e54ad659-8081-439c-ac6c-a2b2206c2fcd], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
19:20:53.748 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:20:53.748 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
19:20:53.750 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:20:53.752 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
19:20:53.755 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:20:53.755 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
19:20:53.765 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:20:53.765 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:20:54.320 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
19:20:54.323 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:20:54.324 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:20:54.338 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T12:20:53Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T12:50:53Z, iat=2026-01-12T12:20:53Z, nonce=InVhcRYIShOS7FZ-LTwEJ4GqWPHFa_UcZBkLenc8XGY, jti=be25b4e7-d2d1-4a3f-9c25-91057b4eb82a, authorities=[ROLE_PRODUCT_MANAGER], sid=ilWBYdqwXya8pGq0TvT_LZbMkkxh1aJnozK5HbMsyio}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=e54ad659-8081-439c-ac6c-a2b2206c2fcd], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
19:20:54.339 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
19:20:54.352 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:20:54.353 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
19:20:54.365 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:20:54.365 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:20:57.847 | DEBUG | FilterChainProxy: Securing OPTIONS /protected/logout
19:20:57.876 | DEBUG | FilterChainProxy: Securing POST /protected/logout
19:20:57.880 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:20:57.880 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:20:57.889 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T12:20:53Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T12:50:53Z, iat=2026-01-12T12:20:53Z, nonce=InVhcRYIShOS7FZ-LTwEJ4GqWPHFa_UcZBkLenc8XGY, jti=be25b4e7-d2d1-4a3f-9c25-91057b4eb82a, authorities=[ROLE_PRODUCT_MANAGER], sid=ilWBYdqwXya8pGq0TvT_LZbMkkxh1aJnozK5HbMsyio}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=e54ad659-8081-439c-ac6c-a2b2206c2fcd], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
19:20:57.889 | DEBUG | LogoutFilter: Logging out [OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T12:20:53Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T12:50:53Z, iat=2026-01-12T12:20:53Z, nonce=InVhcRYIShOS7FZ-LTwEJ4GqWPHFa_UcZBkLenc8XGY, jti=be25b4e7-d2d1-4a3f-9c25-91057b4eb82a, authorities=[ROLE_PRODUCT_MANAGER], sid=ilWBYdqwXya8pGq0TvT_LZbMkkxh1aJnozK5HbMsyio}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=e54ad659-8081-439c-ac6c-a2b2206c2fcd], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
19:20:57.893 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:20:57.894 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE SESSION_ID = ?
AND MAX_INACTIVE_INTERVAL >= 0
]
19:20:57.894 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [21e17378-afea-48cf-8cdb-11790da97995], value class [java.lang.String], SQL type unknown
19:20:57.901 | DEBUG | SecurityContextLogoutHandler: Invalidated session 21e17378-afea-48cf-8cdb-11790da97995
19:20:57.903 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:20:57.903 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:20:57.908 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:20:57.908 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
19:20:57.909 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
19:20:57.909 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
19:23:33.831 | INFO | LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener: Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
19:23:34.003 | INFO | GracefulShutdown: Commencing graceful shutdown. Waiting for active requests to complete
19:23:34.042 | INFO | GracefulShutdown: Graceful shutdown complete
19:23:34.169 | INFO | LocalContainerEntityManagerFactoryBean: Closing JPA EntityManagerFactory for persistence unit 'default'
19:23:34.291 | INFO | HikariDataSource: HikariPool-1 - Shutdown initiated...
19:23:34.328 | INFO | HikariDataSource: HikariPool-1 - Shutdown completed.
19:23:35.197 | INFO | BeForFeApplication: Starting BeForFeApplication using Java 21.0.3 with PID 14768 (C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes started by PC in C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe)
19:23:35.197 | INFO | BeForFeApplication: No active profile set, falling back to 1 default profile: "default"
19:23:36.197 | INFO | RepositoryConfigurationDelegate: Bootstrapping Spring Data JPA repositories in DEFAULT mode.
19:23:36.299 | INFO | RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 86 ms. Found 0 JPA repository interfaces.
19:23:36.946 | INFO | GenericScope: BeanFactory id=13accd6c-ace7-3257-bf77-8e53872683d4
19:23:37.206 | INFO | TomcatWebServer: Tomcat initialized with port 8181 (https)
19:23:37.211 | INFO | StandardService: Starting service [Tomcat]
19:23:37.211 | INFO | StandardEngine: Starting Servlet engine: [Apache Tomcat/10.1.50]
19:23:37.271 | INFO | [/]: Initializing Spring embedded WebApplicationContext
19:23:37.274 | INFO | ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 1876 ms
19:23:37.371 | INFO | LogHelper: HHH000204: Processing PersistenceUnitInfo [name: default]
19:23:37.377 | INFO | RegionFactoryInitiator: HHH000026: Second-level cache disabled
19:23:37.397 | INFO | SpringPersistenceUnitInfo: No LoadTimeWeaver setup: ignoring JPA class transformer
19:23:37.399 | INFO | HikariDataSource: HikariPool-2 - Starting...
19:23:37.473 | INFO | HikariPool: HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@487c092c
19:23:37.474 | INFO | HikariDataSource: HikariPool-2 - Start completed.
19:23:37.478 | WARN | deprecation: HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
19:23:37.479 | INFO | pooling: HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 8.0.44
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
19:23:37.547 | INFO | JtaPlatformInitiator: HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
19:23:37.597 | INFO | LocalContainerEntityManagerFactoryBean: Initialized JPA EntityManagerFactory for persistence unit 'default'
19:23:37.662 | WARN | JpaBaseConfiguration$JpaWebConfiguration: spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
19:23:37.758 | DEBUG | AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder: No authenticationProviders and no parentAuthenticationManager defined. Returning null.
19:23:37.806 | DEBUG | DefaultSecurityFilterChain: Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, OAuth2AuthorizationRequestRedirectFilter, OAuth2LoginAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
19:23:37.997 | WARN | OptionalLiveReloadServer: Unable to start LiveReload server
19:23:38.107 | INFO | certificate: Connector [https-jsse-nio-8181], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [Set directly - location unknown] using alias [bookommerce_ssl] with trust store [C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes\bookommerce-ssl.p12]
19:23:38.111 | INFO | TomcatWebServer: Tomcat started on port 8181 (https) with context path '/'
19:23:38.124 | INFO | BeForFeApplication: Started BeForFeApplication in 3.076 seconds (process running for 9009.397)
19:23:38.127 | INFO | ConditionEvaluationDeltaLoggingListener: Condition evaluation unchanged
19:23:39.430 | INFO | LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener: Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
19:23:39.432 | INFO | GracefulShutdown: Commencing graceful shutdown. Waiting for active requests to complete
19:23:39.439 | INFO | GracefulShutdown: Graceful shutdown complete
19:23:39.445 | INFO | LocalContainerEntityManagerFactoryBean: Closing JPA EntityManagerFactory for persistence unit 'default'
19:23:39.445 | INFO | HikariDataSource: HikariPool-2 - Shutdown initiated...
19:23:39.453 | INFO | HikariDataSource: HikariPool-2 - Shutdown completed.
19:23:39.589 | INFO | BeForFeApplication: Starting BeForFeApplication using Java 21.0.3 with PID 14768 (C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes started by PC in C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe)
19:23:39.590 | INFO | BeForFeApplication: No active profile set, falling back to 1 default profile: "default"
19:23:40.096 | INFO | RepositoryConfigurationDelegate: Bootstrapping Spring Data JPA repositories in DEFAULT mode.
19:23:40.105 | INFO | RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 5 ms. Found 0 JPA repository interfaces.
19:23:40.241 | INFO | GenericScope: BeanFactory id=13accd6c-ace7-3257-bf77-8e53872683d4
19:23:40.315 | INFO | TomcatWebServer: Tomcat initialized with port 8181 (https)
19:23:40.318 | INFO | StandardService: Starting service [Tomcat]
19:23:40.320 | INFO | StandardEngine: Starting Servlet engine: [Apache Tomcat/10.1.50]
19:23:40.353 | INFO | [/]: Initializing Spring embedded WebApplicationContext
19:23:40.354 | INFO | ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 673 ms
19:23:40.391 | INFO | LogHelper: HHH000204: Processing PersistenceUnitInfo [name: default]
19:23:40.393 | INFO | RegionFactoryInitiator: HHH000026: Second-level cache disabled
19:23:40.403 | INFO | SpringPersistenceUnitInfo: No LoadTimeWeaver setup: ignoring JPA class transformer
19:23:40.404 | INFO | HikariDataSource: HikariPool-3 - Starting...
19:23:40.420 | INFO | HikariPool: HikariPool-3 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3b0dc1d0
19:23:40.421 | INFO | HikariDataSource: HikariPool-3 - Start completed.
19:23:40.423 | WARN | deprecation: HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
19:23:40.424 | INFO | pooling: HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 8.0.44
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
19:23:40.480 | INFO | JtaPlatformInitiator: HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
19:23:40.512 | INFO | LocalContainerEntityManagerFactoryBean: Initialized JPA EntityManagerFactory for persistence unit 'default'
19:23:40.561 | WARN | JpaBaseConfiguration$JpaWebConfiguration: spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
19:23:40.627 | DEBUG | AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder: No authenticationProviders and no parentAuthenticationManager defined. Returning null.
19:23:40.680 | DEBUG | DefaultSecurityFilterChain: Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, LogoutFilter, OAuth2AuthorizationRequestRedirectFilter, OAuth2LoginAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
19:23:40.784 | WARN | OptionalLiveReloadServer: Unable to start LiveReload server
19:23:40.855 | INFO | certificate: Connector [https-jsse-nio-8181], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [Set directly - location unknown] using alias [bookommerce_ssl] with trust store [C:\Users\PC\OneDrive\Desktop\bookommerce\be-for-fe\target\classes\bookommerce-ssl.p12]
19:23:40.859 | INFO | TomcatWebServer: Tomcat started on port 8181 (https) with context path '/'
19:23:40.868 | INFO | BeForFeApplication: Started BeForFeApplication in 1.337 seconds (process running for 9012.14)
19:23:40.870 | INFO | ConditionEvaluationDeltaLoggingListener: Condition evaluation unchanged
19:24:06.309 | INFO | [/]: Initializing Spring DispatcherServlet 'dispatcherServlet'
19:24:06.309 | INFO | DispatcherServlet: Initializing Servlet 'dispatcherServlet'
19:24:06.323 | INFO | DispatcherServlet: Completed initialization in 14 ms
19:24:06.326 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
19:24:06.333 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=2AP0sqT-LqIZ-HX0ZX4Q9gW1zFa7zxCS-Rny6q6DX3g%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=ownaC6a_74A3Cqbazx9uSlpF3Oppbq6qJeqytprzj1g
19:24:06.337 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:24:06.337 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
19:24:06.342 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:24:06.342 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
19:24:06.507 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=2d0_vNcOF1sWMIWofHMRKGmN7jYQImcx5KdMeRpvdLa2Ukkrdy0RKQqBy82wTfJz-fJSNqR9Ys4MuEDACWJXX53sAVWCFfRLvO4neIDfHutCARqlhKxf78002rCfBExa&state=2AP0sqT-LqIZ-HX0ZX4Q9gW1zFa7zxCS-Rny6q6DX3g%3D
19:24:06.510 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:24:06.511 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:24:07.006 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:24:07.007 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
19:24:07.007 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
19:24:07.007 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-12 19:24:06.9564824], value class [java.sql.Timestamp], SQL type 93
19:24:07.007 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-12 19:39:05.9564824], value class [java.sql.Timestamp], SQL type 93
19:24:07.008 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
19:24:07.008 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-12 19:24:06.9564824], value class [java.sql.Timestamp], SQL type 93
19:24:07.008 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
19:24:07.008 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
19:24:07.012 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:24:07.012 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO oauth2_authorized_client (client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
19:24:07.014 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
19:24:07.015 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
19:24:07.015 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [Bearer], value class [java.lang.String], SQL type 12
19:24:07.016 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [2026-01-12 19:24:06.9564824], value class [java.sql.Timestamp], SQL type 93
19:24:07.017 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 6, parameter value [2026-01-12 19:39:05.9564824], value class [java.sql.Timestamp], SQL type 93
19:24:07.017 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [openid,profile], value class [java.lang.String], SQL type 12
19:24:07.017 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [2026-01-12 19:24:06.9564824], value class [java.sql.Timestamp], SQL type 93
19:24:07.021 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from e4c5cabc-9cb9-4a07-8b18-0f0205ff7600
19:24:07.023 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
19:24:07.023 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T12:24:06Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T12:54:06Z, iat=2026-01-12T12:24:06Z, nonce=ownaC6a_74A3Cqbazx9uSlpF3Oppbq6qJeqytprzj1g, jti=4fa83c33-7e19-4a1a-af93-d52e873a505e, authorities=[ROLE_PRODUCT_MANAGER], sid=IYvIqR2xP4LEVzfd3aD4TLEaajEoRPgAtDUK6rs4GQo}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=e4c5cabc-9cb9-4a07-8b18-0f0205ff7600], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@1a360192]
19:24:07.024 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T12:24:06Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T12:54:06Z, iat=2026-01-12T12:24:06Z, nonce=ownaC6a_74A3Cqbazx9uSlpF3Oppbq6qJeqytprzj1g, jti=4fa83c33-7e19-4a1a-af93-d52e873a505e, authorities=[ROLE_PRODUCT_MANAGER], sid=IYvIqR2xP4LEVzfd3aD4TLEaajEoRPgAtDUK6rs4GQo}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=e4c5cabc-9cb9-4a07-8b18-0f0205ff7600], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
19:24:07.026 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:24:07.028 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
19:24:07.032 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:24:07.032 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
19:24:07.038 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:24:07.038 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
19:24:07.046 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:24:07.047 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:24:07.923 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
19:24:07.925 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:24:07.926 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:24:07.941 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T12:24:06Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T12:54:06Z, iat=2026-01-12T12:24:06Z, nonce=ownaC6a_74A3Cqbazx9uSlpF3Oppbq6qJeqytprzj1g, jti=4fa83c33-7e19-4a1a-af93-d52e873a505e, authorities=[ROLE_PRODUCT_MANAGER], sid=IYvIqR2xP4LEVzfd3aD4TLEaajEoRPgAtDUK6rs4GQo}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=e4c5cabc-9cb9-4a07-8b18-0f0205ff7600], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
19:24:07.941 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
19:24:07.965 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:24:07.966 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
19:24:07.973 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:24:07.973 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:24:10.706 | DEBUG | FilterChainProxy: Securing POST /protected/logout
19:24:10.715 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:24:10.715 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:24:10.723 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T12:24:06Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T12:54:06Z, iat=2026-01-12T12:24:06Z, nonce=ownaC6a_74A3Cqbazx9uSlpF3Oppbq6qJeqytprzj1g, jti=4fa83c33-7e19-4a1a-af93-d52e873a505e, authorities=[ROLE_PRODUCT_MANAGER], sid=IYvIqR2xP4LEVzfd3aD4TLEaajEoRPgAtDUK6rs4GQo}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=e4c5cabc-9cb9-4a07-8b18-0f0205ff7600], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
19:24:10.724 | DEBUG | LogoutFilter: Logging out [OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T12:24:06Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T12:54:06Z, iat=2026-01-12T12:24:06Z, nonce=ownaC6a_74A3Cqbazx9uSlpF3Oppbq6qJeqytprzj1g, jti=4fa83c33-7e19-4a1a-af93-d52e873a505e, authorities=[ROLE_PRODUCT_MANAGER], sid=IYvIqR2xP4LEVzfd3aD4TLEaajEoRPgAtDUK6rs4GQo}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=e4c5cabc-9cb9-4a07-8b18-0f0205ff7600], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
19:24:10.729 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:24:10.730 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION
WHERE SESSION_ID = ?
AND MAX_INACTIVE_INTERVAL >= 0
]
19:24:10.731 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [ae02da85-3e57-4592-8d6a-d4824bc50149], value class [java.lang.String], SQL type unknown
19:24:10.736 | DEBUG | SecurityContextLogoutHandler: Invalidated session ae02da85-3e57-4592-8d6a-d4824bc50149
19:24:10.738 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:24:10.739 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:24:10.747 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:24:10.747 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM oauth2_authorized_client WHERE client_registration_id = ? AND principal_name = ?]
19:24:10.747 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
19:24:10.747 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
19:24:10.754 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/connect/logout?id_token_hint=eyJraWQiOiJib29rb21tZXJjZS10b2tlbi1rZXkiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJwcm9kbWFuQGJvb2tvbW1lcmNlLmNvbSIsImF1ZCI6ImJmZiIsImF6cCI6ImJmZiIsImF1dGhfdGltZSI6MTc2ODIyMDY0NiwiaXNzIjoiaHR0cHM6Ly9hdXRoLmJvb2tvbW1lcmNlLmNvbTo4MjgyIiwiZXhwIjoxNzY4MjIyNDQ2LCJpYXQiOjE3NjgyMjA2NDYsIm5vbmNlIjoib3duYUM2YV83NEEzQ3FiYXp4OXVTbHBGM09wcGJxNnFKZXF5dHByemoxZyIsImp0aSI6IjRmYTgzYzMzLTdlMTktNGExYS1hZjkzLWQ1MmU4NzNhNTA1ZSIsImF1dGhvcml0aWVzIjpbIlJPTEVfUFJPRFVDVF9NQU5BR0VSIl0sInNpZCI6IklZdklxUjJ4UDRMRVZ6ZmQzYUQ0VExFYWFqRW9SUGdBdERVSzZyczRHUW8ifQ.GWS8GAaMWKtyAqGcxwynXQ2sO-eHm0q0ILp3PsrDcG9USHuzd6jFy9_eMRsUXWdLYBY4egGNQVtNv1CcLrkjnVXVeVLZDlZE7pkVTjIJK1Wt1BgQvspfbNFmUX0vqzbYQCJ8vtYFYRGIbA98n8X3OJmRbKnqelVwpeI5APJccx5qz69kwNTrZ7uGGs5pMcxwIFyh-aqePGw8EXVNrquzni55ccVfKaAYZRcWzcPLHawhd3xQ2uFJvhqThl3a7okFmNxkOwNWZco1I_7i_TWBmWayfDfk3lB1PWEFxTets-KZ3w6-sa77RGlql8tOxny2GgQikNWTQQIr2FwQ64_dZg&post_logout_redirect_uri=https://auth.bookommerce.com:8282/page/store-login
19:24:33.034 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
19:24:33.036 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=fEegexkQf1rNl1YNJCX-cImKMz0IqB7S8QJ2wD98eEw%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=YxT7YeumUjFU3EKlhtejpdhD6OoxhhaaXaq5gPKCMA0
19:24:33.040 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:24:33.040 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION (PRIMARY_ID, SESSION_ID, CREATION_TIME, LAST_ACCESS_TIME, MAX_INACTIVE_INTERVAL, EXPIRY_TIME, PRINCIPAL_NAME)
VALUES (?, ?, ?, ?, ?, ?, ?)
]
19:24:33.041 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:24:33.042 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
19:24:33.117 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=SyJAlJ-mC3bVawpz24GBgVX_Ga22uoLtU6OKLNMp5rwDbRhEtVFOtVwlzWhm4jLZrHXigJ4b3cQvH_22-gl5afDoQYOhgeAXz6el0iqmr5D2FM0wJhiMXqyjSoNrNjBV&state=fEegexkQf1rNl1YNJCX-cImKMz0IqB7S8QJ2wD98eEw%3D
19:24:33.128 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:24:33.128 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:24:33.530 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:24:33.530 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
19:24:33.532 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
19:24:33.532 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-12 19:24:33.4997052], value class [java.sql.Timestamp], SQL type 93
19:24:33.532 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-12 19:39:33.4997052], value class [java.sql.Timestamp], SQL type 93
19:24:33.532 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
19:24:33.532 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-12 19:24:33.4997052], value class [java.sql.Timestamp], SQL type 93
19:24:33.532 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
19:24:33.532 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
19:24:33.534 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:24:33.537 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO oauth2_authorized_client (client_registration_id, principal_name, access_token_type, access_token_value, access_token_issued_at, access_token_expires_at, access_token_scopes, refresh_token_value, refresh_token_issued_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
19:24:33.542 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [bff], value class [java.lang.String], SQL type 12
19:24:33.543 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 2, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
19:24:33.543 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [Bearer], value class [java.lang.String], SQL type 12
19:24:33.543 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [2026-01-12 19:24:33.4997052], value class [java.sql.Timestamp], SQL type 93
19:24:33.544 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 6, parameter value [2026-01-12 19:39:33.4997052], value class [java.sql.Timestamp], SQL type 93
19:24:33.544 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [openid,profile], value class [java.lang.String], SQL type 12
19:24:33.544 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [2026-01-12 19:24:33.4997052], value class [java.sql.Timestamp], SQL type 93
19:24:33.547 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from 35c2bdea-8df5-4812-96c3-548100a09a16
19:24:33.547 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
19:24:33.548 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T12:24:33Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T12:54:33Z, iat=2026-01-12T12:24:33Z, nonce=YxT7YeumUjFU3EKlhtejpdhD6OoxhhaaXaq5gPKCMA0, jti=4b2dab7a-2a97-4b22-baf0-cc64739667f2, authorities=[ROLE_PRODUCT_MANAGER], sid=QDRegFHr8bPjIbG90W6SdZmv0IvJkafOuxGe8uNh4Xo}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=35c2bdea-8df5-4812-96c3-548100a09a16], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@2a11a453]
19:24:33.549 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T12:24:33Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T12:54:33Z, iat=2026-01-12T12:24:33Z, nonce=YxT7YeumUjFU3EKlhtejpdhD6OoxhhaaXaq5gPKCMA0, jti=4b2dab7a-2a97-4b22-baf0-cc64739667f2, authorities=[ROLE_PRODUCT_MANAGER], sid=QDRegFHr8bPjIbG90W6SdZmv0IvJkafOuxGe8uNh4Xo}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=35c2bdea-8df5-4812-96c3-548100a09a16], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
19:24:33.550 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:24:33.550 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
19:24:33.552 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:24:33.556 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
19:24:33.560 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:24:33.561 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
19:24:33.566 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:24:33.566 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:24:34.156 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
19:24:34.160 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:24:34.160 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:24:34.165 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T12:24:33Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T12:54:33Z, iat=2026-01-12T12:24:33Z, nonce=YxT7YeumUjFU3EKlhtejpdhD6OoxhhaaXaq5gPKCMA0, jti=4b2dab7a-2a97-4b22-baf0-cc64739667f2, authorities=[ROLE_PRODUCT_MANAGER], sid=QDRegFHr8bPjIbG90W6SdZmv0IvJkafOuxGe8uNh4Xo}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=35c2bdea-8df5-4812-96c3-548100a09a16], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
19:24:34.165 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
19:24:34.173 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:24:34.174 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
19:24:34.184 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:24:34.184 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:25:34.353 | DEBUG | FilterChainProxy: Securing GET /protected/oauth2/authorization/bff
19:25:34.358 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:25:34.358 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:25:34.370 | DEBUG | DefaultRedirectStrategy: Redirecting to https://auth.bookommerce.com:8282/oauth2/authorize?response_type=code&client_id=bff&scope=openid%20profile&state=uozcnAdUG_Oo4yPo-gHF2zfNILWc_JrQiBrqpVOltNM%3D&redirect_uri=https://bff.bookommerce.com:8181/protected/login/oauth2/code/bff&nonce=VY0HvHVd8Oy05JB7qOfyjB4GyKvV5fwGroNyf134pmE
19:25:34.373 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:25:34.373 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
19:25:34.375 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:25:34.375 | DEBUG | JdbcTemplate: Executing prepared SQL statement [INSERT INTO SPRING_SESSION_ATTRIBUTES (SESSION_PRIMARY_ID, ATTRIBUTE_NAME, ATTRIBUTE_BYTES)
VALUES (?, ?, ?)
]
19:25:34.386 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:25:34.386 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:25:34.520 | DEBUG | FilterChainProxy: Securing GET /protected/login/oauth2/code/bff?code=Bt3sgu1Gm4_vXFkdQYmMuZdyZNYKEhN66XxCLFjyVzQplGvPaLrPh0YnY9iUfNsFTROawPY65qLnfbQNV7KrsWyHhnYKsuH89X1x8WtygbZAukN19hEWIUE0DNgBfFGx&state=uozcnAdUG_Oo4yPo-gHF2zfNILWc_JrQiBrqpVOltNM%3D
19:25:34.522 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:25:34.523 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:25:34.949 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:25:34.950 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE oauth2_authorized_client SET access_token_type = ?, access_token_value = ?, access_token_issued_at = ?, access_token_expires_at = ?, access_token_scopes = ?, refresh_token_value = ?, refresh_token_issued_at = ? WHERE client_registration_id = ? AND principal_name = ?]
19:25:34.951 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 1, parameter value [Bearer], value class [java.lang.String], SQL type 12
19:25:34.952 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 3, parameter value [2026-01-12 19:25:34.919755], value class [java.sql.Timestamp], SQL type 93
19:25:34.952 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 4, parameter value [2026-01-12 19:40:34.919755], value class [java.sql.Timestamp], SQL type 93
19:25:34.952 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 5, parameter value [openid,profile], value class [java.lang.String], SQL type 12
19:25:34.952 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 7, parameter value [2026-01-12 19:25:34.919755], value class [java.sql.Timestamp], SQL type 93
19:25:34.952 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 8, parameter value [bff], value class [java.lang.String], SQL type 12
19:25:34.952 | TRACE | StatementCreatorUtils: Setting SQL statement parameter value: column index 9, parameter value [prodman@bookommerce.com], value class [java.lang.String], SQL type 12
19:25:34.955 | DEBUG | ChangeSessionIdAuthenticationStrategy: Changed session id from b3bfd641-66f8-4b1f-adeb-80398d8b7de9
19:25:34.955 | DEBUG | CsrfAuthenticationStrategy: Replaced CSRF Token
19:25:34.957 | DEBUG | HttpSessionSecurityContextRepository: Stored SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T12:25:34Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T12:55:34Z, iat=2026-01-12T12:25:34Z, nonce=VY0HvHVd8Oy05JB7qOfyjB4GyKvV5fwGroNyf134pmE, jti=2f916656-230d-4dd3-bac3-399a9b4a621a, authorities=[ROLE_PRODUCT_MANAGER], sid=uoRYqDjCt2t-i74XGpDVKzBLZTVCDEVQkJbSbYxlN9w}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=b3bfd641-66f8-4b1f-adeb-80398d8b7de9], Granted Authorities=[ROLE_PRODUCT_MANAGER]]] to HttpSession [org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$HttpSessionWrapper@147f4e8d]
19:25:34.958 | DEBUG | OAuth2LoginAuthenticationFilter: Set SecurityContextHolder to OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T12:25:34Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T12:55:34Z, iat=2026-01-12T12:25:34Z, nonce=VY0HvHVd8Oy05JB7qOfyjB4GyKvV5fwGroNyf134pmE, jti=2f916656-230d-4dd3-bac3-399a9b4a621a, authorities=[ROLE_PRODUCT_MANAGER], sid=uoRYqDjCt2t-i74XGpDVKzBLZTVCDEVQkJbSbYxlN9w}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=b3bfd641-66f8-4b1f-adeb-80398d8b7de9], Granted Authorities=[ROLE_PRODUCT_MANAGER]]
19:25:34.959 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:25:34.960 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
19:25:34.965 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:25:34.966 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION_ATTRIBUTES
SET ATTRIBUTE_BYTES = ?
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
19:25:34.968 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:25:34.968 | DEBUG | JdbcTemplate: Executing prepared SQL statement [DELETE FROM SPRING_SESSION_ATTRIBUTES
WHERE SESSION_PRIMARY_ID = ?
AND ATTRIBUTE_NAME = ?
]
19:25:34.973 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:25:34.974 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:25:35.458 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
19:25:35.461 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:25:35.462 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:25:35.471 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T12:25:34Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T12:55:34Z, iat=2026-01-12T12:25:34Z, nonce=VY0HvHVd8Oy05JB7qOfyjB4GyKvV5fwGroNyf134pmE, jti=2f916656-230d-4dd3-bac3-399a9b4a621a, authorities=[ROLE_PRODUCT_MANAGER], sid=uoRYqDjCt2t-i74XGpDVKzBLZTVCDEVQkJbSbYxlN9w}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=b3bfd641-66f8-4b1f-adeb-80398d8b7de9], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
19:25:35.472 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
19:25:35.476 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:25:35.476 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
19:25:35.488 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:25:35.488 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:25:47.452 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
19:25:47.457 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:25:47.457 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:25:47.460 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T12:25:34Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T12:55:34Z, iat=2026-01-12T12:25:34Z, nonce=VY0HvHVd8Oy05JB7qOfyjB4GyKvV5fwGroNyf134pmE, jti=2f916656-230d-4dd3-bac3-399a9b4a621a, authorities=[ROLE_PRODUCT_MANAGER], sid=uoRYqDjCt2t-i74XGpDVKzBLZTVCDEVQkJbSbYxlN9w}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=b3bfd641-66f8-4b1f-adeb-80398d8b7de9], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
19:25:47.461 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
19:25:47.466 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:25:47.467 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
19:25:47.473 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:25:47.473 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:25:53.828 | DEBUG | FilterChainProxy: Securing GET /protected/api/me
19:25:53.833 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:25:53.833 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:25:53.835 | DEBUG | HttpSessionSecurityContextRepository: Retrieved SecurityContextImpl [Authentication=OAuth2AuthenticationToken [Principal=Name: [prodman@bookommerce.com], Granted Authorities: [[OIDC_USER, SCOPE_openid, SCOPE_profile]], User Attributes: [{sub=prodman@bookommerce.com, aud=[bff], azp=bff, auth_time=2026-01-12T12:25:34Z, iss=https://auth.bookommerce.com:8282, exp=2026-01-12T12:55:34Z, iat=2026-01-12T12:25:34Z, nonce=VY0HvHVd8Oy05JB7qOfyjB4GyKvV5fwGroNyf134pmE, jti=2f916656-230d-4dd3-bac3-399a9b4a621a, authorities=[ROLE_PRODUCT_MANAGER], sid=uoRYqDjCt2t-i74XGpDVKzBLZTVCDEVQkJbSbYxlN9w}], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=b3bfd641-66f8-4b1f-adeb-80398d8b7de9], Granted Authorities=[ROLE_PRODUCT_MANAGER]]]
19:25:53.836 | DEBUG | FilterChainProxy: Secured GET /protected/api/me
19:25:53.841 | DEBUG | JdbcTemplate: Executing prepared SQL update
19:25:53.841 | DEBUG | JdbcTemplate: Executing prepared SQL statement [UPDATE SPRING_SESSION
SET SESSION_ID = ?, LAST_ACCESS_TIME = ?, MAX_INACTIVE_INTERVAL = ?, EXPIRY_TIME = ?, PRINCIPAL_NAME = ?
WHERE PRIMARY_ID = ?
]
19:25:53.852 | DEBUG | JdbcTemplate: Executing prepared SQL query
19:25:53.852 | DEBUG | JdbcTemplate: Executing prepared SQL statement [SELECT S.PRIMARY_ID, S.SESSION_ID, S.CREATION_TIME, S.LAST_ACCESS_TIME, S.MAX_INACTIVE_INTERVAL, SA.ATTRIBUTE_NAME, SA.ATTRIBUTE_BYTES
FROM SPRING_SESSION S
LEFT JOIN SPRING_SESSION_ATTRIBUTES SA ON S.PRIMARY_ID = SA.SESSION_PRIMARY_ID
WHERE S.SESSION_ID = ?
]
19:26:03.450 | DEBUG | FilterChainProxy: Securing GET /api/books?page=0&size=10
19:26:03.452 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
19:26:03.454 | DEBUG | FilterChainProxy: Secured GET /api/books?page=0&size=10
19:26:04.201 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491866.jpg
19:26:04.202 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
19:26:04.204 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491866.jpg
19:26:04.222 | DEBUG | FilterChainProxy: Securing GET /images/books/image_217968.jpg
19:26:04.226 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212349208.jpg
19:26:04.224 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
19:26:04.228 | DEBUG | FilterChainProxy: Securing GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
19:26:04.224 | DEBUG | FilterChainProxy: Securing GET /images/books/image_195509_1_30127_1.jpg
19:26:04.227 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
19:26:04.230 | DEBUG | FilterChainProxy: Secured GET /images/books/image_217968.jpg
19:26:04.228 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
19:26:04.234 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212349208.jpg
19:26:04.228 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
19:26:04.244 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667802993996_444d1025739493a61e7c63ddfc8997fc.jpg
19:26:04.229 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
19:26:04.229 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
19:26:04.259 | DEBUG | FilterChainProxy: Secured GET /images/books/z6667803014073_b09f06964c4371f4fd5d5a532a319742.jpg
19:26:04.280 | DEBUG | FilterChainProxy: Secured GET /images/books/image_195509_1_30127_1.jpg
19:26:04.311 | DEBUG | FilterChainProxy: Securing GET /images/books/8936213491361.jpg
19:26:04.328 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
19:26:04.330 | DEBUG | FilterChainProxy: Secured GET /images/books/8936213491361.jpg
19:26:04.375 | DEBUG | FilterChainProxy: Securing GET /images/books/8935212368209.jpg
19:26:04.385 | DEBUG | FilterChainProxy: Securing GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
19:26:04.394 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
19:26:04.397 | DEBUG | FilterChainProxy: Secured GET /images/books/8935212368209.jpg
19:26:04.398 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
19:26:04.410 | DEBUG | FilterChainProxy: Secured GET /images/books/4658760b-7502-4022-b337-9926fee60006.jpg
19:26:04.456 | DEBUG | FilterChainProxy: Securing GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
19:26:04.463 | DEBUG | AnonymousAuthenticationFilter: Set SecurityContextHolder to anonymous SecurityContext
19:26:04.542 | DEBUG | FilterChainProxy: Secured GET /images/books/f3767a63-a769-4dc6-a0ad-5faf57cfeda2.jpg
